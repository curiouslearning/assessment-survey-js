/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var e={};function t(){var e=n().get("data");return null==e&&(console.log("default data file"),e="zulu-lettersounds"),e}function n(){const e=window.location.search;return new URLSearchParams(e)}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var i=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function r(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}c((i=i.apply(e,t||[])).next())}))};function s(e){return"/data/"+e+".json"}function o(e){return i(this,void 0,void 0,(function*(){var t=s(e);return fetch(t).then((e=>e.json()))}))}class a{constructor(){this.imageToCache=[],this.wavToCache=[],this.allAudios={},this.allImages={},this.dataURL="",this.correctSoundPath="dist/audio/Correct.wav",this.feedbackAudio=null,this.correctAudio=null}init(){this.feedbackAudio=new Audio,this.feedbackAudio.src=this.correctSoundPath,this.correctAudio=new Audio}static PrepareAudioAndImagesForSurvey(e,t){a.getInstance().dataURL=t;const n="audio/"+a.getInstance().dataURL+"/answer_feedback.mp3";for(var i in a.getInstance().wavToCache.push(n),a.getInstance().correctAudio.src=n,e){let t=e[i];for(var s in null!=t.promptAudio&&a.FilterAndAddAudioToAllAudios(t.promptAudio.toLowerCase()),null!=t.promptImg&&a.AddImageToAllImages(t.promptImg),t.answers){let e=t.answers[s];null!=e.answerImg&&a.AddImageToAllImages(e.answerImg)}}console.log(a.getInstance().allAudios),console.log(a.getInstance().allImages)}static AddImageToAllImages(e){console.log("Add image: "+e);let t=new Image;t.src=e,a.getInstance().allImages[e]=t}static FilterAndAddAudioToAllAudios(e){console.log("Adding audio: "+e),e.includes(".wav")?e=e.replace(".wav",".mp3"):e.includes(".mp3")||(e=e.trim()+".mp3"),console.log("Filtered: "+e);let t=new Audio;["luganda"].includes(a.getInstance().dataURL.split("-")[0]),t.src="audio/"+a.getInstance().dataURL+"/"+e,a.getInstance().allAudios[e]=t,console.log(t.src)}static PreloadBucket(e,t){for(var n in a.getInstance().dataURL=t,a.getInstance().correctAudio.src="audio/"+a.getInstance().dataURL+"/answer_feedback.mp3",e.items){var i=e.items[n];a.FilterAndAddAudioToAllAudios(i.itemName.toLowerCase())}}static PlayAudio(e,t,n){e=e.toLowerCase(),console.log("trying to play "+e),e.includes(".mp3")?".mp3"!=e.slice(-4)&&(e=e.trim()+".mp3"):e=e.trim()+".mp3",console.log("Pre play all audios: "),console.log(a.getInstance().allAudios),new Promise(((t,i)=>{const s=a.getInstance().allAudios[e];s?(s.addEventListener("play",(()=>{void 0!==n&&n(!0)})),s.addEventListener("ended",(()=>{void 0!==n&&n(!1),t()})),s.play().catch((e=>{console.error("Error playing audio:",e),t()}))):(console.warn("Audio file not found:",e),t())})).then((()=>{void 0!==t&&t()})).catch((e=>{console.error("Promise error:",e)}))}static GetImage(e){return a.getInstance().allImages[e]}static PlayDing(){a.getInstance().feedbackAudio.play()}static PlayCorrect(){a.getInstance().correctAudio.play()}static getInstance(){return null==a.instance&&(a.instance=new a,a.instance.init()),a.instance}}function r(e){return e[Math.floor(Math.random()*e.length)]}function c(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}}a.instance=null;class l{constructor(){this.landingContainerId="landWrap",this.gameContainerId="gameWrap",this.endContainerId="endWrap",this.starContainerId="starWrapper",this.chestContainerId="chestWrapper",this.questionsContainerId="qWrap",this.feedbackContainerId="feedbackWrap",this.answersContainerId="aWrap",this.answerButton1Id="answerButton1",this.answerButton2Id="answerButton2",this.answerButton3Id="answerButton3",this.answerButton4Id="answerButton4",this.answerButton5Id="answerButton5",this.answerButton6Id="answerButton6",this.playButtonId="pbutton",this.chestImgId="chestImage",this.nextQuestion=null,this.contentLoaded=!1,this.shown=!1,this.stars=[],this.shownStarsCount=0,this.starPositions=Array(),this.qAnsNum=0,this.buttons=[],this.buttonsActive=!1,this.devModeCorrectLabelVisibility=!1,this.devModeBucketControlsEnabled=!1,this.animationSpeedMultiplier=1}init(){this.landingContainer=document.getElementById(this.landingContainerId),this.gameContainer=document.getElementById(this.gameContainerId),this.endContainer=document.getElementById(this.endContainerId),this.starContainer=document.getElementById(this.starContainerId),this.chestContainer=document.getElementById(this.chestContainerId),this.questionsContainer=document.getElementById(this.questionsContainerId),this.feedbackContainer=document.getElementById(this.feedbackContainerId),this.answersContainer=document.getElementById(this.answersContainerId),this.answerButton1=document.getElementById(this.answerButton1Id),this.answerButton2=document.getElementById(this.answerButton2Id),this.answerButton3=document.getElementById(this.answerButton3Id),this.answerButton4=document.getElementById(this.answerButton4Id),this.answerButton5=document.getElementById(this.answerButton5Id),this.answerButton6=document.getElementById(this.answerButton6Id),this.playButton=document.getElementById(this.playButtonId),this.chestImg=document.getElementById(this.chestImgId),this.initializeStars(),this.initEventListeners()}initializeStars(){for(let e=0;e<20;e++){const t=document.createElement("img");t.id="star"+e,t.classList.add("topstarv"),this.starContainer.appendChild(t),this.starContainer.innerHTML+="",9==e&&(this.starContainer.innerHTML+="<br>"),this.stars.push(e)}c(this.stars)}SetAnimationSpeedMultiplier(e){l.getInstance().animationSpeedMultiplier=e}SetCorrectLabelVisibility(e){this.devModeCorrectLabelVisibility=e,console.log("Correct label visibility set to ",this.devModeCorrectLabelVisibility)}SetBucketControlsVisibility(e){console.log("Bucket controls visibility set to ",e),this.devModeBucketControlsEnabled=e}static OverlappingOtherStars(e,t,n,i){if(e.length<1)return!1;for(let s=0;s<e.length;s++){const o=e[s].x-t,a=e[s].y-n;if(Math.sqrt(o*o+a*a)<i)return!0}return!1}initEventListeners(){this.answerButton1.addEventListener("click",(()=>{this.answerButtonPress(1)})),this.buttons.push(this.answerButton1),this.answerButton2.addEventListener("click",(()=>{this.answerButtonPress(2)})),this.buttons.push(this.answerButton2),this.answerButton3.addEventListener("click",(()=>{this.answerButtonPress(3)})),this.buttons.push(this.answerButton3),this.answerButton4.addEventListener("click",(()=>{this.answerButtonPress(4)})),this.buttons.push(this.answerButton4),this.answerButton5.addEventListener("click",(()=>{this.answerButtonPress(5)})),this.buttons.push(this.answerButton5),this.answerButton6.addEventListener("click",(()=>{this.answerButtonPress(6)})),this.buttons.push(this.answerButton6),this.landingContainer.addEventListener("click",(()=>{localStorage.getItem(t())&&this.showGame()}))}showOptions(){if(!l.getInstance().shown){const e=l.getInstance().nextQuestion,t=l.getInstance().buttons,n=l.getInstance().animationSpeedMultiplier;let i=220*n;const s=150*n;l.getInstance().shown=!0;let o=0;t.forEach((e=>{e.style.visibility="hidden",e.style.animation="",e.innerHTML=""})),setTimeout((()=>{for(let s=0;s<e.answers.length;s++){const r=e.answers[s],c=t[s],u=r.answerName===e.correct;if(c.innerHTML="answerText"in r?r.answerText:"",u&&l.getInstance().devModeCorrectLabelVisibility){const e=document.createElement("div");e.classList.add("correct-label"),e.innerHTML="Correct",c.appendChild(e)}c.style.visibility="hidden",c.style.boxShadow="0px 0px 0px 0px rgba(0,0,0,0)",setTimeout((()=>{if(c.style.visibility="visible",c.style.boxShadow="0px 6px 8px #606060",c.style.animation=`zoomIn ${i*n}ms ease forwards`,"answerImg"in r){const e=a.GetImage(r.answerImg);c.appendChild(e)}c.addEventListener("animationend",(()=>{o++,o===e.answers.length&&l.getInstance().enableAnswerButton()}))}),s*i*n*.3)}}),s),l.getInstance().qStart=Date.now()}}enableAnswerButton(){l.getInstance().buttonsActive=!0}static SetFeedbackText(e){console.log("Feedback text set to "+e),l.getInstance().feedbackContainer.innerHTML=e}showLanding(){this.landingContainer.style.display="flex",this.gameContainer.style.display="none",this.endContainer.style.display="none"}static ShowEnd(){l.getInstance().landingContainer.style.display="none",l.getInstance().gameContainer.style.display="none",l.getInstance().endContainer.style.display="flex"}showGame(){this.landingContainer.style.display="none",this.gameContainer.style.display="grid",this.endContainer.style.display="none",this.allStart=Date.now(),this.startPressCallback()}static SetFeedbackVisibile(e,t){e?(l.getInstance().feedbackContainer.classList.remove("hidden"),l.getInstance().feedbackContainer.classList.add("visible"),l.getInstance().buttonsActive=!1,t?(l.getInstance().feedbackContainer.style.color="rgb(109, 204, 122)",a.PlayCorrect()):l.getInstance().feedbackContainer.style.color="red"):(l.getInstance().feedbackContainer.classList.remove("visible"),l.getInstance().feedbackContainer.classList.add("hidden"),l.getInstance().buttonsActive=!1)}static ReadyForNext(e,t=!0){if(null!==e){for(var n in console.log("ready for next!"),l.getInstance().answersContainer.style.visibility="hidden",l.getInstance().buttons)l.getInstance().buttons[n].style.visibility="hidden";l.getInstance().shown=!1,l.getInstance().nextQuestion=e,l.getInstance().questionsContainer.innerHTML="",l.getInstance().questionsContainer.style.display="none",l.getInstance().devModeBucketControlsEnabled?l.getInstance().externalBucketControlsGenerationHandler(l.getInstance().playButton,(()=>{console.log("Call from inside click handler of external bucket controls"),l.ShowQuestion(),a.PlayAudio(e.promptAudio,l.getInstance().showOptions,l.ShowAudioAnimation)})):(l.getInstance().playButton.innerHTML="<button id='nextqButton'><img class=audio-button width='100px' height='100px' src='/img/SoundButton_Idle.png' type='image/svg+xml'> </img></button>",document.getElementById("nextqButton").addEventListener("click",(function(){l.ShowQuestion(),a.PlayAudio(e.promptAudio,l.getInstance().showOptions,l.ShowAudioAnimation)})))}}static ShowAudioAnimation(e=!1){if(!l.getInstance().devModeBucketControlsEnabled){l.getInstance().playButton.querySelector("img").src=e?"animation/SoundButton.gif":"/img/SoundButton_Idle.png"}}static ShowQuestion(e){l.getInstance().devModeBucketControlsEnabled?l.getInstance().externalBucketControlsGenerationHandler(l.getInstance().playButton,(()=>{console.log("Call from inside click handler of external bucket controls #2"),console.log("next question button pressed"),console.log(e.promptAudio),"promptAudio"in e&&a.PlayAudio(e.promptAudio,void 0,l.ShowAudioAnimation)})):(l.getInstance().playButton.innerHTML="<button id='nextqButton'><img class=audio-button width='100px' height='100px' src='/img/SoundButton_Idle.png' type='image/svg+xml'> </img></button>",document.getElementById("nextqButton").addEventListener("click",(function(){console.log("next question button pressed"),console.log(e.promptAudio),"promptAudio"in e&&a.PlayAudio(e.promptAudio,void 0,l.ShowAudioAnimation)}))),l.getInstance().answersContainer.style.visibility="visible";let t="";if(l.getInstance().questionsContainer.innerHTML="",void 0===e&&(e=l.getInstance().nextQuestion),"promptImg"in e){var n=a.GetImage(e.promptImg);l.getInstance().questionsContainer.appendChild(n)}for(var i in t+=e.promptText,t+="<BR>",l.getInstance().questionsContainer.innerHTML+=t,l.getInstance().buttons)l.getInstance().buttons[i].style.visibility="hidden"}static AddStar(){var e=document.getElementById("star"+l.getInstance().stars[l.getInstance().qAnsNum]);e.src="../animation/Star.gif",e.classList.add("topstarv"),e.classList.remove("topstarh"),e.style.position="absolute";let t=l.getInstance().starContainer.offsetWidth,n=l.getInstance().starContainer.offsetHeight;console.log("Stars Container dimensions: ",t,n);let i=0,s=0;do{i=Math.floor(Math.random()*(t-.2*t)),s=Math.floor(Math.random()*n)}while(l.OverlappingOtherStars(l.instance.starPositions,i,s,28));const o=l.getInstance().animationSpeedMultiplier;e.style.transform="scale(10)",e.style.transition=`top ${1*o}s ease, left ${1*o}s ease, transform ${.5*o}s ease`,e.style.zIndex="500",e.style.top=window.innerHeight/2+"px",e.style.left=l.instance.gameContainer.offsetWidth/2-e.offsetWidth/2+"px",setTimeout((()=>{if(e.style.transition=`top ${2*o}s ease, left ${2*o}s ease, transform ${2*o}s ease`,i<t/2-30){const t=5+8*Math.random();console.log("Rotating star to the right",t),e.style.transform="rotate(-"+t+"deg) scale(1)"}else{const t=5+8*Math.random();console.log("Rotating star to the left",t),e.style.transform="rotate("+t+"deg) scale(1)"}e.style.left=10+i+"px",e.style.top=s+"px",setTimeout((()=>{e.style.filter="drop-shadow(0px 0px 10px yellow)"}),1900*o)}),1e3*o),l.instance.starPositions.push({x:i,y:s}),l.getInstance().qAnsNum+=1,l.getInstance().shownStarsCount+=1}static ChangeStarImageAfterAnimation(){document.getElementById("star"+l.getInstance().stars[l.getInstance().qAnsNum-1]).src="../img/star_after_animation.gif"}answerButtonPress(e){const t=this.buttons.every((e=>"visible"===e.style.visibility));if(console.log(this.buttonsActive,t),!0===this.buttonsActive){a.PlayDing();const t=Date.now()-this.qStart;console.log("answered in "+t),this.buttonPressCallback(e,t)}}static ProgressChest(){const e=document.getElementById("chestImage");let t=e.src;console.log("Chest Progression--\x3e",e),console.log("Chest Progression--\x3e",e.src);const n=parseInt(t.slice(-6,-4),10);console.log("Chest Progression number--\x3e",n);const i=`img/chestprogression/TreasureChestOpen0${n%4+1}.svg`;e.src=i}static SetContentLoaded(e){l.getInstance().contentLoaded=e}static SetButtonPressAction(e){l.getInstance().buttonPressCallback=e}static SetStartAction(e){l.getInstance().startPressCallback=e}static SetExternalBucketControlsGenerationHandler(e){l.getInstance().externalBucketControlsGenerationHandler=e}static getInstance(){return null===l.instance&&(l.instance=new l,l.instance.init()),l.instance}}l.instance=null;const u=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296==(64512&s)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++i)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},d={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){const s=e[t],o=t+1<e.length,a=o?e[t+1]:0,r=t+2<e.length,c=r?e[t+2]:0,l=s>>2,u=(3&s)<<4|a>>4;let d=(15&a)<<2|c>>6,h=63&c;r||(h=64,o||(d=64)),i.push(n[l],n[u],n[d],n[h])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(u(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=e[n++];t[i++]=String.fromCharCode((31&s)<<6|63&o)}else if(s>239&&s<365){const o=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(o>>10)),t[i++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],a=e[n++];t[i++]=String.fromCharCode((15&s)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){const s=n[e.charAt(t++)],o=t<e.length?n[e.charAt(t)]:0;++t;const a=t<e.length?n[e.charAt(t)]:64;++t;const r=t<e.length?n[e.charAt(t)]:64;if(++t,null==s||null==o||null==a||null==r)throw Error();const c=s<<2|o>>4;if(i.push(c),64!==a){const e=o<<4&240|a>>2;if(i.push(e),64!==r){const e=a<<6&192|r;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},h=function(e){return function(e){const t=u(e);return d.encodeByteArray(t,!0)}(e).replace(/\./g,"")};function p(){return"object"==typeof indexedDB}function g(){return new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}const f=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e.g)return e.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&function(e){try{return d.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}};class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}class b extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,b.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,v.prototype.create)}}class v{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function(e,t){return e.replace(w,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(s,n):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new b(i,a,n)}}const w=/\{\$([^}]+)}/g;function y(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const n=e[s],o=t[s];if(I(n)&&I(o)){if(!y(n,o))return!1}else if(n!==o)return!1}for(const e of i)if(!n.includes(e))return!1;return!0}function I(e){return null!==e&&"object"==typeof e}function k(e,t=1e3,n=2){const i=t*Math.pow(n,e),s=Math.round(.5*i*(Math.random()-.5)*2);return Math.min(144e5,i+s)}function B(e){return e&&e._delegate?e._delegate:e}class S{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const C="[DEFAULT]";class A{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new m;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:C})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(i);return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===C?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var i;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:C:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class L{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new A(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const M=[];var E;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(E||(E={}));const T={debug:E.DEBUG,verbose:E.VERBOSE,info:E.INFO,warn:E.WARN,error:E.ERROR,silent:E.SILENT},D=E.INFO,x={[E.DEBUG]:"log",[E.VERBOSE]:"log",[E.INFO]:"info",[E.WARN]:"warn",[E.ERROR]:"error"},R=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),s=x[t];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[s](`[${i}]  ${e.name}:`,...n)};class N{constructor(e){this.name=e,this._logLevel=D,this._logHandler=R,this._userLogHandler=null,M.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in E))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?T[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,E.DEBUG,...e),this._logHandler(this,E.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,E.VERBOSE,...e),this._logHandler(this,E.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,E.INFO,...e),this._logHandler(this,E.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,E.WARN,...e),this._logHandler(this,E.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,E.ERROR,...e),this._logHandler(this,E.ERROR,...e)}}let P,F;const U=new WeakMap,O=new WeakMap,j=new WeakMap,V=new WeakMap,$=new WeakMap;let H={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return O.get(e);if("objectStoreNames"===t)return e.objectStoreNames||j.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return G(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function q(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(F||(F=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(W(this),e),G(U.get(this))}:function(...e){return G(t.apply(W(this),e))}:function(e,...n){const i=t.call(W(this),e,...n);return j.set(i,e.sort?e.sort():[e]),G(i)}:(e instanceof IDBTransaction&&function(e){if(O.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)}));O.set(e,t)}(e),n=e,(P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>n instanceof e))?new Proxy(e,H):e);var t,n}function G(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{t(G(e.result)),i()},o=()=>{n(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&U.set(t,e)})).catch((()=>{})),$.set(t,e),t}(e);if(V.has(e))return V.get(e);const t=q(e);return t!==e&&(V.set(e,t),$.set(t,e)),t}const W=e=>$.get(e);function z(e,t,{blocked:n,upgrade:i,blocking:s,terminated:o}={}){const a=indexedDB.open(e,t),r=G(a);return i&&a.addEventListener("upgradeneeded",(e=>{i(G(a.result),e.oldVersion,e.newVersion,G(a.transaction))})),n&&a.addEventListener("blocked",(()=>n())),r.then((e=>{o&&e.addEventListener("close",(()=>o())),s&&e.addEventListener("versionchange",(()=>s()))})).catch((()=>{})),r}const Q=["get","getKey","getAll","getAllKeys","count"],K=["put","add","delete","clear"],J=new Map;function X(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(J.get(t))return J.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=K.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!s&&!Q.includes(n))return;const o=async function(e,...t){const o=this.transaction(e,s?"readwrite":"readonly");let a=o.store;return i&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),s&&o.done]))[0]};return J.set(t,o),o}var Y;Y=H,H={...Y,get:(e,t,n)=>X(e,t)||Y.get(e,t,n),has:(e,t)=>!!X(e,t)||Y.has(e,t)};class Z{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const ee="@firebase/app",te="0.8.2",ne=new N("@firebase/app"),ie="[DEFAULT]",se={[ee]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},oe=new Map,ae=new Map;function re(e,t){try{e.container.addComponent(t)}catch(n){ne.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ce(e){const t=e.name;if(ae.has(t))return ne.debug(`There were multiple attempts to register component ${t}.`),!1;ae.set(t,e);for(const t of oe.values())re(t,e);return!0}function le(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const ue=new v("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class de{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new S("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ue.create("app-deleted",{appName:this._name})}}function he(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const i=Object.assign({name:ie,automaticDataCollectionEnabled:!1},t),s=i.name;if("string"!=typeof s||!s)throw ue.create("bad-app-name",{appName:String(s)});var o;if(n||(n=null===(o=f())||void 0===o?void 0:o.config),!n)throw ue.create("no-options");const a=oe.get(s);if(a){if(y(n,a.options)&&y(i,a.config))return a;throw ue.create("duplicate-app",{appName:s})}const r=new L(s);for(const e of ae.values())r.addComponent(e);const c=new de(n,i,r);return oe.set(s,c),c}function pe(e,t,n){var i;let s=null!==(i=se[e])&&void 0!==i?i:e;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void ne.warn(e.join(" "))}ce(new S(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}const ge="firebase-heartbeat-store";let fe=null;function me(){return fe||(fe=z("firebase-heartbeat-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(ge)}}).catch((e=>{throw ue.create("idb-open",{originalErrorMessage:e.message})}))),fe}async function be(e,t){var n;try{const n=(await me()).transaction(ge,"readwrite"),i=n.objectStore(ge);return await i.put(t,ve(e)),n.done}catch(e){if(e instanceof b)ne.warn(e.message);else{const t=ue.create("idb-set",{originalErrorMessage:null===(n=e)||void 0===n?void 0:n.message});ne.warn(t.message)}}}function ve(e){return`${e.name}!${e.options.appId}`}class we{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ie(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=ye();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=ye(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let i=e.slice();for(const s of e){const e=n.find((e=>e.agent===s.agent));if(e){if(e.dates.push(s.date),ke(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ke(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=h(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function ye(){return(new Date).toISOString().substring(0,10)}class Ie{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!p()&&g().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){var t;try{return(await me()).transaction(ge).objectStore(ge).get(ve(e))}catch(e){if(e instanceof b)ne.warn(e.message);else{const n=ue.create("idb-get",{originalErrorMessage:null===(t=e)||void 0===t?void 0:t.message});ne.warn(n.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return be(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return be(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ke(e){return h(JSON.stringify({version:2,heartbeats:e})).length}ce(new S("platform-logger",(e=>new Z(e)),"PRIVATE")),ce(new S("heartbeat",(e=>new we(e)),"PRIVATE")),pe(ee,te,""),pe(ee,te,"esm2017"),pe("fire-js","");const Be="@firebase/installations",Se="0.5.15",Ce="w:0.5.15",Ae=new v("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Le(e){return e instanceof b&&e.code.includes("request-failed")}function Me({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function Ee(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Te(e,t){const n=(await t.json()).error;return Ae.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function De({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}async function xe(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Re(e){return new Promise((t=>{setTimeout(t,e)}))}const _e=/^[cdef][\w-]{21}$/;function Ne(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return _e.test(t)?t:""}catch(e){return""}}function Pe(e){return`${e.appName}!${e.appId}`}const Fe=new Map;function Ue(e,t){const n=Pe(e);Oe(n,t),function(e,t){const n=(!je&&"BroadcastChannel"in self&&(je=new BroadcastChannel("[Firebase] FID Change"),je.onmessage=e=>{Oe(e.data.key,e.data.fid)}),je);n&&n.postMessage({key:e,fid:t}),0===Fe.size&&je&&(je.close(),je=null)}(n,t)}function Oe(e,t){const n=Fe.get(e);if(n)for(const e of n)e(t)}let je=null;const Ve="firebase-installations-store";let $e=null;function He(){return $e||($e=z("firebase-installations-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(Ve)}})),$e}async function qe(e,t){const n=Pe(e),i=(await He()).transaction(Ve,"readwrite"),s=i.objectStore(Ve),o=await s.get(n);return await s.put(t,n),await i.done,o&&o.fid===t.fid||Ue(e,t.fid),t}async function Ge(e){const t=Pe(e),n=(await He()).transaction(Ve,"readwrite");await n.objectStore(Ve).delete(t),await n.done}async function We(e,t){const n=Pe(e),i=(await He()).transaction(Ve,"readwrite"),s=i.objectStore(Ve),o=await s.get(n),a=t(o);return void 0===a?await s.delete(n):await s.put(a,n),await i.done,!a||o&&o.fid===a.fid||Ue(e,a.fid),a}async function ze(e){let t;const n=await We(e.appConfig,(n=>{const i=function(e){return Je(e||{fid:Ne(),registrationStatus:0})}(n),s=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Ae.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const i=Me(e),s=De(e),o=t.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const a={fid:n,authVersion:"FIS_v2",appId:e.appId,sdkVersion:Ce},r={method:"POST",headers:s,body:JSON.stringify(a)},c=await xe((()=>fetch(i,r)));if(c.ok){const e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:Ee(e.authToken)}}throw await Te("Create Installation",c)}(e,t);return qe(e.appConfig,n)}catch(n){throw Le(n)&&409===n.customData.serverCode?await Ge(e.appConfig):await qe(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Qe(e)}:{installationEntry:t}}(e,i);return t=s.registrationPromise,s.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Qe(e){let t=await Ke(e.appConfig);for(;1===t.registrationStatus;)await Re(100),t=await Ke(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await ze(e);return n||t}return t}function Ke(e){return We(e,(e=>{if(!e)throw Ae.create("installation-not-found");return Je(e)}))}function Je(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Xe({appConfig:e,heartbeatServiceProvider:t},n){const i=function(e,{fid:t}){return`${Me(e)}/${t}/authTokens:generate`}(e,n),s=function(e,{refreshToken:t}){const n=De(e);return n.append("Authorization",function(e){return`FIS_v2 ${e}`}(t)),n}(e,n),o=t.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const a={installation:{sdkVersion:Ce,appId:e.appId}},r={method:"POST",headers:s,body:JSON.stringify(a)},c=await xe((()=>fetch(i,r)));if(c.ok)return Ee(await c.json());throw await Te("Generate Auth Token",c)}async function Ye(e,t=!1){let n;const i=await We(e.appConfig,(i=>{if(!et(i))throw Ae.create("not-registered");const s=i.authToken;if(!t&&(2===(o=s).requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(o)))return i;var o;if(1===s.requestStatus)return n=async function(e,t){let n=await Ze(e.appConfig);for(;1===n.authToken.requestStatus;)await Re(100),n=await Ze(e.appConfig);const i=n.authToken;return 0===i.requestStatus?Ye(e,t):i}(e,t),i;{if(!navigator.onLine)throw Ae.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(i);return n=async function(e,t){try{const n=await Xe(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return await qe(e.appConfig,i),n}catch(n){if(!Le(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await qe(e.appConfig,n)}else await Ge(e.appConfig);throw n}}(e,t),t}}));return n?await n:i.authToken}function Ze(e){return We(e,(e=>{if(!et(e))throw Ae.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t}))}function et(e){return void 0!==e&&2===e.registrationStatus}function tt(e){return Ae.create("missing-app-config-values",{valueName:e})}const nt="installations";ce(new S(nt,(e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw tt("App Configuration");if(!e.name)throw tt("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw tt(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:le(t,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),ce(new S("installations-internal",(e=>{const t=le(e.getProvider("app").getImmediate(),nt).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:i}=await ze(t);return i?i.catch(console.error):Ye(t).catch(console.error),n.fid}(t),getToken:e=>async function(e,t=!1){const n=e;return await async function(e){const{registrationPromise:t}=await ze(e);t&&await t}(n),(await Ye(n,t)).token}(t,e)}}),"PRIVATE")),pe(Be,Se),pe(Be,Se,"esm2017");const it="analytics",st="https://www.googletagmanager.com/gtag/js",ot=new N("@firebase/analytics");function at(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}const rt=new v("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ct=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function lt(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function ut(e,t=ct,n){const{appId:i,apiKey:s,measurementId:o}=e.options;if(!i)throw rt.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw rt.create("no-api-key")}const a=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},r=new ht;return setTimeout((async()=>{r.abort()}),void 0!==n?n:6e4),dt({appId:i,apiKey:s,measurementId:o},a,r,t)}async function dt(e,{throttleEndTimeMillis:t,backoffCount:n},i,s=ct){var o,a;const{appId:r,measurementId:c}=e;try{await function(e,t){return new Promise(((n,i)=>{const s=Math.max(t-Date.now(),0),o=setTimeout(n,s);e.addEventListener((()=>{clearTimeout(o),i(rt.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(i,t)}catch(e){if(c)return ot.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${null===(o=e)||void 0===o?void 0:o.message}]`),{appId:r,measurementId:c};throw e}try{const t=await async function(e){var t;const{appId:n,apiKey:i}=e,s={method:"GET",headers:lt(i)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),a=await fetch(o,s);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(e){}throw rt.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return s.deleteThrottleMetadata(r),t}catch(t){const o=t;if(!function(e){if(!(e instanceof b&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(o)){if(s.deleteThrottleMetadata(r),c)return ot.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${null==o?void 0:o.message}]`),{appId:r,measurementId:c};throw t}const l=503===Number(null===(a=null==o?void 0:o.customData)||void 0===a?void 0:a.httpStatus)?k(n,s.intervalMillis,30):k(n,s.intervalMillis),u={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return s.setThrottleMetadata(r,u),ot.debug(`Calling attemptFetch again in ${l} millis`),dt(e,u,i,s)}}class ht{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let pt,gt;async function ft(e,t,n,i,s,o,a){var r;const c=ut(e);c.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&ot.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>ot.error(e))),t.push(c);const l=async function(){var e;if(!p())return ot.warn(rt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await g()}catch(t){return ot.warn(rt.create("indexeddb-unavailable",{errorInfo:null===(e=t)||void 0===e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?i.getId():void 0)),[u,d]=await Promise.all([c,l]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(st)&&n.src.includes(e))return n;return null})(o)||function(e,t){const n=document.createElement("script");n.src=`${st}?l=${e}&id=${t}`,n.async=!0,document.head.appendChild(n)}(o,u.measurementId),gt&&(s("consent","default",gt),gt=void 0),s("js",new Date);const h=null!==(r=null==a?void 0:a.config)&&void 0!==r?r:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),s("config",u.measurementId,h),pt&&(s("set",pt),pt=void 0),u.measurementId}class mt{constructor(e){this.app=e}_delete(){return delete bt[this.app.options.appId],Promise.resolve()}}let bt={},vt=[];const wt={};let yt,It,kt="dataLayer",Bt=!1;function St(e,t,n){!function(){const e=[];if(function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=rt.create("invalid-analytics-context",{errorInfo:t});ot.warn(n.message)}}();const i=e.options.appId;if(!i)throw rt.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw rt.create("no-api-key");ot.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=bt[i])throw rt.create("already-exists",{id:i});if(!Bt){!function(e){let t=[];Array.isArray(window.dataLayer)?t=window.dataLayer:window.dataLayer=t}();const{wrappedGtag:e,gtagCore:t}=function(e,t,n,i,s){let o=function(...e){window.dataLayer.push(arguments)};return window.gtag&&"function"==typeof window.gtag&&(o=window.gtag),window.gtag=function(e,t,n,i){return async function(s,o,a){try{"event"===s?await async function(e,t,n,i,s){try{let o=[];if(s&&s.send_to){let e=s.send_to;Array.isArray(e)||(e=[e]);const i=await at(n);for(const n of e){const e=i.find((e=>e.measurementId===n)),s=e&&t[e.appId];if(!s){o=[];break}o.push(s)}}0===o.length&&(o=Object.values(t)),await Promise.all(o),e("event",i,s||{})}catch(e){ot.error(e)}}(e,t,n,o,a):"config"===s?await async function(e,t,n,i,s,o){const a=i[s];try{if(a)await t[a];else{const e=(await at(n)).find((e=>e.measurementId===s));e&&await t[e.appId]}}catch(e){ot.error(e)}e("config",s,o)}(e,t,n,i,o,a):"consent"===s?e("consent","update",a):e("set",o)}catch(e){ot.error(e)}}}(o,e,t,n),{gtagCore:o,wrappedGtag:window.gtag}}(bt,vt,wt);It=e,yt=t,Bt=!0}return bt[i]=ft(e,vt,wt,t,yt,kt,n),new mt(e)}function Ct(e,t,n,i){e=B(e),async function(e,t,n,i,s){if(s&&s.global)e("event",n,i);else{const s=await t;e("event",n,Object.assign(Object.assign({},i),{send_to:s}))}}(It,bt[e.app.options.appId],t,n,i).catch((e=>ot.error(e)))}const At="@firebase/analytics",Lt="0.8.3";ce(new S(it,((e,{options:t})=>St(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),ce(new S("analytics-internal",(function(e){try{const t=e.getProvider(it).getImmediate();return{logEvent:(e,n,i)=>Ct(t,e,n,i)}}catch(e){throw rt.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),pe(At,Lt),pe(At,Lt,"esm2017");class Mt{constructor(){}static getInstance(){return Mt.instance||(Mt.instance=new Mt),Mt.instance}static setAssessmentType(e){Mt.assessmentType=e}static getLocation(){console.log("starting to get location"),fetch("https://ipinfo.io/json?token=b6268727178610").then((e=>{if(console.log("got location response"),!e.ok)throw Error(e.statusText);return e.json()})).then((e=>{console.log(e),Mt.latlong=e.loc;var t=Mt.latlong.split(","),n=parseFloat(t[0]).toFixed(2),i=parseFloat(t[1]).toFixed(1);return Mt.clat=n,Mt.clon=i,Mt.latlong="",t=[],Mt.sendLocation(),{}})).catch((e=>{console.warn(`location failed to update! encountered error ${e.msg}`)}))}static linkAnalytics(e,t){Mt.gana=e,Mt.dataURL=t}static setUuid(e,t){Mt.uuid=e,Mt.userSource=t}static sendInit(e,t){Mt.appVersion=e,Mt.contentVersion=t,Mt.getLocation();var n="user "+Mt.uuid+" opened the assessment";console.log(n),Ct(Mt.gana,"opened",{})}static getAppLanguageFromDataURL(e){if(e&&""!==e&&e.includes("-")){let t=e.split("-").slice(0,-1).join("-");return t.includes("west-african")?(console.log(">>>>>>>>>>>>>",t),"west-african-english"):(console.log(">>>>>>>>>>>>>",t),t)}return"NotAvailable"}static getAppTypeFromDataURL(e){return e&&""!==e&&e.includes("-")?e.split("-")[1]:"NotAvailable"}static sendLocation(){var e="Sending User coordinates: "+Mt.uuid+" : "+Mt.clat+", "+Mt.clon;console.log(e),Ct(Mt.gana,"user_location",{user:Mt.uuid,lang:Mt.getAppLanguageFromDataURL(Mt.dataURL),app:Mt.getAppTypeFromDataURL(Mt.dataURL),latlong:Mt.joinLatLong(Mt.clat,Mt.clon)}),console.log("INITIALIZED EVENT SENT"),console.log("App Language: "+Mt.getAppLanguageFromDataURL(Mt.dataURL)),console.log("App Type: "+Mt.getAppTypeFromDataURL(Mt.dataURL)),console.log("App Version: "+Mt.appVersion),console.log("Content Version: "+Mt.contentVersion),Ct(Mt.gana,"initialized",{type:"initialized",clUserId:Mt.uuid,userSource:Mt.userSource,latLong:Mt.joinLatLong(Mt.clat,Mt.clon),appVersion:Mt.appVersion,contentVersion:Mt.contentVersion,app:Mt.getAppTypeFromDataURL(Mt.dataURL),lang:Mt.getAppLanguageFromDataURL(Mt.dataURL)})}static sendAnswered(e,t,n){var i=e.answers[t-1],s=null,o=null;"correct"in e&&null!=e.correct&&(s=e.correct==i.answerName),"bucket"in e&&(o=e.bucket);var a="user "+Mt.uuid+" answered "+e.qName+" with "+i.answerName;a+=", all answers were [";var r="";for(var c in e.answers)a+=e.answers[c].answerName+",",r+=e.answers[c].answerName+",";a+="] ",a+=s,a+=o,console.log(a),console.log("Answered App Version: "+Mt.appVersion),console.log("Content Version: "+Mt.contentVersion),Ct(Mt.gana,"answered",{type:"answered",clUserId:Mt.uuid,userSource:Mt.userSource,latLong:Mt.joinLatLong(Mt.clat,Mt.clon),app:Mt.getAppTypeFromDataURL(Mt.dataURL),lang:Mt.getAppLanguageFromDataURL(Mt.dataURL),dt:n,question_number:e.qNumber,target:e.qTarget,question:e.promptText,selected_answer:i.answerName,iscorrect:s,options:r,bucket:o,appVersion:Mt.appVersion,contentVersion:Mt.contentVersion})}static sendBucket(e,t){var n=e.bucketID,i=e.numTried,s=e.numCorrect,o="user "+Mt.uuid+" finished the bucket "+n+" with "+s+" correct answers out of "+i+" tried and passed: "+t;console.log(o),console.log("Bucket Completed App Version: "+Mt.appVersion),console.log("Content Version: "+Mt.contentVersion),Ct(Mt.gana,"bucketCompleted",{type:"bucketCompleted",clUserId:Mt.uuid,userSource:Mt.userSource,latLong:Mt.joinLatLong(Mt.clat,Mt.clon),app:Mt.getAppTypeFromDataURL(Mt.dataURL),lang:Mt.getAppLanguageFromDataURL(Mt.dataURL),bucketNumber:n,numberTriedInBucket:i,numberCorrectInBucket:s,passedBucket:t,appVersion:Mt.appVersion,contentVersion:Mt.contentVersion})}static sendFinished(e=null,t,n){let i="user "+Mt.uuid+" finished the assessment";console.log(i);let s=Mt.getBasalBucketID(e),o=Mt.getCeilingBucketID(e);0==s&&(s=o);let a=Mt.calculateScore(e,s);const r=100*e.length;console.log("Sending completed event"),console.log("Score: "+a),console.log("Max Score: "+r),console.log("Basal Bucket: "+s),console.log("BASAL FROM ASSESSMENT: "+t),console.log("Ceiling Bucket: "+o),console.log("CEILING FROM ASSESSMENT: "+n),console.log("Completed App Version: "+Mt.appVersion),console.log("Content Version: "+Mt.contentVersion),Mt.sendDataToThirdParty(a,Mt.uuid),window.parent&&window.parent.postMessage({type:"assessment_completed",score:a},"https://cr-frame-dev-testing.vercel.app/"),Ct(Mt.gana,"completed",{type:"completed",clUserId:Mt.uuid,userSource:Mt.userSource,app:Mt.getAppTypeFromDataURL(Mt.dataURL),lang:Mt.getAppLanguageFromDataURL(Mt.dataURL),latLong:Mt.joinLatLong(Mt.clat,Mt.clon),score:a,maxScore:r,basalBucket:s,ceilingBucket:o,appVersion:Mt.appVersion,contentVersion:Mt.contentVersion})}static sendDataToThirdParty(e,t){console.log("Attempting to send score to a third party! Score: ",e);const n=new URLSearchParams(window.location.search),i=n.get("endpoint"),s=(n.get("organization"),new XMLHttpRequest);if(!i)return void console.error("No target party URL found!");const o={user:t,page:"111108121363615",event:{type:"external",value:{type:"assessment",subType:Mt.assessmentType,score:e,completed:!0}}},a=JSON.stringify(o);try{s.open("POST",i,!0),s.setRequestHeader("Content-Type","application/json"),s.onload=function(){s.status>=200&&s.status<300?console.log("POST success!"+s.responseText):console.error("Request failed with status: "+s.status)},s.send(a)}catch(e){console.error("Failed to send data to target party: ",e)}}static calculateScore(e,t){console.log("Calculating score"),console.log(e);let n=0;console.log("Basal Bucket ID: "+t);let i=0;for(const n in e){const s=e[n];if(s.bucketID==t){i=s.numCorrect;break}}return console.log("Num Correct: "+i," basal: "+t," buckets: "+e.length),t===e.length&&i>=4?(console.log("Perfect score"),100*e.length):(n=0|Math.round(100*(t-1)+i/5*100),n)}static getBasalBucketID(e){let t=0;for(const n in e){const i=e[n];i.tested&&!i.passed&&(0==t||i.bucketID<t)&&(t=i.bucketID)}return t}static getCeilingBucketID(e){let t=0;for(const n in e){const i=e[n];i.tested&&i.passed&&(0==t||i.bucketID>t)&&(t=i.bucketID)}return t}static joinLatLong(e,t){return e+","+t}}class Et{constructor(){this.devModeAvailable=!1,this.isInDevMode=!1,this.isCorrectLabelShown=!1,this.isBucketInfoShown=!1,this.isBucketControlsEnabled=!1,this.animationSpeedMultiplier=1,this.devModeToggleButtonContainerId="devModeModalToggleButtonContainer",this.devModeToggleButtonId="devModeModalToggleButton",this.devModeModalId="devModeSettingsModal",this.devModeBucketGenSelectId="devModeBucketGenSelect",this.devModeCorrectLabelShownCheckboxId="devModeCorrectLabelShownCheckbox",this.devModeBucketInfoShownCheckboxId="devModeBucketInfoShownCheckbox",this.devModeBucketInfoContainerId="devModeBucketInfoContainer",this.devModeBucketControlsShownCheckboxId="devModeBucketControlsShownCheckbox",this.devModeAnimationSpeedMultiplierRangeId="devModeAnimationSpeedMultiplierRange",this.devModeAnimationSpeedMultiplierValueId="devModeAnimationSpeedMultiplierValue",this.toggleDevModeModal=()=>{"block"==this.devModeSettingsModal.style.display?this.devModeSettingsModal.style.display="none":this.devModeSettingsModal.style.display="block"},this.isInDevMode=window.location.href.includes("localhost")||window.location.href.includes("127.0.0.1")||window.location.href.includes("assessmentdev"),this.devModeToggleButtonContainer=document.getElementById(this.devModeToggleButtonContainerId),this.devModeSettingsModal=document.getElementById(this.devModeModalId),this.devModeBucketGenSelect=document.getElementById(this.devModeBucketGenSelectId),this.devModeBucketGenSelect.onchange=e=>{this.handleBucketGenModeChange(e)},this.devModeToggleButton=document.getElementById(this.devModeToggleButtonId),this.devModeToggleButton.onclick=this.toggleDevModeModal,this.devModeCorrectLabelShownCheckbox=document.getElementById(this.devModeCorrectLabelShownCheckboxId),this.devModeCorrectLabelShownCheckbox.onchange=()=>{this.isCorrectLabelShown=this.devModeCorrectLabelShownCheckbox.checked,this.handleCorrectLabelShownChange()},this.devModeBucketInfoShownCheckbox=document.getElementById(this.devModeBucketInfoShownCheckboxId),this.devModeBucketInfoShownCheckbox.onchange=()=>{this.isBucketInfoShown=this.devModeBucketInfoShownCheckbox.checked,this.devModeBucketInfoContainer.style.display=this.isBucketInfoShown?"block":"none",this.handleBucketInfoShownChange()},this.devModeBucketControlsShownCheckbox=document.getElementById(this.devModeBucketControlsShownCheckboxId),this.devModeBucketControlsShownCheckbox.onchange=()=>{this.isBucketControlsEnabled=this.devModeBucketControlsShownCheckbox.checked,this.handleBucketControlsShownChange()},this.devModeBucketInfoContainer=document.getElementById(this.devModeBucketInfoContainerId),this.devModeAnimationSpeedMultiplierRange=document.getElementById(this.devModeAnimationSpeedMultiplierRangeId),this.devModeAnimationSpeedMultiplierValue=document.getElementById(this.devModeAnimationSpeedMultiplierValueId),this.devModeAnimationSpeedMultiplierRange.onchange=()=>{this.animationSpeedMultiplier=parseFloat(this.devModeAnimationSpeedMultiplierRange.value),this.animationSpeedMultiplier<.2&&(this.animationSpeedMultiplier=.2,this.devModeAnimationSpeedMultiplierRange.value="0.2"),this.devModeAnimationSpeedMultiplierValue.innerText=this.animationSpeedMultiplier.toString(),this.handleAnimationSpeedMultiplierChange()},this.isInDevMode?this.devModeToggleButtonContainer.style.display="block":this.devModeToggleButtonContainer.style.display="none",this.animationSpeedMultiplier=parseFloat(this.devModeAnimationSpeedMultiplierRange.value)}hideDevModeButton(){this.devModeToggleButtonContainer.style.display="none"}onEnd(){l.ShowEnd(),this.app.unityBridge.SendClose()}}class Tt extends Et{constructor(e,t){super(),this.handleBucketGenModeChange=()=>{console.log("Bucket Gen Mode Changed")},this.handleCorrectLabelShownChange=()=>{console.log("Correct Label Shown Changed")},this.handleBucketInfoShownChange=()=>{console.log("Bucket Info Shown Changed")},this.handleBucketControlsShownChange=()=>{console.log("Bucket Controls Shown Changed")},this.startSurvey=()=>{l.ReadyForNext(this.buildNewQuestion())},this.onQuestionEnd=()=>{l.SetFeedbackVisibile(!1,!1),this.currentQuestionIndex+=1,setTimeout((()=>{this.HasQuestionsLeft()?l.ReadyForNext(this.buildNewQuestion()):(console.log("There are no questions left."),this.onEnd())}),500)},this.handleAnswerButtonPress=(e,t)=>{Mt.sendAnswered(this.questionsData[this.currentQuestionIndex],e,t),l.SetFeedbackVisibile(!0,!0),l.AddStar(),setTimeout((()=>{this.onQuestionEnd()}),2e3)},this.buildQuestionList=()=>function(e){return i(this,void 0,void 0,(function*(){return o(e).then((e=>e.questions))}))}(this.app.dataURL),console.log("Survey initialized"),this.dataURL=e,this.unityBridge=t,this.currentQuestionIndex=0,l.SetButtonPressAction(this.handleAnswerButtonPress),l.SetStartAction(this.startSurvey)}handleAnimationSpeedMultiplierChange(){console.log("Animation Speed Multiplier Changed")}Run(e){return t=this,n=void 0,s=function*(){this.app=e,this.buildQuestionList().then((e=>{this.questionsData=e,a.PrepareAudioAndImagesForSurvey(this.questionsData,this.app.GetDataURL()),this.unityBridge.SendLoaded()}))},new((i=void 0)||(i=Promise))((function(e,o){function a(e){try{c(s.next(e))}catch(e){o(e)}}function r(e){try{c(s.throw(e))}catch(e){o(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(a,r)}c((s=s.apply(t,n||[])).next())}));var t,n,i,s}HasQuestionsLeft(){return this.currentQuestionIndex<=this.questionsData.length-1}buildNewQuestion(){return this.questionsData[this.currentQuestionIndex]}}class Dt{constructor(e){this.value=e,this.left=null,this.right=null}}function xt(e,t,n){if(e>t)return null;let i;if((e+t)%2==0&&1!==n.size){if(i=Math.floor((e+t)/2),0===i)return null}else do{i=Math.floor((e+t)/2),i+=Math.floor(2*Math.random())}while(i>t||n.has(i));n.add(i);let s=new Dt(i);return s.left=xt(e,i-1,n),s.right=xt(i+1,t,n),s}var Rt,_t;!function(e){e[e.BinarySearch=0]="BinarySearch",e[e.LinearSearchUp=1]="LinearSearchUp",e[e.LinearSearchDown=2]="LinearSearchDown"}(Rt||(Rt={})),function(e){e[e.RandomBST=0]="RandomBST",e[e.LinearArrayBased=1]="LinearArrayBased"}(_t||(_t={}));class Nt extends Et{constructor(e,t){super(),this.bucketGenMode=_t.RandomBST,this.MAX_STARS_COUNT_IN_LINEAR_MODE=20,this.generateDevModeBucketControlsInContainer=(e,t)=>{if(this.isInDevMode&&this.bucketGenMode===_t.LinearArrayBased){e.innerHTML="";for(let t=0;t<this.currentBucket.items.length;t++){let n=this.currentBucket.items[t],i=document.createElement("button"),s=t;i.innerText=n.itemName,i.style.margin="2px",i.onclick=()=>{this.currentLinearTargetIndex=s,this.currentBucket.usedItems=[],console.log("Clicked on item "+n.itemName+" at index "+this.currentLinearTargetIndex);const e=this.buildNewQuestion();l.getInstance().answersContainer.style.visibility="hidden";for(let e in l.getInstance().buttons)l.getInstance().buttons[e].style.visibility="hidden";l.getInstance().shown=!1,l.getInstance().nextQuestion=e,l.getInstance().questionsContainer.innerHTML="",l.getInstance().questionsContainer.style.display="none",l.ShowQuestion(e),a.PlayAudio(this.buildNewQuestion().promptAudio,l.getInstance().showOptions,l.ShowAudioAnimation)},e.append(i)}let t=document.createElement("button");t.innerText="Prev Bucket",0==this.currentLinearBucketIndex&&(t.disabled=!0),t.addEventListener("click",(()=>{this.currentLinearBucketIndex>0&&(this.currentLinearBucketIndex--,this.currentLinearTargetIndex=0,this.tryMoveBucket(!1),l.ReadyForNext(this.buildNewQuestion()),this.updateBucketInfo()),0==this.currentLinearBucketIndex&&(t.disabled=!0)}));let n=document.createElement("button");n.innerText="Next Bucket",this.currentLinearBucketIndex==this.buckets.length-1&&(n.disabled=!0),n.addEventListener("click",(()=>{this.currentLinearBucketIndex<this.buckets.length-1&&(this.currentLinearBucketIndex++,this.currentLinearTargetIndex=0,this.tryMoveBucket(!1),l.ReadyForNext(this.buildNewQuestion()),this.updateBucketInfo())}));let i=document.createElement("div");i.style.display="flex",i.style.flexDirection="row",i.style.justifyContent="center",i.style.alignItems="center",i.appendChild(t),i.appendChild(n),e.appendChild(i)}},this.updateBucketInfo=()=>{null!=this.currentBucket&&(this.devModeBucketInfoContainer.innerHTML=`Bucket: ${this.currentBucket.bucketID}<br/>Correct: ${this.currentBucket.numCorrect}<br/>Tried: ${this.currentBucket.numTried}<br/>Failed: ${this.currentBucket.numConsecutiveWrong}`)},this.startAssessment=()=>{l.ReadyForNext(this.buildNewQuestion()),this.isInDevMode&&this.hideDevModeButton()},this.buildBuckets=e=>{return t=this,n=void 0,a=function*(){if(void 0===this.buckets||0===this.buckets.length){const e=function(e){return i(this,void 0,void 0,(function*(){return o(e).then((e=>e.buckets))}))}(this.app.GetDataURL()).then((e=>{this.buckets=e,this.numBuckets=e.length,console.log("buckets: "+this.buckets),this.bucketArray=Array.from(Array(this.numBuckets),((e,t)=>t+1)),console.log("empty array "+this.bucketArray);let t=new Set;t.add(0);let n=xt(this.buckets[0].bucketID-1,this.buckets[this.buckets.length-1].bucketID,t),i=this.convertToBucketBST(n,this.buckets);console.log("Generated the buckets root ----------------------------------------------"),console.log(i),this.basalBucket=this.numBuckets+1,this.ceilingBucket=-1,this.currentNode=i,this.tryMoveBucket(!1)}));return e}return e===_t.RandomBST?new Promise(((e,t)=>{let n=new Set;n.add(0);let i=xt(this.buckets[0].bucketID-1,this.buckets[this.buckets.length-1].bucketID,n),s=this.convertToBucketBST(i,this.buckets);console.log("Generated the buckets root ----------------------------------------------"),console.log(s),this.basalBucket=this.numBuckets+1,this.ceilingBucket=-1,this.currentNode=s,this.tryMoveBucket(!1),e()})):e===_t.LinearArrayBased?new Promise(((e,t)=>{this.currentLinearBucketIndex=0,this.currentLinearTargetIndex=0,this.tryMoveBucket(!1),e()})):void 0},new((s=void 0)||(s=Promise))((function(e,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function r(e){try{c(a.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(e){e(n)}))).then(o,r)}c((a=a.apply(t,n||[])).next())}));var t,n,s,a},this.convertToBucketBST=(e,t)=>{if(null===e)return e;let n=e.value;return e.value=t.find((e=>e.bucketID===n)),null!==e.left&&(e.left=this.convertToBucketBST(e.left,t)),null!==e.right&&(e.right=this.convertToBucketBST(e.right,t)),e},this.initBucket=e=>{this.currentBucket=e,this.currentBucket.usedItems=[],this.currentBucket.numTried=0,this.currentBucket.numCorrect=0,this.currentBucket.numConsecutiveWrong=0,this.currentBucket.tested=!0,this.currentBucket.passed=!1},this.handleAnswerButtonPress=(e,t)=>{this.bucketGenMode===_t.RandomBST&&Mt.sendAnswered(this.currentQuestion,e,t),this.updateCurrentBucketValuesAfterAnswering(e),this.updateFeedbackAfterAnswer(e),setTimeout((()=>{console.log("Completed first Timeout"),this.onQuestionEnd()}),2e3*this.animationSpeedMultiplier)},this.onQuestionEnd=()=>{let e=this.HasQuestionsLeft()?500*this.animationSpeedMultiplier:4e3*this.animationSpeedMultiplier;const t=()=>{if(l.SetFeedbackVisibile(!1,!1),(this.bucketGenMode===_t.LinearArrayBased&&l.getInstance().shownStarsCount<this.MAX_STARS_COUNT_IN_LINEAR_MODE||this.bucketGenMode===_t.RandomBST)&&l.ChangeStarImageAfterAnimation(),this.HasQuestionsLeft()){if(this.bucketGenMode===_t.LinearArrayBased&&!this.isBucketControlsEnabled&&(this.currentLinearTargetIndex<this.buckets[this.currentLinearBucketIndex].items.length&&(this.currentLinearTargetIndex++,this.currentBucket.usedItems=[]),this.currentLinearTargetIndex>=this.buckets[this.currentLinearBucketIndex].items.length&&this.currentLinearBucketIndex<this.buckets.length)){if(this.currentLinearBucketIndex++,this.currentLinearTargetIndex=0,!(this.currentLinearBucketIndex<this.buckets.length))return console.log("No questions left"),void this.onEnd();this.tryMoveBucket(!1)}l.ReadyForNext(this.buildNewQuestion())}else console.log("No questions left"),this.onEnd()};new Promise((t=>{setTimeout((()=>{t()}),e)})).then((()=>{t(),this.isInDevMode&&this.updateBucketInfo()}))},this.buildNewQuestion=()=>{if(this.isLinearArrayExhausted())return null;const e=this.selectTargetItem(),t=this.generateFoils(e),n=this.shuffleAnswerOptions([e,...t]),i=this.createQuestion(e,n);return this.currentQuestion=i,this.questionNumber+=1,i},this.isLinearArrayExhausted=()=>this.bucketGenMode===_t.LinearArrayBased&&this.currentLinearTargetIndex>=this.buckets[this.currentLinearBucketIndex].items.length,this.selectTargetItem=()=>{let e;return this.bucketGenMode===_t.RandomBST?e=this.selectRandomUnusedItem():this.bucketGenMode===_t.LinearArrayBased&&(e=this.buckets[this.currentLinearBucketIndex].items[this.currentLinearTargetIndex],this.currentBucket.usedItems.push(e)),e},this.selectRandomUnusedItem=()=>{let e;do{e=r(this.currentBucket.items)}while(this.currentBucket.usedItems.includes(e));return this.currentBucket.usedItems.push(e),e},this.generateFoils=e=>{let t,n,i;return this.bucketGenMode===_t.RandomBST?(t=this.generateRandomFoil(e),n=this.generateRandomFoil(e,t),i=this.generateRandomFoil(e,t,n)):this.bucketGenMode===_t.LinearArrayBased&&(t=this.generateLinearFoil(e),n=this.generateLinearFoil(e,t),i=this.generateLinearFoil(e,t,n)),[t,n,i]},this.generateRandomFoil=(e,...t)=>{let n;do{n=r(this.currentBucket.items)}while([e,...t].includes(n));return n},this.generateLinearFoil=(e,...t)=>{let n;do{n=r(this.buckets[this.currentLinearBucketIndex].items)}while([e,...t].includes(n));return n},this.shuffleAnswerOptions=e=>(c(e),e),this.createQuestion=(e,t)=>({qName:`question-${this.questionNumber}-${e.itemName}`,qNumber:this.questionNumber,qTarget:e.itemName,promptText:"",bucket:this.currentBucket.bucketID,promptAudio:e.itemName,correct:e.itemText,answers:t.map((e=>({answerName:e.itemName,answerText:e.itemText})))}),this.tryMoveBucket=e=>{this.bucketGenMode===_t.RandomBST?this.tryMoveBucketRandomBST(e):this.bucketGenMode===_t.LinearArrayBased&&this.tryMoveBucketLinearArrayBased(e)},this.tryMoveBucketRandomBST=e=>{const t=this.currentNode.value;null!=this.currentBucket&&(this.currentBucket.passed=e,Mt.sendBucket(this.currentBucket,e)),console.log("new  bucket is "+t.bucketID),a.PreloadBucket(t,this.app.GetDataURL()),this.initBucket(t)},this.tryMoveBucketLinearArrayBased=e=>{const t=this.buckets[this.currentLinearBucketIndex];console.log("New Bucket: "+t.bucketID),a.PreloadBucket(t,this.app.GetDataURL()),this.initBucket(t)},this.HasQuestionsLeft=()=>!this.currentBucket.passed&&(this.bucketGenMode===_t.LinearArrayBased?this.hasLinearQuestionsLeft():this.currentBucket.numCorrect>=4?this.handlePassedBucket():!(this.currentBucket.numConsecutiveWrong>=2||this.currentBucket.numTried>=5)||this.handleFailedBucket()),this.hasLinearQuestionsLeft=()=>!(this.currentLinearBucketIndex>=this.buckets.length&&this.currentLinearTargetIndex>=this.buckets[this.currentLinearBucketIndex].items.length),this.handlePassedBucket=()=>(console.log("Passed this bucket "+this.currentBucket.bucketID),this.currentBucket.bucketID>=this.numBuckets?this.passHighestBucket():this.moveUpToNextBucket()),this.handleFailedBucket=()=>(console.log("Failed this bucket "+this.currentBucket.bucketID),this.currentBucket.bucketID<this.basalBucket&&(this.basalBucket=this.currentBucket.bucketID),this.currentBucket.bucketID<=1?this.failLowestBucket():this.moveDownToPreviousBucket()),this.passHighestBucket=()=>(console.log("Passed highest bucket"),this.currentBucket.passed=!0,this.bucketGenMode===_t.RandomBST&&Mt.sendBucket(this.currentBucket,!0),l.ProgressChest(),!1),this.moveUpToNextBucket=()=>null==this.currentNode.right?(console.log("Reached root node"),this.currentBucket.passed=!0,this.bucketGenMode===_t.RandomBST&&Mt.sendBucket(this.currentBucket,!0),l.ProgressChest(),!1):(console.log("Moving to right node"),this.bucketGenMode===_t.RandomBST?this.currentNode=this.currentNode.right:this.currentLinearBucketIndex++,this.tryMoveBucket(!0),!0),this.failLowestBucket=()=>(console.log("Failed lowest bucket !"),this.currentBucket.passed=!1,this.bucketGenMode===_t.RandomBST&&Mt.sendBucket(this.currentBucket,!1),!1),this.moveDownToPreviousBucket=()=>(console.log("Moving down bucket !"),null==this.currentNode.left?(console.log("Reached root node !"),this.currentBucket.passed=!1,this.bucketGenMode===_t.RandomBST&&Mt.sendBucket(this.currentBucket,!1),!1):(console.log("Moving to left node"),this.bucketGenMode===_t.RandomBST?this.currentNode=this.currentNode.left:this.currentLinearBucketIndex++,this.tryMoveBucket(!1),!0)),this.dataURL=e,this.unityBridge=t,this.questionNumber=0,console.log("app initialized"),this.setupUIHandlers()}setupUIHandlers(){l.SetButtonPressAction(this.handleAnswerButtonPress),l.SetStartAction(this.startAssessment),l.SetExternalBucketControlsGenerationHandler(this.generateDevModeBucketControlsInContainer)}Run(e){this.app=e,this.buildBuckets(this.bucketGenMode).then((e=>{console.log(this.currentBucket),this.unityBridge.SendLoaded()}))}handleBucketGenModeChange(e){this.bucketGenMode=parseInt(this.devModeBucketGenSelect.value),this.buildBuckets(this.bucketGenMode).then((()=>{})),this.updateBucketInfo()}handleCorrectLabelShownChange(){l.getInstance().SetCorrectLabelVisibility(this.isCorrectLabelShown)}handleAnimationSpeedMultiplierChange(){l.getInstance().SetAnimationSpeedMultiplier(this.animationSpeedMultiplier)}handleBucketInfoShownChange(){this.updateBucketInfo()}handleBucketControlsShownChange(){l.getInstance().SetBucketControlsVisibility(this.isBucketControlsEnabled)}updateFeedbackAfterAnswer(e){(this.bucketGenMode===_t.LinearArrayBased&&l.getInstance().shownStarsCount<this.MAX_STARS_COUNT_IN_LINEAR_MODE||this.bucketGenMode===_t.RandomBST)&&l.AddStar(),l.SetFeedbackVisibile(!0,this.currentQuestion.answers[e-1].answerName==this.currentQuestion.correct)}updateCurrentBucketValuesAfterAnswering(e){this.currentBucket.numTried+=1,this.currentQuestion.answers[e-1].answerName==this.currentQuestion.correct?(this.currentBucket.numCorrect+=1,this.currentBucket.numConsecutiveWrong=0,console.log("Answered correctly")):(this.currentBucket.numConsecutiveWrong+=1,console.log("Answered incorrectly, "+this.currentBucket.numConsecutiveWrong))}onEnd(){Mt.sendFinished(this.buckets,this.basalBucket,this.ceilingBucket),l.ShowEnd(),this.app.unityBridge.SendClose()}}class Pt{constructor(){"undefined"!=typeof Unity?this.unityReference=Unity:this.unityReference=null}SendMessage(e){null!==this.unityReference&&this.unityReference.call(e)}SendLoaded(){null!==this.unityReference?this.unityReference.call("loaded"):console.log("would call Unity loaded now")}SendClose(){null!==this.unityReference?this.unityReference.call("close"):console.log("would close Unity now")}}pe("firebase","9.12.1","app");try{self["workbox:window:7.0.0"]&&_()}catch(Ft){}function Ft(e,t){return new Promise((function(n){var i=new MessageChannel;i.port1.onmessage=function(e){n(e.data)},e.postMessage(t,[i.port2])}))}function Ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Ot(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ut(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ut(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:7.0.0"]&&_()}catch(Ft){}var jt=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};function Vt(e,t){var n=location.href;return new URL(e,n).href===new URL(t,n).href}var $t=function(e,t){this.type=e,Object.assign(this,t)};function Ht(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function qt(){}var Gt={type:"SKIP_WAITING"};function Wt(e,t){if(!t)return e&&e.then?e.then(qt):Promise.resolve()}var zt=function(e){var t,n;function i(t,n){var i,s;return void 0===n&&(n={}),(i=e.call(this)||this).nn={},i.tn=0,i.rn=new jt,i.en=new jt,i.on=new jt,i.un=0,i.an=new Set,i.cn=function(){var e=i.fn,t=e.installing;i.tn>0||!Vt(t.scriptURL,i.sn.toString())||performance.now()>i.un+6e4?(i.vn=t,e.removeEventListener("updatefound",i.cn)):(i.hn=t,i.an.add(t),i.rn.resolve(t)),++i.tn,t.addEventListener("statechange",i.ln)},i.ln=function(e){var t=i.fn,n=e.target,s=n.state,o=n===i.vn,a={sw:n,isExternal:o,originalEvent:e};!o&&i.mn&&(a.isUpdate=!0),i.dispatchEvent(new $t(s,a)),"installed"===s?i.wn=self.setTimeout((function(){"installed"===s&&t.waiting===n&&i.dispatchEvent(new $t("waiting",a))}),200):"activating"===s&&(clearTimeout(i.wn),o||i.en.resolve(n))},i.dn=function(e){var t=i.hn,n=t!==navigator.serviceWorker.controller;i.dispatchEvent(new $t("controlling",{isExternal:n,originalEvent:e,sw:t,isUpdate:i.mn})),n||i.on.resolve(t)},i.gn=(s=function(e){var t=e.data,n=e.ports,s=e.source;return Ht(i.getSW(),(function(){i.an.has(s)&&i.dispatchEvent(new $t("message",{data:t,originalEvent:e,ports:n,sw:s}))}))},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(s.apply(this,e))}catch(e){return Promise.reject(e)}}),i.sn=t,i.nn=n,navigator.serviceWorker.addEventListener("message",i.gn),i}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s,o=i.prototype;return o.register=function(e){var t=(void 0===e?{}:e).immediate,n=void 0!==t&&t;try{var i=this;return function(e,t){var n=e();return n&&n.then?n.then(t):t()}((function(){if(!n&&"complete"!==document.readyState)return Wt(new Promise((function(e){return window.addEventListener("load",e)})))}),(function(){return i.mn=Boolean(navigator.serviceWorker.controller),i.yn=i.pn(),Ht(i.bn(),(function(e){i.fn=e,i.yn&&(i.hn=i.yn,i.en.resolve(i.yn),i.on.resolve(i.yn),i.yn.addEventListener("statechange",i.ln,{once:!0}));var t=i.fn.waiting;return t&&Vt(t.scriptURL,i.sn.toString())&&(i.hn=t,Promise.resolve().then((function(){i.dispatchEvent(new $t("waiting",{sw:t,wasWaitingBeforeRegister:!0}))})).then((function(){}))),i.hn&&(i.rn.resolve(i.hn),i.an.add(i.hn)),i.fn.addEventListener("updatefound",i.cn),navigator.serviceWorker.addEventListener("controllerchange",i.dn),i.fn}))}))}catch(e){return Promise.reject(e)}},o.update=function(){try{return this.fn?Wt(this.fn.update()):void 0}catch(e){return Promise.reject(e)}},o.getSW=function(){return void 0!==this.hn?Promise.resolve(this.hn):this.rn.promise},o.messageSW=function(e){try{return Ht(this.getSW(),(function(t){return Ft(t,e)}))}catch(e){return Promise.reject(e)}},o.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&Ft(this.fn.waiting,Gt)},o.pn=function(){var e=navigator.serviceWorker.controller;return e&&Vt(e.scriptURL,this.sn.toString())?e:void 0},o.bn=function(){try{var e=this;return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return Ht(navigator.serviceWorker.register(e.sn,e.nn),(function(t){return e.un=performance.now(),t}))}),(function(e){throw e}))}catch(e){return Promise.reject(e)}},(s=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(i.prototype,s),i}(function(){function e(){this.Pn=new Map}var t=e.prototype;return t.addEventListener=function(e,t){this.Sn(e).add(t)},t.removeEventListener=function(e,t){this.Sn(e).delete(t)},t.dispatchEvent=function(e){e.target=this;for(var t,n=Ot(this.Sn(e.type));!(t=n()).done;)(0,t.value)(e)},t.Sn=function(e){return this.Pn.has(e)||this.Pn.set(e,new Set),this.Pn.get(e)},e}());var Qt=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function r(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}c((i=i.apply(e,t||[])).next())}))};let Kt="",Jt=document.getElementById("loadingScreen");const Xt=document.getElementById("progressBar"),Yt=new BroadcastChannel("as-message-channel");function Zt(e){"Loading"==e.data.msg&&function(e,t){t<40&&t>=10?Xt.style.width=t+"%":t>=100&&(Xt.style.width="100%",setTimeout((()=>{Jt.style.display="none"}),1500),l.SetContentLoaded(!0),localStorage.setItem(e.data.data.bookName,"true"),function(e){if(window.Android){let t=null!==localStorage.getItem(e);window.Android.cachedStatus(t)}}(e.data.data.bookName))}(e,parseInt(e.data.data.progress)),"UpdateFound"==e.data.msg&&(console.log(">>>>>>>>>>>>>>>>>>>>>>>>>>.,update Found"),en())}function en(){let e="Update Found.\nPlease accept the update by pressing Ok.";1==confirm(e)?window.location.reload():e="Update will happen on the next launch."}Yt.addEventListener("message",Zt);const tn=new class{constructor(){this.lang="english",this.unityBridge=new Pt,console.log("Initializing app..."),this.dataURL=t(),this.cacheModel=new class{constructor(e,t,n){this.appName=e,this.contentFilePath=t,this.audioVisualResources=n}setAppName(e){this.appName=e}setContentFilePath(e){this.contentFilePath=e}setAudioVisualResources(e){this.audioVisualResources=e}addItemToAudioVisualResources(e){this.audioVisualResources.has(e)||this.audioVisualResources.add(e)}}(this.dataURL,this.dataURL,new Set);const e=function(e=function(e="[DEFAULT]"){const t=oe.get(e);if(!t&&e===ie)return he();if(!t)throw ue.create("no-app",{appName:e});return t}()){const t=le(e=B(e),it);return t.isInitialized()?t.getImmediate():function(e,t={}){const n=le(e,it);if(n.isInitialized()){const e=n.getImmediate();if(y(t,n.getOptions()))return e;throw rt.create("already-initialized")}return n.initialize({options:t})}(e)}(he({apiKey:"AIzaSyB8c2lBVi26u7YRL9sxOP97Uaq3yN8hTl4",authDomain:"ftm-b9d99.firebaseapp.com",databaseURL:"https://ftm-b9d99.firebaseio.com",projectId:"ftm-b9d99",storageBucket:"ftm-b9d99.appspot.com",messagingSenderId:"602402387941",appId:"1:602402387941:web:7b1b1181864d28b49de10c",measurementId:"G-FF1159TGCF"}));this.analytics=e,Ct(e,"notification_received"),Ct(e,"test initialization event",{}),console.log("firebase initialized")}spinUp(){return Qt(this,void 0,void 0,(function*(){window.addEventListener("load",(()=>{console.log("Window Loaded!"),(()=>{Qt(this,void 0,void 0,(function*(){yield function(e){return i(this,void 0,void 0,(function*(){return o(e).then((e=>e))}))}(this.dataURL).then((e=>{console.log("Assessment/Survey v1.1.1 initializing!"),console.log("App data loaded!"),console.log(e),this.cacheModel.setContentFilePath(s(this.dataURL)),l.SetFeedbackText(e.feedbackText);let t=e.appType,i=e.assessmentType;if("survey"==t)this.game=new Tt(this.dataURL,this.unityBridge);else if("assessment"==t){let t=e.buckets;for(let n=0;n<t.length;n++)for(let i=0;i<t[n].items.length;i++){let s;s=e.quizName.includes("Luganda")||e.quizName.toLowerCase().includes("west african english")?"/audio/"+this.dataURL+"/"+t[n].items[i].itemName.toLowerCase().trim()+".mp3":"/audio/"+this.dataURL+"/"+t[n].items[i].itemName.trim()+".mp3",this.cacheModel.addItemToAudioVisualResources(s)}this.cacheModel.addItemToAudioVisualResources("/audio/"+this.dataURL+"/answer_feedback.mp3"),this.game=new Nt(this.dataURL,this.unityBridge)}var o;this.game.unityBridge=this.unityBridge,Mt.setUuid((null==(o=n().get("cr_user_id"))&&(console.log("no uuid provided"),o="WebUserNoID"),o),function(){var e=n().get("userSource");return null==e&&(console.log("no user source provided"),e="WebUserNoSource"),e}()),Mt.linkAnalytics(this.analytics,this.dataURL),Mt.setAssessmentType(i),Kt=e.contentVersion,Mt.sendInit("v1.1.1",e.contentVersion),this.game.Run(this)})),yield this.registerServiceWorker(this.game,this.dataURL)}))})()}))}))}registerServiceWorker(e,t=""){return Qt(this,void 0,void 0,(function*(){console.log("Registering service worker..."),"serviceWorker"in navigator?(new zt("./sw.js",{}).register().then((e=>{console.log("Service worker registered!"),this.handleServiceWorkerRegistation(e)})).catch((e=>{console.log("Service worker registration failed: "+e)})),navigator.serviceWorker.addEventListener("message",Zt),yield navigator.serviceWorker.ready,console.log("Cache Model: "),console.log(this.cacheModel),console.log("Checking for content version updates..."+t),fetch(this.cacheModel.contentFilePath+"?cache-bust="+(new Date).getTime(),{method:"GET",headers:{"Content-Type":"application/json","Cache-Control":"no-store"},cache:"no-store"}).then((e=>Qt(this,void 0,void 0,(function*(){if(!e.ok)return void console.error("Failed to fetch the content file from the server!");const t=(yield e.json()).contentVersion;console.log("No Cache Content version: "+t),t&&Kt!=t&&(console.log("Content version mismatch! Reloading..."),localStorage.removeItem(this.cacheModel.appName),caches.delete(this.cacheModel.appName),en())})))).catch((e=>{console.error("Error fetching the content file: "+e)})),null==localStorage.getItem(this.cacheModel.appName)?(console.log("Caching!"+this.cacheModel.appName),Jt.style.display="flex",Yt.postMessage({command:"Cache",data:{appData:this.cacheModel}})):(Xt.style.width="100%",setTimeout((()=>{Jt.style.display="none"}),1500)),Yt.onmessage=e=>{console.log(e.data.command+" received from service worker!"),"Activated"==e.data.command&&null==localStorage.getItem(this.cacheModel.appName)&&Yt.postMessage({command:"Cache",data:{appData:this.cacheModel}})}):console.warn("Service workers are not supported in this browser.")}))}handleServiceWorkerRegistation(e){var t;try{null===(t=null==e?void 0:e.installing)||void 0===t||t.postMessage({type:"Registartion",value:this.lang})}catch(e){console.log("Service worker registration failed: "+e)}}GetDataURL(){return this.dataURL}};tn.spinUp()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0pncUMsUUFBU25wQyxLQUFLZ25DLGdCQUlsQmpCLEdBQWFuOEIsTUFBTXM4QixNQUFRLE9BQzNCbjhCLFlBQVcsS0FDVCs3QixHQUFlbDhCLE1BQU1tQixRQUFVLE1BQU0sR0FDcEMsT0FHTCxHQUFpQm9kLFVBQWFwSixJQUM1QnhmLFFBQVFDLElBQUl1ZixFQUFNNWYsS0FBS295QixRQUFVLGtDQUVULGFBQXRCeFMsRUFBTTVmLEtBQUtveUIsU0FDc0MsTUFBakRyb0IsYUFBYUMsUUFBUW5KLEtBQUtnbkMsV0FBV25sQixVQUVyQyxHQUFpQnVHLFlBQVksQ0FDM0JtSixRQUFTLFFBQ1RweUIsS0FBTSxDQUNKZ3FDLFFBQVNucEMsS0FBS2duQyxnQkFNdEJ6bkMsUUFBUTBFLEtBQUsscURBRWpCLElBRUEya0MsK0JBQ0VELFNBRUEsSUFDMEIsUUFBeEIsRUFBQUEsYUFBWSxFQUFaQSxFQUFjdkYsa0JBQVUsU0FBRWhiLFlBQVksQ0FDcENuUyxLQUFNLGVBQ05wSSxNQUFPN04sS0FBSzIwQixPQUVkLE1BQU81RCxHQUNQeHhCLFFBQVFDLElBQUksdUNBQXlDdXhCLEdBRXpELENBRU9rTCxhQUNMLE9BQU9qOEIsS0FBS2dCLE9BQ2QsR0FtREYyZixHQUFJb25CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9zcmMvY29tcG9uZW50cy91cmxVdGlscy50cyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vc3JjL2NvbXBvbmVudHMvanNvblV0aWxzLnRzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vc3JjL2NvbXBvbmVudHMvYXVkaW9Db250cm9sbGVyLnRzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vc3JjL2NvbXBvbmVudHMvbWF0aFV0aWxzLnRzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vc3JjL2NvbXBvbmVudHMvdWlDb250cm9sbGVyLnRzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS91dGlsL2Rpc3QvaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvY29tcG9uZW50L2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2xvZ2dlci9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vbm9kZV9tb2R1bGVzL2lkYi9idWlsZC93cmFwLWlkYi12YWx1ZS5qcyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL25vZGVfbW9kdWxlcy9pZGIvYnVpbGQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2FwcC9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9pbnN0YWxsYXRpb25zL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2FuYWx5dGljcy9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vc3JjL2NvbXBvbmVudHMvYW5hbHl0aWNzRXZlbnRzLnRzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vc3JjL2Jhc2VRdWl6LnRzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vc3JjL3N1cnZleS9zdXJ2ZXkudHMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9zcmMvY29tcG9uZW50cy90Tm9kZS50cyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL3NyYy9hc3Nlc3NtZW50L2Fzc2Vzc21lbnQudHMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9zcmMvY29tcG9uZW50cy91bml0eUJyaWRnZS50cyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL25vZGVfbW9kdWxlcy9maXJlYmFzZS9hcHAvZGlzdC9pbmRleC5lc20uanMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9ub2RlX21vZHVsZXMvd29ya2JveC13aW5kb3cvYnVpbGQvd29ya2JveC13aW5kb3cucHJvZC5lczUubWpzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vc3JjL0FwcC50cyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL3NyYy9jb21wb25lbnRzL2NhY2hlTW9kZWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8qKlxuICogQ29udGFpbnMgdXRpbHMgZm9yIHdvcmtpbmcgd2l0aCBVUkwgc3RyaW5ncy5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXBwVHlwZSgpOiBzdHJpbmcge1xuICBjb25zdCBwYXRoUGFyYW1zID0gZ2V0UGF0aE5hbWUoKTtcbiAgY29uc3QgYXBwVHlwZSA9IHBhdGhQYXJhbXMuZ2V0KCdhcHBUeXBlJyk7XG4gIHJldHVybiBhcHBUeXBlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VVVJRCgpOiBzdHJpbmcge1xuICBjb25zdCBwYXRoUGFyYW1zID0gZ2V0UGF0aE5hbWUoKTtcbiAgdmFyIG51dWlkID0gcGF0aFBhcmFtcy5nZXQoJ2NyX3VzZXJfaWQnKTtcbiAgaWYgKG51dWlkID09IHVuZGVmaW5lZCkge1xuICAgIGNvbnNvbGUubG9nKCdubyB1dWlkIHByb3ZpZGVkJyk7XG4gICAgbnV1aWQgPSAnV2ViVXNlck5vSUQnO1xuICB9XG4gIHJldHVybiBudXVpZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFVzZXJTb3VyY2UoKTogc3RyaW5nIHtcbiAgY29uc3QgcGF0aFBhcmFtcyA9IGdldFBhdGhOYW1lKCk7XG4gIHZhciBudXVpZCA9IHBhdGhQYXJhbXMuZ2V0KCd1c2VyU291cmNlJyk7XG4gIGlmIChudXVpZCA9PSB1bmRlZmluZWQpIHtcbiAgICBjb25zb2xlLmxvZygnbm8gdXNlciBzb3VyY2UgcHJvdmlkZWQnKTtcbiAgICBudXVpZCA9ICdXZWJVc2VyTm9Tb3VyY2UnO1xuICB9XG4gIHJldHVybiBudXVpZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldERhdGFGaWxlKCk6IHN0cmluZyB7XG4gIGNvbnN0IHBhdGhQYXJhbXMgPSBnZXRQYXRoTmFtZSgpO1xuICB2YXIgZGF0YSA9IHBhdGhQYXJhbXMuZ2V0KCdkYXRhJyk7XG4gIGlmIChkYXRhID09IHVuZGVmaW5lZCkge1xuICAgIGNvbnNvbGUubG9nKCdkZWZhdWx0IGRhdGEgZmlsZScpO1xuICAgIGRhdGEgPSAnenVsdS1sZXR0ZXJzb3VuZHMnO1xuICAgIC8vZGF0YSA9IFwic3VydmV5LXp1bHVcIjtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn1cblxuZnVuY3Rpb24gZ2V0UGF0aE5hbWUoKSB7XG4gIGNvbnN0IHF1ZXJ5U3RyaW5nID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaDtcbiAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhxdWVyeVN0cmluZyk7XG4gIHJldHVybiB1cmxQYXJhbXM7XG59XG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIi8qKiBKc29uIFV0aWxzICovXG5cbi8vIGltcG9ydCB7IHNldEZlZWRiYWNrVGV4dCB9IGZyb20gJy4vdWlDb250cm9sbGVyJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoQXBwRGF0YSh1cmw6IHN0cmluZykge1xuICByZXR1cm4gbG9hZERhdGEodXJsKS50aGVuKChkYXRhKSA9PiB7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH0pO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hBcHBUeXBlKHVybDogc3RyaW5nKSB7XG4gIHJldHVybiBsb2FkRGF0YSh1cmwpLnRoZW4oKGRhdGEpID0+IHtcbiAgICAvLyBzZXRGZWVkYmFja1RleHQoZGF0YVtcImZlZWRiYWNrVGV4dFwiXSk7XG4gICAgcmV0dXJuIGRhdGFbJ2FwcFR5cGUnXTtcbiAgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaEZlZWRiYWNrKHVybDogc3RyaW5nKSB7XG4gIHJldHVybiBsb2FkRGF0YSh1cmwpLnRoZW4oKGRhdGEpID0+IHtcbiAgICByZXR1cm4gZGF0YVsnZmVlZGJhY2tUZXh0J107XG4gIH0pO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hTdXJ2ZXlRdWVzdGlvbnModXJsOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGxvYWREYXRhKHVybCkudGhlbigoZGF0YSkgPT4ge1xuICAgIHJldHVybiBkYXRhWydxdWVzdGlvbnMnXTtcbiAgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaEFzc2Vzc21lbnRCdWNrZXRzKHVybDogc3RyaW5nKSB7XG4gIHJldHVybiBsb2FkRGF0YSh1cmwpLnRoZW4oKGRhdGEpID0+IHtcbiAgICByZXR1cm4gZGF0YVsnYnVja2V0cyddO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldERhdGFVUkwodXJsOiBzdHJpbmcpIHtcbiAgcmV0dXJuICcvZGF0YS8nICsgdXJsICsgJy5qc29uJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENhc2VJbmRlcGVuZGVudExhbmdMaXN0KCkge1xuICByZXR1cm4gWydsdWdhbmRhJ107XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxvYWREYXRhKHVybDogc3RyaW5nKSB7XG4gIHZhciBmdXJsID0gZ2V0RGF0YVVSTCh1cmwpO1xuICAvLyBjb25zb2xlLmxvZyhmdXJsKTtcbiAgcmV0dXJuIGZldGNoKGZ1cmwpLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5qc29uKCkpO1xufVxuIiwiLy9jb2RlIGZvciBsb2FkaW5nIGF1ZGlvc1xuXG5pbXBvcnQgeyBxRGF0YSB9IGZyb20gJy4vcXVlc3Rpb25EYXRhJztcbmltcG9ydCB7IGJ1Y2tldCwgYnVja2V0SXRlbSB9IGZyb20gJy4uL2Fzc2Vzc21lbnQvYnVja2V0RGF0YSc7XG5pbXBvcnQgeyBnZXRDYXNlSW5kZXBlbmRlbnRMYW5nTGlzdCB9IGZyb20gJy4vanNvblV0aWxzJztcblxuZXhwb3J0IGNsYXNzIEF1ZGlvQ29udHJvbGxlciB7XG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBBdWRpb0NvbnRyb2xsZXIgfCBudWxsID0gbnVsbDtcblxuICBwdWJsaWMgaW1hZ2VUb0NhY2hlOiBzdHJpbmdbXSA9IFtdO1xuICBwdWJsaWMgd2F2VG9DYWNoZTogc3RyaW5nW10gPSBbXTtcblxuICBwdWJsaWMgYWxsQXVkaW9zOiBhbnkgPSB7fTtcbiAgcHVibGljIGFsbEltYWdlczogYW55ID0ge307XG4gIHB1YmxpYyBkYXRhVVJMOiBzdHJpbmcgPSAnJztcblxuICBwcml2YXRlIGNvcnJlY3RTb3VuZFBhdGggPSAnZGlzdC9hdWRpby9Db3JyZWN0Lndhdic7XG5cbiAgcHJpdmF0ZSBmZWVkYmFja0F1ZGlvOiBhbnkgPSBudWxsO1xuICBwcml2YXRlIGNvcnJlY3RBdWRpbzogYW55ID0gbnVsbDtcblxuICBwcml2YXRlIGluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5mZWVkYmFja0F1ZGlvID0gbmV3IEF1ZGlvKCk7XG4gICAgdGhpcy5mZWVkYmFja0F1ZGlvLnNyYyA9IHRoaXMuY29ycmVjdFNvdW5kUGF0aDtcbiAgICB0aGlzLmNvcnJlY3RBdWRpbyA9IG5ldyBBdWRpbygpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBQcmVwYXJlQXVkaW9BbmRJbWFnZXNGb3JTdXJ2ZXkoXG4gICAgcXVlc3Rpb25zRGF0YTogcURhdGFbXSxcbiAgICBkYXRhVVJMOiBzdHJpbmdcbiAgKTogdm9pZCB7XG4gICAgQXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuZGF0YVVSTCA9IGRhdGFVUkw7XG4gICAgY29uc3QgZmVlZGJhY2tTb3VuZFBhdGggPVxuICAgICAgJ2F1ZGlvLycgKyBBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5kYXRhVVJMICsgJy9hbnN3ZXJfZmVlZGJhY2subXAzJztcblxuICAgIEF1ZGlvQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLndhdlRvQ2FjaGUucHVzaChmZWVkYmFja1NvdW5kUGF0aCk7XG4gICAgQXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuY29ycmVjdEF1ZGlvLnNyYyA9IGZlZWRiYWNrU291bmRQYXRoO1xuXG4gICAgZm9yICh2YXIgcXVlc3Rpb25JbmRleCBpbiBxdWVzdGlvbnNEYXRhKSB7XG4gICAgICBsZXQgcXVlc3Rpb25EYXRhID0gcXVlc3Rpb25zRGF0YVtxdWVzdGlvbkluZGV4XTtcbiAgICAgIGlmIChxdWVzdGlvbkRhdGEucHJvbXB0QXVkaW8gIT0gbnVsbCkge1xuICAgICAgICBBdWRpb0NvbnRyb2xsZXIuRmlsdGVyQW5kQWRkQXVkaW9Ub0FsbEF1ZGlvcyhcbiAgICAgICAgICBxdWVzdGlvbkRhdGEucHJvbXB0QXVkaW8udG9Mb3dlckNhc2UoKVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBpZiAocXVlc3Rpb25EYXRhLnByb21wdEltZyAhPSBudWxsKSB7XG4gICAgICAgIEF1ZGlvQ29udHJvbGxlci5BZGRJbWFnZVRvQWxsSW1hZ2VzKHF1ZXN0aW9uRGF0YS5wcm9tcHRJbWcpO1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBhbnN3ZXJJbmRleCBpbiBxdWVzdGlvbkRhdGEuYW5zd2Vycykge1xuICAgICAgICBsZXQgYW5zd2VyRGF0YSA9IHF1ZXN0aW9uRGF0YS5hbnN3ZXJzW2Fuc3dlckluZGV4XTtcbiAgICAgICAgaWYgKGFuc3dlckRhdGEuYW5zd2VySW1nICE9IG51bGwpIHtcbiAgICAgICAgICBBdWRpb0NvbnRyb2xsZXIuQWRkSW1hZ2VUb0FsbEltYWdlcyhhbnN3ZXJEYXRhLmFuc3dlckltZyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc29sZS5sb2coQXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuYWxsQXVkaW9zKTtcbiAgICBjb25zb2xlLmxvZyhBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5hbGxJbWFnZXMpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBBZGRJbWFnZVRvQWxsSW1hZ2VzKG5ld0ltYWdlVVJMOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygnQWRkIGltYWdlOiAnICsgbmV3SW1hZ2VVUkwpO1xuICAgIGxldCBuZXdJbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgIG5ld0ltYWdlLnNyYyA9IG5ld0ltYWdlVVJMO1xuICAgIEF1ZGlvQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmFsbEltYWdlc1tuZXdJbWFnZVVSTF0gPSBuZXdJbWFnZTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgRmlsdGVyQW5kQWRkQXVkaW9Ub0FsbEF1ZGlvcyhuZXdBdWRpb1VSTDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ0FkZGluZyBhdWRpbzogJyArIG5ld0F1ZGlvVVJMKTtcbiAgICBpZiAobmV3QXVkaW9VUkwuaW5jbHVkZXMoJy53YXYnKSkge1xuICAgICAgbmV3QXVkaW9VUkwgPSBuZXdBdWRpb1VSTC5yZXBsYWNlKCcud2F2JywgJy5tcDMnKTtcbiAgICB9IGVsc2UgaWYgKG5ld0F1ZGlvVVJMLmluY2x1ZGVzKCcubXAzJykpIHtcbiAgICAgIC8vIEFscmVhZHkgY29udGFpbnMgLm1wMyBub3QgZG9pbmcgYW55dGhpbmdcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3QXVkaW9VUkwgPSBuZXdBdWRpb1VSTC50cmltKCkgKyAnLm1wMyc7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ0ZpbHRlcmVkOiAnICsgbmV3QXVkaW9VUkwpO1xuXG4gICAgbGV0IG5ld0F1ZGlvID0gbmV3IEF1ZGlvKCk7XG4gICAgaWYgKFxuICAgICAgZ2V0Q2FzZUluZGVwZW5kZW50TGFuZ0xpc3QoKS5pbmNsdWRlcyhcbiAgICAgICAgQXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuZGF0YVVSTC5zcGxpdCgnLScpWzBdXG4gICAgICApXG4gICAgKSB7XG4gICAgICBuZXdBdWRpby5zcmMgPVxuICAgICAgICAnYXVkaW8vJyArIEF1ZGlvQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmRhdGFVUkwgKyAnLycgKyBuZXdBdWRpb1VSTDtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3QXVkaW8uc3JjID1cbiAgICAgICAgJ2F1ZGlvLycgKyBBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5kYXRhVVJMICsgJy8nICsgbmV3QXVkaW9VUkw7XG4gICAgfVxuXG4gICAgQXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuYWxsQXVkaW9zW25ld0F1ZGlvVVJMXSA9IG5ld0F1ZGlvO1xuXG4gICAgY29uc29sZS5sb2cobmV3QXVkaW8uc3JjKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgUHJlbG9hZEJ1Y2tldChuZXdCdWNrZXQ6IGJ1Y2tldCwgZGF0YVVSTCkge1xuICAgIEF1ZGlvQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmRhdGFVUkwgPSBkYXRhVVJMO1xuICAgIEF1ZGlvQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmNvcnJlY3RBdWRpby5zcmMgPVxuICAgICAgJ2F1ZGlvLycgKyBBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5kYXRhVVJMICsgJy9hbnN3ZXJfZmVlZGJhY2subXAzJztcbiAgICBmb3IgKHZhciBpdGVtSW5kZXggaW4gbmV3QnVja2V0Lml0ZW1zKSB7XG4gICAgICB2YXIgaXRlbSA9IG5ld0J1Y2tldC5pdGVtc1tpdGVtSW5kZXhdO1xuICAgICAgQXVkaW9Db250cm9sbGVyLkZpbHRlckFuZEFkZEF1ZGlvVG9BbGxBdWRpb3MoaXRlbS5pdGVtTmFtZS50b0xvd2VyQ2FzZSgpKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIFBsYXlBdWRpbyhcbiAgICBhdWRpb05hbWU6IHN0cmluZyxcbiAgICBmaW5pc2hlZENhbGxiYWNrPzogRnVuY3Rpb24sXG4gICAgYXVkaW9BbmltPzogRnVuY3Rpb25cbiAgKTogdm9pZCB7XG4gICAgYXVkaW9OYW1lID0gYXVkaW9OYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc29sZS5sb2coJ3RyeWluZyB0byBwbGF5ICcgKyBhdWRpb05hbWUpO1xuICAgIGlmIChhdWRpb05hbWUuaW5jbHVkZXMoJy5tcDMnKSkge1xuICAgICAgaWYgKGF1ZGlvTmFtZS5zbGljZSgtNCkgIT0gJy5tcDMnKSB7XG4gICAgICAgIGF1ZGlvTmFtZSA9IGF1ZGlvTmFtZS50cmltKCkgKyAnLm1wMyc7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGF1ZGlvTmFtZSA9IGF1ZGlvTmFtZS50cmltKCkgKyAnLm1wMyc7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1ByZSBwbGF5IGFsbCBhdWRpb3M6ICcpO1xuICAgIGNvbnNvbGUubG9nKEF1ZGlvQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmFsbEF1ZGlvcyk7XG5cbiAgICBjb25zdCBwbGF5UHJvbWlzZSA9IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IGF1ZGlvID0gQXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuYWxsQXVkaW9zW2F1ZGlvTmFtZV07XG4gICAgICBpZiAoYXVkaW8pIHtcbiAgICAgICAgYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcigncGxheScsICgpID0+IHtcbiAgICAgICAgICB0eXBlb2YgYXVkaW9BbmltICE9PSAndW5kZWZpbmVkJyA/IGF1ZGlvQW5pbSh0cnVlKSA6IG51bGw7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgKCkgPT4ge1xuICAgICAgICAgIHR5cGVvZiBhdWRpb0FuaW0gIT09ICd1bmRlZmluZWQnID8gYXVkaW9BbmltKGZhbHNlKSA6IG51bGw7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBhdWRpby5wbGF5KCkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcGxheWluZyBhdWRpbzonLCBlcnJvcik7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUud2FybignQXVkaW8gZmlsZSBub3QgZm91bmQ6JywgYXVkaW9OYW1lKTtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcGxheVByb21pc2VcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgdHlwZW9mIGZpbmlzaGVkQ2FsbGJhY2sgIT09ICd1bmRlZmluZWQnID8gZmluaXNoZWRDYWxsYmFjaygpIDogbnVsbDtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1Byb21pc2UgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgfSk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIEdldEltYWdlKGltYWdlTmFtZTogc3RyaW5nKTogYW55IHtcbiAgICByZXR1cm4gQXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuYWxsSW1hZ2VzW2ltYWdlTmFtZV07XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIFBsYXlEaW5nKCk6IHZvaWQge1xuICAgIEF1ZGlvQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmZlZWRiYWNrQXVkaW8ucGxheSgpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBQbGF5Q29ycmVjdCgpOiB2b2lkIHtcbiAgICBBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5jb3JyZWN0QXVkaW8ucGxheSgpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBBdWRpb0NvbnRyb2xsZXIge1xuICAgIGlmIChBdWRpb0NvbnRyb2xsZXIuaW5zdGFuY2UgPT0gbnVsbCkge1xuICAgICAgQXVkaW9Db250cm9sbGVyLmluc3RhbmNlID0gbmV3IEF1ZGlvQ29udHJvbGxlcigpO1xuICAgICAgQXVkaW9Db250cm9sbGVyLmluc3RhbmNlLmluaXQoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gQXVkaW9Db250cm9sbGVyLmluc3RhbmNlO1xuICB9XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gcmFuZEZyb20oYXJyYXkpIHtcbiAgcmV0dXJuIGFycmF5W01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGFycmF5Lmxlbmd0aCldO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2h1ZmZsZUFycmF5KGFycmF5KSB7XG4gIGZvciAobGV0IGkgPSBhcnJheS5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7XG4gICAgY29uc3QgaiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpICsgMSkpO1xuICAgIFthcnJheVtpXSwgYXJyYXlbal1dID0gW2FycmF5W2pdLCBhcnJheVtpXV07XG4gIH1cbn1cbiIsImltcG9ydCB7IHFEYXRhLCBhbnN3ZXJEYXRhIH0gZnJvbSAnLi9xdWVzdGlvbkRhdGEnO1xuaW1wb3J0IHsgQXVkaW9Db250cm9sbGVyIH0gZnJvbSAnLi9hdWRpb0NvbnRyb2xsZXInO1xuaW1wb3J0IHsgcmFuZEZyb20sIHNodWZmbGVBcnJheSB9IGZyb20gJy4vbWF0aFV0aWxzJztcbmltcG9ydCB7IGdldERhdGFGaWxlIH0gZnJvbSAnLi91cmxVdGlscyc7XG5cbmV4cG9ydCBjbGFzcyBVSUNvbnRyb2xsZXIge1xuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogVUlDb250cm9sbGVyIHwgbnVsbCA9IG51bGw7XG5cbiAgcHJpdmF0ZSBsYW5kaW5nQ29udGFpbmVySWQgPSAnbGFuZFdyYXAnO1xuICBwdWJsaWMgbGFuZGluZ0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG5cbiAgcHJpdmF0ZSBnYW1lQ29udGFpbmVySWQgPSAnZ2FtZVdyYXAnO1xuICBwdWJsaWMgZ2FtZUNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG5cbiAgcHJpdmF0ZSBlbmRDb250YWluZXJJZCA9ICdlbmRXcmFwJztcbiAgcHVibGljIGVuZENvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG5cbiAgcHJpdmF0ZSBzdGFyQ29udGFpbmVySWQgPSAnc3RhcldyYXBwZXInO1xuICBwdWJsaWMgc3RhckNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG5cbiAgcHJpdmF0ZSBjaGVzdENvbnRhaW5lcklkID0gJ2NoZXN0V3JhcHBlcic7XG4gIHB1YmxpYyBjaGVzdENvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG5cbiAgcHJpdmF0ZSBxdWVzdGlvbnNDb250YWluZXJJZCA9ICdxV3JhcCc7XG4gIHB1YmxpYyBxdWVzdGlvbnNDb250YWluZXI6IEhUTUxFbGVtZW50O1xuXG4gIHByaXZhdGUgZmVlZGJhY2tDb250YWluZXJJZCA9ICdmZWVkYmFja1dyYXAnO1xuICBwdWJsaWMgZmVlZGJhY2tDb250YWluZXI6IEhUTUxFbGVtZW50O1xuXG4gIHByaXZhdGUgYW5zd2Vyc0NvbnRhaW5lcklkID0gJ2FXcmFwJztcbiAgcHVibGljIGFuc3dlcnNDb250YWluZXI6IEhUTUxFbGVtZW50O1xuXG4gIHByaXZhdGUgYW5zd2VyQnV0dG9uMUlkID0gJ2Fuc3dlckJ1dHRvbjEnO1xuICBwcml2YXRlIGFuc3dlckJ1dHRvbjE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGFuc3dlckJ1dHRvbjJJZCA9ICdhbnN3ZXJCdXR0b24yJztcbiAgcHJpdmF0ZSBhbnN3ZXJCdXR0b24yOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBhbnN3ZXJCdXR0b24zSWQgPSAnYW5zd2VyQnV0dG9uMyc7XG4gIHByaXZhdGUgYW5zd2VyQnV0dG9uMzogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgYW5zd2VyQnV0dG9uNElkID0gJ2Fuc3dlckJ1dHRvbjQnO1xuICBwcml2YXRlIGFuc3dlckJ1dHRvbjQ6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGFuc3dlckJ1dHRvbjVJZCA9ICdhbnN3ZXJCdXR0b241JztcbiAgcHJpdmF0ZSBhbnN3ZXJCdXR0b241OiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBhbnN3ZXJCdXR0b242SWQgPSAnYW5zd2VyQnV0dG9uNic7XG4gIHByaXZhdGUgYW5zd2VyQnV0dG9uNjogSFRNTEVsZW1lbnQ7XG5cbiAgcHJpdmF0ZSBwbGF5QnV0dG9uSWQgPSAncGJ1dHRvbic7XG4gIHByaXZhdGUgcGxheUJ1dHRvbjogSFRNTEVsZW1lbnQ7XG5cbiAgcHJpdmF0ZSBjaGVzdEltZ0lkID0gJ2NoZXN0SW1hZ2UnO1xuICBwcml2YXRlIGNoZXN0SW1nOiBIVE1MRWxlbWVudDtcblxuICBwdWJsaWMgbmV4dFF1ZXN0aW9uID0gbnVsbDtcblxuICBwcml2YXRlIGNvbnRlbnRMb2FkZWQgPSBmYWxzZTtcblxuICBwdWJsaWMgcVN0YXJ0O1xuICBwdWJsaWMgc2hvd24gPSBmYWxzZTtcblxuICBwdWJsaWMgc3RhcnMgPSBbXTtcbiAgcHVibGljIHNob3duU3RhcnNDb3VudCA9IDA7XG4gIHB1YmxpYyBzdGFyUG9zaXRpb25zOiBBcnJheTx7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0+ID0gQXJyYXk8e1xuICAgIHg6IG51bWJlcjtcbiAgICB5OiBudW1iZXI7XG4gIH0+KCk7XG4gIHB1YmxpYyBxQW5zTnVtID0gMDtcblxuICBwdWJsaWMgYWxsU3RhcnQ6IG51bWJlcjtcblxuICBwdWJsaWMgYnV0dG9ucyA9IFtdO1xuXG4gIHByaXZhdGUgYnV0dG9uUHJlc3NDYWxsYmFjazogRnVuY3Rpb247XG4gIHByaXZhdGUgc3RhcnRQcmVzc0NhbGxiYWNrOiBGdW5jdGlvbjtcblxuICBwdWJsaWMgYnV0dG9uc0FjdGl2ZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHByaXZhdGUgZGV2TW9kZUNvcnJlY3RMYWJlbFZpc2liaWxpdHk6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBkZXZNb2RlQnVja2V0Q29udHJvbHNFbmFibGVkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHVibGljIGFuaW1hdGlvblNwZWVkTXVsdGlwbGllcjogbnVtYmVyID0gMTtcblxuICBwdWJsaWMgZXh0ZXJuYWxCdWNrZXRDb250cm9sc0dlbmVyYXRpb25IYW5kbGVyOiAoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgY2xpY2tDYWxsYmFjazogKCkgPT4gdm9pZCkgPT4gdm9pZDtcblxuICBwcml2YXRlIGluaXQoKTogdm9pZCB7XG4gICAgLy8gSW5pdGlhbGl6ZSByZXF1aXJlZCBjb250YWluZXJzXG4gICAgdGhpcy5sYW5kaW5nQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5sYW5kaW5nQ29udGFpbmVySWQpO1xuICAgIHRoaXMuZ2FtZUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZ2FtZUNvbnRhaW5lcklkKTtcbiAgICB0aGlzLmVuZENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZW5kQ29udGFpbmVySWQpO1xuICAgIHRoaXMuc3RhckNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuc3RhckNvbnRhaW5lcklkKTtcbiAgICB0aGlzLmNoZXN0Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5jaGVzdENvbnRhaW5lcklkKTtcbiAgICB0aGlzLnF1ZXN0aW9uc0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMucXVlc3Rpb25zQ29udGFpbmVySWQpO1xuICAgIHRoaXMuZmVlZGJhY2tDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmZlZWRiYWNrQ29udGFpbmVySWQpO1xuICAgIHRoaXMuYW5zd2Vyc0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuYW5zd2Vyc0NvbnRhaW5lcklkKTtcblxuICAgIC8vIEluaXRpYWxpemUgcmVxdWlyZWQgYnV0dG9uc1xuICAgIHRoaXMuYW5zd2VyQnV0dG9uMSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuYW5zd2VyQnV0dG9uMUlkKTtcbiAgICB0aGlzLmFuc3dlckJ1dHRvbjIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmFuc3dlckJ1dHRvbjJJZCk7XG4gICAgdGhpcy5hbnN3ZXJCdXR0b24zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5hbnN3ZXJCdXR0b24zSWQpO1xuICAgIHRoaXMuYW5zd2VyQnV0dG9uNCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuYW5zd2VyQnV0dG9uNElkKTtcbiAgICB0aGlzLmFuc3dlckJ1dHRvbjUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmFuc3dlckJ1dHRvbjVJZCk7XG4gICAgdGhpcy5hbnN3ZXJCdXR0b242ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5hbnN3ZXJCdXR0b242SWQpO1xuXG4gICAgdGhpcy5wbGF5QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5wbGF5QnV0dG9uSWQpO1xuXG4gICAgdGhpcy5jaGVzdEltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuY2hlc3RJbWdJZCk7XG5cbiAgICB0aGlzLmluaXRpYWxpemVTdGFycygpO1xuXG4gICAgdGhpcy5pbml0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIHByaXZhdGUgaW5pdGlhbGl6ZVN0YXJzKCk6IHZvaWQge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjA7IGkrKykge1xuICAgICAgY29uc3QgbmV3U3RhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuXG4gICAgICAvLyBuZXdTdGFyLnNyYyA9IFwiaW1nL3N0YXIucG5nXCI7XG4gICAgICBuZXdTdGFyLmlkID0gJ3N0YXInICsgaTtcblxuICAgICAgbmV3U3Rhci5jbGFzc0xpc3QuYWRkKCd0b3BzdGFydicpO1xuXG4gICAgICB0aGlzLnN0YXJDb250YWluZXIuYXBwZW5kQ2hpbGQobmV3U3Rhcik7XG5cbiAgICAgIHRoaXMuc3RhckNvbnRhaW5lci5pbm5lckhUTUwgKz0gJyc7XG5cbiAgICAgIGlmIChpID09IDkpIHtcbiAgICAgICAgdGhpcy5zdGFyQ29udGFpbmVyLmlubmVySFRNTCArPSAnPGJyPic7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc3RhcnMucHVzaChpKTtcbiAgICB9XG5cbiAgICBzaHVmZmxlQXJyYXkodGhpcy5zdGFycyk7XG4gIH1cblxuICBwdWJsaWMgU2V0QW5pbWF0aW9uU3BlZWRNdWx0aXBsaWVyKG11bHRpcGxpZXI6IG51bWJlcik6IHZvaWQge1xuICAgIFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmFuaW1hdGlvblNwZWVkTXVsdGlwbGllciA9IG11bHRpcGxpZXI7XG4gIH1cblxuICBwdWJsaWMgU2V0Q29ycmVjdExhYmVsVmlzaWJpbGl0eSh2aXNpYmxlOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5kZXZNb2RlQ29ycmVjdExhYmVsVmlzaWJpbGl0eSA9IHZpc2libGU7XG4gICAgY29uc29sZS5sb2coJ0NvcnJlY3QgbGFiZWwgdmlzaWJpbGl0eSBzZXQgdG8gJywgdGhpcy5kZXZNb2RlQ29ycmVjdExhYmVsVmlzaWJpbGl0eSk7XG4gIH1cblxuICBwdWJsaWMgU2V0QnVja2V0Q29udHJvbHNWaXNpYmlsaXR5KHZpc2libGU6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygnQnVja2V0IGNvbnRyb2xzIHZpc2liaWxpdHkgc2V0IHRvICcsIHZpc2libGUpO1xuICAgIHRoaXMuZGV2TW9kZUJ1Y2tldENvbnRyb2xzRW5hYmxlZCA9IHZpc2libGU7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIE92ZXJsYXBwaW5nT3RoZXJTdGFycyhcbiAgICBzdGFyUG9zaXRpb25zOiBBcnJheTx7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0+LFxuICAgIHg6IG51bWJlcixcbiAgICB5OiBudW1iZXIsXG4gICAgbWluRGlzdGFuY2U6IG51bWJlclxuICApOiBib29sZWFuIHtcbiAgICBpZiAoc3RhclBvc2l0aW9ucy5sZW5ndGggPCAxKSByZXR1cm4gZmFsc2U7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXJQb3NpdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGR4ID0gc3RhclBvc2l0aW9uc1tpXS54IC0geDtcbiAgICAgIGNvbnN0IGR5ID0gc3RhclBvc2l0aW9uc1tpXS55IC0geTtcbiAgICAgIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcbiAgICAgIGlmIChkaXN0YW5jZSA8IG1pbkRpc3RhbmNlKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwcml2YXRlIGluaXRFdmVudExpc3RlbmVycygpOiB2b2lkIHtcbiAgICAvLyBUT0RPOiByZWZhY3RvciB0aGlzXG4gICAgdGhpcy5hbnN3ZXJCdXR0b24xLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5hbnN3ZXJCdXR0b25QcmVzcygxKTtcbiAgICB9KTtcblxuICAgIHRoaXMuYnV0dG9ucy5wdXNoKHRoaXMuYW5zd2VyQnV0dG9uMSk7XG5cbiAgICB0aGlzLmFuc3dlckJ1dHRvbjIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmFuc3dlckJ1dHRvblByZXNzKDIpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5idXR0b25zLnB1c2godGhpcy5hbnN3ZXJCdXR0b24yKTtcblxuICAgIHRoaXMuYW5zd2VyQnV0dG9uMy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuYW5zd2VyQnV0dG9uUHJlc3MoMyk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmJ1dHRvbnMucHVzaCh0aGlzLmFuc3dlckJ1dHRvbjMpO1xuXG4gICAgdGhpcy5hbnN3ZXJCdXR0b240LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5hbnN3ZXJCdXR0b25QcmVzcyg0KTtcbiAgICB9KTtcblxuICAgIHRoaXMuYnV0dG9ucy5wdXNoKHRoaXMuYW5zd2VyQnV0dG9uNCk7XG5cbiAgICB0aGlzLmFuc3dlckJ1dHRvbjUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmFuc3dlckJ1dHRvblByZXNzKDUpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5idXR0b25zLnB1c2godGhpcy5hbnN3ZXJCdXR0b241KTtcblxuICAgIHRoaXMuYW5zd2VyQnV0dG9uNi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuYW5zd2VyQnV0dG9uUHJlc3MoNik7XG4gICAgfSk7XG5cbiAgICB0aGlzLmJ1dHRvbnMucHVzaCh0aGlzLmFuc3dlckJ1dHRvbjYpO1xuXG4gICAgdGhpcy5sYW5kaW5nQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGdldERhdGFGaWxlKCkpKSB7XG4gICAgICAgIHRoaXMuc2hvd0dhbWUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBzaG93T3B0aW9ucygpOiB2b2lkIHtcbiAgICBpZiAoIVVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnNob3duKSB7XG4gICAgICBjb25zdCBuZXdRID0gVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkubmV4dFF1ZXN0aW9uO1xuICAgICAgY29uc3QgYnV0dG9ucyA9IFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmJ1dHRvbnM7XG5cbiAgICAgIGNvbnN0IGFuaW1hdGlvblNwZWVkTXVsdGlwbGllciA9IFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmFuaW1hdGlvblNwZWVkTXVsdGlwbGllcjtcblxuICAgICAgbGV0IGFuaW1hdGlvbkR1cmF0aW9uID0gMjIwICogYW5pbWF0aW9uU3BlZWRNdWx0aXBsaWVyO1xuICAgICAgY29uc3QgZGVsYXlCZm9yZU9wdGlvbiA9IDE1MCAqIGFuaW1hdGlvblNwZWVkTXVsdGlwbGllcjtcbiAgICAgIFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnNob3duID0gdHJ1ZTtcbiAgICAgIGxldCBvcHRpb25zRGlzcGxheWVkID0gMDtcblxuICAgICAgYnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgICAgYnV0dG9uLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICAgICAgYnV0dG9uLnN0eWxlLmFuaW1hdGlvbiA9ICcnO1xuICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gJyc7XG4gICAgICB9KTtcblxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV3US5hbnN3ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgY3VyQW5zd2VyID0gbmV3US5hbnN3ZXJzW2ldO1xuICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IGJ1dHRvbnNbaV0gYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG5cbiAgICAgICAgICBjb25zdCBpc0NvcnJlY3QgPSBjdXJBbnN3ZXIuYW5zd2VyTmFtZSA9PT0gbmV3US5jb3JyZWN0O1xuXG4gICAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9ICdhbnN3ZXJUZXh0JyBpbiBjdXJBbnN3ZXIgPyBjdXJBbnN3ZXIuYW5zd2VyVGV4dCA6ICcnO1xuXG4gICAgICAgICAgLy8gQWRkIGEgbGFiZWwgaW5zaWRlIHRoZSBidXR0b24gdG8gc2hvdyB0aGUgY29ycmVjdCBhbnN3ZXJcbiAgICAgICAgICBpZiAoaXNDb3JyZWN0ICYmIFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmRldk1vZGVDb3JyZWN0TGFiZWxWaXNpYmlsaXR5KSB7XG4gICAgICAgICAgICBjb25zdCBjb3JyZWN0TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGNvcnJlY3RMYWJlbC5jbGFzc0xpc3QuYWRkKCdjb3JyZWN0LWxhYmVsJyk7XG4gICAgICAgICAgICBjb3JyZWN0TGFiZWwuaW5uZXJIVE1MID0gJ0NvcnJlY3QnO1xuICAgICAgICAgICAgYnV0dG9uLmFwcGVuZENoaWxkKGNvcnJlY3RMYWJlbCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnV0dG9uLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICAgICAgICBidXR0b24uc3R5bGUuYm94U2hhZG93ID0gJzBweCAwcHggMHB4IDBweCByZ2JhKDAsMCwwLDApJztcbiAgICAgICAgICBzZXRUaW1lb3V0KFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICBidXR0b24uc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICAgICAgICAgICAgYnV0dG9uLnN0eWxlLmJveFNoYWRvdyA9ICcwcHggNnB4IDhweCAjNjA2MDYwJztcbiAgICAgICAgICAgICAgYnV0dG9uLnN0eWxlLmFuaW1hdGlvbiA9IGB6b29tSW4gJHthbmltYXRpb25EdXJhdGlvbiAqIGFuaW1hdGlvblNwZWVkTXVsdGlwbGllcn1tcyBlYXNlIGZvcndhcmRzYDtcbiAgICAgICAgICAgICAgaWYgKCdhbnN3ZXJJbWcnIGluIGN1ckFuc3dlcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRtcGltZyA9IEF1ZGlvQ29udHJvbGxlci5HZXRJbWFnZShjdXJBbnN3ZXIuYW5zd2VySW1nKTtcbiAgICAgICAgICAgICAgICBidXR0b24uYXBwZW5kQ2hpbGQodG1waW1nKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIG9wdGlvbnNEaXNwbGF5ZWQrKztcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uc0Rpc3BsYXllZCA9PT0gbmV3US5hbnN3ZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuZW5hYmxlQW5zd2VyQnV0dG9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpICogYW5pbWF0aW9uRHVyYXRpb24gKiBhbmltYXRpb25TcGVlZE11bHRpcGxpZXIgKiAwLjNcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9LCBkZWxheUJmb3JlT3B0aW9uKTtcblxuICAgICAgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkucVN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGVuYWJsZUFuc3dlckJ1dHRvbigpOiB2b2lkIHtcbiAgICBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5idXR0b25zQWN0aXZlID0gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgU2V0RmVlZGJhY2tUZXh0KG50OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygnRmVlZGJhY2sgdGV4dCBzZXQgdG8gJyArIG50KTtcbiAgICBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5mZWVkYmFja0NvbnRhaW5lci5pbm5lckhUTUwgPSBudDtcbiAgfVxuXG4gIC8vZnVuY3Rpb25zIHRvIHNob3cvaGlkZSB0aGUgZGlmZmVyZW50IGNvbnRhaW5lcnNcbiAgcHJpdmF0ZSBzaG93TGFuZGluZygpOiB2b2lkIHtcbiAgICB0aGlzLmxhbmRpbmdDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICB0aGlzLmdhbWVDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB0aGlzLmVuZENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBTaG93RW5kKCk6IHZvaWQge1xuICAgIFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmxhbmRpbmdDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5nYW1lQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuZW5kQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gIH1cblxuICBwcml2YXRlIHNob3dHYW1lKCk6IHZvaWQge1xuICAgIHRoaXMubGFuZGluZ0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIHRoaXMuZ2FtZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2dyaWQnO1xuICAgIHRoaXMuZW5kQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgdGhpcy5hbGxTdGFydCA9IERhdGUubm93KCk7XG4gICAgdGhpcy5zdGFydFByZXNzQ2FsbGJhY2soKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgU2V0RmVlZGJhY2tWaXNpYmlsZSh2aXNpYmxlOiBib29sZWFuLCBpc0NvcnJlY3Q6IGJvb2xlYW4pIHtcbiAgICBpZiAodmlzaWJsZSkge1xuICAgICAgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuZmVlZGJhY2tDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5mZWVkYmFja0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG4gICAgICBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5idXR0b25zQWN0aXZlID0gZmFsc2U7XG4gICAgICBpZiAoaXNDb3JyZWN0KSB7XG4gICAgICAgIFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmZlZWRiYWNrQ29udGFpbmVyLnN0eWxlLmNvbG9yID0gJ3JnYigxMDksIDIwNCwgMTIyKSc7XG4gICAgICAgIEF1ZGlvQ29udHJvbGxlci5QbGF5Q29ycmVjdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuZmVlZGJhY2tDb250YWluZXIuc3R5bGUuY29sb3IgPSAncmVkJztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuZmVlZGJhY2tDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuICAgICAgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuZmVlZGJhY2tDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5idXR0b25zQWN0aXZlID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBSZWFkeUZvck5leHQobmV3UTogcURhdGEsIHJlR2VuZXJhdGVJdGVtczogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcbiAgICBpZiAobmV3USA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZygncmVhZHkgZm9yIG5leHQhJyk7XG4gICAgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuYW5zd2Vyc0NvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgZm9yICh2YXIgYiBpbiBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5idXR0b25zKSB7XG4gICAgICBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5idXR0b25zW2JdLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICB9XG4gICAgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuc2hvd24gPSBmYWxzZTtcbiAgICBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5uZXh0UXVlc3Rpb24gPSBuZXdRO1xuICAgIFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnF1ZXN0aW9uc0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5xdWVzdGlvbnNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAvLyBwQi5pbm5lckhUTUwgPSBcIjxidXR0b24gaWQ9J25leHRxQnV0dG9uJz48c3ZnIHdpZHRoPScyNCcgaGVpZ2h0PScyNCcgdmlld0JveD0nMCAwIDI0IDI0JyBmaWxsPSdub25lJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnPjxwYXRoIGQ9J005IDE4TDE1IDEyTDkgNlYxOFonIGZpbGw9J2N1cnJlbnRDb2xvcicgc3Ryb2tlPSdjdXJyZW50Q29sb3InIHN0cm9rZS13aWR0aD0nMicgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJz48L3BhdGg+PC9zdmc+PC9idXR0b24+XCI7XG4gICAgLy8gVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkucGxheUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiYXVkaW8tYnV0dG9uXCIpO1xuXG4gICAgLy8gV2hlbiB0aGUgZGV2IG1vZGUgaXMgYWN0aXZlIGFuZCB0aGUgYnVja2V0IG5leHQsIHByZXZpb3VzIGFuZCBwbGF5IGJ1dHRvbnMgYXJlIGVuYWJsZWQsIHVzZSB0aGUgZXh0ZXJuYWwgYnVja2V0IGNvbnRyb2xzIGdlbmVyYXRpb24gaGFuZGxlclxuICAgIC8vIGlmICghcmVHZW5lcmF0ZUl0ZW1zKSB7XG4gICAgLy8gICByZXR1cm47XG4gICAgLy8gfVxuICAgIGNvbnN0IGlzQnVja2V0Q29udHJvbHNFbmFibGVkID0gVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuZGV2TW9kZUJ1Y2tldENvbnRyb2xzRW5hYmxlZDtcbiAgICBpZiAoaXNCdWNrZXRDb250cm9sc0VuYWJsZWQpIHtcbiAgICAgIFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmV4dGVybmFsQnVja2V0Q29udHJvbHNHZW5lcmF0aW9uSGFuZGxlcihVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5wbGF5QnV0dG9uLCAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQ2FsbCBmcm9tIGluc2lkZSBjbGljayBoYW5kbGVyIG9mIGV4dGVybmFsIGJ1Y2tldCBjb250cm9sc1wiKTtcbiAgICAgICAgVUlDb250cm9sbGVyLlNob3dRdWVzdGlvbigpO1xuICAgICAgICAvL3BsYXlxdWVzdGlvbmF1ZGlvXG4gICAgICAgIEF1ZGlvQ29udHJvbGxlci5QbGF5QXVkaW8oXG4gICAgICAgICAgbmV3US5wcm9tcHRBdWRpbyxcbiAgICAgICAgICBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5zaG93T3B0aW9ucyxcbiAgICAgICAgICBVSUNvbnRyb2xsZXIuU2hvd0F1ZGlvQW5pbWF0aW9uXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkucGxheUJ1dHRvbi5pbm5lckhUTUwgPVxuICAgICAgICBcIjxidXR0b24gaWQ9J25leHRxQnV0dG9uJz48aW1nIGNsYXNzPWF1ZGlvLWJ1dHRvbiB3aWR0aD0nMTAwcHgnIGhlaWdodD0nMTAwcHgnIHNyYz0nL2ltZy9Tb3VuZEJ1dHRvbl9JZGxlLnBuZycgdHlwZT0naW1hZ2Uvc3ZnK3htbCc+IDwvaW1nPjwvYnV0dG9uPlwiO1xuICAgICAgdmFyIG5leHRRdWVzdGlvbkJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXh0cUJ1dHRvbicpO1xuICAgICAgbmV4dFF1ZXN0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBVSUNvbnRyb2xsZXIuU2hvd1F1ZXN0aW9uKCk7XG4gICAgICAgIC8vcGxheXF1ZXN0aW9uYXVkaW9cbiAgICAgICAgQXVkaW9Db250cm9sbGVyLlBsYXlBdWRpbyhcbiAgICAgICAgICBuZXdRLnByb21wdEF1ZGlvLFxuICAgICAgICAgIFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnNob3dPcHRpb25zLFxuICAgICAgICAgIFVJQ29udHJvbGxlci5TaG93QXVkaW9BbmltYXRpb25cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgU2hvd0F1ZGlvQW5pbWF0aW9uKHBsYXlpbmc6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIGlmICghVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuZGV2TW9kZUJ1Y2tldENvbnRyb2xzRW5hYmxlZCkge1xuICAgICAgY29uc3QgcGxheUJ1dHRvbkltZyA9IFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnBsYXlCdXR0b24ucXVlcnlTZWxlY3RvcignaW1nJyk7XG4gICAgICBpZiAocGxheWluZykge1xuICAgICAgICBwbGF5QnV0dG9uSW1nLnNyYyA9ICdhbmltYXRpb24vU291bmRCdXR0b24uZ2lmJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBsYXlCdXR0b25JbWcuc3JjID0gJy9pbWcvU291bmRCdXR0b25fSWRsZS5wbmcnO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgU2hvd1F1ZXN0aW9uKG5ld1F1ZXN0aW9uPzogcURhdGEpOiB2b2lkIHtcbiAgICAvLyBwQi5pbm5lckhUTUwgPSBcIjxidXR0b24gaWQ9J25leHRxQnV0dG9uJz48c3ZnIHdpZHRoPScyNCcgaGVpZ2h0PScyNCcgdmlld0JveD0nMCAwIDI0IDI0JyBmaWxsPSdub25lJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnPjxwYXRoIGQ9J005IDE4TDE1IDEyTDkgNlYxOFonIGZpbGw9J2N1cnJlbnRDb2xvcicgc3Ryb2tlPSdjdXJyZW50Q29sb3InIHN0cm9rZS13aWR0aD0nMicgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJz48L3BhdGg+PC9zdmc+PC9idXR0b24+XCI7XG5cbiAgICAvLyBXaGVuIHRoZSBkZXYgbW9kZSBpcyBhY3RpdmUgYW5kIHRoZSBidWNrZXQgbmV4dCwgcHJldmlvdXMgYW5kIHBsYXkgYnV0dG9ucyBhcmUgZW5hYmxlZCwgdXNlIHRoZSBleHRlcm5hbCBidWNrZXQgY29udHJvbHMgZ2VuZXJhdGlvbiBoYW5kbGVyXG4gICAgY29uc3QgaXNCdWNrZXRDb250cm9sc0VuYWJsZWQgPSBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5kZXZNb2RlQnVja2V0Q29udHJvbHNFbmFibGVkO1xuICAgIGlmIChpc0J1Y2tldENvbnRyb2xzRW5hYmxlZCkge1xuICAgICAgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuZXh0ZXJuYWxCdWNrZXRDb250cm9sc0dlbmVyYXRpb25IYW5kbGVyKFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnBsYXlCdXR0b24sICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJDYWxsIGZyb20gaW5zaWRlIGNsaWNrIGhhbmRsZXIgb2YgZXh0ZXJuYWwgYnVja2V0IGNvbnRyb2xzICMyXCIpO1xuICAgICAgICBjb25zb2xlLmxvZygnbmV4dCBxdWVzdGlvbiBidXR0b24gcHJlc3NlZCcpO1xuICAgICAgICBjb25zb2xlLmxvZyhuZXdRdWVzdGlvbi5wcm9tcHRBdWRpbyk7XG4gIFxuICAgICAgICBpZiAoJ3Byb21wdEF1ZGlvJyBpbiBuZXdRdWVzdGlvbikge1xuICAgICAgICAgIEF1ZGlvQ29udHJvbGxlci5QbGF5QXVkaW8obmV3UXVlc3Rpb24ucHJvbXB0QXVkaW8sIHVuZGVmaW5lZCwgVUlDb250cm9sbGVyLlNob3dBdWRpb0FuaW1hdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5wbGF5QnV0dG9uLmlubmVySFRNTCA9XG4gICAgICAgIFwiPGJ1dHRvbiBpZD0nbmV4dHFCdXR0b24nPjxpbWcgY2xhc3M9YXVkaW8tYnV0dG9uIHdpZHRoPScxMDBweCcgaGVpZ2h0PScxMDBweCcgc3JjPScvaW1nL1NvdW5kQnV0dG9uX0lkbGUucG5nJyB0eXBlPSdpbWFnZS9zdmcreG1sJz4gPC9pbWc+PC9idXR0b24+XCI7XG4gIFxuICAgICAgdmFyIG5leHRRdWVzdGlvbkJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXh0cUJ1dHRvbicpO1xuICAgICAgbmV4dFF1ZXN0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnbmV4dCBxdWVzdGlvbiBidXR0b24gcHJlc3NlZCcpO1xuICAgICAgICBjb25zb2xlLmxvZyhuZXdRdWVzdGlvbi5wcm9tcHRBdWRpbyk7XG4gIFxuICAgICAgICBpZiAoJ3Byb21wdEF1ZGlvJyBpbiBuZXdRdWVzdGlvbikge1xuICAgICAgICAgIEF1ZGlvQ29udHJvbGxlci5QbGF5QXVkaW8obmV3UXVlc3Rpb24ucHJvbXB0QXVkaW8sIHVuZGVmaW5lZCwgVUlDb250cm9sbGVyLlNob3dBdWRpb0FuaW1hdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmFuc3dlcnNDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcblxuICAgIGxldCBxQ29kZSA9ICcnO1xuXG4gICAgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkucXVlc3Rpb25zQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuXG4gICAgaWYgKHR5cGVvZiBuZXdRdWVzdGlvbiA9PSAndW5kZWZpbmVkJykge1xuICAgICAgbmV3UXVlc3Rpb24gPSBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5uZXh0UXVlc3Rpb247XG4gICAgfVxuXG4gICAgaWYgKCdwcm9tcHRJbWcnIGluIG5ld1F1ZXN0aW9uKSB7XG4gICAgICB2YXIgdG1waW1nID0gQXVkaW9Db250cm9sbGVyLkdldEltYWdlKG5ld1F1ZXN0aW9uLnByb21wdEltZyk7XG4gICAgICBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5xdWVzdGlvbnNDb250YWluZXIuYXBwZW5kQ2hpbGQodG1waW1nKTtcbiAgICB9XG5cbiAgICBxQ29kZSArPSBuZXdRdWVzdGlvbi5wcm9tcHRUZXh0O1xuXG4gICAgcUNvZGUgKz0gJzxCUj4nO1xuXG4gICAgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkucXVlc3Rpb25zQ29udGFpbmVyLmlubmVySFRNTCArPSBxQ29kZTtcblxuICAgIGZvciAodmFyIGJ1dHRvbkluZGV4IGluIFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmJ1dHRvbnMpIHtcbiAgICAgIFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmJ1dHRvbnNbYnV0dG9uSW5kZXhdLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIEFkZFN0YXIoKTogdm9pZCB7XG4gICAgdmFyIHN0YXJUb1Nob3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbiAgICAgICdzdGFyJyArIFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnN0YXJzW1VJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnFBbnNOdW1dXG4gICAgKSBhcyBIVE1MSW1hZ2VFbGVtZW50O1xuICAgIHN0YXJUb1Nob3cuc3JjID0gJy4uL2FuaW1hdGlvbi9TdGFyLmdpZic7XG4gICAgc3RhclRvU2hvdy5jbGFzc0xpc3QuYWRkKCd0b3BzdGFydicpO1xuICAgIHN0YXJUb1Nob3cuY2xhc3NMaXN0LnJlbW92ZSgndG9wc3RhcmgnKTtcblxuICAgIHN0YXJUb1Nob3cuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuXG4gICAgbGV0IGNvbnRhaW5lcldpZHRoID0gVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuc3RhckNvbnRhaW5lci5vZmZzZXRXaWR0aDtcbiAgICBsZXQgY29udGFpbmVySGVpZ2h0ID0gVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuc3RhckNvbnRhaW5lci5vZmZzZXRIZWlnaHQ7XG5cbiAgICBjb25zb2xlLmxvZygnU3RhcnMgQ29udGFpbmVyIGRpbWVuc2lvbnM6ICcsIGNvbnRhaW5lcldpZHRoLCBjb250YWluZXJIZWlnaHQpO1xuXG4gICAgbGV0IHJhbmRvbVggPSAwO1xuICAgIGxldCByYW5kb21ZID0gMDtcblxuICAgIGRvIHtcbiAgICAgIHJhbmRvbVggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoY29udGFpbmVyV2lkdGggLSBjb250YWluZXJXaWR0aCAqIDAuMikpO1xuICAgICAgcmFuZG9tWSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNvbnRhaW5lckhlaWdodCk7XG4gICAgfSB3aGlsZSAoVUlDb250cm9sbGVyLk92ZXJsYXBwaW5nT3RoZXJTdGFycyhVSUNvbnRyb2xsZXIuaW5zdGFuY2Uuc3RhclBvc2l0aW9ucywgcmFuZG9tWCwgcmFuZG9tWSwgMjgpKTtcblxuICAgIGNvbnN0IGFuaW1hdGlvblNwZWVkTXVsdGlwbGllciA9IFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmFuaW1hdGlvblNwZWVkTXVsdGlwbGllcjtcblxuICAgIC8vIFNhdmUgdGhlc2UgcmFuZG9tIHggYW5kIHkgdmFsdWVzLCBtYWtlIHRoZSBzdGFyIGFwcGVhciBpbiB0aGUgY2VudGVyIG9mIHRoZSBzY3JlZW4sIG1ha2UgaXQgMyB0aW1lcyBiaWdnZXIgdXNpbmcgc2NhbGUgYW5kIHNsb3dseSB0cmFuc2l0aW9uIHRvIHRoZSByYW5kb20geCBhbmQgeSB2YWx1ZXNcbiAgICBzdGFyVG9TaG93LnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZSgxMCknO1xuICAgIHN0YXJUb1Nob3cuc3R5bGUudHJhbnNpdGlvbiA9IGB0b3AgJHsxICogYW5pbWF0aW9uU3BlZWRNdWx0aXBsaWVyfXMgZWFzZSwgbGVmdCAkezEgKiBhbmltYXRpb25TcGVlZE11bHRpcGxpZXJ9cyBlYXNlLCB0cmFuc2Zvcm0gJHswLjUgKiBhbmltYXRpb25TcGVlZE11bHRpcGxpZXJ9cyBlYXNlYDtcbiAgICBzdGFyVG9TaG93LnN0eWxlLnpJbmRleCA9ICc1MDAnO1xuICAgIHN0YXJUb1Nob3cuc3R5bGUudG9wID0gd2luZG93LmlubmVySGVpZ2h0IC8gMiArICdweCc7XG4gICAgc3RhclRvU2hvdy5zdHlsZS5sZWZ0ID0gVUlDb250cm9sbGVyLmluc3RhbmNlLmdhbWVDb250YWluZXIub2Zmc2V0V2lkdGggLyAyIC0gc3RhclRvU2hvdy5vZmZzZXRXaWR0aCAvIDIgKyAncHgnO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBzdGFyVG9TaG93LnN0eWxlLnRyYW5zaXRpb24gPSBgdG9wICR7MiAqIGFuaW1hdGlvblNwZWVkTXVsdGlwbGllcn1zIGVhc2UsIGxlZnQgJHsyICogYW5pbWF0aW9uU3BlZWRNdWx0aXBsaWVyfXMgZWFzZSwgdHJhbnNmb3JtICR7MiAqIGFuaW1hdGlvblNwZWVkTXVsdGlwbGllcn1zIGVhc2VgO1xuICAgICAgaWYgKHJhbmRvbVggPCBjb250YWluZXJXaWR0aCAvIDIgLSAzMCkge1xuICAgICAgICAvLyBSb3RhdGUgdGhlIHN0YXIgdG8gdGhlIHJpZ2h0IGEgYml0XG4gICAgICAgIGNvbnN0IHJvdGF0aW9uID0gNSArIE1hdGgucmFuZG9tKCkgKiA4O1xuICAgICAgICBjb25zb2xlLmxvZygnUm90YXRpbmcgc3RhciB0byB0aGUgcmlnaHQnLCByb3RhdGlvbik7XG4gICAgICAgIHN0YXJUb1Nob3cuc3R5bGUudHJhbnNmb3JtID0gJ3JvdGF0ZSgtJyArIHJvdGF0aW9uICsgJ2RlZykgc2NhbGUoMSknO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gUm90YXRlIHRoZSBzdGFyIHRvIHRoZSBsZWZ0IGEgYml0XG4gICAgICAgIGNvbnN0IHJvdGF0aW9uID0gNSArIE1hdGgucmFuZG9tKCkgKiA4O1xuICAgICAgICBjb25zb2xlLmxvZygnUm90YXRpbmcgc3RhciB0byB0aGUgbGVmdCcsIHJvdGF0aW9uKTtcbiAgICAgICAgc3RhclRvU2hvdy5zdHlsZS50cmFuc2Zvcm0gPSAncm90YXRlKCcgKyByb3RhdGlvbiArICdkZWcpIHNjYWxlKDEpJztcbiAgICAgIH1cblxuICAgICAgc3RhclRvU2hvdy5zdHlsZS5sZWZ0ID0gMTAgKyByYW5kb21YICsgJ3B4JztcbiAgICAgIHN0YXJUb1Nob3cuc3R5bGUudG9wID0gcmFuZG9tWSArICdweCc7XG5cbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBzdGFyVG9TaG93LnN0eWxlLmZpbHRlciA9ICdkcm9wLXNoYWRvdygwcHggMHB4IDEwcHggeWVsbG93KSc7XG4gICAgICB9LCAxOTAwICogYW5pbWF0aW9uU3BlZWRNdWx0aXBsaWVyKTtcbiAgICB9LCAxMDAwICogYW5pbWF0aW9uU3BlZWRNdWx0aXBsaWVyKTtcblxuICAgIFVJQ29udHJvbGxlci5pbnN0YW5jZS5zdGFyUG9zaXRpb25zLnB1c2goeyB4OiByYW5kb21YLCB5OiByYW5kb21ZIH0pO1xuXG4gICAgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkucUFuc051bSArPSAxO1xuXG4gICAgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuc2hvd25TdGFyc0NvdW50ICs9IDE7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIENoYW5nZVN0YXJJbWFnZUFmdGVyQW5pbWF0aW9uKCk6IHZvaWQge1xuICAgIHZhciBzdGFyVG9TaG93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgICAnc3RhcicgKyBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5zdGFyc1tVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5xQW5zTnVtIC0gMV1cbiAgICApIGFzIEhUTUxJbWFnZUVsZW1lbnQ7XG4gICAgc3RhclRvU2hvdy5zcmMgPSAnLi4vaW1nL3N0YXJfYWZ0ZXJfYW5pbWF0aW9uLmdpZic7XG4gIH1cblxuICBwcml2YXRlIGFuc3dlckJ1dHRvblByZXNzKGJ1dHRvbk51bTogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgYWxsQnV0dG9uc1Zpc2libGUgPSB0aGlzLmJ1dHRvbnMuZXZlcnkoKGJ1dHRvbikgPT4gYnV0dG9uLnN0eWxlLnZpc2liaWxpdHkgPT09ICd2aXNpYmxlJyk7XG4gICAgY29uc29sZS5sb2codGhpcy5idXR0b25zQWN0aXZlLCBhbGxCdXR0b25zVmlzaWJsZSk7XG4gICAgaWYgKHRoaXMuYnV0dG9uc0FjdGl2ZSA9PT0gdHJ1ZSkge1xuICAgICAgQXVkaW9Db250cm9sbGVyLlBsYXlEaW5nKCk7XG4gICAgICBjb25zdCBuUHJlc3NlZCA9IERhdGUubm93KCk7XG4gICAgICBjb25zdCBkVGltZSA9IG5QcmVzc2VkIC0gdGhpcy5xU3RhcnQ7XG4gICAgICBjb25zb2xlLmxvZygnYW5zd2VyZWQgaW4gJyArIGRUaW1lKTtcbiAgICAgIHRoaXMuYnV0dG9uUHJlc3NDYWxsYmFjayhidXR0b25OdW0sIGRUaW1lKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIFByb2dyZXNzQ2hlc3QoKSB7XG4gICAgY29uc3QgY2hlc3RJbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGVzdEltYWdlJykgYXMgSFRNTEltYWdlRWxlbWVudDtcbiAgICBsZXQgY3VycmVudEltZ1NyYyA9IGNoZXN0SW1hZ2Uuc3JjO1xuICAgIGNvbnNvbGUubG9nKCdDaGVzdCBQcm9ncmVzc2lvbi0tPicsIGNoZXN0SW1hZ2UpO1xuICAgIGNvbnNvbGUubG9nKCdDaGVzdCBQcm9ncmVzc2lvbi0tPicsIGNoZXN0SW1hZ2Uuc3JjKTtcbiAgICBjb25zdCBjdXJyZW50SW1hZ2VOdW1iZXIgPSBwYXJzZUludChjdXJyZW50SW1nU3JjLnNsaWNlKC02LCAtNCksIDEwKTtcbiAgICBjb25zb2xlLmxvZygnQ2hlc3QgUHJvZ3Jlc3Npb24gbnVtYmVyLS0+JywgY3VycmVudEltYWdlTnVtYmVyKTtcbiAgICBjb25zdCBuZXh0SW1hZ2VOdW1iZXIgPSAoY3VycmVudEltYWdlTnVtYmVyICUgNCkgKyAxO1xuICAgIGNvbnN0IG5leHRJbWFnZVNyYyA9IGBpbWcvY2hlc3Rwcm9ncmVzc2lvbi9UcmVhc3VyZUNoZXN0T3BlbjAke25leHRJbWFnZU51bWJlcn0uc3ZnYDtcbiAgICBjaGVzdEltYWdlLnNyYyA9IG5leHRJbWFnZVNyYztcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgU2V0Q29udGVudExvYWRlZCh2YWx1ZTogYm9vbGVhbik6IHZvaWQge1xuICAgIFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmNvbnRlbnRMb2FkZWQgPSB2YWx1ZTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgU2V0QnV0dG9uUHJlc3NBY3Rpb24oY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuYnV0dG9uUHJlc3NDYWxsYmFjayA9IGNhbGxiYWNrO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBTZXRTdGFydEFjdGlvbihjYWxsYmFjazogRnVuY3Rpb24pOiB2b2lkIHtcbiAgICBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5zdGFydFByZXNzQ2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgU2V0RXh0ZXJuYWxCdWNrZXRDb250cm9sc0dlbmVyYXRpb25IYW5kbGVyKGhhbmRsZXI6IChjb250YWluZXI6IEhUTUxFbGVtZW50LCBjbGlja0NhbGxiYWNrOiAoKSA9PiB2b2lkKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuZXh0ZXJuYWxCdWNrZXRDb250cm9sc0dlbmVyYXRpb25IYW5kbGVyID0gaGFuZGxlcjtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogVUlDb250cm9sbGVyIHtcbiAgICBpZiAoVUlDb250cm9sbGVyLmluc3RhbmNlID09PSBudWxsKSB7XG4gICAgICBVSUNvbnRyb2xsZXIuaW5zdGFuY2UgPSBuZXcgVUlDb250cm9sbGVyKCk7XG4gICAgICBVSUNvbnRyb2xsZXIuaW5zdGFuY2UuaW5pdCgpO1xuICAgIH1cblxuICAgIHJldHVybiBVSUNvbnRyb2xsZXIuaW5zdGFuY2U7XG4gIH1cbn1cbiIsIi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IEZpcmViYXNlIGNvbnN0YW50cy4gIFNvbWUgb2YgdGhlc2UgKEBkZWZpbmVzKSBjYW4gYmUgb3ZlcnJpZGRlbiBhdCBjb21waWxlLXRpbWUuXHJcbiAqL1xyXG5jb25zdCBDT05TVEFOVFMgPSB7XHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgY2xpZW50IE5vZGUuanMgU0RLLlxyXG4gICAgICovXHJcbiAgICBOT0RFX0NMSUVOVDogZmFsc2UsXHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgQWRtaW4gTm9kZS5qcyBTREsuXHJcbiAgICAgKi9cclxuICAgIE5PREVfQURNSU46IGZhbHNlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlYmFzZSBTREsgVmVyc2lvblxyXG4gICAgICovXHJcbiAgICBTREtfVkVSU0lPTjogJyR7SlNDT1JFX1ZFUlNJT059J1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBwcm92aWRlZCBhc3NlcnRpb24gaXMgZmFsc3lcclxuICovXHJcbmNvbnN0IGFzc2VydCA9IGZ1bmN0aW9uIChhc3NlcnRpb24sIG1lc3NhZ2UpIHtcclxuICAgIGlmICghYXNzZXJ0aW9uKSB7XHJcbiAgICAgICAgdGhyb3cgYXNzZXJ0aW9uRXJyb3IobWVzc2FnZSk7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFuIEVycm9yIG9iamVjdCBzdWl0YWJsZSBmb3IgdGhyb3dpbmcuXHJcbiAqL1xyXG5jb25zdCBhc3NlcnRpb25FcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICByZXR1cm4gbmV3IEVycm9yKCdGaXJlYmFzZSBEYXRhYmFzZSAoJyArXHJcbiAgICAgICAgQ09OU1RBTlRTLlNES19WRVJTSU9OICtcclxuICAgICAgICAnKSBJTlRFUk5BTCBBU1NFUlQgRkFJTEVEOiAnICtcclxuICAgICAgICBtZXNzYWdlKTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3Qgc3RyaW5nVG9CeXRlQXJyYXkkMSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gNikgfCAxOTI7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKChjICYgMHhmYzAwKSA9PT0gMHhkODAwICYmXHJcbiAgICAgICAgICAgIGkgKyAxIDwgc3RyLmxlbmd0aCAmJlxyXG4gICAgICAgICAgICAoc3RyLmNoYXJDb2RlQXQoaSArIDEpICYgMHhmYzAwKSA9PT0gMHhkYzAwKSB7XHJcbiAgICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBQYWlyXHJcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKChjICYgMHgwM2ZmKSA8PCAxMCkgKyAoc3RyLmNoYXJDb2RlQXQoKytpKSAmIDB4MDNmZik7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxMikgfCAyMjQ7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbi8qKlxyXG4gKiBUdXJucyBhbiBhcnJheSBvZiBudW1iZXJzIGludG8gdGhlIHN0cmluZyBnaXZlbiBieSB0aGUgY29uY2F0ZW5hdGlvbiBvZiB0aGVcclxuICogY2hhcmFjdGVycyB0byB3aGljaCB0aGUgbnVtYmVycyBjb3JyZXNwb25kLlxyXG4gKiBAcGFyYW0gYnl0ZXMgQXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgY2hhcmFjdGVycy5cclxuICogQHJldHVybiBTdHJpbmdpZmljYXRpb24gb2YgdGhlIGFycmF5LlxyXG4gKi9cclxuY29uc3QgYnl0ZUFycmF5VG9TdHJpbmcgPSBmdW5jdGlvbiAoYnl0ZXMpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwb3MgPSAwLCBjID0gMDtcclxuICAgIHdoaWxlIChwb3MgPCBieXRlcy5sZW5ndGgpIHtcclxuICAgICAgICBjb25zdCBjMSA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICBpZiAoYzEgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAxOTEgJiYgYzEgPCAyMjQpIHtcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMxICYgMzEpIDw8IDYpIHwgKGMyICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAyMzkgJiYgYzEgPCAzNjUpIHtcclxuICAgICAgICAgICAgLy8gU3Vycm9nYXRlIFBhaXJcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjNCA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgdSA9ICgoKGMxICYgNykgPDwgMTgpIHwgKChjMiAmIDYzKSA8PCAxMikgfCAoKGMzICYgNjMpIDw8IDYpIHwgKGM0ICYgNjMpKSAtXHJcbiAgICAgICAgICAgICAgICAweDEwMDAwO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhkODAwICsgKHUgPj4gMTApKTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZGMwMCArICh1ICYgMTAyMykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDE1KSA8PCAxMikgfCAoKGMyICYgNjMpIDw8IDYpIHwgKGMzICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0LmpvaW4oJycpO1xyXG59O1xyXG4vLyBXZSBkZWZpbmUgaXQgYXMgYW4gb2JqZWN0IGxpdGVyYWwgaW5zdGVhZCBvZiBhIGNsYXNzIGJlY2F1c2UgYSBjbGFzcyBjb21waWxlZCBkb3duIHRvIGVzNSBjYW4ndFxyXG4vLyBiZSB0cmVlc2hha2VkLiBodHRwczovL2dpdGh1Yi5jb20vcm9sbHVwL3JvbGx1cC9pc3N1ZXMvMTY5MVxyXG4vLyBTdGF0aWMgbG9va3VwIG1hcHMsIGxhemlseSBwb3B1bGF0ZWQgYnkgaW5pdF8oKVxyXG5jb25zdCBiYXNlNjQgPSB7XHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYnl0ZXMgdG8gY2hhcmFjdGVycy5cclxuICAgICAqL1xyXG4gICAgYnl0ZVRvQ2hhck1hcF86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgY2hhcmFjdGVycyB0byBieXRlcy5cclxuICAgICAqL1xyXG4gICAgY2hhclRvQnl0ZU1hcF86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYnl0ZXMgdG8gd2Vic2FmZSBjaGFyYWN0ZXJzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgYnl0ZVRvQ2hhck1hcFdlYlNhZmVfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIHdlYnNhZmUgY2hhcmFjdGVycyB0byBieXRlcy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNoYXJUb0J5dGVNYXBXZWJTYWZlXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQsIHNoYXJlZCBiZXR3ZWVuXHJcbiAgICAgKiBFTkNPREVEX1ZBTFMgYW5kIEVOQ09ERURfVkFMU19XRUJTQUZFXHJcbiAgICAgKi9cclxuICAgIEVOQ09ERURfVkFMU19CQVNFOiAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonICsgJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6JyArICcwMTIzNDU2Nzg5JyxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQuIFZhbHVlIDY0ICg9KSBpcyBzcGVjaWFsOyBpdCBtZWFucyBcIm5vdGhpbmcuXCJcclxuICAgICAqL1xyXG4gICAgZ2V0IEVOQ09ERURfVkFMUygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICcrLz0nO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIHdlYnNhZmUgYWxwaGFiZXQuXHJcbiAgICAgKi9cclxuICAgIGdldCBFTkNPREVEX1ZBTFNfV0VCU0FGRSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICctXy4nO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogV2hldGhlciB0aGlzIGJyb3dzZXIgc3VwcG9ydHMgdGhlIGF0b2IgYW5kIGJ0b2EgZnVuY3Rpb25zLiBUaGlzIGV4dGVuc2lvblxyXG4gICAgICogc3RhcnRlZCBhdCBNb3ppbGxhIGJ1dCBpcyBub3cgaW1wbGVtZW50ZWQgYnkgbWFueSBicm93c2Vycy4gV2UgdXNlIHRoZVxyXG4gICAgICogQVNTVU1FXyogdmFyaWFibGVzIHRvIGF2b2lkIHB1bGxpbmcgaW4gdGhlIGZ1bGwgdXNlcmFnZW50IGRldGVjdGlvbiBsaWJyYXJ5XHJcbiAgICAgKiBidXQgc3RpbGwgYWxsb3dpbmcgdGhlIHN0YW5kYXJkIHBlci1icm93c2VyIGNvbXBpbGF0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIEhBU19OQVRJVkVfU1VQUE9SVDogdHlwZW9mIGF0b2IgPT09ICdmdW5jdGlvbicsXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1lbmNvZGUgYW4gYXJyYXkgb2YgYnl0ZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IEFuIGFycmF5IG9mIGJ5dGVzIChudW1iZXJzIHdpdGhcclxuICAgICAqICAgICB2YWx1ZSBpbiBbMCwgMjU1XSkgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgQm9vbGVhbiBpbmRpY2F0aW5nIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGVuY29kZUJ5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ2VuY29kZUJ5dGVBcnJheSB0YWtlcyBhbiBhcnJheSBhcyBhIHBhcmFtZXRlcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluaXRfKCk7XHJcbiAgICAgICAgY29uc3QgYnl0ZVRvQ2hhck1hcCA9IHdlYlNhZmVcclxuICAgICAgICAgICAgPyB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1xyXG4gICAgICAgICAgICA6IHRoaXMuYnl0ZVRvQ2hhck1hcF87XHJcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkgKz0gMykge1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMSA9IGlucHV0W2ldO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpICsgMSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBpbnB1dFtpICsgMV0gOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTMgPSBpICsgMiA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBpbnB1dFtpICsgMl0gOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMSA9IGJ5dGUxID4+IDI7XHJcbiAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUyID0gKChieXRlMSAmIDB4MDMpIDw8IDQpIHwgKGJ5dGUyID4+IDQpO1xyXG4gICAgICAgICAgICBsZXQgb3V0Qnl0ZTMgPSAoKGJ5dGUyICYgMHgwZikgPDwgMikgfCAoYnl0ZTMgPj4gNik7XHJcbiAgICAgICAgICAgIGxldCBvdXRCeXRlNCA9IGJ5dGUzICYgMHgzZjtcclxuICAgICAgICAgICAgaWYgKCFoYXZlQnl0ZTMpIHtcclxuICAgICAgICAgICAgICAgIG91dEJ5dGU0ID0gNjQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWhhdmVCeXRlMikge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dEJ5dGUzID0gNjQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3V0cHV0LnB1c2goYnl0ZVRvQ2hhck1hcFtvdXRCeXRlMV0sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTJdLCBieXRlVG9DaGFyTWFwW291dEJ5dGUzXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlNF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWVuY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgQSBzdHJpbmcgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgSWYgdHJ1ZSwgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gVGhlIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgZW5jb2RlU3RyaW5nKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBidG9hKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlQnl0ZUFycmF5KHN0cmluZ1RvQnl0ZUFycmF5JDEoaW5wdXQpLCB3ZWJTYWZlKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IHRvIGRlY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIFRydWUgaWYgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cclxuICAgICAqL1xyXG4gICAgZGVjb2RlU3RyaW5nKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdG9iKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJ5dGVBcnJheVRvU3RyaW5nKHRoaXMuZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogSW4gYmFzZS02NCBkZWNvZGluZywgZ3JvdXBzIG9mIGZvdXIgY2hhcmFjdGVycyBhcmUgY29udmVydGVkIGludG8gdGhyZWVcclxuICAgICAqIGJ5dGVzLiAgSWYgdGhlIGVuY29kZXIgZGlkIG5vdCBhcHBseSBwYWRkaW5nLCB0aGUgaW5wdXQgbGVuZ3RoIG1heSBub3RcclxuICAgICAqIGJlIGEgbXVsdGlwbGUgb2YgNC5cclxuICAgICAqXHJcbiAgICAgKiBJbiB0aGlzIGNhc2UsIHRoZSBsYXN0IGdyb3VwIHdpbGwgaGF2ZSBmZXdlciB0aGFuIDQgY2hhcmFjdGVycywgYW5kXHJcbiAgICAgKiBwYWRkaW5nIHdpbGwgYmUgaW5mZXJyZWQuICBJZiB0aGUgZ3JvdXAgaGFzIG9uZSBvciB0d28gY2hhcmFjdGVycywgaXQgZGVjb2Rlc1xyXG4gICAgICogdG8gb25lIGJ5dGUuICBJZiB0aGUgZ3JvdXAgaGFzIHRocmVlIGNoYXJhY3RlcnMsIGl0IGRlY29kZXMgdG8gdHdvIGJ5dGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBJbnB1dCB0byBkZWNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlIHdlYi1zYWZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBieXRlcyByZXByZXNlbnRpbmcgdGhlIGRlY29kZWQgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGRlY29kZVN0cmluZ1RvQnl0ZUFycmF5KGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgdGhpcy5pbml0XygpO1xyXG4gICAgICAgIGNvbnN0IGNoYXJUb0J5dGVNYXAgPSB3ZWJTYWZlXHJcbiAgICAgICAgICAgID8gdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9cclxuICAgICAgICAgICAgOiB0aGlzLmNoYXJUb0J5dGVNYXBfO1xyXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOykge1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMSA9IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkrKyldO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMiA9IGhhdmVCeXRlMiA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDA7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUzID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTQgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlNCA9IGhhdmVCeXRlNCA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDY0O1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIGlmIChieXRlMSA9PSBudWxsIHx8IGJ5dGUyID09IG51bGwgfHwgYnl0ZTMgPT0gbnVsbCB8fCBieXRlNCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUxID0gKGJ5dGUxIDw8IDIpIHwgKGJ5dGUyID4+IDQpO1xyXG4gICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMSk7XHJcbiAgICAgICAgICAgIGlmIChieXRlMyAhPT0gNjQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUyID0gKChieXRlMiA8PCA0KSAmIDB4ZjApIHwgKGJ5dGUzID4+IDIpO1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJ5dGU0ICE9PSA2NCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUzID0gKChieXRlMyA8PCA2KSAmIDB4YzApIHwgYnl0ZTQ7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBMYXp5IHN0YXRpYyBpbml0aWFsaXphdGlvbiBmdW5jdGlvbi4gQ2FsbGVkIGJlZm9yZVxyXG4gICAgICogYWNjZXNzaW5nIGFueSBvZiB0aGUgc3RhdGljIG1hcCB2YXJpYWJsZXMuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBpbml0XygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuYnl0ZVRvQ2hhck1hcF8pIHtcclxuICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfID0ge307XHJcbiAgICAgICAgICAgIC8vIFdlIHdhbnQgcXVpY2sgbWFwcGluZ3MgYmFjayBhbmQgZm9ydGgsIHNvIHdlIHByZWNvbXB1dGUgdHdvIG1hcHMuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5FTkNPREVEX1ZBTFMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcF9baV0gPSB0aGlzLkVOQ09ERURfVkFMUy5jaGFyQXQoaSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfW3RoaXMuYnl0ZVRvQ2hhck1hcF9baV1dID0gaTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfW2ldID0gdGhpcy5FTkNPREVEX1ZBTFNfV0VCU0FGRS5jaGFyQXQoaSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlX1t0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1tpXV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgLy8gQmUgZm9yZ2l2aW5nIHdoZW4gZGVjb2RpbmcgYW5kIGNvcnJlY3RseSBkZWNvZGUgYm90aCBlbmNvZGluZ3MuXHJcbiAgICAgICAgICAgICAgICBpZiAoaSA+PSB0aGlzLkVOQ09ERURfVkFMU19CQVNFLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF9bdGhpcy5FTkNPREVEX1ZBTFNfV0VCU0FGRS5jaGFyQXQoaSldID0gaTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlX1t0aGlzLkVOQ09ERURfVkFMUy5jaGFyQXQoaSldID0gaTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZ1xyXG4gKi9cclxuY29uc3QgYmFzZTY0RW5jb2RlID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgY29uc3QgdXRmOEJ5dGVzID0gc3RyaW5nVG9CeXRlQXJyYXkkMShzdHIpO1xyXG4gICAgcmV0dXJuIGJhc2U2NC5lbmNvZGVCeXRlQXJyYXkodXRmOEJ5dGVzLCB0cnVlKTtcclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZyAod2l0aG91dCBcIi5cIiBwYWRkaW5nIGluIHRoZSBlbmQpLlxyXG4gKiBlLmcuIFVzZWQgaW4gSlNPTiBXZWIgVG9rZW4gKEpXVCkgcGFydHMuXHJcbiAqL1xyXG5jb25zdCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIC8vIFVzZSBiYXNlNjR1cmwgZW5jb2RpbmcgYW5kIHJlbW92ZSBwYWRkaW5nIGluIHRoZSBlbmQgKGRvdCBjaGFyYWN0ZXJzKS5cclxuICAgIHJldHVybiBiYXNlNjRFbmNvZGUoc3RyKS5yZXBsYWNlKC9cXC4vZywgJycpO1xyXG59O1xyXG4vKipcclxuICogVVJMLXNhZmUgYmFzZTY0IGRlY29kaW5nXHJcbiAqXHJcbiAqIE5PVEU6IERPIE5PVCB1c2UgdGhlIGdsb2JhbCBhdG9iKCkgZnVuY3Rpb24gLSBpdCBkb2VzIE5PVCBzdXBwb3J0IHRoZVxyXG4gKiBiYXNlNjRVcmwgdmFyaWFudCBlbmNvZGluZy5cclxuICpcclxuICogQHBhcmFtIHN0ciBUbyBiZSBkZWNvZGVkXHJcbiAqIEByZXR1cm4gRGVjb2RlZCByZXN1bHQsIGlmIHBvc3NpYmxlXHJcbiAqL1xyXG5jb25zdCBiYXNlNjREZWNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBiYXNlNjQuZGVjb2RlU3RyaW5nKHN0ciwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2Jhc2U2NERlY29kZSBmYWlsZWQ6ICcsIGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEbyBhIGRlZXAtY29weSBvZiBiYXNpYyBKYXZhU2NyaXB0IE9iamVjdHMgb3IgQXJyYXlzLlxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcENvcHkodmFsdWUpIHtcclxuICAgIHJldHVybiBkZWVwRXh0ZW5kKHVuZGVmaW5lZCwgdmFsdWUpO1xyXG59XHJcbi8qKlxyXG4gKiBDb3B5IHByb3BlcnRpZXMgZnJvbSBzb3VyY2UgdG8gdGFyZ2V0IChyZWN1cnNpdmVseSBhbGxvd3MgZXh0ZW5zaW9uXHJcbiAqIG9mIE9iamVjdHMgYW5kIEFycmF5cykuICBTY2FsYXIgdmFsdWVzIGluIHRoZSB0YXJnZXQgYXJlIG92ZXItd3JpdHRlbi5cclxuICogSWYgdGFyZ2V0IGlzIHVuZGVmaW5lZCwgYW4gb2JqZWN0IG9mIHRoZSBhcHByb3ByaWF0ZSB0eXBlIHdpbGwgYmUgY3JlYXRlZFxyXG4gKiAoYW5kIHJldHVybmVkKS5cclxuICpcclxuICogV2UgcmVjdXJzaXZlbHkgY29weSBhbGwgY2hpbGQgcHJvcGVydGllcyBvZiBwbGFpbiBPYmplY3RzIGluIHRoZSBzb3VyY2UtIHNvXHJcbiAqIHRoYXQgbmFtZXNwYWNlLSBsaWtlIGRpY3Rpb25hcmllcyBhcmUgbWVyZ2VkLlxyXG4gKlxyXG4gKiBOb3RlIHRoYXQgdGhlIHRhcmdldCBjYW4gYmUgYSBmdW5jdGlvbiwgaW4gd2hpY2ggY2FzZSB0aGUgcHJvcGVydGllcyBpblxyXG4gKiB0aGUgc291cmNlIE9iamVjdCBhcmUgY29waWVkIG9udG8gaXQgYXMgc3RhdGljIHByb3BlcnRpZXMgb2YgdGhlIEZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBOb3RlOiB3ZSBkb24ndCBtZXJnZSBfX3Byb3RvX18gdG8gcHJldmVudCBwcm90b3R5cGUgcG9sbHV0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwRXh0ZW5kKHRhcmdldCwgc291cmNlKSB7XHJcbiAgICBpZiAoIShzb3VyY2UgaW5zdGFuY2VvZiBPYmplY3QpKSB7XHJcbiAgICAgICAgcmV0dXJuIHNvdXJjZTtcclxuICAgIH1cclxuICAgIHN3aXRjaCAoc291cmNlLmNvbnN0cnVjdG9yKSB7XHJcbiAgICAgICAgY2FzZSBEYXRlOlxyXG4gICAgICAgICAgICAvLyBUcmVhdCBEYXRlcyBsaWtlIHNjYWxhcnM7IGlmIHRoZSB0YXJnZXQgZGF0ZSBvYmplY3QgaGFkIGFueSBjaGlsZFxyXG4gICAgICAgICAgICAvLyBwcm9wZXJ0aWVzIC0gdGhleSB3aWxsIGJlIGxvc3QhXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGVWYWx1ZSA9IHNvdXJjZTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGVWYWx1ZS5nZXRUaW1lKCkpO1xyXG4gICAgICAgIGNhc2UgT2JqZWN0OlxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldCA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQXJyYXk6XHJcbiAgICAgICAgICAgIC8vIEFsd2F5cyBjb3B5IHRoZSBhcnJheSBzb3VyY2UgYW5kIG92ZXJ3cml0ZSB0aGUgdGFyZ2V0LlxyXG4gICAgICAgICAgICB0YXJnZXQgPSBbXTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgLy8gTm90IGEgcGxhaW4gT2JqZWN0IC0gdHJlYXQgaXQgYXMgYSBzY2FsYXIuXHJcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IHByb3AgaW4gc291cmNlKSB7XHJcbiAgICAgICAgLy8gdXNlIGlzVmFsaWRLZXkgdG8gZ3VhcmQgYWdhaW5zdCBwcm90b3R5cGUgcG9sbHV0aW9uLiBTZWUgaHR0cHM6Ly9zbnlrLmlvL3Z1bG4vU05ZSy1KUy1MT0RBU0gtNDUwMjAyXHJcbiAgICAgICAgaWYgKCFzb3VyY2UuaGFzT3duUHJvcGVydHkocHJvcCkgfHwgIWlzVmFsaWRLZXkocHJvcCkpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhcmdldFtwcm9wXSA9IGRlZXBFeHRlbmQodGFyZ2V0W3Byb3BdLCBzb3VyY2VbcHJvcF0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRhcmdldDtcclxufVxyXG5mdW5jdGlvbiBpc1ZhbGlkS2V5KGtleSkge1xyXG4gICAgcmV0dXJuIGtleSAhPT0gJ19fcHJvdG9fXyc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgbmF2aWdhdG9yLnVzZXJBZ2VudCBzdHJpbmcgb3IgJycgaWYgaXQncyBub3QgZGVmaW5lZC5cclxuICogQHJldHVybiB1c2VyIGFnZW50IHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0VUEoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICB0eXBlb2YgbmF2aWdhdG9yWyd1c2VyQWdlbnQnXSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gbmF2aWdhdG9yWyd1c2VyQWdlbnQnXTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRGV0ZWN0IENvcmRvdmEgLyBQaG9uZUdhcCAvIElvbmljIGZyYW1ld29ya3Mgb24gYSBtb2JpbGUgZGV2aWNlLlxyXG4gKlxyXG4gKiBEZWxpYmVyYXRlbHkgZG9lcyBub3QgcmVseSBvbiBjaGVja2luZyBgZmlsZTovL2AgVVJMcyAoYXMgdGhpcyBmYWlscyBQaG9uZUdhcFxyXG4gKiBpbiB0aGUgUmlwcGxlIGVtdWxhdG9yKSBub3IgQ29yZG92YSBgb25EZXZpY2VSZWFkeWAsIHdoaWNoIHdvdWxkIG5vcm1hbGx5XHJcbiAqIHdhaXQgZm9yIGEgY2FsbGJhY2suXHJcbiAqL1xyXG5mdW5jdGlvbiBpc01vYmlsZUNvcmRvdmEoKSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBTZXR0aW5nIHVwIGFuIGJyb2FkbHkgYXBwbGljYWJsZSBpbmRleCBzaWduYXR1cmUgZm9yIFdpbmRvd1xyXG4gICAgICAgIC8vIGp1c3QgdG8gZGVhbCB3aXRoIHRoaXMgY2FzZSB3b3VsZCBwcm9iYWJseSBiZSBhIGJhZCBpZGVhLlxyXG4gICAgICAgICEhKHdpbmRvd1snY29yZG92YSddIHx8IHdpbmRvd1sncGhvbmVnYXAnXSB8fCB3aW5kb3dbJ1Bob25lR2FwJ10pICYmXHJcbiAgICAgICAgL2lvc3xpcGhvbmV8aXBvZHxpcGFkfGFuZHJvaWR8YmxhY2tiZXJyeXxpZW1vYmlsZS9pLnRlc3QoZ2V0VUEoKSkpO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgTm9kZS5qcy5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIE5vZGUuanMgZW52aXJvbm1lbnQgaXMgZGV0ZWN0ZWQuXHJcbiAqL1xyXG4vLyBOb2RlIGRldGVjdGlvbiBsb2dpYyBmcm9tOiBodHRwczovL2dpdGh1Yi5jb20vaWxpYWthbi9kZXRlY3Qtbm9kZS9cclxuZnVuY3Rpb24gaXNOb2RlKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRGV0ZWN0IEJyb3dzZXIgRW52aXJvbm1lbnRcclxuICovXHJcbmZ1bmN0aW9uIGlzQnJvd3NlcigpIHtcclxuICAgIHJldHVybiB0eXBlb2Ygc2VsZiA9PT0gJ29iamVjdCcgJiYgc2VsZi5zZWxmID09PSBzZWxmO1xyXG59XHJcbmZ1bmN0aW9uIGlzQnJvd3NlckV4dGVuc2lvbigpIHtcclxuICAgIGNvbnN0IHJ1bnRpbWUgPSB0eXBlb2YgY2hyb21lID09PSAnb2JqZWN0J1xyXG4gICAgICAgID8gY2hyb21lLnJ1bnRpbWVcclxuICAgICAgICA6IHR5cGVvZiBicm93c2VyID09PSAnb2JqZWN0J1xyXG4gICAgICAgICAgICA/IGJyb3dzZXIucnVudGltZVxyXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgIHJldHVybiB0eXBlb2YgcnVudGltZSA9PT0gJ29iamVjdCcgJiYgcnVudGltZS5pZCAhPT0gdW5kZWZpbmVkO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgUmVhY3QgTmF0aXZlLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgUmVhY3ROYXRpdmUgZW52aXJvbm1lbnQgaXMgZGV0ZWN0ZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1JlYWN0TmF0aXZlKCkge1xyXG4gICAgcmV0dXJuICh0eXBlb2YgbmF2aWdhdG9yID09PSAnb2JqZWN0JyAmJiBuYXZpZ2F0b3JbJ3Byb2R1Y3QnXSA9PT0gJ1JlYWN0TmF0aXZlJyk7XHJcbn1cclxuLyoqIERldGVjdHMgRWxlY3Ryb24gYXBwcy4gKi9cclxuZnVuY3Rpb24gaXNFbGVjdHJvbigpIHtcclxuICAgIHJldHVybiBnZXRVQSgpLmluZGV4T2YoJ0VsZWN0cm9uLycpID49IDA7XHJcbn1cclxuLyoqIERldGVjdHMgSW50ZXJuZXQgRXhwbG9yZXIuICovXHJcbmZ1bmN0aW9uIGlzSUUoKSB7XHJcbiAgICBjb25zdCB1YSA9IGdldFVBKCk7XHJcbiAgICByZXR1cm4gdWEuaW5kZXhPZignTVNJRSAnKSA+PSAwIHx8IHVhLmluZGV4T2YoJ1RyaWRlbnQvJykgPj0gMDtcclxufVxyXG4vKiogRGV0ZWN0cyBVbml2ZXJzYWwgV2luZG93cyBQbGF0Zm9ybSBhcHBzLiAqL1xyXG5mdW5jdGlvbiBpc1VXUCgpIHtcclxuICAgIHJldHVybiBnZXRVQSgpLmluZGV4T2YoJ01TQXBwSG9zdC8nKSA+PSAwO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3Qgd2hldGhlciB0aGUgY3VycmVudCBTREsgYnVpbGQgaXMgdGhlIE5vZGUgdmVyc2lvbi5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIGl0J3MgdGhlIE5vZGUgU0RLIGJ1aWxkLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNOb2RlU2RrKCkge1xyXG4gICAgcmV0dXJuIENPTlNUQU5UUy5OT0RFX0NMSUVOVCA9PT0gdHJ1ZSB8fCBDT05TVEFOVFMuTk9ERV9BRE1JTiA9PT0gdHJ1ZTtcclxufVxyXG4vKiogUmV0dXJucyB0cnVlIGlmIHdlIGFyZSBydW5uaW5nIGluIFNhZmFyaS4gKi9cclxuZnVuY3Rpb24gaXNTYWZhcmkoKSB7XHJcbiAgICByZXR1cm4gKCFpc05vZGUoKSAmJlxyXG4gICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ1NhZmFyaScpICYmXHJcbiAgICAgICAgIW5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ0Nocm9tZScpKTtcclxufVxyXG4vKipcclxuICogVGhpcyBtZXRob2QgY2hlY2tzIGlmIGluZGV4ZWREQiBpcyBzdXBwb3J0ZWQgYnkgY3VycmVudCBicm93c2VyL3NlcnZpY2Ugd29ya2VyIGNvbnRleHRcclxuICogQHJldHVybiB0cnVlIGlmIGluZGV4ZWREQiBpcyBzdXBwb3J0ZWQgYnkgY3VycmVudCBicm93c2VyL3NlcnZpY2Ugd29ya2VyIGNvbnRleHRcclxuICovXHJcbmZ1bmN0aW9uIGlzSW5kZXhlZERCQXZhaWxhYmxlKCkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiBpbmRleGVkREIgPT09ICdvYmplY3QnO1xyXG59XHJcbi8qKlxyXG4gKiBUaGlzIG1ldGhvZCB2YWxpZGF0ZXMgYnJvd3Nlci9zdyBjb250ZXh0IGZvciBpbmRleGVkREIgYnkgb3BlbmluZyBhIGR1bW15IGluZGV4ZWREQiBkYXRhYmFzZSBhbmQgcmVqZWN0XHJcbiAqIGlmIGVycm9ycyBvY2N1ciBkdXJpbmcgdGhlIGRhdGFiYXNlIG9wZW4gb3BlcmF0aW9uLlxyXG4gKlxyXG4gKiBAdGhyb3dzIGV4Y2VwdGlvbiBpZiBjdXJyZW50IGJyb3dzZXIvc3cgY29udGV4dCBjYW4ndCBydW4gaWRiLm9wZW4gKGV4OiBTYWZhcmkgaWZyYW1lLCBGaXJlZm94XHJcbiAqIHByaXZhdGUgYnJvd3NpbmcpXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlKCkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBsZXQgcHJlRXhpc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICBjb25zdCBEQl9DSEVDS19OQU1FID0gJ3ZhbGlkYXRlLWJyb3dzZXItY29udGV4dC1mb3ItaW5kZXhlZGRiLWFuYWx5dGljcy1tb2R1bGUnO1xyXG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0gc2VsZi5pbmRleGVkREIub3BlbihEQl9DSEVDS19OQU1FKTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnJlc3VsdC5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgLy8gZGVsZXRlIGRhdGFiYXNlIG9ubHkgd2hlbiBpdCBkb2Vzbid0IHByZS1leGlzdFxyXG4gICAgICAgICAgICAgICAgaWYgKCFwcmVFeGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKERCX0NIRUNLX05BTUUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwcmVFeGlzdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoKChfYSA9IHJlcXVlc3QuZXJyb3IpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tZXNzYWdlKSB8fCAnJyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBUaGlzIG1ldGhvZCBjaGVja3Mgd2hldGhlciBjb29raWUgaXMgZW5hYmxlZCB3aXRoaW4gY3VycmVudCBicm93c2VyXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBjb29raWUgaXMgZW5hYmxlZCB3aXRoaW4gY3VycmVudCBicm93c2VyXHJcbiAqL1xyXG5mdW5jdGlvbiBhcmVDb29raWVzRW5hYmxlZCgpIHtcclxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yID09PSAndW5kZWZpbmVkJyB8fCAhbmF2aWdhdG9yLmNvb2tpZUVuYWJsZWQpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG4vKipcclxuICogUG9seWZpbGwgZm9yIGBnbG9iYWxUaGlzYCBvYmplY3QuXHJcbiAqIEByZXR1cm5zIHRoZSBgZ2xvYmFsVGhpc2Agb2JqZWN0IGZvciB0aGUgZ2l2ZW4gZW52aXJvbm1lbnQuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRHbG9iYWwoKSB7XHJcbiAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGY7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gd2luZG93O1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIGdsb2JhbDtcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGxvY2F0ZSBnbG9iYWwgb2JqZWN0LicpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRzRnJvbUdsb2JhbCA9ICgpID0+IGdldEdsb2JhbCgpLl9fRklSRUJBU0VfREVGQVVMVFNfXztcclxuLyoqXHJcbiAqIEF0dGVtcHQgdG8gcmVhZCBkZWZhdWx0cyBmcm9tIGEgSlNPTiBzdHJpbmcgcHJvdmlkZWQgdG9cclxuICogcHJvY2Vzcy5lbnYuX19GSVJFQkFTRV9ERUZBVUxUU19fIG9yIGEgSlNPTiBmaWxlIHdob3NlIHBhdGggaXMgaW5cclxuICogcHJvY2Vzcy5lbnYuX19GSVJFQkFTRV9ERUZBVUxUU19QQVRIX19cclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRzRnJvbUVudlZhcmlhYmxlID0gKCkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgcHJvY2Vzcy5lbnYgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZGVmYXVsdHNKc29uU3RyaW5nID0gcHJvY2Vzcy5lbnYuX19GSVJFQkFTRV9ERUZBVUxUU19fO1xyXG4gICAgaWYgKGRlZmF1bHRzSnNvblN0cmluZykge1xyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGRlZmF1bHRzSnNvblN0cmluZyk7XHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IGdldERlZmF1bHRzRnJvbUNvb2tpZSA9ICgpID0+IHtcclxuICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IG1hdGNoO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBtYXRjaCA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaCgvX19GSVJFQkFTRV9ERUZBVUxUU19fPShbXjtdKykvKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgLy8gU29tZSBlbnZpcm9ubWVudHMgc3VjaCBhcyBBbmd1bGFyIFVuaXZlcnNhbCBTU1IgaGF2ZSBhXHJcbiAgICAgICAgLy8gYGRvY3VtZW50YCBvYmplY3QgYnV0IGVycm9yIG9uIGFjY2Vzc2luZyBgZG9jdW1lbnQuY29va2llYC5cclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWNvZGVkID0gbWF0Y2ggJiYgYmFzZTY0RGVjb2RlKG1hdGNoWzFdKTtcclxuICAgIHJldHVybiBkZWNvZGVkICYmIEpTT04ucGFyc2UoZGVjb2RlZCk7XHJcbn07XHJcbi8qKlxyXG4gKiBHZXQgdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3QuIEl0IGNoZWNrcyBpbiBvcmRlcjpcclxuICogKDEpIGlmIHN1Y2ggYW4gb2JqZWN0IGV4aXN0cyBhcyBhIHByb3BlcnR5IG9mIGBnbG9iYWxUaGlzYFxyXG4gKiAoMikgaWYgc3VjaCBhbiBvYmplY3Qgd2FzIHByb3ZpZGVkIG9uIGEgc2hlbGwgZW52aXJvbm1lbnQgdmFyaWFibGVcclxuICogKDMpIGlmIHN1Y2ggYW4gb2JqZWN0IGV4aXN0cyBpbiBhIGNvb2tpZVxyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdHMgPSAoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiAoZ2V0RGVmYXVsdHNGcm9tR2xvYmFsKCkgfHxcclxuICAgICAgICAgICAgZ2V0RGVmYXVsdHNGcm9tRW52VmFyaWFibGUoKSB8fFxyXG4gICAgICAgICAgICBnZXREZWZhdWx0c0Zyb21Db29raWUoKSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhdGNoLWFsbCBmb3IgYmVpbmcgdW5hYmxlIHRvIGdldCBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gZHVlXHJcbiAgICAgICAgICogdG8gYW55IGVudmlyb25tZW50IGNhc2Ugd2UgaGF2ZSBub3QgYWNjb3VudGVkIGZvci4gTG9nIHRvXHJcbiAgICAgICAgICogaW5mbyBpbnN0ZWFkIG9mIHN3YWxsb3dpbmcgc28gd2UgY2FuIGZpbmQgdGhlc2UgdW5rbm93biBjYXNlc1xyXG4gICAgICAgICAqIGFuZCBhZGQgcGF0aHMgZm9yIHRoZW0gaWYgbmVlZGVkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnNvbGUuaW5mbyhgVW5hYmxlIHRvIGdldCBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gZHVlIHRvOiAke2V9YCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogUmV0dXJucyBlbXVsYXRvciBob3N0IHN0b3JlZCBpbiB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdFxyXG4gKiBmb3IgdGhlIGdpdmVuIHByb2R1Y3QuXHJcbiAqIEByZXR1cm5zIGEgVVJMIGhvc3QgZm9ybWF0dGVkIGxpa2UgYDEyNy4wLjAuMTo5OTk5YCBvciBgWzo6MV06NDAwMGAgaWYgYXZhaWxhYmxlXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRFbXVsYXRvckhvc3QgPSAocHJvZHVjdE5hbWUpID0+IHsgdmFyIF9hLCBfYjsgcmV0dXJuIChfYiA9IChfYSA9IGdldERlZmF1bHRzKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5lbXVsYXRvckhvc3RzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2JbcHJvZHVjdE5hbWVdOyB9O1xyXG4vKipcclxuICogUmV0dXJucyBlbXVsYXRvciBob3N0bmFtZSBhbmQgcG9ydCBzdG9yZWQgaW4gdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3RcclxuICogZm9yIHRoZSBnaXZlbiBwcm9kdWN0LlxyXG4gKiBAcmV0dXJucyBhIHBhaXIgb2YgaG9zdG5hbWUgYW5kIHBvcnQgbGlrZSBgW1wiOjoxXCIsIDQwMDBdYCBpZiBhdmFpbGFibGVcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdG5hbWVBbmRQb3J0ID0gKHByb2R1Y3ROYW1lKSA9PiB7XHJcbiAgICBjb25zdCBob3N0ID0gZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdChwcm9kdWN0TmFtZSk7XHJcbiAgICBpZiAoIWhvc3QpIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgc2VwYXJhdG9ySW5kZXggPSBob3N0Lmxhc3RJbmRleE9mKCc6Jyk7IC8vIEZpbmRpbmcgdGhlIGxhc3Qgc2luY2UgSVB2NiBhZGRyIGFsc28gaGFzIGNvbG9ucy5cclxuICAgIGlmIChzZXBhcmF0b3JJbmRleCA8PSAwIHx8IHNlcGFyYXRvckluZGV4ICsgMSA9PT0gaG9zdC5sZW5ndGgpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgaG9zdCAke2hvc3R9IHdpdGggbm8gc2VwYXJhdGUgaG9zdG5hbWUgYW5kIHBvcnQhYCk7XHJcbiAgICB9XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXHJcbiAgICBjb25zdCBwb3J0ID0gcGFyc2VJbnQoaG9zdC5zdWJzdHJpbmcoc2VwYXJhdG9ySW5kZXggKyAxKSwgMTApO1xyXG4gICAgaWYgKGhvc3RbMF0gPT09ICdbJykge1xyXG4gICAgICAgIC8vIEJyYWNrZXQtcXVvdGVkIGBbaXB2NmFkZHJdOnBvcnRgID0+IHJldHVybiBcImlwdjZhZGRyXCIgKHdpdGhvdXQgYnJhY2tldHMpLlxyXG4gICAgICAgIHJldHVybiBbaG9zdC5zdWJzdHJpbmcoMSwgc2VwYXJhdG9ySW5kZXggLSAxKSwgcG9ydF07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gW2hvc3Quc3Vic3RyaW5nKDAsIHNlcGFyYXRvckluZGV4KSwgcG9ydF07XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIEZpcmViYXNlIGFwcCBjb25maWcgc3RvcmVkIGluIHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0LlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBnZXREZWZhdWx0QXBwQ29uZmlnID0gKCkgPT4geyB2YXIgX2E7IHJldHVybiAoX2EgPSBnZXREZWZhdWx0cygpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY29uZmlnOyB9O1xyXG4vKipcclxuICogUmV0dXJucyBhbiBleHBlcmltZW50YWwgc2V0dGluZyBvbiB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdCAocHJvcGVydGllc1xyXG4gKiBwcmVmaXhlZCBieSBcIl9cIilcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgZ2V0RXhwZXJpbWVudGFsU2V0dGluZyA9IChuYW1lKSA9PiB7IHZhciBfYTsgcmV0dXJuIChfYSA9IGdldERlZmF1bHRzKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYVtgXyR7bmFtZX1gXTsgfTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgRGVmZXJyZWQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5yZWplY3QgPSAoKSA9PiB7IH07XHJcbiAgICAgICAgdGhpcy5yZXNvbHZlID0gKCkgPT4geyB9O1xyXG4gICAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcclxuICAgICAgICAgICAgdGhpcy5yZWplY3QgPSByZWplY3Q7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE91ciBBUEkgaW50ZXJuYWxzIGFyZSBub3QgcHJvbWlzZWlmaWVkIGFuZCBjYW5ub3QgYmVjYXVzZSBvdXIgY2FsbGJhY2sgQVBJcyBoYXZlIHN1YnRsZSBleHBlY3RhdGlvbnMgYXJvdW5kXHJcbiAgICAgKiBpbnZva2luZyBwcm9taXNlcyBpbmxpbmUsIHdoaWNoIFByb21pc2VzIGFyZSBmb3JiaWRkZW4gdG8gZG8uIFRoaXMgbWV0aG9kIGFjY2VwdHMgYW4gb3B0aW9uYWwgbm9kZS1zdHlsZSBjYWxsYmFja1xyXG4gICAgICogYW5kIHJldHVybnMgYSBub2RlLXN0eWxlIGNhbGxiYWNrIHdoaWNoIHdpbGwgcmVzb2x2ZSBvciByZWplY3QgdGhlIERlZmVycmVkJ3MgcHJvbWlzZS5cclxuICAgICAqL1xyXG4gICAgd3JhcENhbGxiYWNrKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgcmV0dXJuIChlcnJvciwgdmFsdWUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc29sdmUodmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIC8vIEF0dGFjaGluZyBub29wIGhhbmRsZXIganVzdCBpbiBjYXNlIGRldmVsb3BlciB3YXNuJ3QgZXhwZWN0aW5nXHJcbiAgICAgICAgICAgICAgICAvLyBwcm9taXNlc1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9taXNlLmNhdGNoKCgpID0+IHsgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyBTb21lIG9mIG91ciBjYWxsYmFja3MgZG9uJ3QgZXhwZWN0IGEgdmFsdWUgYW5kIG91ciBvd24gdGVzdHNcclxuICAgICAgICAgICAgICAgIC8vIGFzc2VydCB0aGF0IHRoZSBwYXJhbWV0ZXIgbGVuZ3RoIGlzIDFcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjay5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnJvciwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVNb2NrVXNlclRva2VuKHRva2VuLCBwcm9qZWN0SWQpIHtcclxuICAgIGlmICh0b2tlbi51aWQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBcInVpZFwiIGZpZWxkIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQgYnkgbW9ja1VzZXJUb2tlbi4gUGxlYXNlIHVzZSBcInN1YlwiIGluc3RlYWQgZm9yIEZpcmViYXNlIEF1dGggVXNlciBJRC4nKTtcclxuICAgIH1cclxuICAgIC8vIFVuc2VjdXJlZCBKV1RzIHVzZSBcIm5vbmVcIiBhcyB0aGUgYWxnb3JpdGhtLlxyXG4gICAgY29uc3QgaGVhZGVyID0ge1xyXG4gICAgICAgIGFsZzogJ25vbmUnLFxyXG4gICAgICAgIHR5cGU6ICdKV1QnXHJcbiAgICB9O1xyXG4gICAgY29uc3QgcHJvamVjdCA9IHByb2plY3RJZCB8fCAnZGVtby1wcm9qZWN0JztcclxuICAgIGNvbnN0IGlhdCA9IHRva2VuLmlhdCB8fCAwO1xyXG4gICAgY29uc3Qgc3ViID0gdG9rZW4uc3ViIHx8IHRva2VuLnVzZXJfaWQ7XHJcbiAgICBpZiAoIXN1Yikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIm1vY2tVc2VyVG9rZW4gbXVzdCBjb250YWluICdzdWInIG9yICd1c2VyX2lkJyBmaWVsZCFcIik7XHJcbiAgICB9XHJcbiAgICBjb25zdCBwYXlsb2FkID0gT2JqZWN0LmFzc2lnbih7IFxyXG4gICAgICAgIC8vIFNldCBhbGwgcmVxdWlyZWQgZmllbGRzIHRvIGRlY2VudCBkZWZhdWx0c1xyXG4gICAgICAgIGlzczogYGh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS8ke3Byb2plY3R9YCwgYXVkOiBwcm9qZWN0LCBpYXQsIGV4cDogaWF0ICsgMzYwMCwgYXV0aF90aW1lOiBpYXQsIHN1YiwgdXNlcl9pZDogc3ViLCBmaXJlYmFzZToge1xyXG4gICAgICAgICAgICBzaWduX2luX3Byb3ZpZGVyOiAnY3VzdG9tJyxcclxuICAgICAgICAgICAgaWRlbnRpdGllczoge31cclxuICAgICAgICB9IH0sIHRva2VuKTtcclxuICAgIC8vIFVuc2VjdXJlZCBKV1RzIHVzZSB0aGUgZW1wdHkgc3RyaW5nIGFzIGEgc2lnbmF0dXJlLlxyXG4gICAgY29uc3Qgc2lnbmF0dXJlID0gJyc7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKEpTT04uc3RyaW5naWZ5KGhlYWRlcikpLFxyXG4gICAgICAgIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKSxcclxuICAgICAgICBzaWduYXR1cmVcclxuICAgIF0uam9pbignLicpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IFN0YW5kYXJkaXplZCBGaXJlYmFzZSBFcnJvci5cclxuICpcclxuICogVXNhZ2U6XHJcbiAqXHJcbiAqICAgLy8gVHlwZXNjcmlwdCBzdHJpbmcgbGl0ZXJhbHMgZm9yIHR5cGUtc2FmZSBjb2Rlc1xyXG4gKiAgIHR5cGUgRXJyID1cclxuICogICAgICd1bmtub3duJyB8XHJcbiAqICAgICAnb2JqZWN0LW5vdC1mb3VuZCdcclxuICogICAgIDtcclxuICpcclxuICogICAvLyBDbG9zdXJlIGVudW0gZm9yIHR5cGUtc2FmZSBlcnJvciBjb2Rlc1xyXG4gKiAgIC8vIGF0LWVudW0ge3N0cmluZ31cclxuICogICB2YXIgRXJyID0ge1xyXG4gKiAgICAgVU5LTk9XTjogJ3Vua25vd24nLFxyXG4gKiAgICAgT0JKRUNUX05PVF9GT1VORDogJ29iamVjdC1ub3QtZm91bmQnLFxyXG4gKiAgIH1cclxuICpcclxuICogICBsZXQgZXJyb3JzOiBNYXA8RXJyLCBzdHJpbmc+ID0ge1xyXG4gKiAgICAgJ2dlbmVyaWMtZXJyb3InOiBcIlVua25vd24gZXJyb3JcIixcclxuICogICAgICdmaWxlLW5vdC1mb3VuZCc6IFwiQ291bGQgbm90IGZpbmQgZmlsZTogeyRmaWxlfVwiLFxyXG4gKiAgIH07XHJcbiAqXHJcbiAqICAgLy8gVHlwZS1zYWZlIGZ1bmN0aW9uIC0gbXVzdCBwYXNzIGEgdmFsaWQgZXJyb3IgY29kZSBhcyBwYXJhbS5cclxuICogICBsZXQgZXJyb3IgPSBuZXcgRXJyb3JGYWN0b3J5PEVycj4oJ3NlcnZpY2UnLCAnU2VydmljZScsIGVycm9ycyk7XHJcbiAqXHJcbiAqICAgLi4uXHJcbiAqICAgdGhyb3cgZXJyb3IuY3JlYXRlKEVyci5HRU5FUklDKTtcclxuICogICAuLi5cclxuICogICB0aHJvdyBlcnJvci5jcmVhdGUoRXJyLkZJTEVfTk9UX0ZPVU5ELCB7J2ZpbGUnOiBmaWxlTmFtZX0pO1xyXG4gKiAgIC4uLlxyXG4gKiAgIC8vIFNlcnZpY2U6IENvdWxkIG5vdCBmaWxlIGZpbGU6IGZvby50eHQgKHNlcnZpY2UvZmlsZS1ub3QtZm91bmQpLlxyXG4gKlxyXG4gKiAgIGNhdGNoIChlKSB7XHJcbiAqICAgICBhc3NlcnQoZS5tZXNzYWdlID09PSBcIkNvdWxkIG5vdCBmaW5kIGZpbGU6IGZvby50eHQuXCIpO1xyXG4gKiAgICAgaWYgKChlIGFzIEZpcmViYXNlRXJyb3IpPy5jb2RlID09PSAnc2VydmljZS9maWxlLW5vdC1mb3VuZCcpIHtcclxuICogICAgICAgY29uc29sZS5sb2coXCJDb3VsZCBub3QgcmVhZCBmaWxlOiBcIiArIGVbJ2ZpbGUnXSk7XHJcbiAqICAgICB9XHJcbiAqICAgfVxyXG4gKi9cclxuY29uc3QgRVJST1JfTkFNRSA9ICdGaXJlYmFzZUVycm9yJztcclxuLy8gQmFzZWQgb24gY29kZSBmcm9tOlxyXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9FcnJvciNDdXN0b21fRXJyb3JfVHlwZXNcclxuY2xhc3MgRmlyZWJhc2VFcnJvciBleHRlbmRzIEVycm9yIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgLyoqIFRoZSBlcnJvciBjb2RlIGZvciB0aGlzIGVycm9yLiAqL1xyXG4gICAgY29kZSwgbWVzc2FnZSwgXHJcbiAgICAvKiogQ3VzdG9tIGRhdGEgZm9yIHRoaXMgZXJyb3IuICovXHJcbiAgICBjdXN0b21EYXRhKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcclxuICAgICAgICB0aGlzLmN1c3RvbURhdGEgPSBjdXN0b21EYXRhO1xyXG4gICAgICAgIC8qKiBUaGUgY3VzdG9tIG5hbWUgZm9yIGFsbCBGaXJlYmFzZUVycm9ycy4gKi9cclxuICAgICAgICB0aGlzLm5hbWUgPSBFUlJPUl9OQU1FO1xyXG4gICAgICAgIC8vIEZpeCBGb3IgRVM1XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0LXdpa2kvYmxvYi9tYXN0ZXIvQnJlYWtpbmctQ2hhbmdlcy5tZCNleHRlbmRpbmctYnVpbHQtaW5zLWxpa2UtZXJyb3ItYXJyYXktYW5kLW1hcC1tYXktbm8tbG9uZ2VyLXdvcmtcclxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgRmlyZWJhc2VFcnJvci5wcm90b3R5cGUpO1xyXG4gICAgICAgIC8vIE1haW50YWlucyBwcm9wZXIgc3RhY2sgdHJhY2UgZm9yIHdoZXJlIG91ciBlcnJvciB3YXMgdGhyb3duLlxyXG4gICAgICAgIC8vIE9ubHkgYXZhaWxhYmxlIG9uIFY4LlxyXG4gICAgICAgIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xyXG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBFcnJvckZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmNsYXNzIEVycm9yRmFjdG9yeSB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZXJ2aWNlLCBzZXJ2aWNlTmFtZSwgZXJyb3JzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcclxuICAgICAgICB0aGlzLnNlcnZpY2VOYW1lID0gc2VydmljZU5hbWU7XHJcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnM7XHJcbiAgICB9XHJcbiAgICBjcmVhdGUoY29kZSwgLi4uZGF0YSkge1xyXG4gICAgICAgIGNvbnN0IGN1c3RvbURhdGEgPSBkYXRhWzBdIHx8IHt9O1xyXG4gICAgICAgIGNvbnN0IGZ1bGxDb2RlID0gYCR7dGhpcy5zZXJ2aWNlfS8ke2NvZGV9YDtcclxuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IHRoaXMuZXJyb3JzW2NvZGVdO1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0ZW1wbGF0ZSA/IHJlcGxhY2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgY3VzdG9tRGF0YSkgOiAnRXJyb3InO1xyXG4gICAgICAgIC8vIFNlcnZpY2UgTmFtZTogRXJyb3IgbWVzc2FnZSAoc2VydmljZS9jb2RlKS5cclxuICAgICAgICBjb25zdCBmdWxsTWVzc2FnZSA9IGAke3RoaXMuc2VydmljZU5hbWV9OiAke21lc3NhZ2V9ICgke2Z1bGxDb2RlfSkuYDtcclxuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBGaXJlYmFzZUVycm9yKGZ1bGxDb2RlLCBmdWxsTWVzc2FnZSwgY3VzdG9tRGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIGVycm9yO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHJlcGxhY2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgZGF0YSkge1xyXG4gICAgcmV0dXJuIHRlbXBsYXRlLnJlcGxhY2UoUEFUVEVSTiwgKF8sIGtleSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gZGF0YVtrZXldO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZSAhPSBudWxsID8gU3RyaW5nKHZhbHVlKSA6IGA8JHtrZXl9Pz5gO1xyXG4gICAgfSk7XHJcbn1cclxuY29uc3QgUEFUVEVSTiA9IC9cXHtcXCQoW159XSspfS9nO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRXZhbHVhdGVzIGEgSlNPTiBzdHJpbmcgaW50byBhIGphdmFzY3JpcHQgb2JqZWN0LlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyIEEgc3RyaW5nIGNvbnRhaW5pbmcgSlNPTi5cclxuICogQHJldHVybiB7Kn0gVGhlIGphdmFzY3JpcHQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3BlY2lmaWVkIEpTT04uXHJcbiAqL1xyXG5mdW5jdGlvbiBqc29uRXZhbChzdHIpIHtcclxuICAgIHJldHVybiBKU09OLnBhcnNlKHN0cik7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgSlNPTiByZXByZXNlbnRpbmcgYSBqYXZhc2NyaXB0IG9iamVjdC5cclxuICogQHBhcmFtIHsqfSBkYXRhIEphdmFzY3JpcHQgb2JqZWN0IHRvIGJlIHN0cmluZ2lmaWVkLlxyXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBKU09OIGNvbnRlbnRzIG9mIHRoZSBvYmplY3QuXHJcbiAqL1xyXG5mdW5jdGlvbiBzdHJpbmdpZnkoZGF0YSkge1xyXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gaW50byBjb25zdGl0dWVudCBwYXJ0cy5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiB3aXRoIGludmFsaWQgLyBpbmNvbXBsZXRlIGNsYWltcyBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGRlY29kZSA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgbGV0IGhlYWRlciA9IHt9LCBjbGFpbXMgPSB7fSwgZGF0YSA9IHt9LCBzaWduYXR1cmUgPSAnJztcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcGFydHMgPSB0b2tlbi5zcGxpdCgnLicpO1xyXG4gICAgICAgIGhlYWRlciA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1swXSkgfHwgJycpO1xyXG4gICAgICAgIGNsYWltcyA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1sxXSkgfHwgJycpO1xyXG4gICAgICAgIHNpZ25hdHVyZSA9IHBhcnRzWzJdO1xyXG4gICAgICAgIGRhdGEgPSBjbGFpbXNbJ2QnXSB8fCB7fTtcclxuICAgICAgICBkZWxldGUgY2xhaW1zWydkJ107XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGhlYWRlcixcclxuICAgICAgICBjbGFpbXMsXHJcbiAgICAgICAgZGF0YSxcclxuICAgICAgICBzaWduYXR1cmVcclxuICAgIH07XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIGNoZWNrcyB0aGUgdmFsaWRpdHkgb2YgaXRzIHRpbWUtYmFzZWQgY2xhaW1zLiBXaWxsIHJldHVybiB0cnVlIGlmIHRoZVxyXG4gKiB0b2tlbiBpcyB3aXRoaW4gdGhlIHRpbWUgd2luZG93IGF1dGhvcml6ZWQgYnkgdGhlICduYmYnIChub3QtYmVmb3JlKSBhbmQgJ2lhdCcgKGlzc3VlZC1hdCkgY2xhaW1zLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc1ZhbGlkVGltZXN0YW1wID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIGNvbnN0IG5vdyA9IE1hdGguZmxvb3IobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKTtcclxuICAgIGxldCB2YWxpZFNpbmNlID0gMCwgdmFsaWRVbnRpbCA9IDA7XHJcbiAgICBpZiAodHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCduYmYnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWyduYmYnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWydpYXQnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnZXhwJykpIHtcclxuICAgICAgICAgICAgdmFsaWRVbnRpbCA9IGNsYWltc1snZXhwJ107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyB0b2tlbiB3aWxsIGV4cGlyZSBhZnRlciAyNGggYnkgZGVmYXVsdFxyXG4gICAgICAgICAgICB2YWxpZFVudGlsID0gdmFsaWRTaW5jZSArIDg2NDAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiAoISFub3cgJiZcclxuICAgICAgICAhIXZhbGlkU2luY2UgJiZcclxuICAgICAgICAhIXZhbGlkVW50aWwgJiZcclxuICAgICAgICBub3cgPj0gdmFsaWRTaW5jZSAmJlxyXG4gICAgICAgIG5vdyA8PSB2YWxpZFVudGlsKTtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgcmV0dXJucyBpdHMgaXNzdWVkIGF0IHRpbWUgaWYgdmFsaWQsIG51bGwgb3RoZXJ3aXNlLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIG51bGwgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc3N1ZWRBdFRpbWUgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgaWYgKHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0JykpIHtcclxuICAgICAgICByZXR1cm4gY2xhaW1zWydpYXQnXTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCBjaGVja3MgdGhlIHZhbGlkaXR5IG9mIGl0cyBmb3JtYXQuIEV4cGVjdHMgYSB2YWxpZCBpc3N1ZWQtYXQgdGltZS5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNWYWxpZEZvcm1hdCA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgZGVjb2RlZCA9IGRlY29kZSh0b2tlbiksIGNsYWltcyA9IGRlY29kZWQuY2xhaW1zO1xyXG4gICAgcmV0dXJuICEhY2xhaW1zICYmIHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0Jyk7XHJcbn07XHJcbi8qKlxyXG4gKiBBdHRlbXB0cyB0byBwZWVyIGludG8gYW4gYXV0aCB0b2tlbiBhbmQgZGV0ZXJtaW5lIGlmIGl0J3MgYW4gYWRtaW4gYXV0aCB0b2tlbiBieSBsb29raW5nIGF0IHRoZSBjbGFpbXMgcG9ydGlvbi5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNBZG1pbiA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICByZXR1cm4gdHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zWydhZG1pbiddID09PSB0cnVlO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb250YWlucyhvYmosIGtleSkge1xyXG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XHJcbn1cclxuZnVuY3Rpb24gc2FmZUdldChvYmosIGtleSkge1xyXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICByZXR1cm4gb2JqW2tleV07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzRW1wdHkob2JqKSB7XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gbWFwKG9iaiwgZm4sIGNvbnRleHRPYmopIHtcclxuICAgIGNvbnN0IHJlcyA9IHt9O1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgICAgcmVzW2tleV0gPSBmbi5jYWxsKGNvbnRleHRPYmosIG9ialtrZXldLCBrZXksIG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxufVxyXG4vKipcclxuICogRGVlcCBlcXVhbCB0d28gb2JqZWN0cy4gU3VwcG9ydCBBcnJheXMgYW5kIE9iamVjdHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwRXF1YWwoYSwgYikge1xyXG4gICAgaWYgKGEgPT09IGIpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGNvbnN0IGFLZXlzID0gT2JqZWN0LmtleXMoYSk7XHJcbiAgICBjb25zdCBiS2V5cyA9IE9iamVjdC5rZXlzKGIpO1xyXG4gICAgZm9yIChjb25zdCBrIG9mIGFLZXlzKSB7XHJcbiAgICAgICAgaWYgKCFiS2V5cy5pbmNsdWRlcyhrKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGFQcm9wID0gYVtrXTtcclxuICAgICAgICBjb25zdCBiUHJvcCA9IGJba107XHJcbiAgICAgICAgaWYgKGlzT2JqZWN0KGFQcm9wKSAmJiBpc09iamVjdChiUHJvcCkpIHtcclxuICAgICAgICAgICAgaWYgKCFkZWVwRXF1YWwoYVByb3AsIGJQcm9wKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGFQcm9wICE9PSBiUHJvcCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBrIG9mIGJLZXlzKSB7XHJcbiAgICAgICAgaWYgKCFhS2V5cy5pbmNsdWRlcyhrKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gaXNPYmplY3QodGhpbmcpIHtcclxuICAgIHJldHVybiB0aGluZyAhPT0gbnVsbCAmJiB0eXBlb2YgdGhpbmcgPT09ICdvYmplY3QnO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZWplY3RzIGlmIHRoZSBnaXZlbiBwcm9taXNlIGRvZXNuJ3QgcmVzb2x2ZSBpbiB0aW1lSW5NUyBtaWxsaXNlY29uZHMuXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gcHJvbWlzZVdpdGhUaW1lb3V0KHByb21pc2UsIHRpbWVJbk1TID0gMjAwMCkge1xyXG4gICAgY29uc3QgZGVmZXJyZWRQcm9taXNlID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IGRlZmVycmVkUHJvbWlzZS5yZWplY3QoJ3RpbWVvdXQhJyksIHRpbWVJbk1TKTtcclxuICAgIHByb21pc2UudGhlbihkZWZlcnJlZFByb21pc2UucmVzb2x2ZSwgZGVmZXJyZWRQcm9taXNlLnJlamVjdCk7XHJcbiAgICByZXR1cm4gZGVmZXJyZWRQcm9taXNlLnByb21pc2U7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgYSBxdWVyeXN0cmluZy1mb3JtYXR0ZWQgc3RyaW5nIChlLmcuICZhcmc9dmFsJmFyZzI9dmFsMikgZnJvbSBhXHJcbiAqIHBhcmFtcyBvYmplY3QgKGUuZy4ge2FyZzogJ3ZhbCcsIGFyZzI6ICd2YWwyJ30pXHJcbiAqIE5vdGU6IFlvdSBtdXN0IHByZXBlbmQgaXQgd2l0aCA/IHdoZW4gYWRkaW5nIGl0IHRvIGEgVVJMLlxyXG4gKi9cclxuZnVuY3Rpb24gcXVlcnlzdHJpbmcocXVlcnlzdHJpbmdQYXJhbXMpIHtcclxuICAgIGNvbnN0IHBhcmFtcyA9IFtdO1xyXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocXVlcnlzdHJpbmdQYXJhbXMpKSB7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHZhbHVlLmZvckVhY2goYXJyYXlWYWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQoYXJyYXlWYWwpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBwYXJhbXMubGVuZ3RoID8gJyYnICsgcGFyYW1zLmpvaW4oJyYnKSA6ICcnO1xyXG59XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgcXVlcnlzdHJpbmcgKGUuZy4gP2FyZz12YWwmYXJnMj12YWwyKSBpbnRvIGEgcGFyYW1zIG9iamVjdFxyXG4gKiAoZS5nLiB7YXJnOiAndmFsJywgYXJnMjogJ3ZhbDInfSlcclxuICovXHJcbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5nRGVjb2RlKHF1ZXJ5c3RyaW5nKSB7XHJcbiAgICBjb25zdCBvYmogPSB7fTtcclxuICAgIGNvbnN0IHRva2VucyA9IHF1ZXJ5c3RyaW5nLnJlcGxhY2UoL15cXD8vLCAnJykuc3BsaXQoJyYnKTtcclxuICAgIHRva2Vucy5mb3JFYWNoKHRva2VuID0+IHtcclxuICAgICAgICBpZiAodG9rZW4pIHtcclxuICAgICAgICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gdG9rZW4uc3BsaXQoJz0nKTtcclxuICAgICAgICAgICAgb2JqW2RlY29kZVVSSUNvbXBvbmVudChrZXkpXSA9IGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gb2JqO1xyXG59XHJcbi8qKlxyXG4gKiBFeHRyYWN0IHRoZSBxdWVyeSBzdHJpbmcgcGFydCBvZiBhIFVSTCwgaW5jbHVkaW5nIHRoZSBsZWFkaW5nIHF1ZXN0aW9uIG1hcmsgKGlmIHByZXNlbnQpLlxyXG4gKi9cclxuZnVuY3Rpb24gZXh0cmFjdFF1ZXJ5c3RyaW5nKHVybCkge1xyXG4gICAgY29uc3QgcXVlcnlTdGFydCA9IHVybC5pbmRleE9mKCc/Jyk7XHJcbiAgICBpZiAoIXF1ZXJ5U3RhcnQpIHtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbiAgICBjb25zdCBmcmFnbWVudFN0YXJ0ID0gdXJsLmluZGV4T2YoJyMnLCBxdWVyeVN0YXJ0KTtcclxuICAgIHJldHVybiB1cmwuc3Vic3RyaW5nKHF1ZXJ5U3RhcnQsIGZyYWdtZW50U3RhcnQgPiAwID8gZnJhZ21lbnRTdGFydCA6IHVuZGVmaW5lZCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoLlxyXG4gKiBWYXJpYWJsZSBuYW1lcyBmb2xsb3cgdGhlIG5vdGF0aW9uIGluIEZJUFMgUFVCIDE4MC0zOlxyXG4gKiBodHRwOi8vY3NyYy5uaXN0Lmdvdi9wdWJsaWNhdGlvbnMvZmlwcy9maXBzMTgwLTMvZmlwczE4MC0zX2ZpbmFsLnBkZi5cclxuICpcclxuICogVXNhZ2U6XHJcbiAqICAgdmFyIHNoYTEgPSBuZXcgc2hhMSgpO1xyXG4gKiAgIHNoYTEudXBkYXRlKGJ5dGVzKTtcclxuICogICB2YXIgaGFzaCA9IHNoYTEuZGlnZXN0KCk7XHJcbiAqXHJcbiAqIFBlcmZvcm1hbmNlOlxyXG4gKiAgIENocm9tZSAyMzogICB+NDAwIE1iaXQvc1xyXG4gKiAgIEZpcmVmb3ggMTY6ICB+MjUwIE1iaXQvc1xyXG4gKlxyXG4gKi9cclxuLyoqXHJcbiAqIFNIQS0xIGNyeXB0b2dyYXBoaWMgaGFzaCBjb25zdHJ1Y3Rvci5cclxuICpcclxuICogVGhlIHByb3BlcnRpZXMgZGVjbGFyZWQgaGVyZSBhcmUgZGlzY3Vzc2VkIGluIHRoZSBhYm92ZSBhbGdvcml0aG0gZG9jdW1lbnQuXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAZmluYWxcclxuICogQHN0cnVjdFxyXG4gKi9cclxuY2xhc3MgU2hhMSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIb2xkcyB0aGUgcHJldmlvdXMgdmFsdWVzIG9mIGFjY3VtdWxhdGVkIHZhcmlhYmxlcyBhLWUgaW4gdGhlIGNvbXByZXNzX1xyXG4gICAgICAgICAqIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5jaGFpbl8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIGJ1ZmZlciBob2xkaW5nIHRoZSBwYXJ0aWFsbHkgY29tcHV0ZWQgaGFzaCByZXN1bHQuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmJ1Zl8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBbiBhcnJheSBvZiA4MCBieXRlcywgZWFjaCBhIHBhcnQgb2YgdGhlIG1lc3NhZ2UgdG8gYmUgaGFzaGVkLiAgUmVmZXJyZWQgdG9cclxuICAgICAgICAgKiBhcyB0aGUgbWVzc2FnZSBzY2hlZHVsZSBpbiB0aGUgZG9jcy5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuV18gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb250YWlucyBkYXRhIG5lZWRlZCB0byBwYWQgbWVzc2FnZXMgbGVzcyB0aGFuIDY0IGJ5dGVzLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5wYWRfID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHByaXZhdGUge251bWJlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmluYnVmXyA9IDA7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHByaXZhdGUge251bWJlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnRvdGFsXyA9IDA7XHJcbiAgICAgICAgdGhpcy5ibG9ja1NpemUgPSA1MTIgLyA4O1xyXG4gICAgICAgIHRoaXMucGFkX1swXSA9IDEyODtcclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMuYmxvY2tTaXplOyArK2kpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWRfW2ldID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgfVxyXG4gICAgcmVzZXQoKSB7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMF0gPSAweDY3NDUyMzAxO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzFdID0gMHhlZmNkYWI4OTtcclxuICAgICAgICB0aGlzLmNoYWluX1syXSA9IDB4OThiYWRjZmU7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bM10gPSAweDEwMzI1NDc2O1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzRdID0gMHhjM2QyZTFmMDtcclxuICAgICAgICB0aGlzLmluYnVmXyA9IDA7XHJcbiAgICAgICAgdGhpcy50b3RhbF8gPSAwO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnRlcm5hbCBjb21wcmVzcyBoZWxwZXIgZnVuY3Rpb24uXHJcbiAgICAgKiBAcGFyYW0gYnVmIEJsb2NrIHRvIGNvbXByZXNzLlxyXG4gICAgICogQHBhcmFtIG9mZnNldCBPZmZzZXQgb2YgdGhlIGJsb2NrIGluIHRoZSBidWZmZXIuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjb21wcmVzc18oYnVmLCBvZmZzZXQpIHtcclxuICAgICAgICBpZiAoIW9mZnNldCkge1xyXG4gICAgICAgICAgICBvZmZzZXQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBXID0gdGhpcy5XXztcclxuICAgICAgICAvLyBnZXQgMTYgYmlnIGVuZGlhbiB3b3Jkc1xyXG4gICAgICAgIGlmICh0eXBlb2YgYnVmID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE8odXNlcik6IFtidWcgODE0MDEyMl0gUmVjZW50IHZlcnNpb25zIG9mIFNhZmFyaSBmb3IgTWFjIE9TIGFuZCBpT1NcclxuICAgICAgICAgICAgICAgIC8vIGhhdmUgYSBidWcgdGhhdCB0dXJucyB0aGUgcG9zdC1pbmNyZW1lbnQgKysgb3BlcmF0b3IgaW50byBwcmUtaW5jcmVtZW50XHJcbiAgICAgICAgICAgICAgICAvLyBkdXJpbmcgSklUIGNvbXBpbGF0aW9uLiAgV2UgaGF2ZSBjb2RlIHRoYXQgZGVwZW5kcyBoZWF2aWx5IG9uIFNIQS0xIGZvclxyXG4gICAgICAgICAgICAgICAgLy8gY29ycmVjdG5lc3MgYW5kIHdoaWNoIGlzIGFmZmVjdGVkIGJ5IHRoaXMgYnVnLCBzbyBJJ3ZlIHJlbW92ZWQgYWxsIHVzZXNcclxuICAgICAgICAgICAgICAgIC8vIG9mIHBvc3QtaW5jcmVtZW50ICsrIGluIHdoaWNoIHRoZSByZXN1bHQgdmFsdWUgaXMgdXNlZC4gIFdlIGNhbiByZXZlcnRcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMgY2hhbmdlIG9uY2UgdGhlIFNhZmFyaSBidWdcclxuICAgICAgICAgICAgICAgIC8vIChodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTA5MDM2KSBoYXMgYmVlbiBmaXhlZCBhbmRcclxuICAgICAgICAgICAgICAgIC8vIG1vc3QgY2xpZW50cyBoYXZlIGJlZW4gdXBkYXRlZC5cclxuICAgICAgICAgICAgICAgIFdbaV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQpIDw8IDI0KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQgKyAxKSA8PCAxNikgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMikgPDwgOCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWYuY2hhckNvZGVBdChvZmZzZXQgKyAzKTtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSA0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIFdbaV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0XSA8PCAyNCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldCArIDFdIDw8IDE2KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0ICsgMl0gPDwgOCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWZbb2Zmc2V0ICsgM107XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gNDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBleHBhbmQgdG8gODAgd29yZHNcclxuICAgICAgICBmb3IgKGxldCBpID0gMTY7IGkgPCA4MDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHQgPSBXW2kgLSAzXSBeIFdbaSAtIDhdIF4gV1tpIC0gMTRdIF4gV1tpIC0gMTZdO1xyXG4gICAgICAgICAgICBXW2ldID0gKCh0IDw8IDEpIHwgKHQgPj4+IDMxKSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgYSA9IHRoaXMuY2hhaW5fWzBdO1xyXG4gICAgICAgIGxldCBiID0gdGhpcy5jaGFpbl9bMV07XHJcbiAgICAgICAgbGV0IGMgPSB0aGlzLmNoYWluX1syXTtcclxuICAgICAgICBsZXQgZCA9IHRoaXMuY2hhaW5fWzNdO1xyXG4gICAgICAgIGxldCBlID0gdGhpcy5jaGFpbl9bNF07XHJcbiAgICAgICAgbGV0IGYsIGs7XHJcbiAgICAgICAgLy8gVE9ETyh1c2VyKTogVHJ5IHRvIHVucm9sbCB0aGlzIGxvb3AgdG8gc3BlZWQgdXAgdGhlIGNvbXB1dGF0aW9uLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgODA7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoaSA8IDQwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA8IDIwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IGQgXiAoYiAmIChjIF4gZCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDVhODI3OTk5O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IGIgXiBjIF4gZDtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg2ZWQ5ZWJhMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChpIDwgNjApIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gKGIgJiBjKSB8IChkICYgKGIgfCBjKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4OGYxYmJjZGM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gYiBeIGMgXiBkO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweGNhNjJjMWQ2O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHQgPSAoKChhIDw8IDUpIHwgKGEgPj4+IDI3KSkgKyBmICsgZSArIGsgKyBXW2ldKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgICAgIGUgPSBkO1xyXG4gICAgICAgICAgICBkID0gYztcclxuICAgICAgICAgICAgYyA9ICgoYiA8PCAzMCkgfCAoYiA+Pj4gMikpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICAgICAgYiA9IGE7XHJcbiAgICAgICAgICAgIGEgPSB0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNoYWluX1swXSA9ICh0aGlzLmNoYWluX1swXSArIGEpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1sxXSA9ICh0aGlzLmNoYWluX1sxXSArIGIpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1syXSA9ICh0aGlzLmNoYWluX1syXSArIGMpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1szXSA9ICh0aGlzLmNoYWluX1szXSArIGQpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1s0XSA9ICh0aGlzLmNoYWluX1s0XSArIGUpICYgMHhmZmZmZmZmZjtcclxuICAgIH1cclxuICAgIHVwZGF0ZShieXRlcywgbGVuZ3RoKSB7XHJcbiAgICAgICAgLy8gVE9ETyhqb2hubGVueik6IHRpZ2h0ZW4gdGhlIGZ1bmN0aW9uIHNpZ25hdHVyZSBhbmQgcmVtb3ZlIHRoaXMgY2hlY2tcclxuICAgICAgICBpZiAoYnl0ZXMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBsZW5ndGggPSBieXRlcy5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGxlbmd0aE1pbnVzQmxvY2sgPSBsZW5ndGggLSB0aGlzLmJsb2NrU2l6ZTtcclxuICAgICAgICBsZXQgbiA9IDA7XHJcbiAgICAgICAgLy8gVXNpbmcgbG9jYWwgaW5zdGVhZCBvZiBtZW1iZXIgdmFyaWFibGVzIGdpdmVzIH41JSBzcGVlZHVwIG9uIEZpcmVmb3ggMTYuXHJcbiAgICAgICAgY29uc3QgYnVmID0gdGhpcy5idWZfO1xyXG4gICAgICAgIGxldCBpbmJ1ZiA9IHRoaXMuaW5idWZfO1xyXG4gICAgICAgIC8vIFRoZSBvdXRlciB3aGlsZSBsb29wIHNob3VsZCBleGVjdXRlIGF0IG1vc3QgdHdpY2UuXHJcbiAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgLy8gV2hlbiB3ZSBoYXZlIG5vIGRhdGEgaW4gdGhlIGJsb2NrIHRvIHRvcCB1cCwgd2UgY2FuIGRpcmVjdGx5IHByb2Nlc3MgdGhlXHJcbiAgICAgICAgICAgIC8vIGlucHV0IGJ1ZmZlciAoYXNzdW1pbmcgaXQgY29udGFpbnMgc3VmZmljaWVudCBkYXRhKS4gVGhpcyBnaXZlcyB+MjUlXHJcbiAgICAgICAgICAgIC8vIHNwZWVkdXAgb24gQ2hyb21lIDIzIGFuZCB+MTUlIHNwZWVkdXAgb24gRmlyZWZveCAxNiwgYnV0IHJlcXVpcmVzIHRoYXRcclxuICAgICAgICAgICAgLy8gdGhlIGRhdGEgaXMgcHJvdmlkZWQgaW4gbGFyZ2UgY2h1bmtzIChvciBpbiBtdWx0aXBsZXMgb2YgNjQgYnl0ZXMpLlxyXG4gICAgICAgICAgICBpZiAoaW5idWYgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDw9IGxlbmd0aE1pbnVzQmxvY2spIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhieXRlcywgbik7XHJcbiAgICAgICAgICAgICAgICAgICAgbiArPSB0aGlzLmJsb2NrU2l6ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGJ5dGVzID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBidWZbaW5idWZdID0gYnl0ZXMuY2hhckNvZGVBdChuKTtcclxuICAgICAgICAgICAgICAgICAgICArK2luYnVmO1xyXG4gICAgICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5idWYgPT09IHRoaXMuYmxvY2tTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ1Zik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluYnVmID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSnVtcCB0byB0aGUgb3V0ZXIgbG9vcCBzbyB3ZSB1c2UgdGhlIGZ1bGwtYmxvY2sgb3B0aW1pemF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlc1tuXTtcclxuICAgICAgICAgICAgICAgICAgICArK2luYnVmO1xyXG4gICAgICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5idWYgPT09IHRoaXMuYmxvY2tTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ1Zik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluYnVmID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSnVtcCB0byB0aGUgb3V0ZXIgbG9vcCBzbyB3ZSB1c2UgdGhlIGZ1bGwtYmxvY2sgb3B0aW1pemF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSBpbmJ1ZjtcclxuICAgICAgICB0aGlzLnRvdGFsXyArPSBsZW5ndGg7XHJcbiAgICB9XHJcbiAgICAvKiogQG92ZXJyaWRlICovXHJcbiAgICBkaWdlc3QoKSB7XHJcbiAgICAgICAgY29uc3QgZGlnZXN0ID0gW107XHJcbiAgICAgICAgbGV0IHRvdGFsQml0cyA9IHRoaXMudG90YWxfICogODtcclxuICAgICAgICAvLyBBZGQgcGFkIDB4ODAgMHgwMCouXHJcbiAgICAgICAgaWYgKHRoaXMuaW5idWZfIDwgNTYpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy5wYWRfLCA1NiAtIHRoaXMuaW5idWZfKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKHRoaXMucGFkXywgdGhpcy5ibG9ja1NpemUgLSAodGhpcy5pbmJ1Zl8gLSA1NikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBZGQgIyBiaXRzLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmJsb2NrU2l6ZSAtIDE7IGkgPj0gNTY7IGktLSkge1xyXG4gICAgICAgICAgICB0aGlzLmJ1Zl9baV0gPSB0b3RhbEJpdHMgJiAyNTU7XHJcbiAgICAgICAgICAgIHRvdGFsQml0cyAvPSAyNTY7IC8vIERvbid0IHVzZSBiaXQtc2hpZnRpbmcgaGVyZSFcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb21wcmVzc18odGhpcy5idWZfKTtcclxuICAgICAgICBsZXQgbiA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDI0OyBqID49IDA7IGogLT0gOCkge1xyXG4gICAgICAgICAgICAgICAgZGlnZXN0W25dID0gKHRoaXMuY2hhaW5fW2ldID4+IGopICYgMjU1O1xyXG4gICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkaWdlc3Q7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEhlbHBlciB0byBtYWtlIGEgU3Vic2NyaWJlIGZ1bmN0aW9uIChqdXN0IGxpa2UgUHJvbWlzZSBoZWxwcyBtYWtlIGFcclxuICogVGhlbmFibGUpLlxyXG4gKlxyXG4gKiBAcGFyYW0gZXhlY3V0b3IgRnVuY3Rpb24gd2hpY2ggY2FuIG1ha2UgY2FsbHMgdG8gYSBzaW5nbGUgT2JzZXJ2ZXJcclxuICogICAgIGFzIGEgcHJveHkuXHJcbiAqIEBwYXJhbSBvbk5vT2JzZXJ2ZXJzIENhbGxiYWNrIHdoZW4gY291bnQgb2YgT2JzZXJ2ZXJzIGdvZXMgdG8gemVyby5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVN1YnNjcmliZShleGVjdXRvciwgb25Ob09ic2VydmVycykge1xyXG4gICAgY29uc3QgcHJveHkgPSBuZXcgT2JzZXJ2ZXJQcm94eShleGVjdXRvciwgb25Ob09ic2VydmVycyk7XHJcbiAgICByZXR1cm4gcHJveHkuc3Vic2NyaWJlLmJpbmQocHJveHkpO1xyXG59XHJcbi8qKlxyXG4gKiBJbXBsZW1lbnQgZmFuLW91dCBmb3IgYW55IG51bWJlciBvZiBPYnNlcnZlcnMgYXR0YWNoZWQgdmlhIGEgc3Vic2NyaWJlXHJcbiAqIGZ1bmN0aW9uLlxyXG4gKi9cclxuY2xhc3MgT2JzZXJ2ZXJQcm94eSB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxyXG4gICAgICogICAgIGFzIGEgcHJveHkuXHJcbiAgICAgKiBAcGFyYW0gb25Ob09ic2VydmVycyBDYWxsYmFjayB3aGVuIGNvdW50IG9mIE9ic2VydmVycyBnb2VzIHRvIHplcm8uXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKSB7XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSBbXTtcclxuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJDb3VudCA9IDA7XHJcbiAgICAgICAgLy8gTWljcm8tdGFzayBzY2hlZHVsaW5nIGJ5IGNhbGxpbmcgdGFzay50aGVuKCkuXHJcbiAgICAgICAgdGhpcy50YXNrID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgdGhpcy5maW5hbGl6ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnMgPSBvbk5vT2JzZXJ2ZXJzO1xyXG4gICAgICAgIC8vIENhbGwgdGhlIGV4ZWN1dG9yIGFzeW5jaHJvbm91c2x5IHNvIHN1YnNjcmliZXJzIHRoYXQgYXJlIGNhbGxlZFxyXG4gICAgICAgIC8vIHN5bmNocm9ub3VzbHkgYWZ0ZXIgdGhlIGNyZWF0aW9uIG9mIHRoZSBzdWJzY3JpYmUgZnVuY3Rpb25cclxuICAgICAgICAvLyBjYW4gc3RpbGwgcmVjZWl2ZSB0aGUgdmVyeSBmaXJzdCB2YWx1ZSBnZW5lcmF0ZWQgaW4gdGhlIGV4ZWN1dG9yLlxyXG4gICAgICAgIHRoaXMudGFza1xyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4ZWN1dG9yKHRoaXMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5lcnJvcihlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIG5leHQodmFsdWUpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCh2YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlcnJvcihlcnJvcikge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jbG9zZShlcnJvcik7XHJcbiAgICB9XHJcbiAgICBjb21wbGV0ZSgpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN1YnNjcmliZSBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGFkZCBhbiBPYnNlcnZlciB0byB0aGUgZmFuLW91dCBsaXN0LlxyXG4gICAgICpcclxuICAgICAqIC0gV2UgcmVxdWlyZSB0aGF0IG5vIGV2ZW50IGlzIHNlbnQgdG8gYSBzdWJzY3JpYmVyIHN5Y2hyb25vdXNseSB0byB0aGVpclxyXG4gICAgICogICBjYWxsIHRvIHN1YnNjcmliZSgpLlxyXG4gICAgICovXHJcbiAgICBzdWJzY3JpYmUobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkge1xyXG4gICAgICAgIGxldCBvYnNlcnZlcjtcclxuICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXIgPT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICBlcnJvciA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIGNvbXBsZXRlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIE9ic2VydmVyLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBc3NlbWJsZSBhbiBPYnNlcnZlciBvYmplY3Qgd2hlbiBwYXNzZWQgYXMgY2FsbGJhY2sgZnVuY3Rpb25zLlxyXG4gICAgICAgIGlmIChpbXBsZW1lbnRzQW55TWV0aG9kcyhuZXh0T3JPYnNlcnZlciwgW1xyXG4gICAgICAgICAgICAnbmV4dCcsXHJcbiAgICAgICAgICAgICdlcnJvcicsXHJcbiAgICAgICAgICAgICdjb21wbGV0ZSdcclxuICAgICAgICBdKSkge1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IG5leHRPck9ic2VydmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0OiBuZXh0T3JPYnNlcnZlcixcclxuICAgICAgICAgICAgICAgIGVycm9yLFxyXG4gICAgICAgICAgICAgICAgY29tcGxldGVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLm5leHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0ID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLmVycm9yID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIuY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHVuc3ViID0gdGhpcy51bnN1YnNjcmliZU9uZS5iaW5kKHRoaXMsIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCk7XHJcbiAgICAgICAgLy8gQXR0ZW1wdCB0byBzdWJzY3JpYmUgdG8gYSB0ZXJtaW5hdGVkIE9ic2VydmFibGUgLSB3ZVxyXG4gICAgICAgIC8vIGp1c3QgcmVzcG9uZCB0byB0aGUgT2JzZXJ2ZXIgd2l0aCB0aGUgZmluYWwgZXJyb3Igb3IgY29tcGxldGVcclxuICAgICAgICAvLyBldmVudC5cclxuICAgICAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpbmFsRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IodGhpcy5maW5hbEVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBub3RoaW5nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9ic2VydmVycy5wdXNoKG9ic2VydmVyKTtcclxuICAgICAgICByZXR1cm4gdW5zdWI7XHJcbiAgICB9XHJcbiAgICAvLyBVbnN1YnNjcmliZSBpcyBzeW5jaHJvbm91cyAtIHdlIGd1YXJhbnRlZSB0aGF0IG5vIGV2ZW50cyBhcmUgc2VudCB0b1xyXG4gICAgLy8gYW55IHVuc3Vic2NyaWJlZCBPYnNlcnZlci5cclxuICAgIHVuc3Vic2NyaWJlT25lKGkpIHtcclxuICAgICAgICBpZiAodGhpcy5vYnNlcnZlcnMgPT09IHVuZGVmaW5lZCB8fCB0aGlzLm9ic2VydmVyc1tpXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVsZXRlIHRoaXMub2JzZXJ2ZXJzW2ldO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJDb3VudCAtPSAxO1xyXG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVyQ291bnQgPT09IDAgJiYgdGhpcy5vbk5vT2JzZXJ2ZXJzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZvckVhY2hPYnNlcnZlcihmbikge1xyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICAvLyBBbHJlYWR5IGNsb3NlZCBieSBwcmV2aW91cyBldmVudC4uLi5qdXN0IGVhdCB0aGUgYWRkaXRpb25hbCB2YWx1ZXMuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU2luY2Ugc2VuZE9uZSBjYWxscyBhc3luY2hyb25vdXNseSAtIHRoZXJlIGlzIG5vIGNoYW5jZSB0aGF0XHJcbiAgICAgICAgLy8gdGhpcy5vYnNlcnZlcnMgd2lsbCBiZWNvbWUgdW5kZWZpbmVkLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5vYnNlcnZlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5zZW5kT25lKGksIGZuKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBDYWxsIHRoZSBPYnNlcnZlciB2aWEgb25lIG9mIGl0J3MgY2FsbGJhY2sgZnVuY3Rpb24uIFdlIGFyZSBjYXJlZnVsIHRvXHJcbiAgICAvLyBjb25maXJtIHRoYXQgdGhlIG9ic2VydmUgaGFzIG5vdCBiZWVuIHVuc3Vic2NyaWJlZCBzaW5jZSB0aGlzIGFzeW5jaHJvbm91c1xyXG4gICAgLy8gZnVuY3Rpb24gaGFkIGJlZW4gcXVldWVkLlxyXG4gICAgc2VuZE9uZShpLCBmbikge1xyXG4gICAgICAgIC8vIEV4ZWN1dGUgdGhlIGNhbGxiYWNrIGFzeW5jaHJvbm91c2x5XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJzICE9PSB1bmRlZmluZWQgJiYgdGhpcy5vYnNlcnZlcnNbaV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBmbih0aGlzLm9ic2VydmVyc1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSBleGNlcHRpb25zIHJhaXNlZCBpbiBPYnNlcnZlcnMgb3IgbWlzc2luZyBtZXRob2RzIG9mIGFuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gT2JzZXJ2ZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTG9nIGVycm9yIHRvIGNvbnNvbGUuIGIvMzE0MDQ4MDZcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIGNvbnNvbGUuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNsb3NlKGVycikge1xyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZmluYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICBpZiAoZXJyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5maW5hbEVycm9yID0gZXJyO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBQcm94eSBpcyBubyBsb25nZXIgbmVlZGVkIC0gZ2FyYmFnZSBjb2xsZWN0IHJlZmVyZW5jZXNcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9ic2VydmVycyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbi8qKiBUdXJuIHN5bmNocm9ub3VzIGZ1bmN0aW9uIGludG8gb25lIGNhbGxlZCBhc3luY2hyb25vdXNseS4gKi9cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcclxuZnVuY3Rpb24gYXN5bmMoZm4sIG9uRXJyb3IpIHtcclxuICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xyXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSh0cnVlKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGZuKC4uLmFyZ3MpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgaWYgKG9uRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm4gdHJ1ZSBpZiB0aGUgb2JqZWN0IHBhc3NlZCBpbiBpbXBsZW1lbnRzIGFueSBvZiB0aGUgbmFtZWQgbWV0aG9kcy5cclxuICovXHJcbmZ1bmN0aW9uIGltcGxlbWVudHNBbnlNZXRob2RzKG9iaiwgbWV0aG9kcykge1xyXG4gICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8IG9iaiA9PT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgbWV0aG9kIG9mIG1ldGhvZHMpIHtcclxuICAgICAgICBpZiAobWV0aG9kIGluIG9iaiAmJiB0eXBlb2Ygb2JqW21ldGhvZF0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbmZ1bmN0aW9uIG5vb3AoKSB7XHJcbiAgICAvLyBkbyBub3RoaW5nXHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENoZWNrIHRvIG1ha2Ugc3VyZSB0aGUgYXBwcm9wcmlhdGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQgZm9yIGEgcHVibGljIGZ1bmN0aW9uLlxyXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgaXQgZmFpbHMuXHJcbiAqXHJcbiAqIEBwYXJhbSBmbk5hbWUgVGhlIGZ1bmN0aW9uIG5hbWVcclxuICogQHBhcmFtIG1pbkNvdW50IFRoZSBtaW5pbXVtIG51bWJlciBvZiBhcmd1bWVudHMgdG8gYWxsb3cgZm9yIHRoZSBmdW5jdGlvbiBjYWxsXHJcbiAqIEBwYXJhbSBtYXhDb3VudCBUaGUgbWF4aW11bSBudW1iZXIgb2YgYXJndW1lbnQgdG8gYWxsb3cgZm9yIHRoZSBmdW5jdGlvbiBjYWxsXHJcbiAqIEBwYXJhbSBhcmdDb3VudCBUaGUgYWN0dWFsIG51bWJlciBvZiBhcmd1bWVudHMgcHJvdmlkZWQuXHJcbiAqL1xyXG5jb25zdCB2YWxpZGF0ZUFyZ0NvdW50ID0gZnVuY3Rpb24gKGZuTmFtZSwgbWluQ291bnQsIG1heENvdW50LCBhcmdDb3VudCkge1xyXG4gICAgbGV0IGFyZ0Vycm9yO1xyXG4gICAgaWYgKGFyZ0NvdW50IDwgbWluQ291bnQpIHtcclxuICAgICAgICBhcmdFcnJvciA9ICdhdCBsZWFzdCAnICsgbWluQ291bnQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChhcmdDb3VudCA+IG1heENvdW50KSB7XHJcbiAgICAgICAgYXJnRXJyb3IgPSBtYXhDb3VudCA9PT0gMCA/ICdub25lJyA6ICdubyBtb3JlIHRoYW4gJyArIG1heENvdW50O1xyXG4gICAgfVxyXG4gICAgaWYgKGFyZ0Vycm9yKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBmbk5hbWUgK1xyXG4gICAgICAgICAgICAnIGZhaWxlZDogV2FzIGNhbGxlZCB3aXRoICcgK1xyXG4gICAgICAgICAgICBhcmdDb3VudCArXHJcbiAgICAgICAgICAgIChhcmdDb3VudCA9PT0gMSA/ICcgYXJndW1lbnQuJyA6ICcgYXJndW1lbnRzLicpICtcclxuICAgICAgICAgICAgJyBFeHBlY3RzICcgK1xyXG4gICAgICAgICAgICBhcmdFcnJvciArXHJcbiAgICAgICAgICAgICcuJztcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogR2VuZXJhdGVzIGEgc3RyaW5nIHRvIHByZWZpeCBhbiBlcnJvciBtZXNzYWdlIGFib3V0IGZhaWxlZCBhcmd1bWVudCB2YWxpZGF0aW9uXHJcbiAqXHJcbiAqIEBwYXJhbSBmbk5hbWUgVGhlIGZ1bmN0aW9uIG5hbWVcclxuICogQHBhcmFtIGFyZ05hbWUgVGhlIG5hbWUgb2YgdGhlIGFyZ3VtZW50XHJcbiAqIEByZXR1cm4gVGhlIHByZWZpeCB0byBhZGQgdG8gdGhlIGVycm9yIHRocm93biBmb3IgdmFsaWRhdGlvbi5cclxuICovXHJcbmZ1bmN0aW9uIGVycm9yUHJlZml4KGZuTmFtZSwgYXJnTmFtZSkge1xyXG4gICAgcmV0dXJuIGAke2ZuTmFtZX0gZmFpbGVkOiAke2FyZ05hbWV9IGFyZ3VtZW50IGA7XHJcbn1cclxuLyoqXHJcbiAqIEBwYXJhbSBmbk5hbWVcclxuICogQHBhcmFtIGFyZ3VtZW50TnVtYmVyXHJcbiAqIEBwYXJhbSBuYW1lc3BhY2VcclxuICogQHBhcmFtIG9wdGlvbmFsXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZU5hbWVzcGFjZShmbk5hbWUsIG5hbWVzcGFjZSwgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhbmFtZXNwYWNlKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBuYW1lc3BhY2UgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgLy9UT0RPOiBJIHNob3VsZCBkbyBtb3JlIHZhbGlkYXRpb24gaGVyZS4gV2Ugb25seSBhbGxvdyBjZXJ0YWluIGNoYXJzIGluIG5hbWVzcGFjZXMuXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgJ25hbWVzcGFjZScpICsgJ211c3QgYmUgYSB2YWxpZCBmaXJlYmFzZSBuYW1lc3BhY2UuJyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVDYWxsYmFjayhmbk5hbWUsIGFyZ3VtZW50TmFtZSwgXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXHJcbmNhbGxiYWNrLCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFjYWxsYmFjaykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE5hbWUpICsgJ211c3QgYmUgYSB2YWxpZCBmdW5jdGlvbi4nKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZUNvbnRleHRPYmplY3QoZm5OYW1lLCBhcmd1bWVudE5hbWUsIGNvbnRleHQsIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIWNvbnRleHQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNvbnRleHQgIT09ICdvYmplY3QnIHx8IGNvbnRleHQgPT09IG51bGwpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE5hbWUpICsgJ211c3QgYmUgYSB2YWxpZCBjb250ZXh0IG9iamVjdC4nKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBDb2RlIG9yaWdpbmFsbHkgY2FtZSBmcm9tIGdvb2cuY3J5cHQuc3RyaW5nVG9VdGY4Qnl0ZUFycmF5LCBidXQgZm9yIHNvbWUgcmVhc29uIHRoZXlcclxuLy8gYXV0b21hdGljYWxseSByZXBsYWNlZCAnXFxyXFxuJyB3aXRoICdcXG4nLCBhbmQgdGhleSBkaWRuJ3QgaGFuZGxlIHN1cnJvZ2F0ZSBwYWlycyxcclxuLy8gc28gaXQncyBiZWVuIG1vZGlmaWVkLlxyXG4vLyBOb3RlIHRoYXQgbm90IGFsbCBVbmljb2RlIGNoYXJhY3RlcnMgYXBwZWFyIGFzIHNpbmdsZSBjaGFyYWN0ZXJzIGluIEphdmFTY3JpcHQgc3RyaW5ncy5cclxuLy8gZnJvbUNoYXJDb2RlIHJldHVybnMgdGhlIFVURi0xNiBlbmNvZGluZyBvZiBhIGNoYXJhY3RlciAtIHNvIHNvbWUgVW5pY29kZSBjaGFyYWN0ZXJzXHJcbi8vIHVzZSAyIGNoYXJhY3RlcnMgaW4gSmF2YXNjcmlwdC4gIEFsbCA0LWJ5dGUgVVRGLTggY2hhcmFjdGVycyBiZWdpbiB3aXRoIGEgZmlyc3RcclxuLy8gY2hhcmFjdGVyIGluIHRoZSByYW5nZSAweEQ4MDAgLSAweERCRkYgKHRoZSBmaXJzdCBjaGFyYWN0ZXIgb2YgYSBzby1jYWxsZWQgc3Vycm9nYXRlXHJcbi8vIHBhaXIpLlxyXG4vLyBTZWUgaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzUuMS8jc2VjLTE1LjEuM1xyXG4vKipcclxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxyXG4gKiBAcmV0dXJuIHtBcnJheX1cclxuICovXHJcbmNvbnN0IHN0cmluZ1RvQnl0ZUFycmF5ID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgY29uc3Qgb3V0ID0gW107XHJcbiAgICBsZXQgcCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgLy8gSXMgdGhpcyB0aGUgbGVhZCBzdXJyb2dhdGUgaW4gYSBzdXJyb2dhdGUgcGFpcj9cclxuICAgICAgICBpZiAoYyA+PSAweGQ4MDAgJiYgYyA8PSAweGRiZmYpIHtcclxuICAgICAgICAgICAgY29uc3QgaGlnaCA9IGMgLSAweGQ4MDA7IC8vIHRoZSBoaWdoIDEwIGJpdHMuXHJcbiAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgYXNzZXJ0KGkgPCBzdHIubGVuZ3RoLCAnU3Vycm9nYXRlIHBhaXIgbWlzc2luZyB0cmFpbCBzdXJyb2dhdGUuJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxvdyA9IHN0ci5jaGFyQ29kZUF0KGkpIC0gMHhkYzAwOyAvLyB0aGUgbG93IDEwIGJpdHMuXHJcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKGhpZ2ggPDwgMTApICsgbG93O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gNikgfCAxOTI7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCA2NTUzNikge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDEyKSB8IDIyNDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDE4KSB8IDI0MDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gMTIpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0O1xyXG59O1xyXG4vKipcclxuICogQ2FsY3VsYXRlIGxlbmd0aCB3aXRob3V0IGFjdHVhbGx5IGNvbnZlcnRpbmc7IHVzZWZ1bCBmb3IgZG9pbmcgY2hlYXBlciB2YWxpZGF0aW9uLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXHJcbiAqIEByZXR1cm4ge251bWJlcn1cclxuICovXHJcbmNvbnN0IHN0cmluZ0xlbmd0aCA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIHArKztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgcCArPSAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjID49IDB4ZDgwMCAmJiBjIDw9IDB4ZGJmZikge1xyXG4gICAgICAgICAgICAvLyBMZWFkIHN1cnJvZ2F0ZSBvZiBhIHN1cnJvZ2F0ZSBwYWlyLiAgVGhlIHBhaXIgdG9nZXRoZXIgd2lsbCB0YWtlIDQgYnl0ZXMgdG8gcmVwcmVzZW50LlxyXG4gICAgICAgICAgICBwICs9IDQ7XHJcbiAgICAgICAgICAgIGkrKzsgLy8gc2tpcCB0cmFpbCBzdXJyb2dhdGUuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwICs9IDM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHA7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDb3BpZWQgZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjExNzUyM1xyXG4gKiBHZW5lcmF0ZXMgYSBuZXcgdXVpZC5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgdXVpZHY0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgYyA9PiB7XHJcbiAgICAgICAgY29uc3QgciA9IChNYXRoLnJhbmRvbSgpICogMTYpIHwgMCwgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MykgfCAweDg7XHJcbiAgICAgICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpO1xyXG4gICAgfSk7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgYW1vdW50IG9mIG1pbGxpc2Vjb25kcyB0byBleHBvbmVudGlhbGx5IGluY3JlYXNlLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9JTlRFUlZBTF9NSUxMSVMgPSAxMDAwO1xyXG4vKipcclxuICogVGhlIGZhY3RvciB0byBiYWNrb2ZmIGJ5LlxyXG4gKiBTaG91bGQgYmUgYSBudW1iZXIgZ3JlYXRlciB0aGFuIDEuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0JBQ0tPRkZfRkFDVE9SID0gMjtcclxuLyoqXHJcbiAqIFRoZSBtYXhpbXVtIG1pbGxpc2Vjb25kcyB0byBpbmNyZWFzZSB0by5cclxuICpcclxuICogPHA+VmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gKi9cclxuY29uc3QgTUFYX1ZBTFVFX01JTExJUyA9IDQgKiA2MCAqIDYwICogMTAwMDsgLy8gRm91ciBob3VycywgbGlrZSBpT1MgYW5kIEFuZHJvaWQuXHJcbi8qKlxyXG4gKiBUaGUgcGVyY2VudGFnZSBvZiBiYWNrb2ZmIHRpbWUgdG8gcmFuZG9taXplIGJ5LlxyXG4gKiBTZWVcclxuICogaHR0cDovL2dvL3NhZmUtY2xpZW50LWJlaGF2aW9yI3N0ZXAtMS1kZXRlcm1pbmUtdGhlLWFwcHJvcHJpYXRlLXJldHJ5LWludGVydmFsLXRvLWhhbmRsZS1zcGlrZS10cmFmZmljXHJcbiAqIGZvciBjb250ZXh0LlxyXG4gKlxyXG4gKiA8cD5WaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAqL1xyXG5jb25zdCBSQU5ET01fRkFDVE9SID0gMC41O1xyXG4vKipcclxuICogQmFzZWQgb24gdGhlIGJhY2tvZmYgbWV0aG9kIGZyb21cclxuICogaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWxpYnJhcnkvYmxvYi9tYXN0ZXIvY2xvc3VyZS9nb29nL21hdGgvZXhwb25lbnRpYWxiYWNrb2ZmLmpzLlxyXG4gKiBFeHRyYWN0ZWQgaGVyZSBzbyB3ZSBkb24ndCBuZWVkIHRvIHBhc3MgbWV0YWRhdGEgYW5kIGEgc3RhdGVmdWwgRXhwb25lbnRpYWxCYWNrb2ZmIG9iamVjdCBhcm91bmQuXHJcbiAqL1xyXG5mdW5jdGlvbiBjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzKGJhY2tvZmZDb3VudCwgaW50ZXJ2YWxNaWxsaXMgPSBERUZBVUxUX0lOVEVSVkFMX01JTExJUywgYmFja29mZkZhY3RvciA9IERFRkFVTFRfQkFDS09GRl9GQUNUT1IpIHtcclxuICAgIC8vIENhbGN1bGF0ZXMgYW4gZXhwb25lbnRpYWxseSBpbmNyZWFzaW5nIHZhbHVlLlxyXG4gICAgLy8gRGV2aWF0aW9uOiBjYWxjdWxhdGVzIHZhbHVlIGZyb20gY291bnQgYW5kIGEgY29uc3RhbnQgaW50ZXJ2YWwsIHNvIHdlIG9ubHkgbmVlZCB0byBzYXZlIHZhbHVlXHJcbiAgICAvLyBhbmQgY291bnQgdG8gcmVzdG9yZSBzdGF0ZS5cclxuICAgIGNvbnN0IGN1cnJCYXNlVmFsdWUgPSBpbnRlcnZhbE1pbGxpcyAqIE1hdGgucG93KGJhY2tvZmZGYWN0b3IsIGJhY2tvZmZDb3VudCk7XHJcbiAgICAvLyBBIHJhbmRvbSBcImZ1enpcIiB0byBhdm9pZCB3YXZlcyBvZiByZXRyaWVzLlxyXG4gICAgLy8gRGV2aWF0aW9uOiByYW5kb21GYWN0b3IgaXMgcmVxdWlyZWQuXHJcbiAgICBjb25zdCByYW5kb21XYWl0ID0gTWF0aC5yb3VuZChcclxuICAgIC8vIEEgZnJhY3Rpb24gb2YgdGhlIGJhY2tvZmYgdmFsdWUgdG8gYWRkL3N1YnRyYWN0LlxyXG4gICAgLy8gRGV2aWF0aW9uOiBjaGFuZ2VzIG11bHRpcGxpY2F0aW9uIG9yZGVyIHRvIGltcHJvdmUgcmVhZGFiaWxpdHkuXHJcbiAgICBSQU5ET01fRkFDVE9SICpcclxuICAgICAgICBjdXJyQmFzZVZhbHVlICpcclxuICAgICAgICAvLyBBIHJhbmRvbSBmbG9hdCAocm91bmRlZCB0byBpbnQgYnkgTWF0aC5yb3VuZCBhYm92ZSkgaW4gdGhlIHJhbmdlIFstMSwgMV0uIERldGVybWluZXNcclxuICAgICAgICAvLyBpZiB3ZSBhZGQgb3Igc3VidHJhY3QuXHJcbiAgICAgICAgKE1hdGgucmFuZG9tKCkgLSAwLjUpICpcclxuICAgICAgICAyKTtcclxuICAgIC8vIExpbWl0cyBiYWNrb2ZmIHRvIG1heCB0byBhdm9pZCBlZmZlY3RpdmVseSBwZXJtYW5lbnQgYmFja29mZi5cclxuICAgIHJldHVybiBNYXRoLm1pbihNQVhfVkFMVUVfTUlMTElTLCBjdXJyQmFzZVZhbHVlICsgcmFuZG9tV2FpdCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGUgRW5nbGlzaCBvcmRpbmFsIGxldHRlcnMgYWZ0ZXIgYSBudW1iZXJcclxuICovXHJcbmZ1bmN0aW9uIG9yZGluYWwoaSkge1xyXG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaSkpIHtcclxuICAgICAgICByZXR1cm4gYCR7aX1gO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGkgKyBpbmRpY2F0b3IoaSk7XHJcbn1cclxuZnVuY3Rpb24gaW5kaWNhdG9yKGkpIHtcclxuICAgIGkgPSBNYXRoLmFicyhpKTtcclxuICAgIGNvbnN0IGNlbnQgPSBpICUgMTAwO1xyXG4gICAgaWYgKGNlbnQgPj0gMTAgJiYgY2VudCA8PSAyMCkge1xyXG4gICAgICAgIHJldHVybiAndGgnO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZGVjID0gaSAlIDEwO1xyXG4gICAgaWYgKGRlYyA9PT0gMSkge1xyXG4gICAgICAgIHJldHVybiAnc3QnO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlYyA9PT0gMikge1xyXG4gICAgICAgIHJldHVybiAnbmQnO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlYyA9PT0gMykge1xyXG4gICAgICAgIHJldHVybiAncmQnO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICd0aCc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0TW9kdWxhckluc3RhbmNlKHNlcnZpY2UpIHtcclxuICAgIGlmIChzZXJ2aWNlICYmIHNlcnZpY2UuX2RlbGVnYXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlcnZpY2UuX2RlbGVnYXRlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHNlcnZpY2U7XHJcbiAgICB9XHJcbn1cblxuZXhwb3J0IHsgQ09OU1RBTlRTLCBEZWZlcnJlZCwgRXJyb3JGYWN0b3J5LCBGaXJlYmFzZUVycm9yLCBNQVhfVkFMVUVfTUlMTElTLCBSQU5ET01fRkFDVE9SLCBTaGExLCBhcmVDb29raWVzRW5hYmxlZCwgYXNzZXJ0LCBhc3NlcnRpb25FcnJvciwgYXN5bmMsIGJhc2U2NCwgYmFzZTY0RGVjb2RlLCBiYXNlNjRFbmNvZGUsIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nLCBjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzLCBjb250YWlucywgY3JlYXRlTW9ja1VzZXJUb2tlbiwgY3JlYXRlU3Vic2NyaWJlLCBkZWNvZGUsIGRlZXBDb3B5LCBkZWVwRXF1YWwsIGRlZXBFeHRlbmQsIGVycm9yUHJlZml4LCBleHRyYWN0UXVlcnlzdHJpbmcsIGdldERlZmF1bHRBcHBDb25maWcsIGdldERlZmF1bHRFbXVsYXRvckhvc3QsIGdldERlZmF1bHRFbXVsYXRvckhvc3RuYW1lQW5kUG9ydCwgZ2V0RXhwZXJpbWVudGFsU2V0dGluZywgZ2V0R2xvYmFsLCBnZXRNb2R1bGFySW5zdGFuY2UsIGdldFVBLCBpc0FkbWluLCBpc0Jyb3dzZXIsIGlzQnJvd3NlckV4dGVuc2lvbiwgaXNFbGVjdHJvbiwgaXNFbXB0eSwgaXNJRSwgaXNJbmRleGVkREJBdmFpbGFibGUsIGlzTW9iaWxlQ29yZG92YSwgaXNOb2RlLCBpc05vZGVTZGssIGlzUmVhY3ROYXRpdmUsIGlzU2FmYXJpLCBpc1VXUCwgaXNWYWxpZEZvcm1hdCwgaXNWYWxpZFRpbWVzdGFtcCwgaXNzdWVkQXRUaW1lLCBqc29uRXZhbCwgbWFwLCBvcmRpbmFsLCBwcm9taXNlV2l0aFRpbWVvdXQsIHF1ZXJ5c3RyaW5nLCBxdWVyeXN0cmluZ0RlY29kZSwgc2FmZUdldCwgc3RyaW5nTGVuZ3RoLCBzdHJpbmdUb0J5dGVBcnJheSwgc3RyaW5naWZ5LCB1dWlkdjQsIHZhbGlkYXRlQXJnQ291bnQsIHZhbGlkYXRlQ2FsbGJhY2ssIHZhbGlkYXRlQ29udGV4dE9iamVjdCwgdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSwgdmFsaWRhdGVOYW1lc3BhY2UgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyBEZWZlcnJlZCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcblxuLyoqXHJcbiAqIENvbXBvbmVudCBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gYGF1dGhgLCBgYXV0aC1pbnRlcm5hbGBcclxuICovXHJcbmNsYXNzIENvbXBvbmVudCB7XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgcHVibGljIHNlcnZpY2UgbmFtZSwgZS5nLiBhcHAsIGF1dGgsIGZpcmVzdG9yZSwgZGF0YWJhc2VcclxuICAgICAqIEBwYXJhbSBpbnN0YW5jZUZhY3RvcnkgU2VydmljZSBmYWN0b3J5IHJlc3BvbnNpYmxlIGZvciBjcmVhdGluZyB0aGUgcHVibGljIGludGVyZmFjZVxyXG4gICAgICogQHBhcmFtIHR5cGUgd2hldGhlciB0aGUgc2VydmljZSBwcm92aWRlZCBieSB0aGUgY29tcG9uZW50IGlzIHB1YmxpYyBvciBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGluc3RhbmNlRmFjdG9yeSwgdHlwZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZUZhY3RvcnkgPSBpbnN0YW5jZUZhY3Rvcnk7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLm11bHRpcGxlSW5zdGFuY2VzID0gZmFsc2U7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUHJvcGVydGllcyB0byBiZSBhZGRlZCB0byB0aGUgc2VydmljZSBuYW1lc3BhY2VcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnNlcnZpY2VQcm9wcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuaW5zdGFudGlhdGlvbk1vZGUgPSBcIkxBWllcIiAvKiBMQVpZICovO1xyXG4gICAgICAgIHRoaXMub25JbnN0YW5jZUNyZWF0ZWQgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgc2V0SW5zdGFudGlhdGlvbk1vZGUobW9kZSkge1xyXG4gICAgICAgIHRoaXMuaW5zdGFudGlhdGlvbk1vZGUgPSBtb2RlO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2V0TXVsdGlwbGVJbnN0YW5jZXMobXVsdGlwbGVJbnN0YW5jZXMpIHtcclxuICAgICAgICB0aGlzLm11bHRpcGxlSW5zdGFuY2VzID0gbXVsdGlwbGVJbnN0YW5jZXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzZXRTZXJ2aWNlUHJvcHMocHJvcHMpIHtcclxuICAgICAgICB0aGlzLnNlcnZpY2VQcm9wcyA9IHByb3BzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2V0SW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2soY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLm9uSW5zdGFuY2VDcmVhdGVkID0gY2FsbGJhY2s7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9FTlRSWV9OQU1FID0gJ1tERUZBVUxUXSc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgaW5zdGFuY2UgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuICdhdXRoJywgJ2F1dGgtaW50ZXJuYWwnXHJcbiAqIE5hbWVTZXJ2aWNlTWFwcGluZ1tUXSBpcyBhbiBhbGlhcyBmb3IgdGhlIHR5cGUgb2YgdGhlIGluc3RhbmNlXHJcbiAqL1xyXG5jbGFzcyBQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmluc3RhbmNlcyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzT3B0aW9ucyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLm9uSW5pdENhbGxiYWNrcyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGlkZW50aWZpZXIgQSBwcm92aWRlciBjYW4gcHJvdmlkZSBtdWxpdHBsZSBpbnN0YW5jZXMgb2YgYSBzZXJ2aWNlXHJcbiAgICAgKiBpZiB0aGlzLmNvbXBvbmVudC5tdWx0aXBsZUluc3RhbmNlcyBpcyB0cnVlLlxyXG4gICAgICovXHJcbiAgICBnZXQoaWRlbnRpZmllcikge1xyXG4gICAgICAgIC8vIGlmIG11bHRpcGxlSW5zdGFuY2VzIGlzIG5vdCBzdXBwb3J0ZWQsIHVzZSB0aGUgZGVmYXVsdCBuYW1lXHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoIXRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuaGFzKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSkge1xyXG4gICAgICAgICAgICBjb25zdCBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkLnNldChub3JtYWxpemVkSWRlbnRpZmllciwgZGVmZXJyZWQpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSB8fFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXplIHRoZSBzZXJ2aWNlIGlmIGl0IGNhbiBiZSBhdXRvLWluaXRpYWxpemVkXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgdGhyb3dzIGFuIGV4Y2VwdGlvbiBkdXJpbmcgZ2V0KCksIGl0IHNob3VsZCBub3QgY2F1c2VcclxuICAgICAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yLiBXZSBqdXN0IHJldHVybiB0aGUgdW5yZXNvbHZlZCBwcm9taXNlIGluIHRoaXMgY2FzZS5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5nZXQobm9ybWFsaXplZElkZW50aWZpZXIpLnByb21pc2U7XHJcbiAgICB9XHJcbiAgICBnZXRJbW1lZGlhdGUob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICAvLyBpZiBtdWx0aXBsZUluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLCB1c2UgdGhlIGRlZmF1bHQgbmFtZVxyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmlkZW50aWZpZXIpO1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbmFsID0gKF9hID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLm9wdGlvbmFsKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSB8fFxyXG4gICAgICAgICAgICB0aGlzLnNob3VsZEF1dG9Jbml0aWFsaXplKCkpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEluIGNhc2UgYSBjb21wb25lbnQgaXMgbm90IGluaXRpYWxpemVkIGFuZCBzaG91bGQvY2FuIG5vdCBiZSBhdXRvLWluaXRpYWxpemVkIGF0IHRoZSBtb21lbnQsIHJldHVybiBudWxsIGlmIHRoZSBvcHRpb25hbCBmbGFnIGlzIHNldCwgb3IgdGhyb3dcclxuICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKGBTZXJ2aWNlICR7dGhpcy5uYW1lfSBpcyBub3QgYXZhaWxhYmxlYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRDb21wb25lbnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50O1xyXG4gICAgfVxyXG4gICAgc2V0Q29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgICAgIGlmIChjb21wb25lbnQubmFtZSAhPT0gdGhpcy5uYW1lKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBNaXNtYXRjaGluZyBDb21wb25lbnQgJHtjb21wb25lbnQubmFtZX0gZm9yIFByb3ZpZGVyICR7dGhpcy5uYW1lfS5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBDb21wb25lbnQgZm9yICR7dGhpcy5uYW1lfSBoYXMgYWxyZWFkeSBiZWVuIHByb3ZpZGVkYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gY29tcG9uZW50O1xyXG4gICAgICAgIC8vIHJldHVybiBlYXJseSB3aXRob3V0IGF0dGVtcHRpbmcgdG8gaW5pdGlhbGl6ZSB0aGUgY29tcG9uZW50IGlmIHRoZSBjb21wb25lbnQgcmVxdWlyZXMgZXhwbGljaXQgaW5pdGlhbGl6YXRpb24gKGNhbGxpbmcgYFByb3ZpZGVyLmluaXRpYWxpemUoKWApXHJcbiAgICAgICAgaWYgKCF0aGlzLnNob3VsZEF1dG9Jbml0aWFsaXplKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZiB0aGUgc2VydmljZSBpcyBlYWdlciwgaW5pdGlhbGl6ZSB0aGUgZGVmYXVsdCBpbnN0YW5jZVxyXG4gICAgICAgIGlmIChpc0NvbXBvbmVudEVhZ2VyKGNvbXBvbmVudCkpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7IGluc3RhbmNlSWRlbnRpZmllcjogREVGQVVMVF9FTlRSWV9OQU1FIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IGZvciBhbiBlYWdlciBDb21wb25lbnQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBkdXJpbmcgdGhlIGVhZ2VyXHJcbiAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXphdGlvbiwgaXQgc2hvdWxkIG5vdCBjYXVzZSBhIGZhdGFsIGVycm9yLlxyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogSW52ZXN0aWdhdGUgaWYgd2UgbmVlZCB0byBtYWtlIGl0IGNvbmZpZ3VyYWJsZSwgYmVjYXVzZSBzb21lIGNvbXBvbmVudCBtYXkgd2FudCB0byBjYXVzZVxyXG4gICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvciBpbiB0aGlzIGNhc2U/XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQ3JlYXRlIHNlcnZpY2UgaW5zdGFuY2VzIGZvciB0aGUgcGVuZGluZyBwcm9taXNlcyBhbmQgcmVzb2x2ZSB0aGVtXHJcbiAgICAgICAgLy8gTk9URTogaWYgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyBpcyBmYWxzZSwgb25seSB0aGUgZGVmYXVsdCBpbnN0YW5jZSB3aWxsIGJlIGNyZWF0ZWRcclxuICAgICAgICAvLyBhbmQgYWxsIHByb21pc2VzIHdpdGggcmVzb2x2ZSB3aXRoIGl0IHJlZ2FyZGxlc3Mgb2YgdGhlIGlkZW50aWZpZXIuXHJcbiAgICAgICAgZm9yIChjb25zdCBbaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZURlZmVycmVkXSBvZiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmVudHJpZXMoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAvLyBgZ2V0T3JJbml0aWFsaXplU2VydmljZSgpYCBzaG91bGQgYWx3YXlzIHJldHVybiBhIHZhbGlkIGluc3RhbmNlIHNpbmNlIGEgY29tcG9uZW50IGlzIGd1YXJhbnRlZWQuIHVzZSAhIHRvIG1ha2UgdHlwZXNjcmlwdCBoYXBweS5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlRGVmZXJyZWQucmVzb2x2ZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgdGhyb3dzIGFuIGV4Y2VwdGlvbiwgaXQgc2hvdWxkIG5vdCBjYXVzZVxyXG4gICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvci4gV2UganVzdCBsZWF2ZSB0aGUgcHJvbWlzZSB1bnJlc29sdmVkLlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2xlYXJJbnN0YW5jZShpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlcy5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICB9XHJcbiAgICAvLyBhcHAuZGVsZXRlKCkgd2lsbCBjYWxsIHRoaXMgbWV0aG9kIG9uIGV2ZXJ5IHByb3ZpZGVyIHRvIGRlbGV0ZSB0aGUgc2VydmljZXNcclxuICAgIC8vIFRPRE86IHNob3VsZCB3ZSBtYXJrIHRoZSBwcm92aWRlciBhcyBkZWxldGVkP1xyXG4gICAgYXN5bmMgZGVsZXRlKCkge1xyXG4gICAgICAgIGNvbnN0IHNlcnZpY2VzID0gQXJyYXkuZnJvbSh0aGlzLmluc3RhbmNlcy52YWx1ZXMoKSk7XHJcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgICAgICAuLi5zZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgLmZpbHRlcihzZXJ2aWNlID0+ICdJTlRFUk5BTCcgaW4gc2VydmljZSkgLy8gbGVnYWN5IHNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgLm1hcChzZXJ2aWNlID0+IHNlcnZpY2UuSU5URVJOQUwuZGVsZXRlKCkpLFxyXG4gICAgICAgICAgICAuLi5zZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgLmZpbHRlcihzZXJ2aWNlID0+ICdfZGVsZXRlJyBpbiBzZXJ2aWNlKSAvLyBtb2R1bGFyaXplZCBzZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgIC5tYXAoc2VydmljZSA9PiBzZXJ2aWNlLl9kZWxldGUoKSlcclxuICAgICAgICBdKTtcclxuICAgIH1cclxuICAgIGlzQ29tcG9uZW50U2V0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudCAhPSBudWxsO1xyXG4gICAgfVxyXG4gICAgaXNJbml0aWFsaXplZChpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzLmhhcyhpZGVudGlmaWVyKTtcclxuICAgIH1cclxuICAgIGdldE9wdGlvbnMoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlc09wdGlvbnMuZ2V0KGlkZW50aWZpZXIpIHx8IHt9O1xyXG4gICAgfVxyXG4gICAgaW5pdGlhbGl6ZShvcHRzID0ge30pIHtcclxuICAgICAgICBjb25zdCB7IG9wdGlvbnMgPSB7fSB9ID0gb3B0cztcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKG9wdHMuaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgJHt0aGlzLm5hbWV9KCR7bm9ybWFsaXplZElkZW50aWZpZXJ9KSBoYXMgYWxyZWFkeSBiZWVuIGluaXRpYWxpemVkYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBDb21wb25lbnQgJHt0aGlzLm5hbWV9IGhhcyBub3QgYmVlbiByZWdpc3RlcmVkIHlldGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXIsXHJcbiAgICAgICAgICAgIG9wdGlvbnNcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyByZXNvbHZlIGFueSBwZW5kaW5nIHByb21pc2Ugd2FpdGluZyBmb3IgdGhlIHNlcnZpY2UgaW5zdGFuY2VcclxuICAgICAgICBmb3IgKGNvbnN0IFtpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlRGVmZXJyZWRdIG9mIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZW50cmllcygpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWREZWZlcnJlZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICBpZiAobm9ybWFsaXplZElkZW50aWZpZXIgPT09IG5vcm1hbGl6ZWREZWZlcnJlZElkZW50aWZpZXIpIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlRGVmZXJyZWQucmVzb2x2ZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIC0gYSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgaW52b2tlZCAgYWZ0ZXIgdGhlIHByb3ZpZGVyIGhhcyBiZWVuIGluaXRpYWxpemVkIGJ5IGNhbGxpbmcgcHJvdmlkZXIuaW5pdGlhbGl6ZSgpLlxyXG4gICAgICogVGhlIGZ1bmN0aW9uIGlzIGludm9rZWQgU1lOQ0hST05PVVNMWSwgc28gaXQgc2hvdWxkIG5vdCBleGVjdXRlIGFueSBsb25ncnVubmluZyB0YXNrcyBpbiBvcmRlciB0byBub3QgYmxvY2sgdGhlIHByb2dyYW0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlkZW50aWZpZXIgQW4gb3B0aW9uYWwgaW5zdGFuY2UgaWRlbnRpZmllclxyXG4gICAgICogQHJldHVybnMgYSBmdW5jdGlvbiB0byB1bnJlZ2lzdGVyIHRoZSBjYWxsYmFja1xyXG4gICAgICovXHJcbiAgICBvbkluaXQoY2FsbGJhY2ssIGlkZW50aWZpZXIpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpZGVudGlmaWVyKTtcclxuICAgICAgICBjb25zdCBleGlzdGluZ0NhbGxiYWNrcyA9IChfYSA9IHRoaXMub25Jbml0Q2FsbGJhY2tzLmdldChub3JtYWxpemVkSWRlbnRpZmllcikpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IG5ldyBTZXQoKTtcclxuICAgICAgICBleGlzdGluZ0NhbGxiYWNrcy5hZGQoY2FsbGJhY2spO1xyXG4gICAgICAgIHRoaXMub25Jbml0Q2FsbGJhY2tzLnNldChub3JtYWxpemVkSWRlbnRpZmllciwgZXhpc3RpbmdDYWxsYmFja3MpO1xyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nSW5zdGFuY2UgPSB0aGlzLmluc3RhbmNlcy5nZXQobm9ybWFsaXplZElkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmIChleGlzdGluZ0luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKGV4aXN0aW5nSW5zdGFuY2UsIG5vcm1hbGl6ZWRJZGVudGlmaWVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgZXhpc3RpbmdDYWxsYmFja3MuZGVsZXRlKGNhbGxiYWNrKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnZva2Ugb25Jbml0IGNhbGxiYWNrcyBzeW5jaHJvbm91c2x5XHJcbiAgICAgKiBAcGFyYW0gaW5zdGFuY2UgdGhlIHNlcnZpY2UgaW5zdGFuY2VgXHJcbiAgICAgKi9cclxuICAgIGludm9rZU9uSW5pdENhbGxiYWNrcyhpbnN0YW5jZSwgaWRlbnRpZmllcikge1xyXG4gICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IHRoaXMub25Jbml0Q2FsbGJhY2tzLmdldChpZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoIWNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAoY29uc3QgY2FsbGJhY2sgb2YgY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhpbnN0YW5jZSwgaWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpZ25vcmUgZXJyb3JzIGluIHRoZSBvbkluaXQgY2FsbGJhY2tcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoeyBpbnN0YW5jZUlkZW50aWZpZXIsIG9wdGlvbnMgPSB7fSB9KSB7XHJcbiAgICAgICAgbGV0IGluc3RhbmNlID0gdGhpcy5pbnN0YW5jZXMuZ2V0KGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCFpbnN0YW5jZSAmJiB0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZSA9IHRoaXMuY29tcG9uZW50Lmluc3RhbmNlRmFjdG9yeSh0aGlzLmNvbnRhaW5lciwge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVJZGVudGlmaWVyRm9yRmFjdG9yeShpbnN0YW5jZUlkZW50aWZpZXIpLFxyXG4gICAgICAgICAgICAgICAgb3B0aW9uc1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXMuc2V0KGluc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMuc2V0KGluc3RhbmNlSWRlbnRpZmllciwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBJbnZva2Ugb25Jbml0IGxpc3RlbmVycy5cclxuICAgICAgICAgICAgICogTm90ZSB0aGlzLmNvbXBvbmVudC5vbkluc3RhbmNlQ3JlYXRlZCBpcyBkaWZmZXJlbnQsIHdoaWNoIGlzIHVzZWQgYnkgdGhlIGNvbXBvbmVudCBjcmVhdG9yLFxyXG4gICAgICAgICAgICAgKiB3aGlsZSBvbkluaXQgbGlzdGVuZXJzIGFyZSByZWdpc3RlcmVkIGJ5IGNvbnN1bWVycyBvZiB0aGUgcHJvdmlkZXIuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB0aGlzLmludm9rZU9uSW5pdENhbGxiYWNrcyhpbnN0YW5jZSwgaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIE9yZGVyIGlzIGltcG9ydGFudFxyXG4gICAgICAgICAgICAgKiBvbkluc3RhbmNlQ3JlYXRlZCgpIHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgdGhpcy5pbnN0YW5jZXMuc2V0KGluc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2UpOyB3aGljaFxyXG4gICAgICAgICAgICAgKiBtYWtlcyBgaXNJbml0aWFsaXplZCgpYCByZXR1cm4gdHJ1ZS5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbXBvbmVudC5vbkluc3RhbmNlQ3JlYXRlZCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5vbkluc3RhbmNlQ3JlYXRlZCh0aGlzLmNvbnRhaW5lciwgaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBpZ25vcmUgZXJyb3JzIGluIHRoZSBvbkluc3RhbmNlQ3JlYXRlZENhbGxiYWNrXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlIHx8IG51bGw7XHJcbiAgICB9XHJcbiAgICBub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgPyBpZGVudGlmaWVyIDogREVGQVVMVF9FTlRSWV9OQU1FO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlkZW50aWZpZXI7IC8vIGFzc3VtZSBtdWx0aXBsZSBpbnN0YW5jZXMgYXJlIHN1cHBvcnRlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBwcm92aWRlZC5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzaG91bGRBdXRvSW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICByZXR1cm4gKCEhdGhpcy5jb21wb25lbnQgJiZcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuaW5zdGFudGlhdGlvbk1vZGUgIT09IFwiRVhQTElDSVRcIiAvKiBFWFBMSUNJVCAqLyk7XHJcbiAgICB9XHJcbn1cclxuLy8gdW5kZWZpbmVkIHNob3VsZCBiZSBwYXNzZWQgdG8gdGhlIHNlcnZpY2UgZmFjdG9yeSBmb3IgdGhlIGRlZmF1bHQgaW5zdGFuY2VcclxuZnVuY3Rpb24gbm9ybWFsaXplSWRlbnRpZmllckZvckZhY3RvcnkoaWRlbnRpZmllcikge1xyXG4gICAgcmV0dXJuIGlkZW50aWZpZXIgPT09IERFRkFVTFRfRU5UUllfTkFNRSA/IHVuZGVmaW5lZCA6IGlkZW50aWZpZXI7XHJcbn1cclxuZnVuY3Rpb24gaXNDb21wb25lbnRFYWdlcihjb21wb25lbnQpIHtcclxuICAgIHJldHVybiBjb21wb25lbnQuaW5zdGFudGlhdGlvbk1vZGUgPT09IFwiRUFHRVJcIiAvKiBFQUdFUiAqLztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ29tcG9uZW50Q29udGFpbmVyIHRoYXQgcHJvdmlkZXMgUHJvdmlkZXJzIGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiBgYXV0aGAsIGBhdXRoLWludGVybmFsYFxyXG4gKi9cclxuY2xhc3MgQ29tcG9uZW50Q29udGFpbmVyIHtcclxuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJzID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNvbXBvbmVudCBDb21wb25lbnQgYmVpbmcgYWRkZWRcclxuICAgICAqIEBwYXJhbSBvdmVyd3JpdGUgV2hlbiBhIGNvbXBvbmVudCB3aXRoIHRoZSBzYW1lIG5hbWUgaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkLFxyXG4gICAgICogaWYgb3ZlcndyaXRlIGlzIHRydWU6IG92ZXJ3cml0ZSB0aGUgZXhpc3RpbmcgY29tcG9uZW50IHdpdGggdGhlIG5ldyBjb21wb25lbnQgYW5kIGNyZWF0ZSBhIG5ld1xyXG4gICAgICogcHJvdmlkZXIgd2l0aCB0aGUgbmV3IGNvbXBvbmVudC4gSXQgY2FuIGJlIHVzZWZ1bCBpbiB0ZXN0cyB3aGVyZSB5b3Ugd2FudCB0byB1c2UgZGlmZmVyZW50IG1vY2tzXHJcbiAgICAgKiBmb3IgZGlmZmVyZW50IHRlc3RzLlxyXG4gICAgICogaWYgb3ZlcndyaXRlIGlzIGZhbHNlOiB0aHJvdyBhbiBleGNlcHRpb25cclxuICAgICAqL1xyXG4gICAgYWRkQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5nZXRQcm92aWRlcihjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgaWYgKHByb3ZpZGVyLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb21wb25lbnQgJHtjb21wb25lbnQubmFtZX0gaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkIHdpdGggJHt0aGlzLm5hbWV9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByb3ZpZGVyLnNldENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLmdldFByb3ZpZGVyKGNvbXBvbmVudC5uYW1lKTtcclxuICAgICAgICBpZiAocHJvdmlkZXIuaXNDb21wb25lbnRTZXQoKSkge1xyXG4gICAgICAgICAgICAvLyBkZWxldGUgdGhlIGV4aXN0aW5nIHByb3ZpZGVyIGZyb20gdGhlIGNvbnRhaW5lciwgc28gd2UgY2FuIHJlZ2lzdGVyIHRoZSBuZXcgY29tcG9uZW50XHJcbiAgICAgICAgICAgIHRoaXMucHJvdmlkZXJzLmRlbGV0ZShjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIGdldFByb3ZpZGVyIHByb3ZpZGVzIGEgdHlwZSBzYWZlIGludGVyZmFjZSB3aGVyZSBpdCBjYW4gb25seSBiZSBjYWxsZWQgd2l0aCBhIGZpZWxkIG5hbWVcclxuICAgICAqIHByZXNlbnQgaW4gTmFtZVNlcnZpY2VNYXBwaW5nIGludGVyZmFjZS5cclxuICAgICAqXHJcbiAgICAgKiBGaXJlYmFzZSBTREtzIHByb3ZpZGluZyBzZXJ2aWNlcyBzaG91bGQgZXh0ZW5kIE5hbWVTZXJ2aWNlTWFwcGluZyBpbnRlcmZhY2UgdG8gcmVnaXN0ZXJcclxuICAgICAqIHRoZW1zZWx2ZXMuXHJcbiAgICAgKi9cclxuICAgIGdldFByb3ZpZGVyKG5hbWUpIHtcclxuICAgICAgICBpZiAodGhpcy5wcm92aWRlcnMuaGFzKG5hbWUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3ZpZGVycy5nZXQobmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNyZWF0ZSBhIFByb3ZpZGVyIGZvciBhIHNlcnZpY2UgdGhhdCBoYXNuJ3QgcmVnaXN0ZXJlZCB3aXRoIEZpcmViYXNlXHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBuZXcgUHJvdmlkZXIobmFtZSwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcnMuc2V0KG5hbWUsIHByb3ZpZGVyKTtcclxuICAgICAgICByZXR1cm4gcHJvdmlkZXI7XHJcbiAgICB9XHJcbiAgICBnZXRQcm92aWRlcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5wcm92aWRlcnMudmFsdWVzKCkpO1xyXG4gICAgfVxyXG59XG5cbmV4cG9ydCB7IENvbXBvbmVudCwgQ29tcG9uZW50Q29udGFpbmVyLCBQcm92aWRlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsIi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBIGNvbnRhaW5lciBmb3IgYWxsIG9mIHRoZSBMb2dnZXIgaW5zdGFuY2VzXHJcbiAqL1xyXG5jb25zdCBpbnN0YW5jZXMgPSBbXTtcclxuLyoqXHJcbiAqIFRoZSBKUyBTREsgc3VwcG9ydHMgNSBsb2cgbGV2ZWxzIGFuZCBhbHNvIGFsbG93cyBhIHVzZXIgdGhlIGFiaWxpdHkgdG9cclxuICogc2lsZW5jZSB0aGUgbG9ncyBhbHRvZ2V0aGVyLlxyXG4gKlxyXG4gKiBUaGUgb3JkZXIgaXMgYSBmb2xsb3dzOlxyXG4gKiBERUJVRyA8IFZFUkJPU0UgPCBJTkZPIDwgV0FSTiA8IEVSUk9SXHJcbiAqXHJcbiAqIEFsbCBvZiB0aGUgbG9nIHR5cGVzIGFib3ZlIHRoZSBjdXJyZW50IGxvZyBsZXZlbCB3aWxsIGJlIGNhcHR1cmVkIChpLmUuIGlmXHJcbiAqIHlvdSBzZXQgdGhlIGxvZyBsZXZlbCB0byBgSU5GT2AsIGVycm9ycyB3aWxsIHN0aWxsIGJlIGxvZ2dlZCwgYnV0IGBERUJVR2AgYW5kXHJcbiAqIGBWRVJCT1NFYCBsb2dzIHdpbGwgbm90KVxyXG4gKi9cclxudmFyIExvZ0xldmVsO1xyXG4oZnVuY3Rpb24gKExvZ0xldmVsKSB7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIkRFQlVHXCJdID0gMF0gPSBcIkRFQlVHXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIlZFUkJPU0VcIl0gPSAxXSA9IFwiVkVSQk9TRVwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJJTkZPXCJdID0gMl0gPSBcIklORk9cIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiV0FSTlwiXSA9IDNdID0gXCJXQVJOXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIkVSUk9SXCJdID0gNF0gPSBcIkVSUk9SXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIlNJTEVOVFwiXSA9IDVdID0gXCJTSUxFTlRcIjtcclxufSkoTG9nTGV2ZWwgfHwgKExvZ0xldmVsID0ge30pKTtcclxuY29uc3QgbGV2ZWxTdHJpbmdUb0VudW0gPSB7XHJcbiAgICAnZGVidWcnOiBMb2dMZXZlbC5ERUJVRyxcclxuICAgICd2ZXJib3NlJzogTG9nTGV2ZWwuVkVSQk9TRSxcclxuICAgICdpbmZvJzogTG9nTGV2ZWwuSU5GTyxcclxuICAgICd3YXJuJzogTG9nTGV2ZWwuV0FSTixcclxuICAgICdlcnJvcic6IExvZ0xldmVsLkVSUk9SLFxyXG4gICAgJ3NpbGVudCc6IExvZ0xldmVsLlNJTEVOVFxyXG59O1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgbG9nIGxldmVsXHJcbiAqL1xyXG5jb25zdCBkZWZhdWx0TG9nTGV2ZWwgPSBMb2dMZXZlbC5JTkZPO1xyXG4vKipcclxuICogQnkgZGVmYXVsdCwgYGNvbnNvbGUuZGVidWdgIGlzIG5vdCBkaXNwbGF5ZWQgaW4gdGhlIGRldmVsb3BlciBjb25zb2xlIChpblxyXG4gKiBjaHJvbWUpLiBUbyBhdm9pZCBmb3JjaW5nIHVzZXJzIHRvIGhhdmUgdG8gb3B0LWluIHRvIHRoZXNlIGxvZ3MgdHdpY2VcclxuICogKGkuZS4gb25jZSBmb3IgZmlyZWJhc2UsIGFuZCBvbmNlIGluIHRoZSBjb25zb2xlKSwgd2UgYXJlIHNlbmRpbmcgYERFQlVHYFxyXG4gKiBsb2dzIHRvIHRoZSBgY29uc29sZS5sb2dgIGZ1bmN0aW9uLlxyXG4gKi9cclxuY29uc3QgQ29uc29sZU1ldGhvZCA9IHtcclxuICAgIFtMb2dMZXZlbC5ERUJVR106ICdsb2cnLFxyXG4gICAgW0xvZ0xldmVsLlZFUkJPU0VdOiAnbG9nJyxcclxuICAgIFtMb2dMZXZlbC5JTkZPXTogJ2luZm8nLFxyXG4gICAgW0xvZ0xldmVsLldBUk5dOiAnd2FybicsXHJcbiAgICBbTG9nTGV2ZWwuRVJST1JdOiAnZXJyb3InXHJcbn07XHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBsb2cgaGFuZGxlciB3aWxsIGZvcndhcmQgREVCVUcsIFZFUkJPU0UsIElORk8sIFdBUk4sIGFuZCBFUlJPUlxyXG4gKiBtZXNzYWdlcyBvbiB0byB0aGVpciBjb3JyZXNwb25kaW5nIGNvbnNvbGUgY291bnRlcnBhcnRzIChpZiB0aGUgbG9nIG1ldGhvZFxyXG4gKiBpcyBzdXBwb3J0ZWQgYnkgdGhlIGN1cnJlbnQgbG9nIGxldmVsKVxyXG4gKi9cclxuY29uc3QgZGVmYXVsdExvZ0hhbmRsZXIgPSAoaW5zdGFuY2UsIGxvZ1R5cGUsIC4uLmFyZ3MpID0+IHtcclxuICAgIGlmIChsb2dUeXBlIDwgaW5zdGFuY2UubG9nTGV2ZWwpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICBjb25zdCBtZXRob2QgPSBDb25zb2xlTWV0aG9kW2xvZ1R5cGVdO1xyXG4gICAgaWYgKG1ldGhvZCkge1xyXG4gICAgICAgIGNvbnNvbGVbbWV0aG9kXShgWyR7bm93fV0gICR7aW5zdGFuY2UubmFtZX06YCwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEF0dGVtcHRlZCB0byBsb2cgYSBtZXNzYWdlIHdpdGggYW4gaW52YWxpZCBsb2dUeXBlICh2YWx1ZTogJHtsb2dUeXBlfSlgKTtcclxuICAgIH1cclxufTtcclxuY2xhc3MgTG9nZ2VyIHtcclxuICAgIC8qKlxyXG4gICAgICogR2l2ZXMgeW91IGFuIGluc3RhbmNlIG9mIGEgTG9nZ2VyIHRvIGNhcHR1cmUgbWVzc2FnZXMgYWNjb3JkaW5nIHRvXHJcbiAgICAgKiBGaXJlYmFzZSdzIGxvZ2dpbmcgc2NoZW1lLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIHRoYXQgdGhlIGxvZ3Mgd2lsbCBiZSBhc3NvY2lhdGVkIHdpdGhcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IobmFtZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGxvZyBsZXZlbCBvZiB0aGUgZ2l2ZW4gTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2xvZ0xldmVsID0gZGVmYXVsdExvZ0xldmVsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBtYWluIChpbnRlcm5hbCkgbG9nIGhhbmRsZXIgZm9yIHRoZSBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICogQ2FuIGJlIHNldCB0byBhIG5ldyBmdW5jdGlvbiBpbiBpbnRlcm5hbCBwYWNrYWdlIGNvZGUgYnV0IG5vdCBieSB1c2VyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIgPSBkZWZhdWx0TG9nSGFuZGxlcjtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgb3B0aW9uYWwsIGFkZGl0aW9uYWwsIHVzZXItZGVmaW5lZCBsb2cgaGFuZGxlciBmb3IgdGhlIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2FwdHVyZSB0aGUgY3VycmVudCBpbnN0YW5jZSBmb3IgbGF0ZXIgdXNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaW5zdGFuY2VzLnB1c2godGhpcyk7XHJcbiAgICB9XHJcbiAgICBnZXQgbG9nTGV2ZWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvZ0xldmVsO1xyXG4gICAgfVxyXG4gICAgc2V0IGxvZ0xldmVsKHZhbCkge1xyXG4gICAgICAgIGlmICghKHZhbCBpbiBMb2dMZXZlbCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCB2YWx1ZSBcIiR7dmFsfVwiIGFzc2lnbmVkIHRvIFxcYGxvZ0xldmVsXFxgYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2xvZ0xldmVsID0gdmFsO1xyXG4gICAgfVxyXG4gICAgLy8gV29ya2Fyb3VuZCBmb3Igc2V0dGVyL2dldHRlciBoYXZpbmcgdG8gYmUgdGhlIHNhbWUgdHlwZS5cclxuICAgIHNldExvZ0xldmVsKHZhbCkge1xyXG4gICAgICAgIHRoaXMuX2xvZ0xldmVsID0gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZycgPyBsZXZlbFN0cmluZ1RvRW51bVt2YWxdIDogdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IGxvZ0hhbmRsZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvZ0hhbmRsZXI7XHJcbiAgICB9XHJcbiAgICBzZXQgbG9nSGFuZGxlcih2YWwpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHZhbCAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBhc3NpZ25lZCB0byBgbG9nSGFuZGxlcmAgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIgPSB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgdXNlckxvZ0hhbmRsZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJMb2dIYW5kbGVyO1xyXG4gICAgfVxyXG4gICAgc2V0IHVzZXJMb2dIYW5kbGVyKHZhbCkge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyID0gdmFsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZnVuY3Rpb25zIGJlbG93IGFyZSBhbGwgYmFzZWQgb24gdGhlIGBjb25zb2xlYCBpbnRlcmZhY2VcclxuICAgICAqL1xyXG4gICAgZGVidWcoLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkRFQlVHLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkRFQlVHLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGxvZyguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiZcclxuICAgICAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuVkVSQk9TRSwgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5WRVJCT1NFLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGluZm8oLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLklORk8sIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuSU5GTywgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICB3YXJuKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5XQVJOLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLldBUk4sIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgZXJyb3IoLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkVSUk9SLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkVSUk9SLCAuLi5hcmdzKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBzZXRMb2dMZXZlbChsZXZlbCkge1xyXG4gICAgaW5zdGFuY2VzLmZvckVhY2goaW5zdCA9PiB7XHJcbiAgICAgICAgaW5zdC5zZXRMb2dMZXZlbChsZXZlbCk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBzZXRVc2VyTG9nSGFuZGxlcihsb2dDYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgZm9yIChjb25zdCBpbnN0YW5jZSBvZiBpbnN0YW5jZXMpIHtcclxuICAgICAgICBsZXQgY3VzdG9tTG9nTGV2ZWwgPSBudWxsO1xyXG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMubGV2ZWwpIHtcclxuICAgICAgICAgICAgY3VzdG9tTG9nTGV2ZWwgPSBsZXZlbFN0cmluZ1RvRW51bVtvcHRpb25zLmxldmVsXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxvZ0NhbGxiYWNrID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLnVzZXJMb2dIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLnVzZXJMb2dIYW5kbGVyID0gKGluc3RhbmNlLCBsZXZlbCwgLi4uYXJncykgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGFyZ3NcclxuICAgICAgICAgICAgICAgICAgICAubWFwKGFyZyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgYXJnID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgYXJnID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZy50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChhcmcgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFyZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGlnbm9yZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGFyZyA9PiBhcmcpXHJcbiAgICAgICAgICAgICAgICAgICAgLmpvaW4oJyAnKTtcclxuICAgICAgICAgICAgICAgIGlmIChsZXZlbCA+PSAoY3VzdG9tTG9nTGV2ZWwgIT09IG51bGwgJiYgY3VzdG9tTG9nTGV2ZWwgIT09IHZvaWQgMCA/IGN1c3RvbUxvZ0xldmVsIDogaW5zdGFuY2UubG9nTGV2ZWwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nQ2FsbGJhY2soe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXZlbDogTG9nTGV2ZWxbbGV2ZWxdLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGluc3RhbmNlLm5hbWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuZXhwb3J0IHsgTG9nTGV2ZWwsIExvZ2dlciwgc2V0TG9nTGV2ZWwsIHNldFVzZXJMb2dIYW5kbGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiY29uc3QgaW5zdGFuY2VPZkFueSA9IChvYmplY3QsIGNvbnN0cnVjdG9ycykgPT4gY29uc3RydWN0b3JzLnNvbWUoKGMpID0+IG9iamVjdCBpbnN0YW5jZW9mIGMpO1xuXG5sZXQgaWRiUHJveHlhYmxlVHlwZXM7XG5sZXQgY3Vyc29yQWR2YW5jZU1ldGhvZHM7XG4vLyBUaGlzIGlzIGEgZnVuY3Rpb24gdG8gcHJldmVudCBpdCB0aHJvd2luZyB1cCBpbiBub2RlIGVudmlyb25tZW50cy5cbmZ1bmN0aW9uIGdldElkYlByb3h5YWJsZVR5cGVzKCkge1xuICAgIHJldHVybiAoaWRiUHJveHlhYmxlVHlwZXMgfHxcbiAgICAgICAgKGlkYlByb3h5YWJsZVR5cGVzID0gW1xuICAgICAgICAgICAgSURCRGF0YWJhc2UsXG4gICAgICAgICAgICBJREJPYmplY3RTdG9yZSxcbiAgICAgICAgICAgIElEQkluZGV4LFxuICAgICAgICAgICAgSURCQ3Vyc29yLFxuICAgICAgICAgICAgSURCVHJhbnNhY3Rpb24sXG4gICAgICAgIF0pKTtcbn1cbi8vIFRoaXMgaXMgYSBmdW5jdGlvbiB0byBwcmV2ZW50IGl0IHRocm93aW5nIHVwIGluIG5vZGUgZW52aXJvbm1lbnRzLlxuZnVuY3Rpb24gZ2V0Q3Vyc29yQWR2YW5jZU1ldGhvZHMoKSB7XG4gICAgcmV0dXJuIChjdXJzb3JBZHZhbmNlTWV0aG9kcyB8fFxuICAgICAgICAoY3Vyc29yQWR2YW5jZU1ldGhvZHMgPSBbXG4gICAgICAgICAgICBJREJDdXJzb3IucHJvdG90eXBlLmFkdmFuY2UsXG4gICAgICAgICAgICBJREJDdXJzb3IucHJvdG90eXBlLmNvbnRpbnVlLFxuICAgICAgICAgICAgSURCQ3Vyc29yLnByb3RvdHlwZS5jb250aW51ZVByaW1hcnlLZXksXG4gICAgICAgIF0pKTtcbn1cbmNvbnN0IGN1cnNvclJlcXVlc3RNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgdHJhbnNhY3Rpb25Eb25lTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCB0cmFuc2Zvcm1DYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCByZXZlcnNlVHJhbnNmb3JtQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gcHJvbWlzaWZ5UmVxdWVzdChyZXF1ZXN0KSB7XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgdW5saXN0ZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICByZXF1ZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCBzdWNjZXNzKTtcbiAgICAgICAgICAgIHJlcXVlc3QucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKHdyYXAocmVxdWVzdC5yZXN1bHQpKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGVycm9yID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVqZWN0KHJlcXVlc3QuZXJyb3IpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgc3VjY2Vzcyk7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgfSk7XG4gICAgcHJvbWlzZVxuICAgICAgICAudGhlbigodmFsdWUpID0+IHtcbiAgICAgICAgLy8gU2luY2UgY3Vyc29yaW5nIHJldXNlcyB0aGUgSURCUmVxdWVzdCAoKnNpZ2gqKSwgd2UgY2FjaGUgaXQgZm9yIGxhdGVyIHJldHJpZXZhbFxuICAgICAgICAvLyAoc2VlIHdyYXBGdW5jdGlvbikuXG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIElEQkN1cnNvcikge1xuICAgICAgICAgICAgY3Vyc29yUmVxdWVzdE1hcC5zZXQodmFsdWUsIHJlcXVlc3QpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENhdGNoaW5nIHRvIGF2b2lkIFwiVW5jYXVnaHQgUHJvbWlzZSBleGNlcHRpb25zXCJcbiAgICB9KVxuICAgICAgICAuY2F0Y2goKCkgPT4geyB9KTtcbiAgICAvLyBUaGlzIG1hcHBpbmcgZXhpc3RzIGluIHJldmVyc2VUcmFuc2Zvcm1DYWNoZSBidXQgZG9lc24ndCBkb2Vzbid0IGV4aXN0IGluIHRyYW5zZm9ybUNhY2hlLiBUaGlzXG4gICAgLy8gaXMgYmVjYXVzZSB3ZSBjcmVhdGUgbWFueSBwcm9taXNlcyBmcm9tIGEgc2luZ2xlIElEQlJlcXVlc3QuXG4gICAgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlLnNldChwcm9taXNlLCByZXF1ZXN0KTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cbmZ1bmN0aW9uIGNhY2hlRG9uZVByb21pc2VGb3JUcmFuc2FjdGlvbih0eCkge1xuICAgIC8vIEVhcmx5IGJhaWwgaWYgd2UndmUgYWxyZWFkeSBjcmVhdGVkIGEgZG9uZSBwcm9taXNlIGZvciB0aGlzIHRyYW5zYWN0aW9uLlxuICAgIGlmICh0cmFuc2FjdGlvbkRvbmVNYXAuaGFzKHR4KSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGRvbmUgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHVubGlzdGVuID0gKCkgPT4ge1xuICAgICAgICAgICAgdHgucmVtb3ZlRXZlbnRMaXN0ZW5lcignY29tcGxldGUnLCBjb21wbGV0ZSk7XG4gICAgICAgICAgICB0eC5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgICAgIHR4LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgZXJyb3IpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjb21wbGV0ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGVycm9yID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVqZWN0KHR4LmVycm9yIHx8IG5ldyBET01FeGNlcHRpb24oJ0Fib3J0RXJyb3InLCAnQWJvcnRFcnJvcicpKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIHR4LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbXBsZXRlJywgY29tcGxldGUpO1xuICAgICAgICB0eC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgdHguYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBlcnJvcik7XG4gICAgfSk7XG4gICAgLy8gQ2FjaGUgaXQgZm9yIGxhdGVyIHJldHJpZXZhbC5cbiAgICB0cmFuc2FjdGlvbkRvbmVNYXAuc2V0KHR4LCBkb25lKTtcbn1cbmxldCBpZGJQcm94eVRyYXBzID0ge1xuICAgIGdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSB7XG4gICAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBJREJUcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgdHJhbnNhY3Rpb24uZG9uZS5cbiAgICAgICAgICAgIGlmIChwcm9wID09PSAnZG9uZScpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uRG9uZU1hcC5nZXQodGFyZ2V0KTtcbiAgICAgICAgICAgIC8vIFBvbHlmaWxsIGZvciBvYmplY3RTdG9yZU5hbWVzIGJlY2F1c2Ugb2YgRWRnZS5cbiAgICAgICAgICAgIGlmIChwcm9wID09PSAnb2JqZWN0U3RvcmVOYW1lcycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0Lm9iamVjdFN0b3JlTmFtZXMgfHwgdHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwLmdldCh0YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTWFrZSB0eC5zdG9yZSByZXR1cm4gdGhlIG9ubHkgc3RvcmUgaW4gdGhlIHRyYW5zYWN0aW9uLCBvciB1bmRlZmluZWQgaWYgdGhlcmUgYXJlIG1hbnkuXG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gJ3N0b3JlJykge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWNlaXZlci5vYmplY3RTdG9yZU5hbWVzWzFdXG4gICAgICAgICAgICAgICAgICAgID8gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIDogcmVjZWl2ZXIub2JqZWN0U3RvcmUocmVjZWl2ZXIub2JqZWN0U3RvcmVOYW1lc1swXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gRWxzZSB0cmFuc2Zvcm0gd2hhdGV2ZXIgd2UgZ2V0IGJhY2suXG4gICAgICAgIHJldHVybiB3cmFwKHRhcmdldFtwcm9wXSk7XG4gICAgfSxcbiAgICBzZXQodGFyZ2V0LCBwcm9wLCB2YWx1ZSkge1xuICAgICAgICB0YXJnZXRbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBoYXModGFyZ2V0LCBwcm9wKSB7XG4gICAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBJREJUcmFuc2FjdGlvbiAmJlxuICAgICAgICAgICAgKHByb3AgPT09ICdkb25lJyB8fCBwcm9wID09PSAnc3RvcmUnKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHByb3AgaW4gdGFyZ2V0O1xuICAgIH0sXG59O1xuZnVuY3Rpb24gcmVwbGFjZVRyYXBzKGNhbGxiYWNrKSB7XG4gICAgaWRiUHJveHlUcmFwcyA9IGNhbGxiYWNrKGlkYlByb3h5VHJhcHMpO1xufVxuZnVuY3Rpb24gd3JhcEZ1bmN0aW9uKGZ1bmMpIHtcbiAgICAvLyBEdWUgdG8gZXhwZWN0ZWQgb2JqZWN0IGVxdWFsaXR5ICh3aGljaCBpcyBlbmZvcmNlZCBieSB0aGUgY2FjaGluZyBpbiBgd3JhcGApLCB3ZVxuICAgIC8vIG9ubHkgY3JlYXRlIG9uZSBuZXcgZnVuYyBwZXIgZnVuYy5cbiAgICAvLyBFZGdlIGRvZXNuJ3Qgc3VwcG9ydCBvYmplY3RTdG9yZU5hbWVzIChib29vKSwgc28gd2UgcG9seWZpbGwgaXQgaGVyZS5cbiAgICBpZiAoZnVuYyA9PT0gSURCRGF0YWJhc2UucHJvdG90eXBlLnRyYW5zYWN0aW9uICYmXG4gICAgICAgICEoJ29iamVjdFN0b3JlTmFtZXMnIGluIElEQlRyYW5zYWN0aW9uLnByb3RvdHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzdG9yZU5hbWVzLCAuLi5hcmdzKSB7XG4gICAgICAgICAgICBjb25zdCB0eCA9IGZ1bmMuY2FsbCh1bndyYXAodGhpcyksIHN0b3JlTmFtZXMsIC4uLmFyZ3MpO1xuICAgICAgICAgICAgdHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwLnNldCh0eCwgc3RvcmVOYW1lcy5zb3J0ID8gc3RvcmVOYW1lcy5zb3J0KCkgOiBbc3RvcmVOYW1lc10pO1xuICAgICAgICAgICAgcmV0dXJuIHdyYXAodHgpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvLyBDdXJzb3IgbWV0aG9kcyBhcmUgc3BlY2lhbCwgYXMgdGhlIGJlaGF2aW91ciBpcyBhIGxpdHRsZSBtb3JlIGRpZmZlcmVudCB0byBzdGFuZGFyZCBJREIuIEluXG4gICAgLy8gSURCLCB5b3UgYWR2YW5jZSB0aGUgY3Vyc29yIGFuZCB3YWl0IGZvciBhIG5ldyAnc3VjY2Vzcycgb24gdGhlIElEQlJlcXVlc3QgdGhhdCBnYXZlIHlvdSB0aGVcbiAgICAvLyBjdXJzb3IuIEl0J3Mga2luZGEgbGlrZSBhIHByb21pc2UgdGhhdCBjYW4gcmVzb2x2ZSB3aXRoIG1hbnkgdmFsdWVzLiBUaGF0IGRvZXNuJ3QgbWFrZSBzZW5zZVxuICAgIC8vIHdpdGggcmVhbCBwcm9taXNlcywgc28gZWFjaCBhZHZhbmNlIG1ldGhvZHMgcmV0dXJucyBhIG5ldyBwcm9taXNlIGZvciB0aGUgY3Vyc29yIG9iamVjdCwgb3JcbiAgICAvLyB1bmRlZmluZWQgaWYgdGhlIGVuZCBvZiB0aGUgY3Vyc29yIGhhcyBiZWVuIHJlYWNoZWQuXG4gICAgaWYgKGdldEN1cnNvckFkdmFuY2VNZXRob2RzKCkuaW5jbHVkZXMoZnVuYykpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAvLyBDYWxsaW5nIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiB3aXRoIHRoZSBwcm94eSBhcyAndGhpcycgY2F1c2VzIElMTEVHQUwgSU5WT0NBVElPTiwgc28gd2UgdXNlXG4gICAgICAgICAgICAvLyB0aGUgb3JpZ2luYWwgb2JqZWN0LlxuICAgICAgICAgICAgZnVuYy5hcHBseSh1bndyYXAodGhpcyksIGFyZ3MpO1xuICAgICAgICAgICAgcmV0dXJuIHdyYXAoY3Vyc29yUmVxdWVzdE1hcC5nZXQodGhpcykpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgLy8gQ2FsbGluZyB0aGUgb3JpZ2luYWwgZnVuY3Rpb24gd2l0aCB0aGUgcHJveHkgYXMgJ3RoaXMnIGNhdXNlcyBJTExFR0FMIElOVk9DQVRJT04sIHNvIHdlIHVzZVxuICAgICAgICAvLyB0aGUgb3JpZ2luYWwgb2JqZWN0LlxuICAgICAgICByZXR1cm4gd3JhcChmdW5jLmFwcGx5KHVud3JhcCh0aGlzKSwgYXJncykpO1xuICAgIH07XG59XG5mdW5jdGlvbiB0cmFuc2Zvcm1DYWNoYWJsZVZhbHVlKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgcmV0dXJuIHdyYXBGdW5jdGlvbih2YWx1ZSk7XG4gICAgLy8gVGhpcyBkb2Vzbid0IHJldHVybiwgaXQganVzdCBjcmVhdGVzIGEgJ2RvbmUnIHByb21pc2UgZm9yIHRoZSB0cmFuc2FjdGlvbixcbiAgICAvLyB3aGljaCBpcyBsYXRlciByZXR1cm5lZCBmb3IgdHJhbnNhY3Rpb24uZG9uZSAoc2VlIGlkYk9iamVjdEhhbmRsZXIpLlxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIElEQlRyYW5zYWN0aW9uKVxuICAgICAgICBjYWNoZURvbmVQcm9taXNlRm9yVHJhbnNhY3Rpb24odmFsdWUpO1xuICAgIGlmIChpbnN0YW5jZU9mQW55KHZhbHVlLCBnZXRJZGJQcm94eWFibGVUeXBlcygpKSlcbiAgICAgICAgcmV0dXJuIG5ldyBQcm94eSh2YWx1ZSwgaWRiUHJveHlUcmFwcyk7XG4gICAgLy8gUmV0dXJuIHRoZSBzYW1lIHZhbHVlIGJhY2sgaWYgd2UncmUgbm90IGdvaW5nIHRvIHRyYW5zZm9ybSBpdC5cbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiB3cmFwKHZhbHVlKSB7XG4gICAgLy8gV2Ugc29tZXRpbWVzIGdlbmVyYXRlIG11bHRpcGxlIHByb21pc2VzIGZyb20gYSBzaW5nbGUgSURCUmVxdWVzdCAoZWcgd2hlbiBjdXJzb3JpbmcpLCBiZWNhdXNlXG4gICAgLy8gSURCIGlzIHdlaXJkIGFuZCBhIHNpbmdsZSBJREJSZXF1ZXN0IGNhbiB5aWVsZCBtYW55IHJlc3BvbnNlcywgc28gdGhlc2UgY2FuJ3QgYmUgY2FjaGVkLlxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIElEQlJlcXVlc3QpXG4gICAgICAgIHJldHVybiBwcm9taXNpZnlSZXF1ZXN0KHZhbHVlKTtcbiAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IHRyYW5zZm9ybWVkIHRoaXMgdmFsdWUgYmVmb3JlLCByZXVzZSB0aGUgdHJhbnNmb3JtZWQgdmFsdWUuXG4gICAgLy8gVGhpcyBpcyBmYXN0ZXIsIGJ1dCBpdCBhbHNvIHByb3ZpZGVzIG9iamVjdCBlcXVhbGl0eS5cbiAgICBpZiAodHJhbnNmb3JtQ2FjaGUuaGFzKHZhbHVlKSlcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybUNhY2hlLmdldCh2YWx1ZSk7XG4gICAgY29uc3QgbmV3VmFsdWUgPSB0cmFuc2Zvcm1DYWNoYWJsZVZhbHVlKHZhbHVlKTtcbiAgICAvLyBOb3QgYWxsIHR5cGVzIGFyZSB0cmFuc2Zvcm1lZC5cbiAgICAvLyBUaGVzZSBtYXkgYmUgcHJpbWl0aXZlIHR5cGVzLCBzbyB0aGV5IGNhbid0IGJlIFdlYWtNYXAga2V5cy5cbiAgICBpZiAobmV3VmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICAgIHRyYW5zZm9ybUNhY2hlLnNldCh2YWx1ZSwgbmV3VmFsdWUpO1xuICAgICAgICByZXZlcnNlVHJhbnNmb3JtQ2FjaGUuc2V0KG5ld1ZhbHVlLCB2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBuZXdWYWx1ZTtcbn1cbmNvbnN0IHVud3JhcCA9ICh2YWx1ZSkgPT4gcmV2ZXJzZVRyYW5zZm9ybUNhY2hlLmdldCh2YWx1ZSk7XG5cbmV4cG9ydCB7IHJldmVyc2VUcmFuc2Zvcm1DYWNoZSBhcyBhLCBpbnN0YW5jZU9mQW55IGFzIGksIHJlcGxhY2VUcmFwcyBhcyByLCB1bndyYXAgYXMgdSwgd3JhcCBhcyB3IH07XG4iLCJpbXBvcnQgeyB3IGFzIHdyYXAsIHIgYXMgcmVwbGFjZVRyYXBzIH0gZnJvbSAnLi93cmFwLWlkYi12YWx1ZS5qcyc7XG5leHBvcnQgeyB1IGFzIHVud3JhcCwgdyBhcyB3cmFwIH0gZnJvbSAnLi93cmFwLWlkYi12YWx1ZS5qcyc7XG5cbi8qKlxuICogT3BlbiBhIGRhdGFiYXNlLlxuICpcbiAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIGRhdGFiYXNlLlxuICogQHBhcmFtIHZlcnNpb24gU2NoZW1hIHZlcnNpb24uXG4gKiBAcGFyYW0gY2FsbGJhY2tzIEFkZGl0aW9uYWwgY2FsbGJhY2tzLlxuICovXG5mdW5jdGlvbiBvcGVuREIobmFtZSwgdmVyc2lvbiwgeyBibG9ja2VkLCB1cGdyYWRlLCBibG9ja2luZywgdGVybWluYXRlZCB9ID0ge30pIHtcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4obmFtZSwgdmVyc2lvbik7XG4gICAgY29uc3Qgb3BlblByb21pc2UgPSB3cmFwKHJlcXVlc3QpO1xuICAgIGlmICh1cGdyYWRlKSB7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigndXBncmFkZW5lZWRlZCcsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdXBncmFkZSh3cmFwKHJlcXVlc3QucmVzdWx0KSwgZXZlbnQub2xkVmVyc2lvbiwgZXZlbnQubmV3VmVyc2lvbiwgd3JhcChyZXF1ZXN0LnRyYW5zYWN0aW9uKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoYmxvY2tlZClcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdibG9ja2VkJywgKCkgPT4gYmxvY2tlZCgpKTtcbiAgICBvcGVuUHJvbWlzZVxuICAgICAgICAudGhlbigoZGIpID0+IHtcbiAgICAgICAgaWYgKHRlcm1pbmF0ZWQpXG4gICAgICAgICAgICBkYi5hZGRFdmVudExpc3RlbmVyKCdjbG9zZScsICgpID0+IHRlcm1pbmF0ZWQoKSk7XG4gICAgICAgIGlmIChibG9ja2luZylcbiAgICAgICAgICAgIGRiLmFkZEV2ZW50TGlzdGVuZXIoJ3ZlcnNpb25jaGFuZ2UnLCAoKSA9PiBibG9ja2luZygpKTtcbiAgICB9KVxuICAgICAgICAuY2F0Y2goKCkgPT4geyB9KTtcbiAgICByZXR1cm4gb3BlblByb21pc2U7XG59XG4vKipcbiAqIERlbGV0ZSBhIGRhdGFiYXNlLlxuICpcbiAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIGRhdGFiYXNlLlxuICovXG5mdW5jdGlvbiBkZWxldGVEQihuYW1lLCB7IGJsb2NrZWQgfSA9IHt9KSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShuYW1lKTtcbiAgICBpZiAoYmxvY2tlZClcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdibG9ja2VkJywgKCkgPT4gYmxvY2tlZCgpKTtcbiAgICByZXR1cm4gd3JhcChyZXF1ZXN0KS50aGVuKCgpID0+IHVuZGVmaW5lZCk7XG59XG5cbmNvbnN0IHJlYWRNZXRob2RzID0gWydnZXQnLCAnZ2V0S2V5JywgJ2dldEFsbCcsICdnZXRBbGxLZXlzJywgJ2NvdW50J107XG5jb25zdCB3cml0ZU1ldGhvZHMgPSBbJ3B1dCcsICdhZGQnLCAnZGVsZXRlJywgJ2NsZWFyJ107XG5jb25zdCBjYWNoZWRNZXRob2RzID0gbmV3IE1hcCgpO1xuZnVuY3Rpb24gZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkge1xuICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIElEQkRhdGFiYXNlICYmXG4gICAgICAgICEocHJvcCBpbiB0YXJnZXQpICYmXG4gICAgICAgIHR5cGVvZiBwcm9wID09PSAnc3RyaW5nJykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY2FjaGVkTWV0aG9kcy5nZXQocHJvcCkpXG4gICAgICAgIHJldHVybiBjYWNoZWRNZXRob2RzLmdldChwcm9wKTtcbiAgICBjb25zdCB0YXJnZXRGdW5jTmFtZSA9IHByb3AucmVwbGFjZSgvRnJvbUluZGV4JC8sICcnKTtcbiAgICBjb25zdCB1c2VJbmRleCA9IHByb3AgIT09IHRhcmdldEZ1bmNOYW1lO1xuICAgIGNvbnN0IGlzV3JpdGUgPSB3cml0ZU1ldGhvZHMuaW5jbHVkZXModGFyZ2V0RnVuY05hbWUpO1xuICAgIGlmIChcbiAgICAvLyBCYWlsIGlmIHRoZSB0YXJnZXQgZG9lc24ndCBleGlzdCBvbiB0aGUgdGFyZ2V0LiBFZywgZ2V0QWxsIGlzbid0IGluIEVkZ2UuXG4gICAgISh0YXJnZXRGdW5jTmFtZSBpbiAodXNlSW5kZXggPyBJREJJbmRleCA6IElEQk9iamVjdFN0b3JlKS5wcm90b3R5cGUpIHx8XG4gICAgICAgICEoaXNXcml0ZSB8fCByZWFkTWV0aG9kcy5pbmNsdWRlcyh0YXJnZXRGdW5jTmFtZSkpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbWV0aG9kID0gYXN5bmMgZnVuY3Rpb24gKHN0b3JlTmFtZSwgLi4uYXJncykge1xuICAgICAgICAvLyBpc1dyaXRlID8gJ3JlYWR3cml0ZScgOiB1bmRlZmluZWQgZ3ppcHBzIGJldHRlciwgYnV0IGZhaWxzIGluIEVkZ2UgOihcbiAgICAgICAgY29uc3QgdHggPSB0aGlzLnRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgaXNXcml0ZSA/ICdyZWFkd3JpdGUnIDogJ3JlYWRvbmx5Jyk7XG4gICAgICAgIGxldCB0YXJnZXQgPSB0eC5zdG9yZTtcbiAgICAgICAgaWYgKHVzZUluZGV4KVxuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LmluZGV4KGFyZ3Muc2hpZnQoKSk7XG4gICAgICAgIC8vIE11c3QgcmVqZWN0IGlmIG9wIHJlamVjdHMuXG4gICAgICAgIC8vIElmIGl0J3MgYSB3cml0ZSBvcGVyYXRpb24sIG11c3QgcmVqZWN0IGlmIHR4LmRvbmUgcmVqZWN0cy5cbiAgICAgICAgLy8gTXVzdCByZWplY3Qgd2l0aCBvcCByZWplY3Rpb24gZmlyc3QuXG4gICAgICAgIC8vIE11c3QgcmVzb2x2ZSB3aXRoIG9wIHZhbHVlLlxuICAgICAgICAvLyBNdXN0IGhhbmRsZSBib3RoIHByb21pc2VzIChubyB1bmhhbmRsZWQgcmVqZWN0aW9ucylcbiAgICAgICAgcmV0dXJuIChhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICB0YXJnZXRbdGFyZ2V0RnVuY05hbWVdKC4uLmFyZ3MpLFxuICAgICAgICAgICAgaXNXcml0ZSAmJiB0eC5kb25lLFxuICAgICAgICBdKSlbMF07XG4gICAgfTtcbiAgICBjYWNoZWRNZXRob2RzLnNldChwcm9wLCBtZXRob2QpO1xuICAgIHJldHVybiBtZXRob2Q7XG59XG5yZXBsYWNlVHJhcHMoKG9sZFRyYXBzKSA9PiAoe1xuICAgIC4uLm9sZFRyYXBzLFxuICAgIGdldDogKHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpID0+IGdldE1ldGhvZCh0YXJnZXQsIHByb3ApIHx8IG9sZFRyYXBzLmdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSxcbiAgICBoYXM6ICh0YXJnZXQsIHByb3ApID0+ICEhZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkgfHwgb2xkVHJhcHMuaGFzKHRhcmdldCwgcHJvcCksXG59KSk7XG5cbmV4cG9ydCB7IGRlbGV0ZURCLCBvcGVuREIgfTtcbiIsImltcG9ydCB7IENvbXBvbmVudCwgQ29tcG9uZW50Q29udGFpbmVyIH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBMb2dnZXIsIHNldFVzZXJMb2dIYW5kbGVyLCBzZXRMb2dMZXZlbCBhcyBzZXRMb2dMZXZlbCQxIH0gZnJvbSAnQGZpcmViYXNlL2xvZ2dlcic7XG5pbXBvcnQgeyBFcnJvckZhY3RvcnksIGdldERlZmF1bHRBcHBDb25maWcsIGRlZXBFcXVhbCwgRmlyZWJhc2VFcnJvciwgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuZXhwb3J0IHsgRmlyZWJhc2VFcnJvciB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IG9wZW5EQiB9IGZyb20gJ2lkYic7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwge1xyXG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICB9XHJcbiAgICAvLyBJbiBpbml0aWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdpbGwgYmUgY2FsbGVkIGJ5IGluc3RhbGxhdGlvbnMgb25cclxuICAgIC8vIGF1dGggdG9rZW4gcmVmcmVzaCwgYW5kIGluc3RhbGxhdGlvbnMgd2lsbCBzZW5kIHRoaXMgc3RyaW5nLlxyXG4gICAgZ2V0UGxhdGZvcm1JbmZvU3RyaW5nKCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVycyA9IHRoaXMuY29udGFpbmVyLmdldFByb3ZpZGVycygpO1xyXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBwcm92aWRlcnMgYW5kIGdldCBsaWJyYXJ5L3ZlcnNpb24gcGFpcnMgZnJvbSBhbnkgdGhhdCBhcmVcclxuICAgICAgICAvLyB2ZXJzaW9uIGNvbXBvbmVudHMuXHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyc1xyXG4gICAgICAgICAgICAubWFwKHByb3ZpZGVyID0+IHtcclxuICAgICAgICAgICAgaWYgKGlzVmVyc2lvblNlcnZpY2VQcm92aWRlcihwcm92aWRlcikpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBwcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBgJHtzZXJ2aWNlLmxpYnJhcnl9LyR7c2VydmljZS52ZXJzaW9ufWA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maWx0ZXIobG9nU3RyaW5nID0+IGxvZ1N0cmluZylcclxuICAgICAgICAgICAgLmpvaW4oJyAnKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIHByb3ZpZGVyIGNoZWNrIGlmIHRoaXMgcHJvdmlkZXIgcHJvdmlkZXMgYSBWZXJzaW9uU2VydmljZVxyXG4gKlxyXG4gKiBOT1RFOiBVc2luZyBQcm92aWRlcjwnYXBwLXZlcnNpb24nPiBpcyBhIGhhY2sgdG8gaW5kaWNhdGUgdGhhdCB0aGUgcHJvdmlkZXJcclxuICogcHJvdmlkZXMgVmVyc2lvblNlcnZpY2UuIFRoZSBwcm92aWRlciBpcyBub3QgbmVjZXNzYXJpbHkgYSAnYXBwLXZlcnNpb24nXHJcbiAqIHByb3ZpZGVyLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyKHByb3ZpZGVyKSB7XHJcbiAgICBjb25zdCBjb21wb25lbnQgPSBwcm92aWRlci5nZXRDb21wb25lbnQoKTtcclxuICAgIHJldHVybiAoY29tcG9uZW50ID09PSBudWxsIHx8IGNvbXBvbmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29tcG9uZW50LnR5cGUpID09PSBcIlZFUlNJT05cIiAvKiBWRVJTSU9OICovO1xyXG59XG5cbmNvbnN0IG5hbWUkbyA9IFwiQGZpcmViYXNlL2FwcFwiO1xuY29uc3QgdmVyc2lvbiQxID0gXCIwLjguMlwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKCdAZmlyZWJhc2UvYXBwJyk7XG5cbmNvbnN0IG5hbWUkbiA9IFwiQGZpcmViYXNlL2FwcC1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRtID0gXCJAZmlyZWJhc2UvYW5hbHl0aWNzLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGwgPSBcIkBmaXJlYmFzZS9hbmFseXRpY3NcIjtcblxuY29uc3QgbmFtZSRrID0gXCJAZmlyZWJhc2UvYXBwLWNoZWNrLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGogPSBcIkBmaXJlYmFzZS9hcHAtY2hlY2tcIjtcblxuY29uc3QgbmFtZSRpID0gXCJAZmlyZWJhc2UvYXV0aFwiO1xuXG5jb25zdCBuYW1lJGggPSBcIkBmaXJlYmFzZS9hdXRoLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGcgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZVwiO1xuXG5jb25zdCBuYW1lJGYgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRlID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zXCI7XG5cbmNvbnN0IG5hbWUkZCA9IFwiQGZpcmViYXNlL2Z1bmN0aW9ucy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRjID0gXCJAZmlyZWJhc2UvaW5zdGFsbGF0aW9uc1wiO1xuXG5jb25zdCBuYW1lJGIgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGEgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmdcIjtcblxuY29uc3QgbmFtZSQ5ID0gXCJAZmlyZWJhc2UvbWVzc2FnaW5nLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDggPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZVwiO1xuXG5jb25zdCBuYW1lJDcgPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQ2ID0gXCJAZmlyZWJhc2UvcmVtb3RlLWNvbmZpZ1wiO1xuXG5jb25zdCBuYW1lJDUgPSBcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDQgPSBcIkBmaXJlYmFzZS9zdG9yYWdlXCI7XG5cbmNvbnN0IG5hbWUkMyA9IFwiQGZpcmViYXNlL3N0b3JhZ2UtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkMiA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG5jb25zdCBuYW1lJDEgPSBcIkBmaXJlYmFzZS9maXJlc3RvcmUtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUgPSBcImZpcmViYXNlXCI7XG5jb25zdCB2ZXJzaW9uID0gXCI5LjEyLjFcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGFwcCBuYW1lXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9FTlRSWV9OQU1FID0gJ1tERUZBVUxUXSc7XHJcbmNvbnN0IFBMQVRGT1JNX0xPR19TVFJJTkcgPSB7XHJcbiAgICBbbmFtZSRvXTogJ2ZpcmUtY29yZScsXHJcbiAgICBbbmFtZSRuXTogJ2ZpcmUtY29yZS1jb21wYXQnLFxyXG4gICAgW25hbWUkbF06ICdmaXJlLWFuYWx5dGljcycsXHJcbiAgICBbbmFtZSRtXTogJ2ZpcmUtYW5hbHl0aWNzLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRqXTogJ2ZpcmUtYXBwLWNoZWNrJyxcclxuICAgIFtuYW1lJGtdOiAnZmlyZS1hcHAtY2hlY2stY29tcGF0JyxcclxuICAgIFtuYW1lJGldOiAnZmlyZS1hdXRoJyxcclxuICAgIFtuYW1lJGhdOiAnZmlyZS1hdXRoLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRnXTogJ2ZpcmUtcnRkYicsXHJcbiAgICBbbmFtZSRmXTogJ2ZpcmUtcnRkYi1jb21wYXQnLFxyXG4gICAgW25hbWUkZV06ICdmaXJlLWZuJyxcclxuICAgIFtuYW1lJGRdOiAnZmlyZS1mbi1jb21wYXQnLFxyXG4gICAgW25hbWUkY106ICdmaXJlLWlpZCcsXHJcbiAgICBbbmFtZSRiXTogJ2ZpcmUtaWlkLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRhXTogJ2ZpcmUtZmNtJyxcclxuICAgIFtuYW1lJDldOiAnZmlyZS1mY20tY29tcGF0JyxcclxuICAgIFtuYW1lJDhdOiAnZmlyZS1wZXJmJyxcclxuICAgIFtuYW1lJDddOiAnZmlyZS1wZXJmLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ2XTogJ2ZpcmUtcmMnLFxyXG4gICAgW25hbWUkNV06ICdmaXJlLXJjLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ0XTogJ2ZpcmUtZ2NzJyxcclxuICAgIFtuYW1lJDNdOiAnZmlyZS1nY3MtY29tcGF0JyxcclxuICAgIFtuYW1lJDJdOiAnZmlyZS1mc3QnLFxyXG4gICAgW25hbWUkMV06ICdmaXJlLWZzdC1jb21wYXQnLFxyXG4gICAgJ2ZpcmUtanMnOiAnZmlyZS1qcycsXHJcbiAgICBbbmFtZV06ICdmaXJlLWpzLWFsbCdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgX2FwcHMgPSBuZXcgTWFwKCk7XHJcbi8qKlxyXG4gKiBSZWdpc3RlcmVkIGNvbXBvbmVudHMuXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuY29uc3QgX2NvbXBvbmVudHMgPSBuZXcgTWFwKCk7XHJcbi8qKlxyXG4gKiBAcGFyYW0gY29tcG9uZW50IC0gdGhlIGNvbXBvbmVudCBiZWluZyBhZGRlZCB0byB0aGlzIGFwcCdzIGNvbnRhaW5lclxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9hZGRDb21wb25lbnQoYXBwLCBjb21wb25lbnQpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXBwLmNvbnRhaW5lci5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBDb21wb25lbnQgJHtjb21wb25lbnQubmFtZX0gZmFpbGVkIHRvIHJlZ2lzdGVyIHdpdGggRmlyZWJhc2VBcHAgJHthcHAubmFtZX1gLCBlKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoYXBwLCBjb21wb25lbnQpIHtcclxuICAgIGFwcC5jb250YWluZXIuYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoY29tcG9uZW50KTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGNvbXBvbmVudCAtIHRoZSBjb21wb25lbnQgdG8gcmVnaXN0ZXJcclxuICogQHJldHVybnMgd2hldGhlciBvciBub3QgdGhlIGNvbXBvbmVudCBpcyByZWdpc3RlcmVkIHN1Y2Nlc3NmdWxseVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9yZWdpc3RlckNvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnQubmFtZTtcclxuICAgIGlmIChfY29tcG9uZW50cy5oYXMoY29tcG9uZW50TmFtZSkpIHtcclxuICAgICAgICBsb2dnZXIuZGVidWcoYFRoZXJlIHdlcmUgbXVsdGlwbGUgYXR0ZW1wdHMgdG8gcmVnaXN0ZXIgY29tcG9uZW50ICR7Y29tcG9uZW50TmFtZX0uYCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgX2NvbXBvbmVudHMuc2V0KGNvbXBvbmVudE5hbWUsIGNvbXBvbmVudCk7XHJcbiAgICAvLyBhZGQgdGhlIGNvbXBvbmVudCB0byBleGlzdGluZyBhcHAgaW5zdGFuY2VzXHJcbiAgICBmb3IgKGNvbnN0IGFwcCBvZiBfYXBwcy52YWx1ZXMoKSkge1xyXG4gICAgICAgIF9hZGRDb21wb25lbnQoYXBwLCBjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBGaXJlYmFzZUFwcCBpbnN0YW5jZVxyXG4gKiBAcGFyYW0gbmFtZSAtIHNlcnZpY2UgbmFtZVxyXG4gKlxyXG4gKiBAcmV0dXJucyB0aGUgcHJvdmlkZXIgZm9yIHRoZSBzZXJ2aWNlIHdpdGggdGhlIG1hdGNoaW5nIG5hbWVcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfZ2V0UHJvdmlkZXIoYXBwLCBuYW1lKSB7XHJcbiAgICBjb25zdCBoZWFydGJlYXRDb250cm9sbGVyID0gYXBwLmNvbnRhaW5lclxyXG4gICAgICAgIC5nZXRQcm92aWRlcignaGVhcnRiZWF0JylcclxuICAgICAgICAuZ2V0SW1tZWRpYXRlKHsgb3B0aW9uYWw6IHRydWUgfSk7XHJcbiAgICBpZiAoaGVhcnRiZWF0Q29udHJvbGxlcikge1xyXG4gICAgICAgIHZvaWQgaGVhcnRiZWF0Q29udHJvbGxlci50cmlnZ2VySGVhcnRiZWF0KCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXBwLmNvbnRhaW5lci5nZXRQcm92aWRlcihuYW1lKTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGFwcCAtIEZpcmViYXNlQXBwIGluc3RhbmNlXHJcbiAqIEBwYXJhbSBuYW1lIC0gc2VydmljZSBuYW1lXHJcbiAqIEBwYXJhbSBpbnN0YW5jZUlkZW50aWZpZXIgLSBzZXJ2aWNlIGluc3RhbmNlIGlkZW50aWZpZXIgaW4gY2FzZSB0aGUgc2VydmljZSBzdXBwb3J0cyBtdWx0aXBsZSBpbnN0YW5jZXNcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfcmVtb3ZlU2VydmljZUluc3RhbmNlKGFwcCwgbmFtZSwgaW5zdGFuY2VJZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICBfZ2V0UHJvdmlkZXIoYXBwLCBuYW1lKS5jbGVhckluc3RhbmNlKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbn1cclxuLyoqXHJcbiAqIFRlc3Qgb25seVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9jbGVhckNvbXBvbmVudHMoKSB7XHJcbiAgICBfY29tcG9uZW50cy5jbGVhcigpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IEVSUk9SUyA9IHtcclxuICAgIFtcIm5vLWFwcFwiIC8qIE5PX0FQUCAqL106IFwiTm8gRmlyZWJhc2UgQXBwICd7JGFwcE5hbWV9JyBoYXMgYmVlbiBjcmVhdGVkIC0gXCIgK1xyXG4gICAgICAgICdjYWxsIEZpcmViYXNlIEFwcC5pbml0aWFsaXplQXBwKCknLFxyXG4gICAgW1wiYmFkLWFwcC1uYW1lXCIgLyogQkFEX0FQUF9OQU1FICovXTogXCJJbGxlZ2FsIEFwcCBuYW1lOiAneyRhcHBOYW1lfVwiLFxyXG4gICAgW1wiZHVwbGljYXRlLWFwcFwiIC8qIERVUExJQ0FURV9BUFAgKi9dOiBcIkZpcmViYXNlIEFwcCBuYW1lZCAneyRhcHBOYW1lfScgYWxyZWFkeSBleGlzdHMgd2l0aCBkaWZmZXJlbnQgb3B0aW9ucyBvciBjb25maWdcIixcclxuICAgIFtcImFwcC1kZWxldGVkXCIgLyogQVBQX0RFTEVURUQgKi9dOiBcIkZpcmViYXNlIEFwcCBuYW1lZCAneyRhcHBOYW1lfScgYWxyZWFkeSBkZWxldGVkXCIsXHJcbiAgICBbXCJuby1vcHRpb25zXCIgLyogTk9fT1BUSU9OUyAqL106ICdOZWVkIHRvIHByb3ZpZGUgb3B0aW9ucywgd2hlbiBub3QgYmVpbmcgZGVwbG95ZWQgdG8gaG9zdGluZyB2aWEgc291cmNlLicsXHJcbiAgICBbXCJpbnZhbGlkLWFwcC1hcmd1bWVudFwiIC8qIElOVkFMSURfQVBQX0FSR1VNRU5UICovXTogJ2ZpcmViYXNlLnskYXBwTmFtZX0oKSB0YWtlcyBlaXRoZXIgbm8gYXJndW1lbnQgb3IgYSAnICtcclxuICAgICAgICAnRmlyZWJhc2UgQXBwIGluc3RhbmNlLicsXHJcbiAgICBbXCJpbnZhbGlkLWxvZy1hcmd1bWVudFwiIC8qIElOVkFMSURfTE9HX0FSR1VNRU5UICovXTogJ0ZpcnN0IGFyZ3VtZW50IHRvIGBvbkxvZ2AgbXVzdCBiZSBudWxsIG9yIGEgZnVuY3Rpb24uJyxcclxuICAgIFtcImlkYi1vcGVuXCIgLyogSURCX09QRU4gKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gb3BlbmluZyBJbmRleGVkREIuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nLFxyXG4gICAgW1wiaWRiLWdldFwiIC8qIElEQl9HRVQgKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gcmVhZGluZyBmcm9tIEluZGV4ZWREQi4gT3JpZ2luYWwgZXJyb3I6IHskb3JpZ2luYWxFcnJvck1lc3NhZ2V9LicsXHJcbiAgICBbXCJpZGItc2V0XCIgLyogSURCX1dSSVRFICovXTogJ0Vycm9yIHRocm93biB3aGVuIHdyaXRpbmcgdG8gSW5kZXhlZERCLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJyxcclxuICAgIFtcImlkYi1kZWxldGVcIiAvKiBJREJfREVMRVRFICovXTogJ0Vycm9yIHRocm93biB3aGVuIGRlbGV0aW5nIGZyb20gSW5kZXhlZERCLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJ1xyXG59O1xyXG5jb25zdCBFUlJPUl9GQUNUT1JZID0gbmV3IEVycm9yRmFjdG9yeSgnYXBwJywgJ0ZpcmViYXNlJywgRVJST1JTKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgRmlyZWJhc2VBcHBJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGNvbmZpZywgY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5faXNEZWxldGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGNvbmZpZy5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCA9XHJcbiAgICAgICAgICAgIGNvbmZpZy5hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENvbXBvbmVudChuZXcgQ29tcG9uZW50KCdhcHAnLCAoKSA9PiB0aGlzLCBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqLykpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCgpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDtcclxuICAgIH1cclxuICAgIHNldCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQodmFsKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHRoaXMuX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCA9IHZhbDtcclxuICAgIH1cclxuICAgIGdldCBuYW1lKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcclxuICAgIH1cclxuICAgIGdldCBvcHRpb25zKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcclxuICAgIH1cclxuICAgIGdldCBjb25maWcoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb25maWc7XHJcbiAgICB9XHJcbiAgICBnZXQgY29udGFpbmVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb250YWluZXI7XHJcbiAgICB9XHJcbiAgICBnZXQgaXNEZWxldGVkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pc0RlbGV0ZWQ7XHJcbiAgICB9XHJcbiAgICBzZXQgaXNEZWxldGVkKHZhbCkge1xyXG4gICAgICAgIHRoaXMuX2lzRGVsZXRlZCA9IHZhbDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBmdW5jdGlvbiB3aWxsIHRocm93IGFuIEVycm9yIGlmIHRoZSBBcHAgaGFzIGFscmVhZHkgYmVlbiBkZWxldGVkIC1cclxuICAgICAqIHVzZSBiZWZvcmUgcGVyZm9ybWluZyBBUEkgYWN0aW9ucyBvbiB0aGUgQXBwLlxyXG4gICAgICovXHJcbiAgICBjaGVja0Rlc3Ryb3llZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJhcHAtZGVsZXRlZFwiIC8qIEFQUF9ERUxFVEVEICovLCB7IGFwcE5hbWU6IHRoaXMuX25hbWUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgY3VycmVudCBTREsgdmVyc2lvbi5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgU0RLX1ZFUlNJT04gPSB2ZXJzaW9uO1xyXG5mdW5jdGlvbiBpbml0aWFsaXplQXBwKF9vcHRpb25zLCByYXdDb25maWcgPSB7fSkge1xyXG4gICAgbGV0IG9wdGlvbnMgPSBfb3B0aW9ucztcclxuICAgIGlmICh0eXBlb2YgcmF3Q29uZmlnICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGNvbnN0IG5hbWUgPSByYXdDb25maWc7XHJcbiAgICAgICAgcmF3Q29uZmlnID0geyBuYW1lIH07XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb25maWcgPSBPYmplY3QuYXNzaWduKHsgbmFtZTogREVGQVVMVF9FTlRSWV9OQU1FLCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ6IGZhbHNlIH0sIHJhd0NvbmZpZyk7XHJcbiAgICBjb25zdCBuYW1lID0gY29uZmlnLm5hbWU7XHJcbiAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnIHx8ICFuYW1lKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJiYWQtYXBwLW5hbWVcIiAvKiBCQURfQVBQX05BTUUgKi8sIHtcclxuICAgICAgICAgICAgYXBwTmFtZTogU3RyaW5nKG5hbWUpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBvcHRpb25zIHx8IChvcHRpb25zID0gZ2V0RGVmYXVsdEFwcENvbmZpZygpKTtcclxuICAgIGlmICghb3B0aW9ucykge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tb3B0aW9uc1wiIC8qIE5PX09QVElPTlMgKi8pO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZXhpc3RpbmdBcHAgPSBfYXBwcy5nZXQobmFtZSk7XHJcbiAgICBpZiAoZXhpc3RpbmdBcHApIHtcclxuICAgICAgICAvLyByZXR1cm4gdGhlIGV4aXN0aW5nIGFwcCBpZiBvcHRpb25zIGFuZCBjb25maWcgZGVlcCBlcXVhbCB0aGUgb25lcyBpbiB0aGUgZXhpc3RpbmcgYXBwLlxyXG4gICAgICAgIGlmIChkZWVwRXF1YWwob3B0aW9ucywgZXhpc3RpbmdBcHAub3B0aW9ucykgJiZcclxuICAgICAgICAgICAgZGVlcEVxdWFsKGNvbmZpZywgZXhpc3RpbmdBcHAuY29uZmlnKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdBcHA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImR1cGxpY2F0ZS1hcHBcIiAvKiBEVVBMSUNBVEVfQVBQICovLCB7IGFwcE5hbWU6IG5hbWUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgY29udGFpbmVyID0gbmV3IENvbXBvbmVudENvbnRhaW5lcihuYW1lKTtcclxuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIF9jb21wb25lbnRzLnZhbHVlcygpKSB7XHJcbiAgICAgICAgY29udGFpbmVyLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbmV3QXBwID0gbmV3IEZpcmViYXNlQXBwSW1wbChvcHRpb25zLCBjb25maWcsIGNvbnRhaW5lcik7XHJcbiAgICBfYXBwcy5zZXQobmFtZSwgbmV3QXBwKTtcclxuICAgIHJldHVybiBuZXdBcHA7XHJcbn1cclxuLyoqXHJcbiAqIFJldHJpZXZlcyBhIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSBpbnN0YW5jZS5cclxuICpcclxuICogV2hlbiBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHMsIHRoZSBkZWZhdWx0IGFwcCBpcyByZXR1cm5lZC4gV2hlbiBhbiBhcHAgbmFtZVxyXG4gKiBpcyBwcm92aWRlZCwgdGhlIGFwcCBjb3JyZXNwb25kaW5nIHRvIHRoYXQgbmFtZSBpcyByZXR1cm5lZC5cclxuICpcclxuICogQW4gZXhjZXB0aW9uIGlzIHRocm93biBpZiB0aGUgYXBwIGJlaW5nIHJldHJpZXZlZCBoYXMgbm90IHlldCBiZWVuXHJcbiAqIGluaXRpYWxpemVkLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFJldHVybiB0aGUgZGVmYXVsdCBhcHBcclxuICogY29uc3QgYXBwID0gZ2V0QXBwKCk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFJldHVybiBhIG5hbWVkIGFwcFxyXG4gKiBjb25zdCBvdGhlckFwcCA9IGdldEFwcChcIm90aGVyQXBwXCIpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIG5hbWUgLSBPcHRpb25hbCBuYW1lIG9mIHRoZSBhcHAgdG8gcmV0dXJuLiBJZiBubyBuYW1lIGlzXHJcbiAqICAgcHJvdmlkZWQsIHRoZSBkZWZhdWx0IGlzIGBcIltERUZBVUxUXVwiYC5cclxuICpcclxuICogQHJldHVybnMgVGhlIGFwcCBjb3JyZXNwb25kaW5nIHRvIHRoZSBwcm92aWRlZCBhcHAgbmFtZS5cclxuICogICBJZiBubyBhcHAgbmFtZSBpcyBwcm92aWRlZCwgdGhlIGRlZmF1bHQgYXBwIGlzIHJldHVybmVkLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRBcHAobmFtZSA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgY29uc3QgYXBwID0gX2FwcHMuZ2V0KG5hbWUpO1xyXG4gICAgaWYgKCFhcHAgJiYgbmFtZSA9PT0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgcmV0dXJuIGluaXRpYWxpemVBcHAoKTtcclxuICAgIH1cclxuICAgIGlmICghYXBwKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1hcHBcIiAvKiBOT19BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBhcHA7XHJcbn1cclxuLyoqXHJcbiAqIEEgKHJlYWQtb25seSkgYXJyYXkgb2YgYWxsIGluaXRpYWxpemVkIGFwcHMuXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldEFwcHMoKSB7XHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbShfYXBwcy52YWx1ZXMoKSk7XHJcbn1cclxuLyoqXHJcbiAqIFJlbmRlcnMgdGhpcyBhcHAgdW51c2FibGUgYW5kIGZyZWVzIHRoZSByZXNvdXJjZXMgb2YgYWxsIGFzc29jaWF0ZWRcclxuICogc2VydmljZXMuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogZGVsZXRlQXBwKGFwcClcclxuICogICAudGhlbihmdW5jdGlvbigpIHtcclxuICogICAgIGNvbnNvbGUubG9nKFwiQXBwIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xyXG4gKiAgIH0pXHJcbiAqICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XHJcbiAqICAgICBjb25zb2xlLmxvZyhcIkVycm9yIGRlbGV0aW5nIGFwcDpcIiwgZXJyb3IpO1xyXG4gKiAgIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlQXBwKGFwcCkge1xyXG4gICAgY29uc3QgbmFtZSA9IGFwcC5uYW1lO1xyXG4gICAgaWYgKF9hcHBzLmhhcyhuYW1lKSkge1xyXG4gICAgICAgIF9hcHBzLmRlbGV0ZShuYW1lKTtcclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChhcHAuY29udGFpbmVyXHJcbiAgICAgICAgICAgIC5nZXRQcm92aWRlcnMoKVxyXG4gICAgICAgICAgICAubWFwKHByb3ZpZGVyID0+IHByb3ZpZGVyLmRlbGV0ZSgpKSk7XHJcbiAgICAgICAgYXBwLmlzRGVsZXRlZCA9IHRydWU7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFJlZ2lzdGVycyBhIGxpYnJhcnkncyBuYW1lIGFuZCB2ZXJzaW9uIGZvciBwbGF0Zm9ybSBsb2dnaW5nIHB1cnBvc2VzLlxyXG4gKiBAcGFyYW0gbGlicmFyeSAtIE5hbWUgb2YgMXAgb3IgM3AgbGlicmFyeSAoZS5nLiBmaXJlc3RvcmUsIGFuZ3VsYXJmaXJlKVxyXG4gKiBAcGFyYW0gdmVyc2lvbiAtIEN1cnJlbnQgdmVyc2lvbiBvZiB0aGF0IGxpYnJhcnkuXHJcbiAqIEBwYXJhbSB2YXJpYW50IC0gQnVuZGxlIHZhcmlhbnQsIGUuZy4sIG5vZGUsIHJuLCBldGMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyVmVyc2lvbihsaWJyYXJ5S2V5T3JOYW1lLCB2ZXJzaW9uLCB2YXJpYW50KSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICAvLyBUT0RPOiBXZSBjYW4gdXNlIHRoaXMgY2hlY2sgdG8gd2hpdGVsaXN0IHN0cmluZ3Mgd2hlbi9pZiB3ZSBzZXQgdXBcclxuICAgIC8vIGEgZ29vZCB3aGl0ZWxpc3Qgc3lzdGVtLlxyXG4gICAgbGV0IGxpYnJhcnkgPSAoX2EgPSBQTEFURk9STV9MT0dfU1RSSU5HW2xpYnJhcnlLZXlPck5hbWVdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBsaWJyYXJ5S2V5T3JOYW1lO1xyXG4gICAgaWYgKHZhcmlhbnQpIHtcclxuICAgICAgICBsaWJyYXJ5ICs9IGAtJHt2YXJpYW50fWA7XHJcbiAgICB9XHJcbiAgICBjb25zdCBsaWJyYXJ5TWlzbWF0Y2ggPSBsaWJyYXJ5Lm1hdGNoKC9cXHN8XFwvLyk7XHJcbiAgICBjb25zdCB2ZXJzaW9uTWlzbWF0Y2ggPSB2ZXJzaW9uLm1hdGNoKC9cXHN8XFwvLyk7XHJcbiAgICBpZiAobGlicmFyeU1pc21hdGNoIHx8IHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgIGNvbnN0IHdhcm5pbmcgPSBbXHJcbiAgICAgICAgICAgIGBVbmFibGUgdG8gcmVnaXN0ZXIgbGlicmFyeSBcIiR7bGlicmFyeX1cIiB3aXRoIHZlcnNpb24gXCIke3ZlcnNpb259XCI6YFxyXG4gICAgICAgIF07XHJcbiAgICAgICAgaWYgKGxpYnJhcnlNaXNtYXRjaCkge1xyXG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goYGxpYnJhcnkgbmFtZSBcIiR7bGlicmFyeX1cIiBjb250YWlucyBpbGxlZ2FsIGNoYXJhY3RlcnMgKHdoaXRlc3BhY2Ugb3IgXCIvXCIpYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggJiYgdmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaCgnYW5kJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgd2FybmluZy5wdXNoKGB2ZXJzaW9uIG5hbWUgXCIke3ZlcnNpb259XCIgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXJzICh3aGl0ZXNwYWNlIG9yIFwiL1wiKWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsb2dnZXIud2Fybih3YXJuaW5nLmpvaW4oJyAnKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoYCR7bGlicmFyeX0tdmVyc2lvbmAsICgpID0+ICh7IGxpYnJhcnksIHZlcnNpb24gfSksIFwiVkVSU0lPTlwiIC8qIFZFUlNJT04gKi8pKTtcclxufVxyXG4vKipcclxuICogU2V0cyBsb2cgaGFuZGxlciBmb3IgYWxsIEZpcmViYXNlIFNES3MuXHJcbiAqIEBwYXJhbSBsb2dDYWxsYmFjayAtIEFuIG9wdGlvbmFsIGN1c3RvbSBsb2cgaGFuZGxlciB0aGF0IGV4ZWN1dGVzIHVzZXIgY29kZSB3aGVuZXZlclxyXG4gKiB0aGUgRmlyZWJhc2UgU0RLIG1ha2VzIGEgbG9nZ2luZyBjYWxsLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBvbkxvZyhsb2dDYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgaWYgKGxvZ0NhbGxiYWNrICE9PSBudWxsICYmIHR5cGVvZiBsb2dDYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW52YWxpZC1sb2ctYXJndW1lbnRcIiAvKiBJTlZBTElEX0xPR19BUkdVTUVOVCAqLyk7XHJcbiAgICB9XHJcbiAgICBzZXRVc2VyTG9nSGFuZGxlcihsb2dDYWxsYmFjaywgb3B0aW9ucyk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgbG9nIGxldmVsIGZvciBhbGwgRmlyZWJhc2UgU0RLcy5cclxuICpcclxuICogQWxsIG9mIHRoZSBsb2cgdHlwZXMgYWJvdmUgdGhlIGN1cnJlbnQgbG9nIGxldmVsIGFyZSBjYXB0dXJlZCAoaS5lLiBpZlxyXG4gKiB5b3Ugc2V0IHRoZSBsb2cgbGV2ZWwgdG8gYGluZm9gLCBlcnJvcnMgYXJlIGxvZ2dlZCwgYnV0IGBkZWJ1Z2AgYW5kXHJcbiAqIGB2ZXJib3NlYCBsb2dzIGFyZSBub3QpLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRMb2dMZXZlbChsb2dMZXZlbCkge1xyXG4gICAgc2V0TG9nTGV2ZWwkMShsb2dMZXZlbCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgREJfTkFNRSA9ICdmaXJlYmFzZS1oZWFydGJlYXQtZGF0YWJhc2UnO1xyXG5jb25zdCBEQl9WRVJTSU9OID0gMTtcclxuY29uc3QgU1RPUkVfTkFNRSA9ICdmaXJlYmFzZS1oZWFydGJlYXQtc3RvcmUnO1xyXG5sZXQgZGJQcm9taXNlID0gbnVsbDtcclxuZnVuY3Rpb24gZ2V0RGJQcm9taXNlKCkge1xyXG4gICAgaWYgKCFkYlByb21pc2UpIHtcclxuICAgICAgICBkYlByb21pc2UgPSBvcGVuREIoREJfTkFNRSwgREJfVkVSU0lPTiwge1xyXG4gICAgICAgICAgICB1cGdyYWRlOiAoZGIsIG9sZFZlcnNpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IHVzZSAnYnJlYWsnIGluIHRoaXMgc3dpdGNoIHN0YXRlbWVudCwgdGhlIGZhbGwtdGhyb3VnaFxyXG4gICAgICAgICAgICAgICAgLy8gYmVoYXZpb3IgaXMgd2hhdCB3ZSB3YW50LCBiZWNhdXNlIGlmIHRoZXJlIGFyZSBtdWx0aXBsZSB2ZXJzaW9ucyBiZXR3ZWVuXHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgb2xkIHZlcnNpb24gYW5kIHRoZSBjdXJyZW50IHZlcnNpb24sIHdlIHdhbnQgQUxMIHRoZSBtaWdyYXRpb25zXHJcbiAgICAgICAgICAgICAgICAvLyB0aGF0IGNvcnJlc3BvbmQgdG8gdGhvc2UgdmVyc2lvbnMgdG8gcnVuLCBub3Qgb25seSB0aGUgbGFzdCBvbmUuXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVmYXVsdC1jYXNlXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9sZFZlcnNpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKFNUT1JFX05BTUUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaWRiLW9wZW5cIiAvKiBJREJfT1BFTiAqLywge1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFcnJvck1lc3NhZ2U6IGUubWVzc2FnZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBkYlByb21pc2U7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gcmVhZEhlYXJ0YmVhdHNGcm9tSW5kZXhlZERCKGFwcCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkYiA9IGF3YWl0IGdldERiUHJvbWlzZSgpO1xyXG4gICAgICAgIHJldHVybiBkYlxyXG4gICAgICAgICAgICAudHJhbnNhY3Rpb24oU1RPUkVfTkFNRSlcclxuICAgICAgICAgICAgLm9iamVjdFN0b3JlKFNUT1JFX05BTUUpXHJcbiAgICAgICAgICAgIC5nZXQoY29tcHV0ZUtleShhcHApKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGUubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBpZGJHZXRFcnJvciA9IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaWRiLWdldFwiIC8qIElEQl9HRVQgKi8sIHtcclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsRXJyb3JNZXNzYWdlOiAoX2EgPSBlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWVzc2FnZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oaWRiR2V0RXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHdyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCKGFwcCwgaGVhcnRiZWF0T2JqZWN0KSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGJQcm9taXNlKCk7XHJcbiAgICAgICAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbihTVE9SRV9OQU1FLCAncmVhZHdyaXRlJyk7XHJcbiAgICAgICAgY29uc3Qgb2JqZWN0U3RvcmUgPSB0eC5vYmplY3RTdG9yZShTVE9SRV9OQU1FKTtcclxuICAgICAgICBhd2FpdCBvYmplY3RTdG9yZS5wdXQoaGVhcnRiZWF0T2JqZWN0LCBjb21wdXRlS2V5KGFwcCkpO1xyXG4gICAgICAgIHJldHVybiB0eC5kb25lO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oZS5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkYkdldEVycm9yID0gRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpZGItc2V0XCIgLyogSURCX1dSSVRFICovLCB7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEVycm9yTWVzc2FnZTogKF9hID0gZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1lc3NhZ2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGlkYkdldEVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBjb21wdXRlS2V5KGFwcCkge1xyXG4gICAgcmV0dXJuIGAke2FwcC5uYW1lfSEke2FwcC5vcHRpb25zLmFwcElkfWA7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgTUFYX0hFQURFUl9CWVRFUyA9IDEwMjQ7XHJcbi8vIDMwIGRheXNcclxuY29uc3QgU1RPUkVEX0hFQVJUQkVBVF9SRVRFTlRJT05fTUFYX01JTExJUyA9IDMwICogMjQgKiA2MCAqIDYwICogMTAwMDtcclxuY2xhc3MgSGVhcnRiZWF0U2VydmljZUltcGwge1xyXG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSW4tbWVtb3J5IGNhY2hlIGZvciBoZWFydGJlYXRzLCB1c2VkIGJ5IGdldEhlYXJ0YmVhdHNIZWFkZXIoKSB0byBnZW5lcmF0ZVxyXG4gICAgICAgICAqIHRoZSBoZWFkZXIgc3RyaW5nLlxyXG4gICAgICAgICAqIFN0b3JlcyBvbmUgcmVjb3JkIHBlciBkYXRlLiBUaGlzIHdpbGwgYmUgY29uc29saWRhdGVkIGludG8gdGhlIHN0YW5kYXJkXHJcbiAgICAgICAgICogZm9ybWF0IG9mIG9uZSByZWNvcmQgcGVyIHVzZXIgYWdlbnQgc3RyaW5nIGJlZm9yZSBiZWluZyBzZW50IGFzIGEgaGVhZGVyLlxyXG4gICAgICAgICAqIFBvcHVsYXRlZCBmcm9tIGluZGV4ZWREQiB3aGVuIHRoZSBjb250cm9sbGVyIGlzIGluc3RhbnRpYXRlZCBhbmQgc2hvdWxkXHJcbiAgICAgICAgICogYmUga2VwdCBpbiBzeW5jIHdpdGggaW5kZXhlZERCLlxyXG4gICAgICAgICAqIExlYXZlIHB1YmxpYyBmb3IgZWFzaWVyIHRlc3RpbmcuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlID0gbnVsbDtcclxuICAgICAgICBjb25zdCBhcHAgPSB0aGlzLmNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgdGhpcy5fc3RvcmFnZSA9IG5ldyBIZWFydGJlYXRTdG9yYWdlSW1wbChhcHApO1xyXG4gICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZVByb21pc2UgPSB0aGlzLl9zdG9yYWdlLnJlYWQoKS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9IHJlc3VsdDtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ2FsbGVkIHRvIHJlcG9ydCBhIGhlYXJ0YmVhdC4gVGhlIGZ1bmN0aW9uIHdpbGwgZ2VuZXJhdGVcclxuICAgICAqIGEgSGVhcnRiZWF0c0J5VXNlckFnZW50IG9iamVjdCwgdXBkYXRlIGhlYXJ0YmVhdHNDYWNoZSwgYW5kIHBlcnNpc3QgaXRcclxuICAgICAqIHRvIEluZGV4ZWREQi5cclxuICAgICAqIE5vdGUgdGhhdCB3ZSBvbmx5IHN0b3JlIG9uZSBoZWFydGJlYXQgcGVyIGRheS4gU28gaWYgYSBoZWFydGJlYXQgZm9yIHRvZGF5IGlzXHJcbiAgICAgKiBhbHJlYWR5IGxvZ2dlZCwgc3Vic2VxdWVudCBjYWxscyB0byB0aGlzIGZ1bmN0aW9uIGluIHRoZSBzYW1lIGRheSB3aWxsIGJlIGlnbm9yZWQuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHRyaWdnZXJIZWFydGJlYXQoKSB7XHJcbiAgICAgICAgY29uc3QgcGxhdGZvcm1Mb2dnZXIgPSB0aGlzLmNvbnRhaW5lclxyXG4gICAgICAgICAgICAuZ2V0UHJvdmlkZXIoJ3BsYXRmb3JtLWxvZ2dlcicpXHJcbiAgICAgICAgICAgIC5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAvLyBUaGlzIGlzIHRoZSBcIkZpcmViYXNlIHVzZXIgYWdlbnRcIiBzdHJpbmcgZnJvbSB0aGUgcGxhdGZvcm0gbG9nZ2VyXHJcbiAgICAgICAgLy8gc2VydmljZSwgbm90IHRoZSBicm93c2VyIHVzZXIgYWdlbnQuXHJcbiAgICAgICAgY29uc3QgYWdlbnQgPSBwbGF0Zm9ybUxvZ2dlci5nZXRQbGF0Zm9ybUluZm9TdHJpbmcoKTtcclxuICAgICAgICBjb25zdCBkYXRlID0gZ2V0VVRDRGF0ZVN0cmluZygpO1xyXG4gICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlID0gYXdhaXQgdGhpcy5faGVhcnRiZWF0c0NhY2hlUHJvbWlzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRG8gbm90IHN0b3JlIGEgaGVhcnRiZWF0IGlmIG9uZSBpcyBhbHJlYWR5IHN0b3JlZCBmb3IgdGhpcyBkYXlcclxuICAgICAgICAvLyBvciBpZiBhIGhlYWRlciBoYXMgYWxyZWFkeSBiZWVuIHNlbnQgdG9kYXkuXHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5sYXN0U2VudEhlYXJ0YmVhdERhdGUgPT09IGRhdGUgfHxcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMuc29tZShzaW5nbGVEYXRlSGVhcnRiZWF0ID0+IHNpbmdsZURhdGVIZWFydGJlYXQuZGF0ZSA9PT0gZGF0ZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gVGhlcmUgaXMgbm8gZW50cnkgZm9yIHRoaXMgZGF0ZS4gQ3JlYXRlIG9uZS5cclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMucHVzaCh7IGRhdGUsIGFnZW50IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBSZW1vdmUgZW50cmllcyBvbGRlciB0aGFuIDMwIGRheXMuXHJcbiAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMgPSB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cy5maWx0ZXIoc2luZ2xlRGF0ZUhlYXJ0YmVhdCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhiVGltZXN0YW1wID0gbmV3IERhdGUoc2luZ2xlRGF0ZUhlYXJ0YmVhdC5kYXRlKS52YWx1ZU9mKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBub3cgLSBoYlRpbWVzdGFtcCA8PSBTVE9SRURfSEVBUlRCRUFUX1JFVEVOVElPTl9NQVhfTUlMTElTO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zdG9yYWdlLm92ZXJ3cml0ZSh0aGlzLl9oZWFydGJlYXRzQ2FjaGUpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgYmFzZTY0IGVuY29kZWQgc3RyaW5nIHdoaWNoIGNhbiBiZSBhdHRhY2hlZCB0byB0aGUgaGVhcnRiZWF0LXNwZWNpZmljIGhlYWRlciBkaXJlY3RseS5cclxuICAgICAqIEl0IGFsc28gY2xlYXJzIGFsbCBoZWFydGJlYXRzIGZyb20gbWVtb3J5IGFzIHdlbGwgYXMgaW4gSW5kZXhlZERCLlxyXG4gICAgICpcclxuICAgICAqIE5PVEU6IENvbnN1bWluZyBwcm9kdWN0IFNES3Mgc2hvdWxkIG5vdCBzZW5kIHRoZSBoZWFkZXIgaWYgdGhpcyBtZXRob2RcclxuICAgICAqIHJldHVybnMgYW4gZW1wdHkgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRIZWFydGJlYXRzSGVhZGVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5faGVhcnRiZWF0c0NhY2hlUHJvbWlzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgaXQncyBzdGlsbCBudWxsIG9yIHRoZSBhcnJheSBpcyBlbXB0eSwgdGhlcmUgaXMgbm8gZGF0YSB0byBzZW5kLlxyXG4gICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPT09IG51bGwgfHxcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZGF0ZSA9IGdldFVUQ0RhdGVTdHJpbmcoKTtcclxuICAgICAgICAvLyBFeHRyYWN0IGFzIG1hbnkgaGVhcnRiZWF0cyBmcm9tIHRoZSBjYWNoZSBhcyB3aWxsIGZpdCB1bmRlciB0aGUgc2l6ZSBsaW1pdC5cclxuICAgICAgICBjb25zdCB7IGhlYXJ0YmVhdHNUb1NlbmQsIHVuc2VudEVudHJpZXMgfSA9IGV4dHJhY3RIZWFydGJlYXRzRm9ySGVhZGVyKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzKTtcclxuICAgICAgICBjb25zdCBoZWFkZXJTdHJpbmcgPSBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeSh7IHZlcnNpb246IDIsIGhlYXJ0YmVhdHM6IGhlYXJ0YmVhdHNUb1NlbmQgfSkpO1xyXG4gICAgICAgIC8vIFN0b3JlIGxhc3Qgc2VudCBkYXRlIHRvIHByZXZlbnQgYW5vdGhlciBiZWluZyBsb2dnZWQvc2VudCBmb3IgdGhlIHNhbWUgZGF5LlxyXG4gICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5sYXN0U2VudEhlYXJ0YmVhdERhdGUgPSBkYXRlO1xyXG4gICAgICAgIGlmICh1bnNlbnRFbnRyaWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgLy8gU3RvcmUgYW55IHVuc2VudCBlbnRyaWVzIGlmIHRoZXkgZXhpc3QuXHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzID0gdW5zZW50RW50cmllcztcclxuICAgICAgICAgICAgLy8gVGhpcyBzZWVtcyBtb3JlIGxpa2VseSB0aGFuIGVtcHR5aW5nIHRoZSBhcnJheSAoYmVsb3cpIHRvIGxlYWQgdG8gc29tZSBvZGQgc3RhdGVcclxuICAgICAgICAgICAgLy8gc2luY2UgdGhlIGNhY2hlIGlzbid0IGVtcHR5IGFuZCB0aGlzIHdpbGwgYmUgY2FsbGVkIGFnYWluIG9uIHRoZSBuZXh0IHJlcXVlc3QsXHJcbiAgICAgICAgICAgIC8vIGFuZCBpcyBwcm9iYWJseSBzYWZlc3QgaWYgd2UgYXdhaXQgaXQuXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3N0b3JhZ2Uub3ZlcndyaXRlKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyA9IFtdO1xyXG4gICAgICAgICAgICAvLyBEbyBub3Qgd2FpdCBmb3IgdGhpcywgdG8gcmVkdWNlIGxhdGVuY3kuXHJcbiAgICAgICAgICAgIHZvaWQgdGhpcy5fc3RvcmFnZS5vdmVyd3JpdGUodGhpcy5faGVhcnRiZWF0c0NhY2hlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGhlYWRlclN0cmluZztcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXRVVENEYXRlU3RyaW5nKCkge1xyXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xyXG4gICAgLy8gUmV0dXJucyBkYXRlIGZvcm1hdCAnWVlZWS1NTS1ERCdcclxuICAgIHJldHVybiB0b2RheS50b0lTT1N0cmluZygpLnN1YnN0cmluZygwLCAxMCk7XHJcbn1cclxuZnVuY3Rpb24gZXh0cmFjdEhlYXJ0YmVhdHNGb3JIZWFkZXIoaGVhcnRiZWF0c0NhY2hlLCBtYXhTaXplID0gTUFYX0hFQURFUl9CWVRFUykge1xyXG4gICAgLy8gSGVhcnRiZWF0cyBncm91cGVkIGJ5IHVzZXIgYWdlbnQgaW4gdGhlIHN0YW5kYXJkIGZvcm1hdCB0byBiZSBzZW50IGluXHJcbiAgICAvLyB0aGUgaGVhZGVyLlxyXG4gICAgY29uc3QgaGVhcnRiZWF0c1RvU2VuZCA9IFtdO1xyXG4gICAgLy8gU2luZ2xlIGRhdGUgZm9ybWF0IGhlYXJ0YmVhdHMgdGhhdCBhcmUgbm90IHNlbnQuXHJcbiAgICBsZXQgdW5zZW50RW50cmllcyA9IGhlYXJ0YmVhdHNDYWNoZS5zbGljZSgpO1xyXG4gICAgZm9yIChjb25zdCBzaW5nbGVEYXRlSGVhcnRiZWF0IG9mIGhlYXJ0YmVhdHNDYWNoZSkge1xyXG4gICAgICAgIC8vIExvb2sgZm9yIGFuIGV4aXN0aW5nIGVudHJ5IHdpdGggdGhlIHNhbWUgdXNlciBhZ2VudC5cclxuICAgICAgICBjb25zdCBoZWFydGJlYXRFbnRyeSA9IGhlYXJ0YmVhdHNUb1NlbmQuZmluZChoYiA9PiBoYi5hZ2VudCA9PT0gc2luZ2xlRGF0ZUhlYXJ0YmVhdC5hZ2VudCk7XHJcbiAgICAgICAgaWYgKCFoZWFydGJlYXRFbnRyeSkge1xyXG4gICAgICAgICAgICAvLyBJZiBubyBlbnRyeSBmb3IgdGhpcyB1c2VyIGFnZW50IGV4aXN0cywgY3JlYXRlIG9uZS5cclxuICAgICAgICAgICAgaGVhcnRiZWF0c1RvU2VuZC5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGFnZW50OiBzaW5nbGVEYXRlSGVhcnRiZWF0LmFnZW50LFxyXG4gICAgICAgICAgICAgICAgZGF0ZXM6IFtzaW5nbGVEYXRlSGVhcnRiZWF0LmRhdGVdXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoY291bnRCeXRlcyhoZWFydGJlYXRzVG9TZW5kKSA+IG1heFNpemUpIHtcclxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBoZWFkZXIgd291bGQgZXhjZWVkIG1heCBzaXplLCByZW1vdmUgdGhlIGFkZGVkIGhlYXJ0YmVhdFxyXG4gICAgICAgICAgICAgICAgLy8gZW50cnkgYW5kIHN0b3AgYWRkaW5nIHRvIHRoZSBoZWFkZXIuXHJcbiAgICAgICAgICAgICAgICBoZWFydGJlYXRzVG9TZW5kLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGhlYXJ0YmVhdEVudHJ5LmRhdGVzLnB1c2goc2luZ2xlRGF0ZUhlYXJ0YmVhdC5kYXRlKTtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIGhlYWRlciB3b3VsZCBleGNlZWQgbWF4IHNpemUsIHJlbW92ZSB0aGUgYWRkZWQgZGF0ZVxyXG4gICAgICAgICAgICAvLyBhbmQgc3RvcCBhZGRpbmcgdG8gdGhlIGhlYWRlci5cclxuICAgICAgICAgICAgaWYgKGNvdW50Qnl0ZXMoaGVhcnRiZWF0c1RvU2VuZCkgPiBtYXhTaXplKSB7XHJcbiAgICAgICAgICAgICAgICBoZWFydGJlYXRFbnRyeS5kYXRlcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFBvcCB1bnNlbnQgZW50cnkgZnJvbSBxdWV1ZS4gKFNraXBwZWQgaWYgYWRkaW5nIHRoZSBlbnRyeSBleGNlZWRlZFxyXG4gICAgICAgIC8vIHF1b3RhIGFuZCB0aGUgbG9vcCBicmVha3MgZWFybHkuKVxyXG4gICAgICAgIHVuc2VudEVudHJpZXMgPSB1bnNlbnRFbnRyaWVzLnNsaWNlKDEpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBoZWFydGJlYXRzVG9TZW5kLFxyXG4gICAgICAgIHVuc2VudEVudHJpZXNcclxuICAgIH07XHJcbn1cclxuY2xhc3MgSGVhcnRiZWF0U3RvcmFnZUltcGwge1xyXG4gICAgY29uc3RydWN0b3IoYXBwKSB7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgdGhpcy5fY2FuVXNlSW5kZXhlZERCUHJvbWlzZSA9IHRoaXMucnVuSW5kZXhlZERCRW52aXJvbm1lbnRDaGVjaygpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgcnVuSW5kZXhlZERCRW52aXJvbm1lbnRDaGVjaygpIHtcclxuICAgICAgICBpZiAoIWlzSW5kZXhlZERCQXZhaWxhYmxlKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdHJ1ZSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWFkIGFsbCBoZWFydGJlYXRzLlxyXG4gICAgICovXHJcbiAgICBhc3luYyByZWFkKCkge1xyXG4gICAgICAgIGNvbnN0IGNhblVzZUluZGV4ZWREQiA9IGF3YWl0IHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2U7XHJcbiAgICAgICAgaWYgKCFjYW5Vc2VJbmRleGVkREIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgaGVhcnRiZWF0czogW10gfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkYkhlYXJ0YmVhdE9iamVjdCA9IGF3YWl0IHJlYWRIZWFydGJlYXRzRnJvbUluZGV4ZWREQih0aGlzLmFwcCk7XHJcbiAgICAgICAgICAgIHJldHVybiBpZGJIZWFydGJlYXRPYmplY3QgfHwgeyBoZWFydGJlYXRzOiBbXSB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIG92ZXJ3cml0ZSB0aGUgc3RvcmFnZSB3aXRoIHRoZSBwcm92aWRlZCBoZWFydGJlYXRzXHJcbiAgICBhc3luYyBvdmVyd3JpdGUoaGVhcnRiZWF0c09iamVjdCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBjb25zdCBjYW5Vc2VJbmRleGVkREIgPSBhd2FpdCB0aGlzLl9jYW5Vc2VJbmRleGVkREJQcm9taXNlO1xyXG4gICAgICAgIGlmICghY2FuVXNlSW5kZXhlZERCKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSGVhcnRiZWF0c09iamVjdCA9IGF3YWl0IHRoaXMucmVhZCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gd3JpdGVIZWFydGJlYXRzVG9JbmRleGVkREIodGhpcy5hcHAsIHtcclxuICAgICAgICAgICAgICAgIGxhc3RTZW50SGVhcnRiZWF0RGF0ZTogKF9hID0gaGVhcnRiZWF0c09iamVjdC5sYXN0U2VudEhlYXJ0YmVhdERhdGUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGV4aXN0aW5nSGVhcnRiZWF0c09iamVjdC5sYXN0U2VudEhlYXJ0YmVhdERhdGUsXHJcbiAgICAgICAgICAgICAgICBoZWFydGJlYXRzOiBoZWFydGJlYXRzT2JqZWN0LmhlYXJ0YmVhdHNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gYWRkIGhlYXJ0YmVhdHNcclxuICAgIGFzeW5jIGFkZChoZWFydGJlYXRzT2JqZWN0KSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGNhblVzZUluZGV4ZWREQiA9IGF3YWl0IHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2U7XHJcbiAgICAgICAgaWYgKCFjYW5Vc2VJbmRleGVkREIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0ID0gYXdhaXQgdGhpcy5yZWFkKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQih0aGlzLmFwcCwge1xyXG4gICAgICAgICAgICAgICAgbGFzdFNlbnRIZWFydGJlYXREYXRlOiAoX2EgPSBoZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSxcclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdHM6IFtcclxuICAgICAgICAgICAgICAgICAgICAuLi5leGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0cyxcclxuICAgICAgICAgICAgICAgICAgICAuLi5oZWFydGJlYXRzT2JqZWN0LmhlYXJ0YmVhdHNcclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBDYWxjdWxhdGUgYnl0ZXMgb2YgYSBIZWFydGJlYXRzQnlVc2VyQWdlbnQgYXJyYXkgYWZ0ZXIgYmVpbmcgd3JhcHBlZFxyXG4gKiBpbiBhIHBsYXRmb3JtIGxvZ2dpbmcgaGVhZGVyIEpTT04gb2JqZWN0LCBzdHJpbmdpZmllZCwgYW5kIGNvbnZlcnRlZFxyXG4gKiB0byBiYXNlIDY0LlxyXG4gKi9cclxuZnVuY3Rpb24gY291bnRCeXRlcyhoZWFydGJlYXRzQ2FjaGUpIHtcclxuICAgIC8vIGJhc2U2NCBoYXMgYSByZXN0cmljdGVkIHNldCBvZiBjaGFyYWN0ZXJzLCBhbGwgb2Ygd2hpY2ggc2hvdWxkIGJlIDEgYnl0ZS5cclxuICAgIHJldHVybiBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhcclxuICAgIC8vIGhlYXJ0YmVhdHNDYWNoZSB3cmFwcGVyIHByb3BlcnRpZXNcclxuICAgIEpTT04uc3RyaW5naWZ5KHsgdmVyc2lvbjogMiwgaGVhcnRiZWF0czogaGVhcnRiZWF0c0NhY2hlIH0pKS5sZW5ndGg7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJDb3JlQ29tcG9uZW50cyh2YXJpYW50KSB7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudCgncGxhdGZvcm0tbG9nZ2VyJywgY29udGFpbmVyID0+IG5ldyBQbGF0Zm9ybUxvZ2dlclNlcnZpY2VJbXBsKGNvbnRhaW5lciksIFwiUFJJVkFURVwiIC8qIFBSSVZBVEUgKi8pKTtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KCdoZWFydGJlYXQnLCBjb250YWluZXIgPT4gbmV3IEhlYXJ0YmVhdFNlcnZpY2VJbXBsKGNvbnRhaW5lciksIFwiUFJJVkFURVwiIC8qIFBSSVZBVEUgKi8pKTtcclxuICAgIC8vIFJlZ2lzdGVyIGBhcHBgIHBhY2thZ2UuXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSRvLCB2ZXJzaW9uJDEsIHZhcmlhbnQpO1xyXG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtNSwgZXNtMjAxNywgY2pzNSwgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lJG8sIHZlcnNpb24kMSwgJ2VzbTIwMTcnKTtcclxuICAgIC8vIFJlZ2lzdGVyIHBsYXRmb3JtIFNESyBpZGVudGlmaWVyIChubyB2ZXJzaW9uKS5cclxuICAgIHJlZ2lzdGVyVmVyc2lvbignZmlyZS1qcycsICcnKTtcclxufVxuXG4vKipcclxuICogRmlyZWJhc2UgQXBwXHJcbiAqXHJcbiAqIEByZW1hcmtzIFRoaXMgcGFja2FnZSBjb29yZGluYXRlcyB0aGUgY29tbXVuaWNhdGlvbiBiZXR3ZWVuIHRoZSBkaWZmZXJlbnQgRmlyZWJhc2UgY29tcG9uZW50c1xyXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cclxuICovXHJcbnJlZ2lzdGVyQ29yZUNvbXBvbmVudHMoJycpO1xuXG5leHBvcnQgeyBTREtfVkVSU0lPTiwgREVGQVVMVF9FTlRSWV9OQU1FIGFzIF9ERUZBVUxUX0VOVFJZX05BTUUsIF9hZGRDb21wb25lbnQsIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudCwgX2FwcHMsIF9jbGVhckNvbXBvbmVudHMsIF9jb21wb25lbnRzLCBfZ2V0UHJvdmlkZXIsIF9yZWdpc3RlckNvbXBvbmVudCwgX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSwgZGVsZXRlQXBwLCBnZXRBcHAsIGdldEFwcHMsIGluaXRpYWxpemVBcHAsIG9uTG9nLCByZWdpc3RlclZlcnNpb24sIHNldExvZ0xldmVsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgZ2V0QXBwLCBfZ2V0UHJvdmlkZXIsIF9yZWdpc3RlckNvbXBvbmVudCwgcmVnaXN0ZXJWZXJzaW9uIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IEVycm9yRmFjdG9yeSwgRmlyZWJhc2VFcnJvciB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IG9wZW5EQiB9IGZyb20gJ2lkYic7XG5cbmNvbnN0IG5hbWUgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zXCI7XG5jb25zdCB2ZXJzaW9uID0gXCIwLjUuMTVcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgUEVORElOR19USU1FT1VUX01TID0gMTAwMDA7XHJcbmNvbnN0IFBBQ0tBR0VfVkVSU0lPTiA9IGB3OiR7dmVyc2lvbn1gO1xyXG5jb25zdCBJTlRFUk5BTF9BVVRIX1ZFUlNJT04gPSAnRklTX3YyJztcclxuY29uc3QgSU5TVEFMTEFUSU9OU19BUElfVVJMID0gJ2h0dHBzOi8vZmlyZWJhc2VpbnN0YWxsYXRpb25zLmdvb2dsZWFwaXMuY29tL3YxJztcclxuY29uc3QgVE9LRU5fRVhQSVJBVElPTl9CVUZGRVIgPSA2MCAqIDYwICogMTAwMDsgLy8gT25lIGhvdXJcclxuY29uc3QgU0VSVklDRSA9ICdpbnN0YWxsYXRpb25zJztcclxuY29uc3QgU0VSVklDRV9OQU1FID0gJ0luc3RhbGxhdGlvbnMnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBFUlJPUl9ERVNDUklQVElPTl9NQVAgPSB7XHJcbiAgICBbXCJtaXNzaW5nLWFwcC1jb25maWctdmFsdWVzXCIgLyogTUlTU0lOR19BUFBfQ09ORklHX1ZBTFVFUyAqL106ICdNaXNzaW5nIEFwcCBjb25maWd1cmF0aW9uIHZhbHVlOiBcInskdmFsdWVOYW1lfVwiJyxcclxuICAgIFtcIm5vdC1yZWdpc3RlcmVkXCIgLyogTk9UX1JFR0lTVEVSRUQgKi9dOiAnRmlyZWJhc2UgSW5zdGFsbGF0aW9uIGlzIG5vdCByZWdpc3RlcmVkLicsXHJcbiAgICBbXCJpbnN0YWxsYXRpb24tbm90LWZvdW5kXCIgLyogSU5TVEFMTEFUSU9OX05PVF9GT1VORCAqL106ICdGaXJlYmFzZSBJbnN0YWxsYXRpb24gbm90IGZvdW5kLicsXHJcbiAgICBbXCJyZXF1ZXN0LWZhaWxlZFwiIC8qIFJFUVVFU1RfRkFJTEVEICovXTogJ3skcmVxdWVzdE5hbWV9IHJlcXVlc3QgZmFpbGVkIHdpdGggZXJyb3IgXCJ7JHNlcnZlckNvZGV9IHskc2VydmVyU3RhdHVzfTogeyRzZXJ2ZXJNZXNzYWdlfVwiJyxcclxuICAgIFtcImFwcC1vZmZsaW5lXCIgLyogQVBQX09GRkxJTkUgKi9dOiAnQ291bGQgbm90IHByb2Nlc3MgcmVxdWVzdC4gQXBwbGljYXRpb24gb2ZmbGluZS4nLFxyXG4gICAgW1wiZGVsZXRlLXBlbmRpbmctcmVnaXN0cmF0aW9uXCIgLyogREVMRVRFX1BFTkRJTkdfUkVHSVNUUkFUSU9OICovXTogXCJDYW4ndCBkZWxldGUgaW5zdGFsbGF0aW9uIHdoaWxlIHRoZXJlIGlzIGEgcGVuZGluZyByZWdpc3RyYXRpb24gcmVxdWVzdC5cIlxyXG59O1xyXG5jb25zdCBFUlJPUl9GQUNUT1JZID0gbmV3IEVycm9yRmFjdG9yeShTRVJWSUNFLCBTRVJWSUNFX05BTUUsIEVSUk9SX0RFU0NSSVBUSU9OX01BUCk7XHJcbi8qKiBSZXR1cm5zIHRydWUgaWYgZXJyb3IgaXMgYSBGaXJlYmFzZUVycm9yIHRoYXQgaXMgYmFzZWQgb24gYW4gZXJyb3IgZnJvbSB0aGUgc2VydmVyLiAqL1xyXG5mdW5jdGlvbiBpc1NlcnZlckVycm9yKGVycm9yKSB7XHJcbiAgICByZXR1cm4gKGVycm9yIGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvciAmJlxyXG4gICAgICAgIGVycm9yLmNvZGUuaW5jbHVkZXMoXCJyZXF1ZXN0LWZhaWxlZFwiIC8qIFJFUVVFU1RfRkFJTEVEICovKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0SW5zdGFsbGF0aW9uc0VuZHBvaW50KHsgcHJvamVjdElkIH0pIHtcclxuICAgIHJldHVybiBgJHtJTlNUQUxMQVRJT05TX0FQSV9VUkx9L3Byb2plY3RzLyR7cHJvamVjdElkfS9pbnN0YWxsYXRpb25zYDtcclxufVxyXG5mdW5jdGlvbiBleHRyYWN0QXV0aFRva2VuSW5mb0Zyb21SZXNwb25zZShyZXNwb25zZSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB0b2tlbjogcmVzcG9uc2UudG9rZW4sXHJcbiAgICAgICAgcmVxdWVzdFN0YXR1czogMiAvKiBDT01QTEVURUQgKi8sXHJcbiAgICAgICAgZXhwaXJlc0luOiBnZXRFeHBpcmVzSW5Gcm9tUmVzcG9uc2VFeHBpcmVzSW4ocmVzcG9uc2UuZXhwaXJlc0luKSxcclxuICAgICAgICBjcmVhdGlvblRpbWU6IERhdGUubm93KClcclxuICAgIH07XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gZ2V0RXJyb3JGcm9tUmVzcG9uc2UocmVxdWVzdE5hbWUsIHJlc3BvbnNlKSB7XHJcbiAgICBjb25zdCByZXNwb25zZUpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICBjb25zdCBlcnJvckRhdGEgPSByZXNwb25zZUpzb24uZXJyb3I7XHJcbiAgICByZXR1cm4gRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJyZXF1ZXN0LWZhaWxlZFwiIC8qIFJFUVVFU1RfRkFJTEVEICovLCB7XHJcbiAgICAgICAgcmVxdWVzdE5hbWUsXHJcbiAgICAgICAgc2VydmVyQ29kZTogZXJyb3JEYXRhLmNvZGUsXHJcbiAgICAgICAgc2VydmVyTWVzc2FnZTogZXJyb3JEYXRhLm1lc3NhZ2UsXHJcbiAgICAgICAgc2VydmVyU3RhdHVzOiBlcnJvckRhdGEuc3RhdHVzXHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBnZXRIZWFkZXJzKHsgYXBpS2V5IH0pIHtcclxuICAgIHJldHVybiBuZXcgSGVhZGVycyh7XHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAneC1nb29nLWFwaS1rZXknOiBhcGlLZXlcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGdldEhlYWRlcnNXaXRoQXV0aChhcHBDb25maWcsIHsgcmVmcmVzaFRva2VuIH0pIHtcclxuICAgIGNvbnN0IGhlYWRlcnMgPSBnZXRIZWFkZXJzKGFwcENvbmZpZyk7XHJcbiAgICBoZWFkZXJzLmFwcGVuZCgnQXV0aG9yaXphdGlvbicsIGdldEF1dGhvcml6YXRpb25IZWFkZXIocmVmcmVzaFRva2VuKSk7XHJcbiAgICByZXR1cm4gaGVhZGVycztcclxufVxyXG4vKipcclxuICogQ2FsbHMgdGhlIHBhc3NlZCBpbiBmZXRjaCB3cmFwcGVyIGFuZCByZXR1cm5zIHRoZSByZXNwb25zZS5cclxuICogSWYgdGhlIHJldHVybmVkIHJlc3BvbnNlIGhhcyBhIHN0YXR1cyBvZiA1eHgsIHJlLXJ1bnMgdGhlIGZ1bmN0aW9uIG9uY2UgYW5kXHJcbiAqIHJldHVybnMgdGhlIHJlc3BvbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmV0cnlJZlNlcnZlckVycm9yKGZuKSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmbigpO1xyXG4gICAgaWYgKHJlc3VsdC5zdGF0dXMgPj0gNTAwICYmIHJlc3VsdC5zdGF0dXMgPCA2MDApIHtcclxuICAgICAgICAvLyBJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IuIFJldHJ5IHJlcXVlc3QuXHJcbiAgICAgICAgcmV0dXJuIGZuKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmZ1bmN0aW9uIGdldEV4cGlyZXNJbkZyb21SZXNwb25zZUV4cGlyZXNJbihyZXNwb25zZUV4cGlyZXNJbikge1xyXG4gICAgLy8gVGhpcyB3b3JrcyBiZWNhdXNlIHRoZSBzZXJ2ZXIgd2lsbCBuZXZlciByZXNwb25kIHdpdGggZnJhY3Rpb25zIG9mIGEgc2Vjb25kLlxyXG4gICAgcmV0dXJuIE51bWJlcihyZXNwb25zZUV4cGlyZXNJbi5yZXBsYWNlKCdzJywgJzAwMCcpKTtcclxufVxyXG5mdW5jdGlvbiBnZXRBdXRob3JpemF0aW9uSGVhZGVyKHJlZnJlc2hUb2tlbikge1xyXG4gICAgcmV0dXJuIGAke0lOVEVSTkFMX0FVVEhfVkVSU0lPTn0gJHtyZWZyZXNoVG9rZW59YDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVJbnN0YWxsYXRpb25SZXF1ZXN0KHsgYXBwQ29uZmlnLCBoZWFydGJlYXRTZXJ2aWNlUHJvdmlkZXIgfSwgeyBmaWQgfSkge1xyXG4gICAgY29uc3QgZW5kcG9pbnQgPSBnZXRJbnN0YWxsYXRpb25zRW5kcG9pbnQoYXBwQ29uZmlnKTtcclxuICAgIGNvbnN0IGhlYWRlcnMgPSBnZXRIZWFkZXJzKGFwcENvbmZpZyk7XHJcbiAgICAvLyBJZiBoZWFydGJlYXQgc2VydmljZSBleGlzdHMsIGFkZCB0aGUgaGVhcnRiZWF0IHN0cmluZyB0byB0aGUgaGVhZGVyLlxyXG4gICAgY29uc3QgaGVhcnRiZWF0U2VydmljZSA9IGhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlci5nZXRJbW1lZGlhdGUoe1xyXG4gICAgICAgIG9wdGlvbmFsOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIGlmIChoZWFydGJlYXRTZXJ2aWNlKSB7XHJcbiAgICAgICAgY29uc3QgaGVhcnRiZWF0c0hlYWRlciA9IGF3YWl0IGhlYXJ0YmVhdFNlcnZpY2UuZ2V0SGVhcnRiZWF0c0hlYWRlcigpO1xyXG4gICAgICAgIGlmIChoZWFydGJlYXRzSGVhZGVyKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMuYXBwZW5kKCd4LWZpcmViYXNlLWNsaWVudCcsIGhlYXJ0YmVhdHNIZWFkZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGJvZHkgPSB7XHJcbiAgICAgICAgZmlkLFxyXG4gICAgICAgIGF1dGhWZXJzaW9uOiBJTlRFUk5BTF9BVVRIX1ZFUlNJT04sXHJcbiAgICAgICAgYXBwSWQ6IGFwcENvbmZpZy5hcHBJZCxcclxuICAgICAgICBzZGtWZXJzaW9uOiBQQUNLQUdFX1ZFUlNJT05cclxuICAgIH07XHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGhlYWRlcnMsXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSlcclxuICAgIH07XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJldHJ5SWZTZXJ2ZXJFcnJvcigoKSA9PiBmZXRjaChlbmRwb2ludCwgcmVxdWVzdCkpO1xyXG4gICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2VWYWx1ZSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICBjb25zdCByZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnkgPSB7XHJcbiAgICAgICAgICAgIGZpZDogcmVzcG9uc2VWYWx1ZS5maWQgfHwgZmlkLFxyXG4gICAgICAgICAgICByZWdpc3RyYXRpb25TdGF0dXM6IDIgLyogQ09NUExFVEVEICovLFxyXG4gICAgICAgICAgICByZWZyZXNoVG9rZW46IHJlc3BvbnNlVmFsdWUucmVmcmVzaFRva2VuLFxyXG4gICAgICAgICAgICBhdXRoVG9rZW46IGV4dHJhY3RBdXRoVG9rZW5JbmZvRnJvbVJlc3BvbnNlKHJlc3BvbnNlVmFsdWUuYXV0aFRva2VuKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRocm93IGF3YWl0IGdldEVycm9yRnJvbVJlc3BvbnNlKCdDcmVhdGUgSW5zdGFsbGF0aW9uJywgcmVzcG9uc2UpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIGdpdmVuIHRpbWUgcGFzc2VzLiAqL1xyXG5mdW5jdGlvbiBzbGVlcChtcykge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgIHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpO1xyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gYnVmZmVyVG9CYXNlNjRVcmxTYWZlKGFycmF5KSB7XHJcbiAgICBjb25zdCBiNjQgPSBidG9hKFN0cmluZy5mcm9tQ2hhckNvZGUoLi4uYXJyYXkpKTtcclxuICAgIHJldHVybiBiNjQucmVwbGFjZSgvXFwrL2csICctJykucmVwbGFjZSgvXFwvL2csICdfJyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgVkFMSURfRklEX1BBVFRFUk4gPSAvXltjZGVmXVtcXHctXXsyMX0kLztcclxuY29uc3QgSU5WQUxJRF9GSUQgPSAnJztcclxuLyoqXHJcbiAqIEdlbmVyYXRlcyBhIG5ldyBGSUQgdXNpbmcgcmFuZG9tIHZhbHVlcyBmcm9tIFdlYiBDcnlwdG8gQVBJLlxyXG4gKiBSZXR1cm5zIGFuIGVtcHR5IHN0cmluZyBpZiBGSUQgZ2VuZXJhdGlvbiBmYWlscyBmb3IgYW55IHJlYXNvbi5cclxuICovXHJcbmZ1bmN0aW9uIGdlbmVyYXRlRmlkKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBBIHZhbGlkIEZJRCBoYXMgZXhhY3RseSAyMiBiYXNlNjQgY2hhcmFjdGVycywgd2hpY2ggaXMgMTMyIGJpdHMsIG9yIDE2LjVcclxuICAgICAgICAvLyBieXRlcy4gb3VyIGltcGxlbWVudGF0aW9uIGdlbmVyYXRlcyBhIDE3IGJ5dGUgYXJyYXkgaW5zdGVhZC5cclxuICAgICAgICBjb25zdCBmaWRCeXRlQXJyYXkgPSBuZXcgVWludDhBcnJheSgxNyk7XHJcbiAgICAgICAgY29uc3QgY3J5cHRvID0gc2VsZi5jcnlwdG8gfHwgc2VsZi5tc0NyeXB0bztcclxuICAgICAgICBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGZpZEJ5dGVBcnJheSk7XHJcbiAgICAgICAgLy8gUmVwbGFjZSB0aGUgZmlyc3QgNCByYW5kb20gYml0cyB3aXRoIHRoZSBjb25zdGFudCBGSUQgaGVhZGVyIG9mIDBiMDExMS5cclxuICAgICAgICBmaWRCeXRlQXJyYXlbMF0gPSAwYjAxMTEwMDAwICsgKGZpZEJ5dGVBcnJheVswXSAlIDBiMDAwMTAwMDApO1xyXG4gICAgICAgIGNvbnN0IGZpZCA9IGVuY29kZShmaWRCeXRlQXJyYXkpO1xyXG4gICAgICAgIHJldHVybiBWQUxJRF9GSURfUEFUVEVSTi50ZXN0KGZpZCkgPyBmaWQgOiBJTlZBTElEX0ZJRDtcclxuICAgIH1cclxuICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgIC8vIEZJRCBnZW5lcmF0aW9uIGVycm9yZWRcclxuICAgICAgICByZXR1cm4gSU5WQUxJRF9GSUQ7XHJcbiAgICB9XHJcbn1cclxuLyoqIENvbnZlcnRzIGEgRklEIFVpbnQ4QXJyYXkgdG8gYSBiYXNlNjQgc3RyaW5nIHJlcHJlc2VudGF0aW9uLiAqL1xyXG5mdW5jdGlvbiBlbmNvZGUoZmlkQnl0ZUFycmF5KSB7XHJcbiAgICBjb25zdCBiNjRTdHJpbmcgPSBidWZmZXJUb0Jhc2U2NFVybFNhZmUoZmlkQnl0ZUFycmF5KTtcclxuICAgIC8vIFJlbW92ZSB0aGUgMjNyZCBjaGFyYWN0ZXIgdGhhdCB3YXMgYWRkZWQgYmVjYXVzZSBvZiB0aGUgZXh0cmEgNCBiaXRzIGF0IHRoZVxyXG4gICAgLy8gZW5kIG9mIG91ciAxNyBieXRlIGFycmF5LCBhbmQgdGhlICc9JyBwYWRkaW5nLlxyXG4gICAgcmV0dXJuIGI2NFN0cmluZy5zdWJzdHIoMCwgMjIpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKiBSZXR1cm5zIGEgc3RyaW5nIGtleSB0aGF0IGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHRoZSBhcHAuICovXHJcbmZ1bmN0aW9uIGdldEtleShhcHBDb25maWcpIHtcclxuICAgIHJldHVybiBgJHthcHBDb25maWcuYXBwTmFtZX0hJHthcHBDb25maWcuYXBwSWR9YDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBmaWRDaGFuZ2VDYWxsYmFja3MgPSBuZXcgTWFwKCk7XHJcbi8qKlxyXG4gKiBDYWxscyB0aGUgb25JZENoYW5nZSBjYWxsYmFja3Mgd2l0aCB0aGUgbmV3IEZJRCB2YWx1ZSwgYW5kIGJyb2FkY2FzdHMgdGhlXHJcbiAqIGNoYW5nZSB0byBvdGhlciB0YWJzLlxyXG4gKi9cclxuZnVuY3Rpb24gZmlkQ2hhbmdlZChhcHBDb25maWcsIGZpZCkge1xyXG4gICAgY29uc3Qga2V5ID0gZ2V0S2V5KGFwcENvbmZpZyk7XHJcbiAgICBjYWxsRmlkQ2hhbmdlQ2FsbGJhY2tzKGtleSwgZmlkKTtcclxuICAgIGJyb2FkY2FzdEZpZENoYW5nZShrZXksIGZpZCk7XHJcbn1cclxuZnVuY3Rpb24gYWRkQ2FsbGJhY2soYXBwQ29uZmlnLCBjYWxsYmFjaykge1xyXG4gICAgLy8gT3BlbiB0aGUgYnJvYWRjYXN0IGNoYW5uZWwgaWYgaXQncyBub3QgYWxyZWFkeSBvcGVuLFxyXG4gICAgLy8gdG8gYmUgYWJsZSB0byBsaXN0ZW4gdG8gY2hhbmdlIGV2ZW50cyBmcm9tIG90aGVyIHRhYnMuXHJcbiAgICBnZXRCcm9hZGNhc3RDaGFubmVsKCk7XHJcbiAgICBjb25zdCBrZXkgPSBnZXRLZXkoYXBwQ29uZmlnKTtcclxuICAgIGxldCBjYWxsYmFja1NldCA9IGZpZENoYW5nZUNhbGxiYWNrcy5nZXQoa2V5KTtcclxuICAgIGlmICghY2FsbGJhY2tTZXQpIHtcclxuICAgICAgICBjYWxsYmFja1NldCA9IG5ldyBTZXQoKTtcclxuICAgICAgICBmaWRDaGFuZ2VDYWxsYmFja3Muc2V0KGtleSwgY2FsbGJhY2tTZXQpO1xyXG4gICAgfVxyXG4gICAgY2FsbGJhY2tTZXQuYWRkKGNhbGxiYWNrKTtcclxufVxyXG5mdW5jdGlvbiByZW1vdmVDYWxsYmFjayhhcHBDb25maWcsIGNhbGxiYWNrKSB7XHJcbiAgICBjb25zdCBrZXkgPSBnZXRLZXkoYXBwQ29uZmlnKTtcclxuICAgIGNvbnN0IGNhbGxiYWNrU2V0ID0gZmlkQ2hhbmdlQ2FsbGJhY2tzLmdldChrZXkpO1xyXG4gICAgaWYgKCFjYWxsYmFja1NldCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNhbGxiYWNrU2V0LmRlbGV0ZShjYWxsYmFjayk7XHJcbiAgICBpZiAoY2FsbGJhY2tTZXQuc2l6ZSA9PT0gMCkge1xyXG4gICAgICAgIGZpZENoYW5nZUNhbGxiYWNrcy5kZWxldGUoa2V5KTtcclxuICAgIH1cclxuICAgIC8vIENsb3NlIGJyb2FkY2FzdCBjaGFubmVsIGlmIHRoZXJlIGFyZSBubyBtb3JlIGNhbGxiYWNrcy5cclxuICAgIGNsb3NlQnJvYWRjYXN0Q2hhbm5lbCgpO1xyXG59XHJcbmZ1bmN0aW9uIGNhbGxGaWRDaGFuZ2VDYWxsYmFja3Moa2V5LCBmaWQpIHtcclxuICAgIGNvbnN0IGNhbGxiYWNrcyA9IGZpZENoYW5nZUNhbGxiYWNrcy5nZXQoa2V5KTtcclxuICAgIGlmICghY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBjYWxsYmFja3MpIHtcclxuICAgICAgICBjYWxsYmFjayhmaWQpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGJyb2FkY2FzdEZpZENoYW5nZShrZXksIGZpZCkge1xyXG4gICAgY29uc3QgY2hhbm5lbCA9IGdldEJyb2FkY2FzdENoYW5uZWwoKTtcclxuICAgIGlmIChjaGFubmVsKSB7XHJcbiAgICAgICAgY2hhbm5lbC5wb3N0TWVzc2FnZSh7IGtleSwgZmlkIH0pO1xyXG4gICAgfVxyXG4gICAgY2xvc2VCcm9hZGNhc3RDaGFubmVsKCk7XHJcbn1cclxubGV0IGJyb2FkY2FzdENoYW5uZWwgPSBudWxsO1xyXG4vKiogT3BlbnMgYW5kIHJldHVybnMgYSBCcm9hZGNhc3RDaGFubmVsIGlmIGl0IGlzIHN1cHBvcnRlZCBieSB0aGUgYnJvd3Nlci4gKi9cclxuZnVuY3Rpb24gZ2V0QnJvYWRjYXN0Q2hhbm5lbCgpIHtcclxuICAgIGlmICghYnJvYWRjYXN0Q2hhbm5lbCAmJiAnQnJvYWRjYXN0Q2hhbm5lbCcgaW4gc2VsZikge1xyXG4gICAgICAgIGJyb2FkY2FzdENoYW5uZWwgPSBuZXcgQnJvYWRjYXN0Q2hhbm5lbCgnW0ZpcmViYXNlXSBGSUQgQ2hhbmdlJyk7XHJcbiAgICAgICAgYnJvYWRjYXN0Q2hhbm5lbC5vbm1lc3NhZ2UgPSBlID0+IHtcclxuICAgICAgICAgICAgY2FsbEZpZENoYW5nZUNhbGxiYWNrcyhlLmRhdGEua2V5LCBlLmRhdGEuZmlkKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGJyb2FkY2FzdENoYW5uZWw7XHJcbn1cclxuZnVuY3Rpb24gY2xvc2VCcm9hZGNhc3RDaGFubmVsKCkge1xyXG4gICAgaWYgKGZpZENoYW5nZUNhbGxiYWNrcy5zaXplID09PSAwICYmIGJyb2FkY2FzdENoYW5uZWwpIHtcclxuICAgICAgICBicm9hZGNhc3RDaGFubmVsLmNsb3NlKCk7XHJcbiAgICAgICAgYnJvYWRjYXN0Q2hhbm5lbCA9IG51bGw7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgREFUQUJBU0VfTkFNRSA9ICdmaXJlYmFzZS1pbnN0YWxsYXRpb25zLWRhdGFiYXNlJztcclxuY29uc3QgREFUQUJBU0VfVkVSU0lPTiA9IDE7XHJcbmNvbnN0IE9CSkVDVF9TVE9SRV9OQU1FID0gJ2ZpcmViYXNlLWluc3RhbGxhdGlvbnMtc3RvcmUnO1xyXG5sZXQgZGJQcm9taXNlID0gbnVsbDtcclxuZnVuY3Rpb24gZ2V0RGJQcm9taXNlKCkge1xyXG4gICAgaWYgKCFkYlByb21pc2UpIHtcclxuICAgICAgICBkYlByb21pc2UgPSBvcGVuREIoREFUQUJBU0VfTkFNRSwgREFUQUJBU0VfVkVSU0lPTiwge1xyXG4gICAgICAgICAgICB1cGdyYWRlOiAoZGIsIG9sZFZlcnNpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IHVzZSAnYnJlYWsnIGluIHRoaXMgc3dpdGNoIHN0YXRlbWVudCwgdGhlIGZhbGwtdGhyb3VnaFxyXG4gICAgICAgICAgICAgICAgLy8gYmVoYXZpb3IgaXMgd2hhdCB3ZSB3YW50LCBiZWNhdXNlIGlmIHRoZXJlIGFyZSBtdWx0aXBsZSB2ZXJzaW9ucyBiZXR3ZWVuXHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgb2xkIHZlcnNpb24gYW5kIHRoZSBjdXJyZW50IHZlcnNpb24sIHdlIHdhbnQgQUxMIHRoZSBtaWdyYXRpb25zXHJcbiAgICAgICAgICAgICAgICAvLyB0aGF0IGNvcnJlc3BvbmQgdG8gdGhvc2UgdmVyc2lvbnMgdG8gcnVuLCBub3Qgb25seSB0aGUgbGFzdCBvbmUuXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVmYXVsdC1jYXNlXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9sZFZlcnNpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKE9CSkVDVF9TVE9SRV9OQU1FKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRiUHJvbWlzZTtcclxufVxyXG4vKiogQXNzaWducyBvciBvdmVyd3JpdGVzIHRoZSByZWNvcmQgZm9yIHRoZSBnaXZlbiBrZXkgd2l0aCB0aGUgZ2l2ZW4gdmFsdWUuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNldChhcHBDb25maWcsIHZhbHVlKSB7XHJcbiAgICBjb25zdCBrZXkgPSBnZXRLZXkoYXBwQ29uZmlnKTtcclxuICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGJQcm9taXNlKCk7XHJcbiAgICBjb25zdCB0eCA9IGRiLnRyYW5zYWN0aW9uKE9CSkVDVF9TVE9SRV9OQU1FLCAncmVhZHdyaXRlJyk7XHJcbiAgICBjb25zdCBvYmplY3RTdG9yZSA9IHR4Lm9iamVjdFN0b3JlKE9CSkVDVF9TVE9SRV9OQU1FKTtcclxuICAgIGNvbnN0IG9sZFZhbHVlID0gKGF3YWl0IG9iamVjdFN0b3JlLmdldChrZXkpKTtcclxuICAgIGF3YWl0IG9iamVjdFN0b3JlLnB1dCh2YWx1ZSwga2V5KTtcclxuICAgIGF3YWl0IHR4LmRvbmU7XHJcbiAgICBpZiAoIW9sZFZhbHVlIHx8IG9sZFZhbHVlLmZpZCAhPT0gdmFsdWUuZmlkKSB7XHJcbiAgICAgICAgZmlkQ2hhbmdlZChhcHBDb25maWcsIHZhbHVlLmZpZCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuLyoqIFJlbW92ZXMgcmVjb3JkKHMpIGZyb20gdGhlIG9iamVjdFN0b3JlIHRoYXQgbWF0Y2ggdGhlIGdpdmVuIGtleS4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVtb3ZlKGFwcENvbmZpZykge1xyXG4gICAgY29uc3Qga2V5ID0gZ2V0S2V5KGFwcENvbmZpZyk7XHJcbiAgICBjb25zdCBkYiA9IGF3YWl0IGdldERiUHJvbWlzZSgpO1xyXG4gICAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbihPQkpFQ1RfU1RPUkVfTkFNRSwgJ3JlYWR3cml0ZScpO1xyXG4gICAgYXdhaXQgdHgub2JqZWN0U3RvcmUoT0JKRUNUX1NUT1JFX05BTUUpLmRlbGV0ZShrZXkpO1xyXG4gICAgYXdhaXQgdHguZG9uZTtcclxufVxyXG4vKipcclxuICogQXRvbWljYWxseSB1cGRhdGVzIGEgcmVjb3JkIHdpdGggdGhlIHJlc3VsdCBvZiB1cGRhdGVGbiwgd2hpY2ggZ2V0c1xyXG4gKiBjYWxsZWQgd2l0aCB0aGUgY3VycmVudCB2YWx1ZS4gSWYgbmV3VmFsdWUgaXMgdW5kZWZpbmVkLCB0aGUgcmVjb3JkIGlzXHJcbiAqIGRlbGV0ZWQgaW5zdGVhZC5cclxuICogQHJldHVybiBVcGRhdGVkIHZhbHVlXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB1cGRhdGUoYXBwQ29uZmlnLCB1cGRhdGVGbikge1xyXG4gICAgY29uc3Qga2V5ID0gZ2V0S2V5KGFwcENvbmZpZyk7XHJcbiAgICBjb25zdCBkYiA9IGF3YWl0IGdldERiUHJvbWlzZSgpO1xyXG4gICAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbihPQkpFQ1RfU1RPUkVfTkFNRSwgJ3JlYWR3cml0ZScpO1xyXG4gICAgY29uc3Qgc3RvcmUgPSB0eC5vYmplY3RTdG9yZShPQkpFQ1RfU1RPUkVfTkFNRSk7XHJcbiAgICBjb25zdCBvbGRWYWx1ZSA9IChhd2FpdCBzdG9yZS5nZXQoa2V5KSk7XHJcbiAgICBjb25zdCBuZXdWYWx1ZSA9IHVwZGF0ZUZuKG9sZFZhbHVlKTtcclxuICAgIGlmIChuZXdWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgYXdhaXQgc3RvcmUuZGVsZXRlKGtleSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBhd2FpdCBzdG9yZS5wdXQobmV3VmFsdWUsIGtleSk7XHJcbiAgICB9XHJcbiAgICBhd2FpdCB0eC5kb25lO1xyXG4gICAgaWYgKG5ld1ZhbHVlICYmICghb2xkVmFsdWUgfHwgb2xkVmFsdWUuZmlkICE9PSBuZXdWYWx1ZS5maWQpKSB7XHJcbiAgICAgICAgZmlkQ2hhbmdlZChhcHBDb25maWcsIG5ld1ZhbHVlLmZpZCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3VmFsdWU7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFVwZGF0ZXMgYW5kIHJldHVybnMgdGhlIEluc3RhbGxhdGlvbkVudHJ5IGZyb20gdGhlIGRhdGFiYXNlLlxyXG4gKiBBbHNvIHRyaWdnZXJzIGEgcmVnaXN0cmF0aW9uIHJlcXVlc3QgaWYgaXQgaXMgbmVjZXNzYXJ5IGFuZCBwb3NzaWJsZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGdldEluc3RhbGxhdGlvbkVudHJ5KGluc3RhbGxhdGlvbnMpIHtcclxuICAgIGxldCByZWdpc3RyYXRpb25Qcm9taXNlO1xyXG4gICAgY29uc3QgaW5zdGFsbGF0aW9uRW50cnkgPSBhd2FpdCB1cGRhdGUoaW5zdGFsbGF0aW9ucy5hcHBDb25maWcsIG9sZEVudHJ5ID0+IHtcclxuICAgICAgICBjb25zdCBpbnN0YWxsYXRpb25FbnRyeSA9IHVwZGF0ZU9yQ3JlYXRlSW5zdGFsbGF0aW9uRW50cnkob2xkRW50cnkpO1xyXG4gICAgICAgIGNvbnN0IGVudHJ5V2l0aFByb21pc2UgPSB0cmlnZ2VyUmVnaXN0cmF0aW9uSWZOZWNlc3NhcnkoaW5zdGFsbGF0aW9ucywgaW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgICAgIHJlZ2lzdHJhdGlvblByb21pc2UgPSBlbnRyeVdpdGhQcm9taXNlLnJlZ2lzdHJhdGlvblByb21pc2U7XHJcbiAgICAgICAgcmV0dXJuIGVudHJ5V2l0aFByb21pc2UuaW5zdGFsbGF0aW9uRW50cnk7XHJcbiAgICB9KTtcclxuICAgIGlmIChpbnN0YWxsYXRpb25FbnRyeS5maWQgPT09IElOVkFMSURfRklEKSB7XHJcbiAgICAgICAgLy8gRklEIGdlbmVyYXRpb24gZmFpbGVkLiBXYWl0aW5nIGZvciB0aGUgRklEIGZyb20gdGhlIHNlcnZlci5cclxuICAgICAgICByZXR1cm4geyBpbnN0YWxsYXRpb25FbnRyeTogYXdhaXQgcmVnaXN0cmF0aW9uUHJvbWlzZSB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBpbnN0YWxsYXRpb25FbnRyeSxcclxuICAgICAgICByZWdpc3RyYXRpb25Qcm9taXNlXHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgbmV3IEluc3RhbGxhdGlvbiBFbnRyeSBpZiBvbmUgZG9lcyBub3QgZXhpc3QuXHJcbiAqIEFsc28gY2xlYXJzIHRpbWVkIG91dCBwZW5kaW5nIHJlcXVlc3RzLlxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlT3JDcmVhdGVJbnN0YWxsYXRpb25FbnRyeShvbGRFbnRyeSkge1xyXG4gICAgY29uc3QgZW50cnkgPSBvbGRFbnRyeSB8fCB7XHJcbiAgICAgICAgZmlkOiBnZW5lcmF0ZUZpZCgpLFxyXG4gICAgICAgIHJlZ2lzdHJhdGlvblN0YXR1czogMCAvKiBOT1RfU1RBUlRFRCAqL1xyXG4gICAgfTtcclxuICAgIHJldHVybiBjbGVhclRpbWVkT3V0UmVxdWVzdChlbnRyeSk7XHJcbn1cclxuLyoqXHJcbiAqIElmIHRoZSBGaXJlYmFzZSBJbnN0YWxsYXRpb24gaXMgbm90IHJlZ2lzdGVyZWQgeWV0LCB0aGlzIHdpbGwgdHJpZ2dlciB0aGVcclxuICogcmVnaXN0cmF0aW9uIGFuZCByZXR1cm4gYW4gSW5Qcm9ncmVzc0luc3RhbGxhdGlvbkVudHJ5LlxyXG4gKlxyXG4gKiBJZiByZWdpc3RyYXRpb25Qcm9taXNlIGRvZXMgbm90IGV4aXN0LCB0aGUgaW5zdGFsbGF0aW9uRW50cnkgaXMgZ3VhcmFudGVlZFxyXG4gKiB0byBiZSByZWdpc3RlcmVkLlxyXG4gKi9cclxuZnVuY3Rpb24gdHJpZ2dlclJlZ2lzdHJhdGlvbklmTmVjZXNzYXJ5KGluc3RhbGxhdGlvbnMsIGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICBpZiAoaW5zdGFsbGF0aW9uRW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAwIC8qIE5PVF9TVEFSVEVEICovKSB7XHJcbiAgICAgICAgaWYgKCFuYXZpZ2F0b3Iub25MaW5lKSB7XHJcbiAgICAgICAgICAgIC8vIFJlZ2lzdHJhdGlvbiByZXF1aXJlZCBidXQgYXBwIGlzIG9mZmxpbmUuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlZ2lzdHJhdGlvblByb21pc2VXaXRoRXJyb3IgPSBQcm9taXNlLnJlamVjdChFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1vZmZsaW5lXCIgLyogQVBQX09GRkxJTkUgKi8pKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbGxhdGlvbkVudHJ5LFxyXG4gICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uUHJvbWlzZTogcmVnaXN0cmF0aW9uUHJvbWlzZVdpdGhFcnJvclxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUcnkgcmVnaXN0ZXJpbmcuIENoYW5nZSBzdGF0dXMgdG8gSU5fUFJPR1JFU1MuXHJcbiAgICAgICAgY29uc3QgaW5Qcm9ncmVzc0VudHJ5ID0ge1xyXG4gICAgICAgICAgICBmaWQ6IGluc3RhbGxhdGlvbkVudHJ5LmZpZCxcclxuICAgICAgICAgICAgcmVnaXN0cmF0aW9uU3RhdHVzOiAxIC8qIElOX1BST0dSRVNTICovLFxyXG4gICAgICAgICAgICByZWdpc3RyYXRpb25UaW1lOiBEYXRlLm5vdygpXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCByZWdpc3RyYXRpb25Qcm9taXNlID0gcmVnaXN0ZXJJbnN0YWxsYXRpb24oaW5zdGFsbGF0aW9ucywgaW5Qcm9ncmVzc0VudHJ5KTtcclxuICAgICAgICByZXR1cm4geyBpbnN0YWxsYXRpb25FbnRyeTogaW5Qcm9ncmVzc0VudHJ5LCByZWdpc3RyYXRpb25Qcm9taXNlIH07XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpbnN0YWxsYXRpb25FbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDEgLyogSU5fUFJPR1JFU1MgKi8pIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpbnN0YWxsYXRpb25FbnRyeSxcclxuICAgICAgICAgICAgcmVnaXN0cmF0aW9uUHJvbWlzZTogd2FpdFVudGlsRmlkUmVnaXN0cmF0aW9uKGluc3RhbGxhdGlvbnMpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB7IGluc3RhbGxhdGlvbkVudHJ5IH07XHJcbiAgICB9XHJcbn1cclxuLyoqIFRoaXMgd2lsbCBiZSBleGVjdXRlZCBvbmx5IG9uY2UgZm9yIGVhY2ggbmV3IEZpcmViYXNlIEluc3RhbGxhdGlvbi4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVnaXN0ZXJJbnN0YWxsYXRpb24oaW5zdGFsbGF0aW9ucywgaW5zdGFsbGF0aW9uRW50cnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5ID0gYXdhaXQgY3JlYXRlSW5zdGFsbGF0aW9uUmVxdWVzdChpbnN0YWxsYXRpb25zLCBpbnN0YWxsYXRpb25FbnRyeSk7XHJcbiAgICAgICAgcmV0dXJuIHNldChpbnN0YWxsYXRpb25zLmFwcENvbmZpZywgcmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgaWYgKGlzU2VydmVyRXJyb3IoZSkgJiYgZS5jdXN0b21EYXRhLnNlcnZlckNvZGUgPT09IDQwOSkge1xyXG4gICAgICAgICAgICAvLyBTZXJ2ZXIgcmV0dXJuZWQgYSBcIkZJRCBjYW4gbm90IGJlIHVzZWRcIiBlcnJvci5cclxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgYSBuZXcgSUQgbmV4dCB0aW1lLlxyXG4gICAgICAgICAgICBhd2FpdCByZW1vdmUoaW5zdGFsbGF0aW9ucy5hcHBDb25maWcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gUmVnaXN0cmF0aW9uIGZhaWxlZC4gU2V0IEZJRCBhcyBub3QgcmVnaXN0ZXJlZC5cclxuICAgICAgICAgICAgYXdhaXQgc2V0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnLCB7XHJcbiAgICAgICAgICAgICAgICBmaWQ6IGluc3RhbGxhdGlvbkVudHJ5LmZpZCxcclxuICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvblN0YXR1czogMCAvKiBOT1RfU1RBUlRFRCAqL1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH1cclxufVxyXG4vKiogQ2FsbCBpZiBGSUQgcmVnaXN0cmF0aW9uIGlzIHBlbmRpbmcgaW4gYW5vdGhlciByZXF1ZXN0LiAqL1xyXG5hc3luYyBmdW5jdGlvbiB3YWl0VW50aWxGaWRSZWdpc3RyYXRpb24oaW5zdGFsbGF0aW9ucykge1xyXG4gICAgLy8gVW5mb3J0dW5hdGVseSwgdGhlcmUgaXMgbm8gd2F5IG9mIHJlbGlhYmx5IG9ic2VydmluZyB3aGVuIGEgdmFsdWUgaW5cclxuICAgIC8vIEluZGV4ZWREQiBjaGFuZ2VzICh5ZXQsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vV0lDRy9pbmRleGVkLWRiLW9ic2VydmVycyksXHJcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIHBvbGwuXHJcbiAgICBsZXQgZW50cnkgPSBhd2FpdCB1cGRhdGVJbnN0YWxsYXRpb25SZXF1ZXN0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnKTtcclxuICAgIHdoaWxlIChlbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDEgLyogSU5fUFJPR1JFU1MgKi8pIHtcclxuICAgICAgICAvLyBjcmVhdGVJbnN0YWxsYXRpb24gcmVxdWVzdCBzdGlsbCBpbiBwcm9ncmVzcy5cclxuICAgICAgICBhd2FpdCBzbGVlcCgxMDApO1xyXG4gICAgICAgIGVudHJ5ID0gYXdhaXQgdXBkYXRlSW5zdGFsbGF0aW9uUmVxdWVzdChpbnN0YWxsYXRpb25zLmFwcENvbmZpZyk7XHJcbiAgICB9XHJcbiAgICBpZiAoZW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAwIC8qIE5PVF9TVEFSVEVEICovKSB7XHJcbiAgICAgICAgLy8gVGhlIHJlcXVlc3QgdGltZWQgb3V0IG9yIGZhaWxlZCBpbiBhIGRpZmZlcmVudCBjYWxsLiBUcnkgYWdhaW4uXHJcbiAgICAgICAgY29uc3QgeyBpbnN0YWxsYXRpb25FbnRyeSwgcmVnaXN0cmF0aW9uUHJvbWlzZSB9ID0gYXdhaXQgZ2V0SW5zdGFsbGF0aW9uRW50cnkoaW5zdGFsbGF0aW9ucyk7XHJcbiAgICAgICAgaWYgKHJlZ2lzdHJhdGlvblByb21pc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlZ2lzdHJhdGlvblByb21pc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBpZiB0aGVyZSBpcyBubyByZWdpc3RyYXRpb25Qcm9taXNlLCBlbnRyeSBpcyByZWdpc3RlcmVkLlxyXG4gICAgICAgICAgICByZXR1cm4gaW5zdGFsbGF0aW9uRW50cnk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGVudHJ5O1xyXG59XHJcbi8qKlxyXG4gKiBDYWxsZWQgb25seSBpZiB0aGVyZSBpcyBhIENyZWF0ZUluc3RhbGxhdGlvbiByZXF1ZXN0IGluIHByb2dyZXNzLlxyXG4gKlxyXG4gKiBVcGRhdGVzIHRoZSBJbnN0YWxsYXRpb25FbnRyeSBpbiB0aGUgREIgYmFzZWQgb24gdGhlIHN0YXR1cyBvZiB0aGVcclxuICogQ3JlYXRlSW5zdGFsbGF0aW9uIHJlcXVlc3QuXHJcbiAqXHJcbiAqIFJldHVybnMgdGhlIHVwZGF0ZWQgSW5zdGFsbGF0aW9uRW50cnkuXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVJbnN0YWxsYXRpb25SZXF1ZXN0KGFwcENvbmZpZykge1xyXG4gICAgcmV0dXJuIHVwZGF0ZShhcHBDb25maWcsIG9sZEVudHJ5ID0+IHtcclxuICAgICAgICBpZiAoIW9sZEVudHJ5KSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW5zdGFsbGF0aW9uLW5vdC1mb3VuZFwiIC8qIElOU1RBTExBVElPTl9OT1RfRk9VTkQgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2xlYXJUaW1lZE91dFJlcXVlc3Qob2xkRW50cnkpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gY2xlYXJUaW1lZE91dFJlcXVlc3QoZW50cnkpIHtcclxuICAgIGlmIChoYXNJbnN0YWxsYXRpb25SZXF1ZXN0VGltZWRPdXQoZW50cnkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZmlkOiBlbnRyeS5maWQsXHJcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvblN0YXR1czogMCAvKiBOT1RfU1RBUlRFRCAqL1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZW50cnk7XHJcbn1cclxuZnVuY3Rpb24gaGFzSW5zdGFsbGF0aW9uUmVxdWVzdFRpbWVkT3V0KGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICByZXR1cm4gKGluc3RhbGxhdGlvbkVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMSAvKiBJTl9QUk9HUkVTUyAqLyAmJlxyXG4gICAgICAgIGluc3RhbGxhdGlvbkVudHJ5LnJlZ2lzdHJhdGlvblRpbWUgKyBQRU5ESU5HX1RJTUVPVVRfTVMgPCBEYXRlLm5vdygpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUF1dGhUb2tlblJlcXVlc3QoeyBhcHBDb25maWcsIGhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlciB9LCBpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgY29uc3QgZW5kcG9pbnQgPSBnZXRHZW5lcmF0ZUF1dGhUb2tlbkVuZHBvaW50KGFwcENvbmZpZywgaW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgY29uc3QgaGVhZGVycyA9IGdldEhlYWRlcnNXaXRoQXV0aChhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgIC8vIElmIGhlYXJ0YmVhdCBzZXJ2aWNlIGV4aXN0cywgYWRkIHRoZSBoZWFydGJlYXQgc3RyaW5nIHRvIHRoZSBoZWFkZXIuXHJcbiAgICBjb25zdCBoZWFydGJlYXRTZXJ2aWNlID0gaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyLmdldEltbWVkaWF0ZSh7XHJcbiAgICAgICAgb3B0aW9uYWw6IHRydWVcclxuICAgIH0pO1xyXG4gICAgaWYgKGhlYXJ0YmVhdFNlcnZpY2UpIHtcclxuICAgICAgICBjb25zdCBoZWFydGJlYXRzSGVhZGVyID0gYXdhaXQgaGVhcnRiZWF0U2VydmljZS5nZXRIZWFydGJlYXRzSGVhZGVyKCk7XHJcbiAgICAgICAgaWYgKGhlYXJ0YmVhdHNIZWFkZXIpIHtcclxuICAgICAgICAgICAgaGVhZGVycy5hcHBlbmQoJ3gtZmlyZWJhc2UtY2xpZW50JywgaGVhcnRiZWF0c0hlYWRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgICBpbnN0YWxsYXRpb246IHtcclxuICAgICAgICAgICAgc2RrVmVyc2lvbjogUEFDS0FHRV9WRVJTSU9OLFxyXG4gICAgICAgICAgICBhcHBJZDogYXBwQ29uZmlnLmFwcElkXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVycyxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmV0cnlJZlNlcnZlckVycm9yKCgpID0+IGZldGNoKGVuZHBvaW50LCByZXF1ZXN0KSk7XHJcbiAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zdCByZXNwb25zZVZhbHVlID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIGNvbnN0IGNvbXBsZXRlZEF1dGhUb2tlbiA9IGV4dHJhY3RBdXRoVG9rZW5JbmZvRnJvbVJlc3BvbnNlKHJlc3BvbnNlVmFsdWUpO1xyXG4gICAgICAgIHJldHVybiBjb21wbGV0ZWRBdXRoVG9rZW47XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB0aHJvdyBhd2FpdCBnZXRFcnJvckZyb21SZXNwb25zZSgnR2VuZXJhdGUgQXV0aCBUb2tlbicsIHJlc3BvbnNlKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXRHZW5lcmF0ZUF1dGhUb2tlbkVuZHBvaW50KGFwcENvbmZpZywgeyBmaWQgfSkge1xyXG4gICAgcmV0dXJuIGAke2dldEluc3RhbGxhdGlvbnNFbmRwb2ludChhcHBDb25maWcpfS8ke2ZpZH0vYXV0aFRva2VuczpnZW5lcmF0ZWA7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgYSB2YWxpZCBhdXRoZW50aWNhdGlvbiB0b2tlbiBmb3IgdGhlIGluc3RhbGxhdGlvbi4gR2VuZXJhdGVzIGEgbmV3XHJcbiAqIHRva2VuIGlmIG9uZSBkb2Vzbid0IGV4aXN0LCBpcyBleHBpcmVkIG9yIGFib3V0IHRvIGV4cGlyZS5cclxuICpcclxuICogU2hvdWxkIG9ubHkgYmUgY2FsbGVkIGlmIHRoZSBGaXJlYmFzZSBJbnN0YWxsYXRpb24gaXMgcmVnaXN0ZXJlZC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlZnJlc2hBdXRoVG9rZW4oaW5zdGFsbGF0aW9ucywgZm9yY2VSZWZyZXNoID0gZmFsc2UpIHtcclxuICAgIGxldCB0b2tlblByb21pc2U7XHJcbiAgICBjb25zdCBlbnRyeSA9IGF3YWl0IHVwZGF0ZShpbnN0YWxsYXRpb25zLmFwcENvbmZpZywgb2xkRW50cnkgPT4ge1xyXG4gICAgICAgIGlmICghaXNFbnRyeVJlZ2lzdGVyZWQob2xkRW50cnkpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm90LXJlZ2lzdGVyZWRcIiAvKiBOT1RfUkVHSVNURVJFRCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG9sZEF1dGhUb2tlbiA9IG9sZEVudHJ5LmF1dGhUb2tlbjtcclxuICAgICAgICBpZiAoIWZvcmNlUmVmcmVzaCAmJiBpc0F1dGhUb2tlblZhbGlkKG9sZEF1dGhUb2tlbikpIHtcclxuICAgICAgICAgICAgLy8gVGhlcmUgaXMgYSB2YWxpZCB0b2tlbiBpbiB0aGUgREIuXHJcbiAgICAgICAgICAgIHJldHVybiBvbGRFbnRyeTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAob2xkQXV0aFRva2VuLnJlcXVlc3RTdGF0dXMgPT09IDEgLyogSU5fUFJPR1JFU1MgKi8pIHtcclxuICAgICAgICAgICAgLy8gVGhlcmUgYWxyZWFkeSBpcyBhIHRva2VuIHJlcXVlc3QgaW4gcHJvZ3Jlc3MuXHJcbiAgICAgICAgICAgIHRva2VuUHJvbWlzZSA9IHdhaXRVbnRpbEF1dGhUb2tlblJlcXVlc3QoaW5zdGFsbGF0aW9ucywgZm9yY2VSZWZyZXNoKTtcclxuICAgICAgICAgICAgcmV0dXJuIG9sZEVudHJ5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gTm8gdG9rZW4gb3IgdG9rZW4gZXhwaXJlZC5cclxuICAgICAgICAgICAgaWYgKCFuYXZpZ2F0b3Iub25MaW5lKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1vZmZsaW5lXCIgLyogQVBQX09GRkxJTkUgKi8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGluUHJvZ3Jlc3NFbnRyeSA9IG1ha2VBdXRoVG9rZW5SZXF1ZXN0SW5Qcm9ncmVzc0VudHJ5KG9sZEVudHJ5KTtcclxuICAgICAgICAgICAgdG9rZW5Qcm9taXNlID0gZmV0Y2hBdXRoVG9rZW5Gcm9tU2VydmVyKGluc3RhbGxhdGlvbnMsIGluUHJvZ3Jlc3NFbnRyeSk7XHJcbiAgICAgICAgICAgIHJldHVybiBpblByb2dyZXNzRW50cnk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBhdXRoVG9rZW4gPSB0b2tlblByb21pc2VcclxuICAgICAgICA/IGF3YWl0IHRva2VuUHJvbWlzZVxyXG4gICAgICAgIDogZW50cnkuYXV0aFRva2VuO1xyXG4gICAgcmV0dXJuIGF1dGhUb2tlbjtcclxufVxyXG4vKipcclxuICogQ2FsbCBvbmx5IGlmIEZJRCBpcyByZWdpc3RlcmVkIGFuZCBBdXRoIFRva2VuIHJlcXVlc3QgaXMgaW4gcHJvZ3Jlc3MuXHJcbiAqXHJcbiAqIFdhaXRzIHVudGlsIHRoZSBjdXJyZW50IHBlbmRpbmcgcmVxdWVzdCBmaW5pc2hlcy4gSWYgdGhlIHJlcXVlc3QgdGltZXMgb3V0LFxyXG4gKiB0cmllcyBvbmNlIGluIHRoaXMgdGhyZWFkIGFzIHdlbGwuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB3YWl0VW50aWxBdXRoVG9rZW5SZXF1ZXN0KGluc3RhbGxhdGlvbnMsIGZvcmNlUmVmcmVzaCkge1xyXG4gICAgLy8gVW5mb3J0dW5hdGVseSwgdGhlcmUgaXMgbm8gd2F5IG9mIHJlbGlhYmx5IG9ic2VydmluZyB3aGVuIGEgdmFsdWUgaW5cclxuICAgIC8vIEluZGV4ZWREQiBjaGFuZ2VzICh5ZXQsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vV0lDRy9pbmRleGVkLWRiLW9ic2VydmVycyksXHJcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIHBvbGwuXHJcbiAgICBsZXQgZW50cnkgPSBhd2FpdCB1cGRhdGVBdXRoVG9rZW5SZXF1ZXN0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnKTtcclxuICAgIHdoaWxlIChlbnRyeS5hdXRoVG9rZW4ucmVxdWVzdFN0YXR1cyA9PT0gMSAvKiBJTl9QUk9HUkVTUyAqLykge1xyXG4gICAgICAgIC8vIGdlbmVyYXRlQXV0aFRva2VuIHN0aWxsIGluIHByb2dyZXNzLlxyXG4gICAgICAgIGF3YWl0IHNsZWVwKDEwMCk7XHJcbiAgICAgICAgZW50cnkgPSBhd2FpdCB1cGRhdGVBdXRoVG9rZW5SZXF1ZXN0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGF1dGhUb2tlbiA9IGVudHJ5LmF1dGhUb2tlbjtcclxuICAgIGlmIChhdXRoVG9rZW4ucmVxdWVzdFN0YXR1cyA9PT0gMCAvKiBOT1RfU1RBUlRFRCAqLykge1xyXG4gICAgICAgIC8vIFRoZSByZXF1ZXN0IHRpbWVkIG91dCBvciBmYWlsZWQgaW4gYSBkaWZmZXJlbnQgY2FsbC4gVHJ5IGFnYWluLlxyXG4gICAgICAgIHJldHVybiByZWZyZXNoQXV0aFRva2VuKGluc3RhbGxhdGlvbnMsIGZvcmNlUmVmcmVzaCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gYXV0aFRva2VuO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBDYWxsZWQgb25seSBpZiB0aGVyZSBpcyBhIEdlbmVyYXRlQXV0aFRva2VuIHJlcXVlc3QgaW4gcHJvZ3Jlc3MuXHJcbiAqXHJcbiAqIFVwZGF0ZXMgdGhlIEluc3RhbGxhdGlvbkVudHJ5IGluIHRoZSBEQiBiYXNlZCBvbiB0aGUgc3RhdHVzIG9mIHRoZVxyXG4gKiBHZW5lcmF0ZUF1dGhUb2tlbiByZXF1ZXN0LlxyXG4gKlxyXG4gKiBSZXR1cm5zIHRoZSB1cGRhdGVkIEluc3RhbGxhdGlvbkVudHJ5LlxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlQXV0aFRva2VuUmVxdWVzdChhcHBDb25maWcpIHtcclxuICAgIHJldHVybiB1cGRhdGUoYXBwQ29uZmlnLCBvbGRFbnRyeSA9PiB7XHJcbiAgICAgICAgaWYgKCFpc0VudHJ5UmVnaXN0ZXJlZChvbGRFbnRyeSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJub3QtcmVnaXN0ZXJlZFwiIC8qIE5PVF9SRUdJU1RFUkVEICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgb2xkQXV0aFRva2VuID0gb2xkRW50cnkuYXV0aFRva2VuO1xyXG4gICAgICAgIGlmIChoYXNBdXRoVG9rZW5SZXF1ZXN0VGltZWRPdXQob2xkQXV0aFRva2VuKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvbGRFbnRyeSksIHsgYXV0aFRva2VuOiB7IHJlcXVlc3RTdGF0dXM6IDAgLyogTk9UX1NUQVJURUQgKi8gfSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9sZEVudHJ5O1xyXG4gICAgfSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hBdXRoVG9rZW5Gcm9tU2VydmVyKGluc3RhbGxhdGlvbnMsIGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGF1dGhUb2tlbiA9IGF3YWl0IGdlbmVyYXRlQXV0aFRva2VuUmVxdWVzdChpbnN0YWxsYXRpb25zLCBpbnN0YWxsYXRpb25FbnRyeSk7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlZEluc3RhbGxhdGlvbkVudHJ5ID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBpbnN0YWxsYXRpb25FbnRyeSksIHsgYXV0aFRva2VuIH0pO1xyXG4gICAgICAgIGF3YWl0IHNldChpbnN0YWxsYXRpb25zLmFwcENvbmZpZywgdXBkYXRlZEluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgICAgICByZXR1cm4gYXV0aFRva2VuO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAoaXNTZXJ2ZXJFcnJvcihlKSAmJlxyXG4gICAgICAgICAgICAoZS5jdXN0b21EYXRhLnNlcnZlckNvZGUgPT09IDQwMSB8fCBlLmN1c3RvbURhdGEuc2VydmVyQ29kZSA9PT0gNDA0KSkge1xyXG4gICAgICAgICAgICAvLyBTZXJ2ZXIgcmV0dXJuZWQgYSBcIkZJRCBub3QgZm91bmRcIiBvciBhIFwiSW52YWxpZCBhdXRoZW50aWNhdGlvblwiIGVycm9yLlxyXG4gICAgICAgICAgICAvLyBHZW5lcmF0ZSBhIG5ldyBJRCBuZXh0IHRpbWUuXHJcbiAgICAgICAgICAgIGF3YWl0IHJlbW92ZShpbnN0YWxsYXRpb25zLmFwcENvbmZpZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnkgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGluc3RhbGxhdGlvbkVudHJ5KSwgeyBhdXRoVG9rZW46IHsgcmVxdWVzdFN0YXR1czogMCAvKiBOT1RfU1RBUlRFRCAqLyB9IH0pO1xyXG4gICAgICAgICAgICBhd2FpdCBzZXQoaW5zdGFsbGF0aW9ucy5hcHBDb25maWcsIHVwZGF0ZWRJbnN0YWxsYXRpb25FbnRyeSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IGU7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaXNFbnRyeVJlZ2lzdGVyZWQoaW5zdGFsbGF0aW9uRW50cnkpIHtcclxuICAgIHJldHVybiAoaW5zdGFsbGF0aW9uRW50cnkgIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgIGluc3RhbGxhdGlvbkVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMiAvKiBDT01QTEVURUQgKi8pO1xyXG59XHJcbmZ1bmN0aW9uIGlzQXV0aFRva2VuVmFsaWQoYXV0aFRva2VuKSB7XHJcbiAgICByZXR1cm4gKGF1dGhUb2tlbi5yZXF1ZXN0U3RhdHVzID09PSAyIC8qIENPTVBMRVRFRCAqLyAmJlxyXG4gICAgICAgICFpc0F1dGhUb2tlbkV4cGlyZWQoYXV0aFRva2VuKSk7XHJcbn1cclxuZnVuY3Rpb24gaXNBdXRoVG9rZW5FeHBpcmVkKGF1dGhUb2tlbikge1xyXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgIHJldHVybiAobm93IDwgYXV0aFRva2VuLmNyZWF0aW9uVGltZSB8fFxyXG4gICAgICAgIGF1dGhUb2tlbi5jcmVhdGlvblRpbWUgKyBhdXRoVG9rZW4uZXhwaXJlc0luIDwgbm93ICsgVE9LRU5fRVhQSVJBVElPTl9CVUZGRVIpO1xyXG59XHJcbi8qKiBSZXR1cm5zIGFuIHVwZGF0ZWQgSW5zdGFsbGF0aW9uRW50cnkgd2l0aCBhbiBJblByb2dyZXNzQXV0aFRva2VuLiAqL1xyXG5mdW5jdGlvbiBtYWtlQXV0aFRva2VuUmVxdWVzdEluUHJvZ3Jlc3NFbnRyeShvbGRFbnRyeSkge1xyXG4gICAgY29uc3QgaW5Qcm9ncmVzc0F1dGhUb2tlbiA9IHtcclxuICAgICAgICByZXF1ZXN0U3RhdHVzOiAxIC8qIElOX1BST0dSRVNTICovLFxyXG4gICAgICAgIHJlcXVlc3RUaW1lOiBEYXRlLm5vdygpXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgb2xkRW50cnkpLCB7IGF1dGhUb2tlbjogaW5Qcm9ncmVzc0F1dGhUb2tlbiB9KTtcclxufVxyXG5mdW5jdGlvbiBoYXNBdXRoVG9rZW5SZXF1ZXN0VGltZWRPdXQoYXV0aFRva2VuKSB7XHJcbiAgICByZXR1cm4gKGF1dGhUb2tlbi5yZXF1ZXN0U3RhdHVzID09PSAxIC8qIElOX1BST0dSRVNTICovICYmXHJcbiAgICAgICAgYXV0aFRva2VuLnJlcXVlc3RUaW1lICsgUEVORElOR19USU1FT1VUX01TIDwgRGF0ZS5ub3coKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBGaXJlYmFzZSBJbnN0YWxsYXRpb24gaWYgdGhlcmUgaXNuJ3Qgb25lIGZvciB0aGUgYXBwIGFuZFxyXG4gKiByZXR1cm5zIHRoZSBJbnN0YWxsYXRpb24gSUQuXHJcbiAqIEBwYXJhbSBpbnN0YWxsYXRpb25zIC0gVGhlIGBJbnN0YWxsYXRpb25zYCBpbnN0YW5jZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0SWQoaW5zdGFsbGF0aW9ucykge1xyXG4gICAgY29uc3QgaW5zdGFsbGF0aW9uc0ltcGwgPSBpbnN0YWxsYXRpb25zO1xyXG4gICAgY29uc3QgeyBpbnN0YWxsYXRpb25FbnRyeSwgcmVnaXN0cmF0aW9uUHJvbWlzZSB9ID0gYXdhaXQgZ2V0SW5zdGFsbGF0aW9uRW50cnkoaW5zdGFsbGF0aW9uc0ltcGwpO1xyXG4gICAgaWYgKHJlZ2lzdHJhdGlvblByb21pc2UpIHtcclxuICAgICAgICByZWdpc3RyYXRpb25Qcm9taXNlLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gSWYgdGhlIGluc3RhbGxhdGlvbiBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQsIHVwZGF0ZSB0aGUgYXV0aGVudGljYXRpb25cclxuICAgICAgICAvLyB0b2tlbiBpZiBuZWVkZWQuXHJcbiAgICAgICAgcmVmcmVzaEF1dGhUb2tlbihpbnN0YWxsYXRpb25zSW1wbCkuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaW5zdGFsbGF0aW9uRW50cnkuZmlkO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgRmlyZWJhc2UgSW5zdGFsbGF0aW9ucyBhdXRoIHRva2VuLCBpZGVudGlmeWluZyB0aGUgY3VycmVudFxyXG4gKiBGaXJlYmFzZSBJbnN0YWxsYXRpb24uXHJcbiAqIEBwYXJhbSBpbnN0YWxsYXRpb25zIC0gVGhlIGBJbnN0YWxsYXRpb25zYCBpbnN0YW5jZS5cclxuICogQHBhcmFtIGZvcmNlUmVmcmVzaCAtIEZvcmNlIHJlZnJlc2ggcmVnYXJkbGVzcyBvZiB0b2tlbiBleHBpcmF0aW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBnZXRUb2tlbihpbnN0YWxsYXRpb25zLCBmb3JjZVJlZnJlc2ggPSBmYWxzZSkge1xyXG4gICAgY29uc3QgaW5zdGFsbGF0aW9uc0ltcGwgPSBpbnN0YWxsYXRpb25zO1xyXG4gICAgYXdhaXQgY29tcGxldGVJbnN0YWxsYXRpb25SZWdpc3RyYXRpb24oaW5zdGFsbGF0aW9uc0ltcGwpO1xyXG4gICAgLy8gQXQgdGhpcyBwb2ludCB3ZSBlaXRoZXIgaGF2ZSBhIFJlZ2lzdGVyZWQgSW5zdGFsbGF0aW9uIGluIHRoZSBEQiwgb3Igd2UndmVcclxuICAgIC8vIGFscmVhZHkgdGhyb3duIGFuIGVycm9yLlxyXG4gICAgY29uc3QgYXV0aFRva2VuID0gYXdhaXQgcmVmcmVzaEF1dGhUb2tlbihpbnN0YWxsYXRpb25zSW1wbCwgZm9yY2VSZWZyZXNoKTtcclxuICAgIHJldHVybiBhdXRoVG9rZW4udG9rZW47XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gY29tcGxldGVJbnN0YWxsYXRpb25SZWdpc3RyYXRpb24oaW5zdGFsbGF0aW9ucykge1xyXG4gICAgY29uc3QgeyByZWdpc3RyYXRpb25Qcm9taXNlIH0gPSBhd2FpdCBnZXRJbnN0YWxsYXRpb25FbnRyeShpbnN0YWxsYXRpb25zKTtcclxuICAgIGlmIChyZWdpc3RyYXRpb25Qcm9taXNlKSB7XHJcbiAgICAgICAgLy8gQSBjcmVhdGVJbnN0YWxsYXRpb24gcmVxdWVzdCBpcyBpbiBwcm9ncmVzcy4gV2FpdCB1bnRpbCBpdCBmaW5pc2hlcy5cclxuICAgICAgICBhd2FpdCByZWdpc3RyYXRpb25Qcm9taXNlO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUluc3RhbGxhdGlvblJlcXVlc3QoYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgY29uc3QgZW5kcG9pbnQgPSBnZXREZWxldGVFbmRwb2ludChhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgIGNvbnN0IGhlYWRlcnMgPSBnZXRIZWFkZXJzV2l0aEF1dGgoYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSk7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgaGVhZGVyc1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmV0cnlJZlNlcnZlckVycm9yKCgpID0+IGZldGNoKGVuZHBvaW50LCByZXF1ZXN0KSk7XHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgdGhyb3cgYXdhaXQgZ2V0RXJyb3JGcm9tUmVzcG9uc2UoJ0RlbGV0ZSBJbnN0YWxsYXRpb24nLCByZXNwb25zZSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZ2V0RGVsZXRlRW5kcG9pbnQoYXBwQ29uZmlnLCB7IGZpZCB9KSB7XHJcbiAgICByZXR1cm4gYCR7Z2V0SW5zdGFsbGF0aW9uc0VuZHBvaW50KGFwcENvbmZpZyl9LyR7ZmlkfWA7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERlbGV0ZXMgdGhlIEZpcmViYXNlIEluc3RhbGxhdGlvbiBhbmQgYWxsIGFzc29jaWF0ZWQgZGF0YS5cclxuICogQHBhcmFtIGluc3RhbGxhdGlvbnMgLSBUaGUgYEluc3RhbGxhdGlvbnNgIGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVJbnN0YWxsYXRpb25zKGluc3RhbGxhdGlvbnMpIHtcclxuICAgIGNvbnN0IHsgYXBwQ29uZmlnIH0gPSBpbnN0YWxsYXRpb25zO1xyXG4gICAgY29uc3QgZW50cnkgPSBhd2FpdCB1cGRhdGUoYXBwQ29uZmlnLCBvbGRFbnRyeSA9PiB7XHJcbiAgICAgICAgaWYgKG9sZEVudHJ5ICYmIG9sZEVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMCAvKiBOT1RfU1RBUlRFRCAqLykge1xyXG4gICAgICAgICAgICAvLyBEZWxldGUgdGhlIHVucmVnaXN0ZXJlZCBlbnRyeSB3aXRob3V0IHNlbmRpbmcgYSBkZWxldGVJbnN0YWxsYXRpb24gcmVxdWVzdC5cclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9sZEVudHJ5O1xyXG4gICAgfSk7XHJcbiAgICBpZiAoZW50cnkpIHtcclxuICAgICAgICBpZiAoZW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAxIC8qIElOX1BST0dSRVNTICovKSB7XHJcbiAgICAgICAgICAgIC8vIENhbid0IGRlbGV0ZSB3aGlsZSB0cnlpbmcgdG8gcmVnaXN0ZXIuXHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiZGVsZXRlLXBlbmRpbmctcmVnaXN0cmF0aW9uXCIgLyogREVMRVRFX1BFTkRJTkdfUkVHSVNUUkFUSU9OICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAyIC8qIENPTVBMRVRFRCAqLykge1xyXG4gICAgICAgICAgICBpZiAoIW5hdmlnYXRvci5vbkxpbmUpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYXBwLW9mZmxpbmVcIiAvKiBBUFBfT0ZGTElORSAqLyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBkZWxldGVJbnN0YWxsYXRpb25SZXF1ZXN0KGFwcENvbmZpZywgZW50cnkpO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcmVtb3ZlKGFwcENvbmZpZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFNldHMgYSBuZXcgY2FsbGJhY2sgdGhhdCB3aWxsIGdldCBjYWxsZWQgd2hlbiBJbnN0YWxsYXRpb24gSUQgY2hhbmdlcy5cclxuICogUmV0dXJucyBhbiB1bnN1YnNjcmliZSBmdW5jdGlvbiB0aGF0IHdpbGwgcmVtb3ZlIHRoZSBjYWxsYmFjayB3aGVuIGNhbGxlZC5cclxuICogQHBhcmFtIGluc3RhbGxhdGlvbnMgLSBUaGUgYEluc3RhbGxhdGlvbnNgIGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gY2FsbGJhY2sgLSBUaGUgY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCBpcyBpbnZva2VkIHdoZW4gRklEIGNoYW5nZXMuXHJcbiAqIEByZXR1cm5zIEEgZnVuY3Rpb24gdGhhdCBjYW4gYmUgY2FsbGVkIHRvIHVuc3Vic2NyaWJlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBvbklkQ2hhbmdlKGluc3RhbGxhdGlvbnMsIGNhbGxiYWNrKSB7XHJcbiAgICBjb25zdCB7IGFwcENvbmZpZyB9ID0gaW5zdGFsbGF0aW9ucztcclxuICAgIGFkZENhbGxiYWNrKGFwcENvbmZpZywgY2FsbGJhY2spO1xyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICByZW1vdmVDYWxsYmFjayhhcHBDb25maWcsIGNhbGxiYWNrKTtcclxuICAgIH07XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgYW4gaW5zdGFuY2Ugb2Yge0BsaW5rIEluc3RhbGxhdGlvbnN9IGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW5cclxuICoge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gYXBwIC0gVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSBpbnN0YW5jZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0SW5zdGFsbGF0aW9ucyhhcHAgPSBnZXRBcHAoKSkge1xyXG4gICAgY29uc3QgaW5zdGFsbGF0aW9uc0ltcGwgPSBfZ2V0UHJvdmlkZXIoYXBwLCAnaW5zdGFsbGF0aW9ucycpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgcmV0dXJuIGluc3RhbGxhdGlvbnNJbXBsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGV4dHJhY3RBcHBDb25maWcoYXBwKSB7XHJcbiAgICBpZiAoIWFwcCB8fCAhYXBwLm9wdGlvbnMpIHtcclxuICAgICAgICB0aHJvdyBnZXRNaXNzaW5nVmFsdWVFcnJvcignQXBwIENvbmZpZ3VyYXRpb24nKTtcclxuICAgIH1cclxuICAgIGlmICghYXBwLm5hbWUpIHtcclxuICAgICAgICB0aHJvdyBnZXRNaXNzaW5nVmFsdWVFcnJvcignQXBwIE5hbWUnKTtcclxuICAgIH1cclxuICAgIC8vIFJlcXVpcmVkIGFwcCBjb25maWcga2V5c1xyXG4gICAgY29uc3QgY29uZmlnS2V5cyA9IFtcclxuICAgICAgICAncHJvamVjdElkJyxcclxuICAgICAgICAnYXBpS2V5JyxcclxuICAgICAgICAnYXBwSWQnXHJcbiAgICBdO1xyXG4gICAgZm9yIChjb25zdCBrZXlOYW1lIG9mIGNvbmZpZ0tleXMpIHtcclxuICAgICAgICBpZiAoIWFwcC5vcHRpb25zW2tleU5hbWVdKSB7XHJcbiAgICAgICAgICAgIHRocm93IGdldE1pc3NpbmdWYWx1ZUVycm9yKGtleU5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgYXBwTmFtZTogYXBwLm5hbWUsXHJcbiAgICAgICAgcHJvamVjdElkOiBhcHAub3B0aW9ucy5wcm9qZWN0SWQsXHJcbiAgICAgICAgYXBpS2V5OiBhcHAub3B0aW9ucy5hcGlLZXksXHJcbiAgICAgICAgYXBwSWQ6IGFwcC5vcHRpb25zLmFwcElkXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGdldE1pc3NpbmdWYWx1ZUVycm9yKHZhbHVlTmFtZSkge1xyXG4gICAgcmV0dXJuIEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibWlzc2luZy1hcHAtY29uZmlnLXZhbHVlc1wiIC8qIE1JU1NJTkdfQVBQX0NPTkZJR19WQUxVRVMgKi8sIHtcclxuICAgICAgICB2YWx1ZU5hbWVcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IElOU1RBTExBVElPTlNfTkFNRSA9ICdpbnN0YWxsYXRpb25zJztcclxuY29uc3QgSU5TVEFMTEFUSU9OU19OQU1FX0lOVEVSTkFMID0gJ2luc3RhbGxhdGlvbnMtaW50ZXJuYWwnO1xyXG5jb25zdCBwdWJsaWNGYWN0b3J5ID0gKGNvbnRhaW5lcikgPT4ge1xyXG4gICAgY29uc3QgYXBwID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgIC8vIFRocm93cyBpZiBhcHAgaXNuJ3QgY29uZmlndXJlZCBwcm9wZXJseS5cclxuICAgIGNvbnN0IGFwcENvbmZpZyA9IGV4dHJhY3RBcHBDb25maWcoYXBwKTtcclxuICAgIGNvbnN0IGhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlciA9IF9nZXRQcm92aWRlcihhcHAsICdoZWFydGJlYXQnKTtcclxuICAgIGNvbnN0IGluc3RhbGxhdGlvbnNJbXBsID0ge1xyXG4gICAgICAgIGFwcCxcclxuICAgICAgICBhcHBDb25maWcsXHJcbiAgICAgICAgaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyLFxyXG4gICAgICAgIF9kZWxldGU6ICgpID0+IFByb21pc2UucmVzb2x2ZSgpXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGluc3RhbGxhdGlvbnNJbXBsO1xyXG59O1xyXG5jb25zdCBpbnRlcm5hbEZhY3RvcnkgPSAoY29udGFpbmVyKSA9PiB7XHJcbiAgICBjb25zdCBhcHAgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgLy8gSW50ZXJuYWwgRklTIGluc3RhbmNlIHJlbGllcyBvbiBwdWJsaWMgRklTIGluc3RhbmNlLlxyXG4gICAgY29uc3QgaW5zdGFsbGF0aW9ucyA9IF9nZXRQcm92aWRlcihhcHAsIElOU1RBTExBVElPTlNfTkFNRSkuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICBjb25zdCBpbnN0YWxsYXRpb25zSW50ZXJuYWwgPSB7XHJcbiAgICAgICAgZ2V0SWQ6ICgpID0+IGdldElkKGluc3RhbGxhdGlvbnMpLFxyXG4gICAgICAgIGdldFRva2VuOiAoZm9yY2VSZWZyZXNoKSA9PiBnZXRUb2tlbihpbnN0YWxsYXRpb25zLCBmb3JjZVJlZnJlc2gpXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGluc3RhbGxhdGlvbnNJbnRlcm5hbDtcclxufTtcclxuZnVuY3Rpb24gcmVnaXN0ZXJJbnN0YWxsYXRpb25zKCkge1xyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoSU5TVEFMTEFUSU9OU19OQU1FLCBwdWJsaWNGYWN0b3J5LCBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqLykpO1xyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoSU5TVEFMTEFUSU9OU19OQU1FX0lOVEVSTkFMLCBpbnRlcm5hbEZhY3RvcnksIFwiUFJJVkFURVwiIC8qIFBSSVZBVEUgKi8pKTtcclxufVxuXG4vKipcclxuICogRmlyZWJhc2UgSW5zdGFsbGF0aW9uc1xyXG4gKlxyXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cclxuICovXHJcbnJlZ2lzdGVySW5zdGFsbGF0aW9ucygpO1xyXG5yZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbik7XHJcbi8vIEJVSUxEX1RBUkdFVCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHZhbHVlcyBsaWtlIGVzbTUsIGVzbTIwMTcsIGNqczUsIGV0YyBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uXHJcbnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCAnZXNtMjAxNycpO1xuXG5leHBvcnQgeyBkZWxldGVJbnN0YWxsYXRpb25zLCBnZXRJZCwgZ2V0SW5zdGFsbGF0aW9ucywgZ2V0VG9rZW4sIG9uSWRDaGFuZ2UgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyBnZXRBcHAsIF9nZXRQcm92aWRlciwgX3JlZ2lzdGVyQ29tcG9uZW50LCByZWdpc3RlclZlcnNpb24gfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJ0BmaXJlYmFzZS9sb2dnZXInO1xuaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCBjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzLCBGaXJlYmFzZUVycm9yLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSwgaXNCcm93c2VyRXh0ZW5zaW9uLCBhcmVDb29raWVzRW5hYmxlZCwgZ2V0TW9kdWxhckluc3RhbmNlLCBkZWVwRXF1YWwgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCAnQGZpcmViYXNlL2luc3RhbGxhdGlvbnMnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVHlwZSBjb25zdGFudCBmb3IgRmlyZWJhc2UgQW5hbHl0aWNzLlxyXG4gKi9cclxuY29uc3QgQU5BTFlUSUNTX1RZUEUgPSAnYW5hbHl0aWNzJztcclxuLy8gS2V5IHRvIGF0dGFjaCBGSUQgdG8gaW4gZ3RhZyBwYXJhbXMuXHJcbmNvbnN0IEdBX0ZJRF9LRVkgPSAnZmlyZWJhc2VfaWQnO1xyXG5jb25zdCBPUklHSU5fS0VZID0gJ29yaWdpbic7XHJcbmNvbnN0IEZFVENIX1RJTUVPVVRfTUlMTElTID0gNjAgKiAxMDAwO1xyXG5jb25zdCBEWU5BTUlDX0NPTkZJR19VUkwgPSAnaHR0cHM6Ly9maXJlYmFzZS5nb29nbGVhcGlzLmNvbS92MWFscGhhL3Byb2plY3RzLy0vYXBwcy97YXBwLWlkfS93ZWJDb25maWcnO1xyXG5jb25zdCBHVEFHX1VSTCA9ICdodHRwczovL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbS9ndGFnL2pzJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcignQGZpcmViYXNlL2FuYWx5dGljcycpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogTWFrZXNoaWZ0IHBvbHlmaWxsIGZvciBQcm9taXNlLmFsbFNldHRsZWQoKS4gUmVzb2x2ZXMgd2hlbiBhbGwgcHJvbWlzZXNcclxuICogaGF2ZSBlaXRoZXIgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSBwcm9taXNlcyBBcnJheSBvZiBwcm9taXNlcyB0byB3YWl0IGZvci5cclxuICovXHJcbmZ1bmN0aW9uIHByb21pc2VBbGxTZXR0bGVkKHByb21pc2VzKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMubWFwKHByb21pc2UgPT4gcHJvbWlzZS5jYXRjaChlID0+IGUpKSk7XHJcbn1cclxuLyoqXHJcbiAqIEluc2VydHMgZ3RhZyBzY3JpcHQgdGFnIGludG8gdGhlIHBhZ2UgdG8gYXN5bmNocm9ub3VzbHkgZG93bmxvYWQgZ3RhZy5cclxuICogQHBhcmFtIGRhdGFMYXllck5hbWUgTmFtZSBvZiBkYXRhbGF5ZXIgKG1vc3Qgb2Z0ZW4gdGhlIGRlZmF1bHQsIFwiX2RhdGFMYXllclwiKS5cclxuICovXHJcbmZ1bmN0aW9uIGluc2VydFNjcmlwdFRhZyhkYXRhTGF5ZXJOYW1lLCBtZWFzdXJlbWVudElkKSB7XHJcbiAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgIC8vIFdlIGFyZSBub3QgcHJvdmlkaW5nIGFuIGFuYWx5dGljc0lkIGluIHRoZSBVUkwgYmVjYXVzZSBpdCB3b3VsZCB0cmlnZ2VyIGEgYHBhZ2Vfdmlld2BcclxuICAgIC8vIHdpdGhvdXQgZmlkLiBXZSB3aWxsIGluaXRpYWxpemUgZ2EtaWQgdXNpbmcgZ3RhZyAoY29uZmlnKSBjb21tYW5kIHRvZ2V0aGVyIHdpdGggZmlkLlxyXG4gICAgc2NyaXB0LnNyYyA9IGAke0dUQUdfVVJMfT9sPSR7ZGF0YUxheWVyTmFtZX0maWQ9JHttZWFzdXJlbWVudElkfWA7XHJcbiAgICBzY3JpcHQuYXN5bmMgPSB0cnVlO1xyXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xyXG59XHJcbi8qKlxyXG4gKiBHZXQgcmVmZXJlbmNlIHRvLCBvciBjcmVhdGUsIGdsb2JhbCBkYXRhbGF5ZXIuXHJcbiAqIEBwYXJhbSBkYXRhTGF5ZXJOYW1lIE5hbWUgb2YgZGF0YWxheWVyIChtb3N0IG9mdGVuIHRoZSBkZWZhdWx0LCBcIl9kYXRhTGF5ZXJcIikuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRPckNyZWF0ZURhdGFMYXllcihkYXRhTGF5ZXJOYW1lKSB7XHJcbiAgICAvLyBDaGVjayBmb3IgZXhpc3RpbmcgZGF0YUxheWVyIGFuZCBjcmVhdGUgaWYgbmVlZGVkLlxyXG4gICAgbGV0IGRhdGFMYXllciA9IFtdO1xyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkod2luZG93W2RhdGFMYXllck5hbWVdKSkge1xyXG4gICAgICAgIGRhdGFMYXllciA9IHdpbmRvd1tkYXRhTGF5ZXJOYW1lXTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHdpbmRvd1tkYXRhTGF5ZXJOYW1lXSA9IGRhdGFMYXllcjtcclxuICAgIH1cclxuICAgIHJldHVybiBkYXRhTGF5ZXI7XHJcbn1cclxuLyoqXHJcbiAqIFdyYXBwZWQgZ3RhZyBsb2dpYyB3aGVuIGd0YWcgaXMgY2FsbGVkIHdpdGggJ2NvbmZpZycgY29tbWFuZC5cclxuICpcclxuICogQHBhcmFtIGd0YWdDb3JlIEJhc2ljIGd0YWcgZnVuY3Rpb24gdGhhdCBqdXN0IGFwcGVuZHMgdG8gZGF0YUxheWVyLlxyXG4gKiBAcGFyYW0gaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCBNYXAgb2YgYXBwSWRzIHRvIHRoZWlyIGluaXRpYWxpemF0aW9uIHByb21pc2VzLlxyXG4gKiBAcGFyYW0gZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCBBcnJheSBvZiBkeW5hbWljIGNvbmZpZyBmZXRjaCBwcm9taXNlcy5cclxuICogQHBhcmFtIG1lYXN1cmVtZW50SWRUb0FwcElkIE1hcCBvZiBHQSBtZWFzdXJlbWVudElEcyB0byBjb3JyZXNwb25kaW5nIEZpcmViYXNlIGFwcElkLlxyXG4gKiBAcGFyYW0gbWVhc3VyZW1lbnRJZCBHQSBNZWFzdXJlbWVudCBJRCB0byBzZXQgY29uZmlnIGZvci5cclxuICogQHBhcmFtIGd0YWdQYXJhbXMgR3RhZyBjb25maWcgcGFyYW1zIHRvIHNldC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGd0YWdPbkNvbmZpZyhndGFnQ29yZSwgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCwgZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCwgbWVhc3VyZW1lbnRJZFRvQXBwSWQsIG1lYXN1cmVtZW50SWQsIGd0YWdQYXJhbXMpIHtcclxuICAgIC8vIElmIGNvbmZpZyBpcyBhbHJlYWR5IGZldGNoZWQsIHdlIGtub3cgdGhlIGFwcElkIGFuZCBjYW4gdXNlIGl0IHRvIGxvb2sgdXAgd2hhdCBGSUQgcHJvbWlzZSB3ZVxyXG4gICAgLy8vIGFyZSB3YWl0aW5nIGZvciwgYW5kIHdhaXQgb25seSBvbiB0aGF0IG9uZS5cclxuICAgIGNvbnN0IGNvcnJlc3BvbmRpbmdBcHBJZCA9IG1lYXN1cmVtZW50SWRUb0FwcElkW21lYXN1cmVtZW50SWRdO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBpZiAoY29ycmVzcG9uZGluZ0FwcElkKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbY29ycmVzcG9uZGluZ0FwcElkXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIElmIGNvbmZpZyBpcyBub3QgZmV0Y2hlZCB5ZXQsIHdhaXQgZm9yIGFsbCBjb25maWdzICh3ZSBkb24ndCBrbm93IHdoaWNoIG9uZSB3ZSBuZWVkKSBhbmRcclxuICAgICAgICAgICAgLy8gZmluZCB0aGUgYXBwSWQgKGlmIGFueSkgY29ycmVzcG9uZGluZyB0byB0aGlzIG1lYXN1cmVtZW50SWQuIElmIHRoZXJlIGlzIG9uZSwgd2FpdCBvblxyXG4gICAgICAgICAgICAvLyB0aGF0IGFwcElkJ3MgaW5pdGlhbGl6YXRpb24gcHJvbWlzZS4gSWYgdGhlcmUgaXMgbm9uZSwgcHJvbWlzZSByZXNvbHZlcyBhbmQgZ3RhZ1xyXG4gICAgICAgICAgICAvLyBjYWxsIGdvZXMgdGhyb3VnaC5cclxuICAgICAgICAgICAgY29uc3QgZHluYW1pY0NvbmZpZ1Jlc3VsdHMgPSBhd2FpdCBwcm9taXNlQWxsU2V0dGxlZChkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0KTtcclxuICAgICAgICAgICAgY29uc3QgZm91bmRDb25maWcgPSBkeW5hbWljQ29uZmlnUmVzdWx0cy5maW5kKGNvbmZpZyA9PiBjb25maWcubWVhc3VyZW1lbnRJZCA9PT0gbWVhc3VyZW1lbnRJZCk7XHJcbiAgICAgICAgICAgIGlmIChmb3VuZENvbmZpZykge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcFtmb3VuZENvbmZpZy5hcHBJZF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGxvZ2dlci5lcnJvcihlKTtcclxuICAgIH1cclxuICAgIGd0YWdDb3JlKFwiY29uZmlnXCIgLyogQ09ORklHICovLCBtZWFzdXJlbWVudElkLCBndGFnUGFyYW1zKTtcclxufVxyXG4vKipcclxuICogV3JhcHBlZCBndGFnIGxvZ2ljIHdoZW4gZ3RhZyBpcyBjYWxsZWQgd2l0aCAnZXZlbnQnIGNvbW1hbmQuXHJcbiAqXHJcbiAqIEBwYXJhbSBndGFnQ29yZSBCYXNpYyBndGFnIGZ1bmN0aW9uIHRoYXQganVzdCBhcHBlbmRzIHRvIGRhdGFMYXllci5cclxuICogQHBhcmFtIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXAgTWFwIG9mIGFwcElkcyB0byB0aGVpciBpbml0aWFsaXphdGlvbiBwcm9taXNlcy5cclxuICogQHBhcmFtIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QgQXJyYXkgb2YgZHluYW1pYyBjb25maWcgZmV0Y2ggcHJvbWlzZXMuXHJcbiAqIEBwYXJhbSBtZWFzdXJlbWVudElkIEdBIE1lYXN1cmVtZW50IElEIHRvIGxvZyBldmVudCB0by5cclxuICogQHBhcmFtIGd0YWdQYXJhbXMgUGFyYW1zIHRvIGxvZyB3aXRoIHRoaXMgZXZlbnQuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBndGFnT25FdmVudChndGFnQ29yZSwgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCwgZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCwgbWVhc3VyZW1lbnRJZCwgZ3RhZ1BhcmFtcykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBsZXQgaW5pdGlhbGl6YXRpb25Qcm9taXNlc1RvV2FpdEZvciA9IFtdO1xyXG4gICAgICAgIC8vIElmIHRoZXJlJ3MgYSAnc2VuZF90bycgcGFyYW0sIGNoZWNrIGlmIGFueSBJRCBzcGVjaWZpZWQgbWF0Y2hlc1xyXG4gICAgICAgIC8vIGFuIGluaXRpYWxpemVJZHMoKSBwcm9taXNlIHdlIGFyZSB3YWl0aW5nIGZvci5cclxuICAgICAgICBpZiAoZ3RhZ1BhcmFtcyAmJiBndGFnUGFyYW1zWydzZW5kX3RvJ10pIHtcclxuICAgICAgICAgICAgbGV0IGdhU2VuZFRvTGlzdCA9IGd0YWdQYXJhbXNbJ3NlbmRfdG8nXTtcclxuICAgICAgICAgICAgLy8gTWFrZSBpdCBhbiBhcnJheSBpZiBpcyBpc24ndCwgc28gaXQgY2FuIGJlIGRlYWx0IHdpdGggdGhlIHNhbWUgd2F5LlxyXG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZ2FTZW5kVG9MaXN0KSkge1xyXG4gICAgICAgICAgICAgICAgZ2FTZW5kVG9MaXN0ID0gW2dhU2VuZFRvTGlzdF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQ2hlY2tpbmcgJ3NlbmRfdG8nIGZpZWxkcyByZXF1aXJlcyBoYXZpbmcgYWxsIG1lYXN1cmVtZW50IElEIHJlc3VsdHMgYmFjayBmcm9tXHJcbiAgICAgICAgICAgIC8vIHRoZSBkeW5hbWljIGNvbmZpZyBmZXRjaC5cclxuICAgICAgICAgICAgY29uc3QgZHluYW1pY0NvbmZpZ1Jlc3VsdHMgPSBhd2FpdCBwcm9taXNlQWxsU2V0dGxlZChkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0KTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBzZW5kVG9JZCBvZiBnYVNlbmRUb0xpc3QpIHtcclxuICAgICAgICAgICAgICAgIC8vIEFueSBmZXRjaGVkIGR5bmFtaWMgbWVhc3VyZW1lbnQgSUQgdGhhdCBtYXRjaGVzIHRoaXMgJ3NlbmRfdG8nIElEXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmb3VuZENvbmZpZyA9IGR5bmFtaWNDb25maWdSZXN1bHRzLmZpbmQoY29uZmlnID0+IGNvbmZpZy5tZWFzdXJlbWVudElkID09PSBzZW5kVG9JZCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbml0aWFsaXphdGlvblByb21pc2UgPSBmb3VuZENvbmZpZyAmJiBpbml0aWFsaXphdGlvblByb21pc2VzTWFwW2ZvdW5kQ29uZmlnLmFwcElkXTtcclxuICAgICAgICAgICAgICAgIGlmIChpbml0aWFsaXphdGlvblByb21pc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXphdGlvblByb21pc2VzVG9XYWl0Rm9yLnB1c2goaW5pdGlhbGl6YXRpb25Qcm9taXNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGl0ZW0gaW4gJ3NlbmRfdG8nIHRoYXQgaXMgbm90IGFzc29jaWF0ZWRcclxuICAgICAgICAgICAgICAgICAgICAvLyBkaXJlY3RseSB3aXRoIGFuIEZJRCwgcG9zc2libHkgYSBncm91cC4gIEVtcHR5IHRoaXMgYXJyYXksXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZXhpdCB0aGUgbG9vcCBlYXJseSwgYW5kIGxldCBpdCBnZXQgcG9wdWxhdGVkIGJlbG93LlxyXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUaGlzIHdpbGwgYmUgdW5wb3B1bGF0ZWQgaWYgdGhlcmUgd2FzIG5vICdzZW5kX3RvJyBmaWVsZCAsIG9yXHJcbiAgICAgICAgLy8gaWYgbm90IGFsbCBlbnRyaWVzIGluIHRoZSAnc2VuZF90bycgZmllbGQgY291bGQgYmUgbWFwcGVkIHRvXHJcbiAgICAgICAgLy8gYSBGSUQuIEluIHRoZXNlIGNhc2VzLCB3YWl0IG9uIGFsbCBwZW5kaW5nIGluaXRpYWxpemF0aW9uIHByb21pc2VzLlxyXG4gICAgICAgIGlmIChpbml0aWFsaXphdGlvblByb21pc2VzVG9XYWl0Rm9yLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBpbml0aWFsaXphdGlvblByb21pc2VzVG9XYWl0Rm9yID0gT2JqZWN0LnZhbHVlcyhpbml0aWFsaXphdGlvblByb21pc2VzTWFwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUnVuIGNvcmUgZ3RhZyBmdW5jdGlvbiB3aXRoIGFyZ3MgYWZ0ZXIgYWxsIHJlbGV2YW50IGluaXRpYWxpemF0aW9uXHJcbiAgICAgICAgLy8gcHJvbWlzZXMgaGF2ZSBiZWVuIHJlc29sdmVkLlxyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IpO1xyXG4gICAgICAgIC8vIFdvcmthcm91bmQgZm9yIGh0dHA6Ly9iLzE0MTM3MDQ0OSAtIHRoaXJkIGFyZ3VtZW50IGNhbm5vdCBiZSB1bmRlZmluZWQuXHJcbiAgICAgICAgZ3RhZ0NvcmUoXCJldmVudFwiIC8qIEVWRU5UICovLCBtZWFzdXJlbWVudElkLCBndGFnUGFyYW1zIHx8IHt9KTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgbG9nZ2VyLmVycm9yKGUpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBXcmFwcyBhIHN0YW5kYXJkIGd0YWcgZnVuY3Rpb24gd2l0aCBleHRyYSBjb2RlIHRvIHdhaXQgZm9yIGNvbXBsZXRpb24gb2ZcclxuICogcmVsZXZhbnQgaW5pdGlhbGl6YXRpb24gcHJvbWlzZXMgYmVmb3JlIHNlbmRpbmcgcmVxdWVzdHMuXHJcbiAqXHJcbiAqIEBwYXJhbSBndGFnQ29yZSBCYXNpYyBndGFnIGZ1bmN0aW9uIHRoYXQganVzdCBhcHBlbmRzIHRvIGRhdGFMYXllci5cclxuICogQHBhcmFtIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXAgTWFwIG9mIGFwcElkcyB0byB0aGVpciBpbml0aWFsaXphdGlvbiBwcm9taXNlcy5cclxuICogQHBhcmFtIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QgQXJyYXkgb2YgZHluYW1pYyBjb25maWcgZmV0Y2ggcHJvbWlzZXMuXHJcbiAqIEBwYXJhbSBtZWFzdXJlbWVudElkVG9BcHBJZCBNYXAgb2YgR0EgbWVhc3VyZW1lbnRJRHMgdG8gY29ycmVzcG9uZGluZyBGaXJlYmFzZSBhcHBJZC5cclxuICovXHJcbmZ1bmN0aW9uIHdyYXBHdGFnKGd0YWdDb3JlLCBcclxuLyoqXHJcbiAqIEFsbG93cyB3cmFwcGVkIGd0YWcgY2FsbHMgdG8gd2FpdCBvbiB3aGljaGV2ZXIgaW50aWFsaXphdGlvbiBwcm9taXNlcyBhcmUgcmVxdWlyZWQsXHJcbiAqIGRlcGVuZGluZyBvbiB0aGUgY29udGVudHMgb2YgdGhlIGd0YWcgcGFyYW1zJyBgc2VuZF90b2AgZmllbGQsIGlmIGFueS5cclxuICovXHJcbmluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXAsIFxyXG4vKipcclxuICogV3JhcHBlZCBndGFnIGNhbGxzIHNvbWV0aW1lcyByZXF1aXJlIGFsbCBkeW5hbWljIGNvbmZpZyBmZXRjaGVzIHRvIGhhdmUgcmV0dXJuZWRcclxuICogYmVmb3JlIGRldGVybWluaW5nIHdoYXQgaW5pdGlhbGl6YXRpb24gcHJvbWlzZXMgKHdoaWNoIGluY2x1ZGUgRklEcykgdG8gd2FpdCBmb3IuXHJcbiAqL1xyXG5keW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBcclxuLyoqXHJcbiAqIFdyYXBwZWQgZ3RhZyBjb25maWcgY2FsbHMgY2FuIG5hcnJvdyBkb3duIHdoaWNoIGluaXRpYWxpemF0aW9uIHByb21pc2UgKHdpdGggRklEKVxyXG4gKiB0byB3YWl0IGZvciBpZiB0aGUgbWVhc3VyZW1lbnRJZCBpcyBhbHJlYWR5IGZldGNoZWQsIGJ5IGdldHRpbmcgdGhlIGNvcnJlc3BvbmRpbmcgYXBwSWQsXHJcbiAqIHdoaWNoIGlzIHRoZSBrZXkgZm9yIHRoZSBpbml0aWFsaXphdGlvbiBwcm9taXNlcyBtYXAuXHJcbiAqL1xyXG5tZWFzdXJlbWVudElkVG9BcHBJZCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBXcmFwcGVyIGFyb3VuZCBndGFnIHRoYXQgZW5zdXJlcyBGSUQgaXMgc2VudCB3aXRoIGd0YWcgY2FsbHMuXHJcbiAgICAgKiBAcGFyYW0gY29tbWFuZCBHdGFnIGNvbW1hbmQgdHlwZS5cclxuICAgICAqIEBwYXJhbSBpZE9yTmFtZU9yUGFyYW1zIE1lYXN1cmVtZW50IElEIGlmIGNvbW1hbmQgaXMgRVZFTlQvQ09ORklHLCBwYXJhbXMgaWYgY29tbWFuZCBpcyBTRVQuXHJcbiAgICAgKiBAcGFyYW0gZ3RhZ1BhcmFtcyBQYXJhbXMgaWYgZXZlbnQgaXMgRVZFTlQvQ09ORklHLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBmdW5jdGlvbiBndGFnV3JhcHBlcihjb21tYW5kLCBpZE9yTmFtZU9yUGFyYW1zLCBndGFnUGFyYW1zKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gSWYgZXZlbnQsIGNoZWNrIHRoYXQgcmVsZXZhbnQgaW5pdGlhbGl6YXRpb24gcHJvbWlzZXMgaGF2ZSBjb21wbGV0ZWQuXHJcbiAgICAgICAgICAgIGlmIChjb21tYW5kID09PSBcImV2ZW50XCIgLyogRVZFTlQgKi8pIHtcclxuICAgICAgICAgICAgICAgIC8vIElmIEVWRU5ULCBzZWNvbmQgYXJnIG11c3QgYmUgbWVhc3VyZW1lbnRJZC5cclxuICAgICAgICAgICAgICAgIGF3YWl0IGd0YWdPbkV2ZW50KGd0YWdDb3JlLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBpZE9yTmFtZU9yUGFyYW1zLCBndGFnUGFyYW1zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjb21tYW5kID09PSBcImNvbmZpZ1wiIC8qIENPTkZJRyAqLykge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgQ09ORklHLCBzZWNvbmQgYXJnIG11c3QgYmUgbWVhc3VyZW1lbnRJZC5cclxuICAgICAgICAgICAgICAgIGF3YWl0IGd0YWdPbkNvbmZpZyhndGFnQ29yZSwgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCwgZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCwgbWVhc3VyZW1lbnRJZFRvQXBwSWQsIGlkT3JOYW1lT3JQYXJhbXMsIGd0YWdQYXJhbXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbW1hbmQgPT09IFwiY29uc2VudFwiIC8qIENPTlNFTlQgKi8pIHtcclxuICAgICAgICAgICAgICAgIC8vIElmIENPTkZJRywgc2Vjb25kIGFyZyBtdXN0IGJlIG1lYXN1cmVtZW50SWQuXHJcbiAgICAgICAgICAgICAgICBndGFnQ29yZShcImNvbnNlbnRcIiAvKiBDT05TRU5UICovLCAndXBkYXRlJywgZ3RhZ1BhcmFtcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiBTRVQsIHNlY29uZCBhcmcgbXVzdCBiZSBwYXJhbXMuXHJcbiAgICAgICAgICAgICAgICBndGFnQ29yZShcInNldFwiIC8qIFNFVCAqLywgaWRPck5hbWVPclBhcmFtcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBndGFnV3JhcHBlcjtcclxufVxyXG4vKipcclxuICogQ3JlYXRlcyBnbG9iYWwgZ3RhZyBmdW5jdGlvbiBvciB3cmFwcyBleGlzdGluZyBvbmUgaWYgZm91bmQuXHJcbiAqIFRoaXMgd3JhcHBlZCBmdW5jdGlvbiBhdHRhY2hlcyBGaXJlYmFzZSBpbnN0YW5jZSBJRCAoRklEKSB0byBndGFnICdjb25maWcnIGFuZFxyXG4gKiAnZXZlbnQnIGNhbGxzIHRoYXQgYmVsb25nIHRvIHRoZSBHQUlEIGFzc29jaWF0ZWQgd2l0aCB0aGlzIEZpcmViYXNlIGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcGFyYW0gaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCBNYXAgb2YgYXBwSWRzIHRvIHRoZWlyIGluaXRpYWxpemF0aW9uIHByb21pc2VzLlxyXG4gKiBAcGFyYW0gZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCBBcnJheSBvZiBkeW5hbWljIGNvbmZpZyBmZXRjaCBwcm9taXNlcy5cclxuICogQHBhcmFtIG1lYXN1cmVtZW50SWRUb0FwcElkIE1hcCBvZiBHQSBtZWFzdXJlbWVudElEcyB0byBjb3JyZXNwb25kaW5nIEZpcmViYXNlIGFwcElkLlxyXG4gKiBAcGFyYW0gZGF0YUxheWVyTmFtZSBOYW1lIG9mIGdsb2JhbCBHQSBkYXRhbGF5ZXIgYXJyYXkuXHJcbiAqIEBwYXJhbSBndGFnRnVuY3Rpb25OYW1lIE5hbWUgb2YgZ2xvYmFsIGd0YWcgZnVuY3Rpb24gKFwiZ3RhZ1wiIGlmIG5vdCB1c2VyLXNwZWNpZmllZCkuXHJcbiAqL1xyXG5mdW5jdGlvbiB3cmFwT3JDcmVhdGVHdGFnKGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXAsIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QsIG1lYXN1cmVtZW50SWRUb0FwcElkLCBkYXRhTGF5ZXJOYW1lLCBndGFnRnVuY3Rpb25OYW1lKSB7XHJcbiAgICAvLyBDcmVhdGUgYSBiYXNpYyBjb3JlIGd0YWcgZnVuY3Rpb25cclxuICAgIGxldCBndGFnQ29yZSA9IGZ1bmN0aW9uICguLi5fYXJncykge1xyXG4gICAgICAgIC8vIE11c3QgcHVzaCBJQXJndW1lbnRzIG9iamVjdCwgbm90IGFuIGFycmF5LlxyXG4gICAgICAgIHdpbmRvd1tkYXRhTGF5ZXJOYW1lXS5wdXNoKGFyZ3VtZW50cyk7XHJcbiAgICB9O1xyXG4gICAgLy8gUmVwbGFjZSBpdCB3aXRoIGV4aXN0aW5nIG9uZSBpZiBmb3VuZFxyXG4gICAgaWYgKHdpbmRvd1tndGFnRnVuY3Rpb25OYW1lXSAmJlxyXG4gICAgICAgIHR5cGVvZiB3aW5kb3dbZ3RhZ0Z1bmN0aW9uTmFtZV0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgZ3RhZ0NvcmUgPSB3aW5kb3dbZ3RhZ0Z1bmN0aW9uTmFtZV07XHJcbiAgICB9XHJcbiAgICB3aW5kb3dbZ3RhZ0Z1bmN0aW9uTmFtZV0gPSB3cmFwR3RhZyhndGFnQ29yZSwgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCwgZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCwgbWVhc3VyZW1lbnRJZFRvQXBwSWQpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBndGFnQ29yZSxcclxuICAgICAgICB3cmFwcGVkR3RhZzogd2luZG93W2d0YWdGdW5jdGlvbk5hbWVdXHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSBzY3JpcHQgdGFnIGluIHRoZSBET00gbWF0Y2hpbmcgYm90aCB0aGUgZ3RhZyB1cmwgcGF0dGVyblxyXG4gKiBhbmQgdGhlIHByb3ZpZGVkIGRhdGEgbGF5ZXIgbmFtZS5cclxuICovXHJcbmZ1bmN0aW9uIGZpbmRHdGFnU2NyaXB0T25QYWdlKGRhdGFMYXllck5hbWUpIHtcclxuICAgIGNvbnN0IHNjcmlwdFRhZ3MgPSB3aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpO1xyXG4gICAgZm9yIChjb25zdCB0YWcgb2YgT2JqZWN0LnZhbHVlcyhzY3JpcHRUYWdzKSkge1xyXG4gICAgICAgIGlmICh0YWcuc3JjICYmXHJcbiAgICAgICAgICAgIHRhZy5zcmMuaW5jbHVkZXMoR1RBR19VUkwpICYmXHJcbiAgICAgICAgICAgIHRhZy5zcmMuaW5jbHVkZXMoZGF0YUxheWVyTmFtZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRhZztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBFUlJPUlMgPSB7XHJcbiAgICBbXCJhbHJlYWR5LWV4aXN0c1wiIC8qIEFMUkVBRFlfRVhJU1RTICovXTogJ0EgRmlyZWJhc2UgQW5hbHl0aWNzIGluc3RhbmNlIHdpdGggdGhlIGFwcElkIHskaWR9ICcgK1xyXG4gICAgICAgICcgYWxyZWFkeSBleGlzdHMuICcgK1xyXG4gICAgICAgICdPbmx5IG9uZSBGaXJlYmFzZSBBbmFseXRpY3MgaW5zdGFuY2UgY2FuIGJlIGNyZWF0ZWQgZm9yIGVhY2ggYXBwSWQuJyxcclxuICAgIFtcImFscmVhZHktaW5pdGlhbGl6ZWRcIiAvKiBBTFJFQURZX0lOSVRJQUxJWkVEICovXTogJ2luaXRpYWxpemVBbmFseXRpY3MoKSBjYW5ub3QgYmUgY2FsbGVkIGFnYWluIHdpdGggZGlmZmVyZW50IG9wdGlvbnMgdGhhbiB0aG9zZSAnICtcclxuICAgICAgICAnaXQgd2FzIGluaXRpYWxseSBjYWxsZWQgd2l0aC4gSXQgY2FuIGJlIGNhbGxlZCBhZ2FpbiB3aXRoIHRoZSBzYW1lIG9wdGlvbnMgdG8gJyArXHJcbiAgICAgICAgJ3JldHVybiB0aGUgZXhpc3RpbmcgaW5zdGFuY2UsIG9yIGdldEFuYWx5dGljcygpIGNhbiBiZSB1c2VkICcgK1xyXG4gICAgICAgICd0byBnZXQgYSByZWZlcmVuY2UgdG8gdGhlIGFscmVhZHktaW50aWFsaXplZCBpbnN0YW5jZS4nLFxyXG4gICAgW1wiYWxyZWFkeS1pbml0aWFsaXplZC1zZXR0aW5nc1wiIC8qIEFMUkVBRFlfSU5JVElBTElaRURfU0VUVElOR1MgKi9dOiAnRmlyZWJhc2UgQW5hbHl0aWNzIGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWQuJyArXHJcbiAgICAgICAgJ3NldHRpbmdzKCkgbXVzdCBiZSBjYWxsZWQgYmVmb3JlIGluaXRpYWxpemluZyBhbnkgQW5hbHl0aWNzIGluc3RhbmNlJyArXHJcbiAgICAgICAgJ29yIGl0IHdpbGwgaGF2ZSBubyBlZmZlY3QuJyxcclxuICAgIFtcImludGVyb3AtY29tcG9uZW50LXJlZy1mYWlsZWRcIiAvKiBJTlRFUk9QX0NPTVBPTkVOVF9SRUdfRkFJTEVEICovXTogJ0ZpcmViYXNlIEFuYWx5dGljcyBJbnRlcm9wIENvbXBvbmVudCBmYWlsZWQgdG8gaW5zdGFudGlhdGU6IHskcmVhc29ufScsXHJcbiAgICBbXCJpbnZhbGlkLWFuYWx5dGljcy1jb250ZXh0XCIgLyogSU5WQUxJRF9BTkFMWVRJQ1NfQ09OVEVYVCAqL106ICdGaXJlYmFzZSBBbmFseXRpY3MgaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50LiAnICtcclxuICAgICAgICAnV3JhcCBpbml0aWFsaXphdGlvbiBvZiBhbmFseXRpY3MgaW4gYW5hbHl0aWNzLmlzU3VwcG9ydGVkKCkgJyArXHJcbiAgICAgICAgJ3RvIHByZXZlbnQgaW5pdGlhbGl6YXRpb24gaW4gdW5zdXBwb3J0ZWQgZW52aXJvbm1lbnRzLiBEZXRhaWxzOiB7JGVycm9ySW5mb30nLFxyXG4gICAgW1wiaW5kZXhlZGRiLXVuYXZhaWxhYmxlXCIgLyogSU5ERVhFRERCX1VOQVZBSUxBQkxFICovXTogJ0luZGV4ZWREQiB1bmF2YWlsYWJsZSBvciByZXN0cmljdGVkIGluIHRoaXMgZW52aXJvbm1lbnQuICcgK1xyXG4gICAgICAgICdXcmFwIGluaXRpYWxpemF0aW9uIG9mIGFuYWx5dGljcyBpbiBhbmFseXRpY3MuaXNTdXBwb3J0ZWQoKSAnICtcclxuICAgICAgICAndG8gcHJldmVudCBpbml0aWFsaXphdGlvbiBpbiB1bnN1cHBvcnRlZCBlbnZpcm9ubWVudHMuIERldGFpbHM6IHskZXJyb3JJbmZvfScsXHJcbiAgICBbXCJmZXRjaC10aHJvdHRsZVwiIC8qIEZFVENIX1RIUk9UVExFICovXTogJ1RoZSBjb25maWcgZmV0Y2ggcmVxdWVzdCB0aW1lZCBvdXQgd2hpbGUgaW4gYW4gZXhwb25lbnRpYWwgYmFja29mZiBzdGF0ZS4nICtcclxuICAgICAgICAnIFVuaXggdGltZXN0YW1wIGluIG1pbGxpc2Vjb25kcyB3aGVuIGZldGNoIHJlcXVlc3QgdGhyb3R0bGluZyBlbmRzOiB7JHRocm90dGxlRW5kVGltZU1pbGxpc30uJyxcclxuICAgIFtcImNvbmZpZy1mZXRjaC1mYWlsZWRcIiAvKiBDT05GSUdfRkVUQ0hfRkFJTEVEICovXTogJ0R5bmFtaWMgY29uZmlnIGZldGNoIGZhaWxlZDogW3skaHR0cFN0YXR1c31dIHskcmVzcG9uc2VNZXNzYWdlfScsXHJcbiAgICBbXCJuby1hcGkta2V5XCIgLyogTk9fQVBJX0tFWSAqL106ICdUaGUgXCJhcGlLZXlcIiBmaWVsZCBpcyBlbXB0eSBpbiB0aGUgbG9jYWwgRmlyZWJhc2UgY29uZmlnLiBGaXJlYmFzZSBBbmFseXRpY3MgcmVxdWlyZXMgdGhpcyBmaWVsZCB0bycgK1xyXG4gICAgICAgICdjb250YWluIGEgdmFsaWQgQVBJIGtleS4nLFxyXG4gICAgW1wibm8tYXBwLWlkXCIgLyogTk9fQVBQX0lEICovXTogJ1RoZSBcImFwcElkXCIgZmllbGQgaXMgZW1wdHkgaW4gdGhlIGxvY2FsIEZpcmViYXNlIGNvbmZpZy4gRmlyZWJhc2UgQW5hbHl0aWNzIHJlcXVpcmVzIHRoaXMgZmllbGQgdG8nICtcclxuICAgICAgICAnY29udGFpbiBhIHZhbGlkIGFwcCBJRC4nXHJcbn07XHJcbmNvbnN0IEVSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhbmFseXRpY3MnLCAnQW5hbHl0aWNzJywgRVJST1JTKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEJhY2tvZmYgZmFjdG9yIGZvciA1MDMgZXJyb3JzLCB3aGljaCB3ZSB3YW50IHRvIGJlIGNvbnNlcnZhdGl2ZSBhYm91dFxyXG4gKiB0byBhdm9pZCBvdmVybG9hZGluZyBzZXJ2ZXJzLiBFYWNoIHJldHJ5IGludGVydmFsIHdpbGwgYmVcclxuICogQkFTRV9JTlRFUlZBTF9NSUxMSVMgKiBMT05HX1JFVFJZX0ZBQ1RPUiBeIHJldHJ5Q291bnQsIHNvIHRoZSBzZWNvbmQgb25lXHJcbiAqIHdpbGwgYmUgfjMwIHNlY29uZHMgKHdpdGggZnV6emluZykuXHJcbiAqL1xyXG5jb25zdCBMT05HX1JFVFJZX0ZBQ1RPUiA9IDMwO1xyXG4vKipcclxuICogQmFzZSB3YWl0IGludGVydmFsIHRvIG11bHRpcGxpZWQgYnkgYmFja29mZkZhY3Rvcl5iYWNrb2ZmQ291bnQuXHJcbiAqL1xyXG5jb25zdCBCQVNFX0lOVEVSVkFMX01JTExJUyA9IDEwMDA7XHJcbi8qKlxyXG4gKiBTdHViYmFibGUgcmV0cnkgZGF0YSBzdG9yYWdlIGNsYXNzLlxyXG4gKi9cclxuY2xhc3MgUmV0cnlEYXRhIHtcclxuICAgIGNvbnN0cnVjdG9yKHRocm90dGxlTWV0YWRhdGEgPSB7fSwgaW50ZXJ2YWxNaWxsaXMgPSBCQVNFX0lOVEVSVkFMX01JTExJUykge1xyXG4gICAgICAgIHRoaXMudGhyb3R0bGVNZXRhZGF0YSA9IHRocm90dGxlTWV0YWRhdGE7XHJcbiAgICAgICAgdGhpcy5pbnRlcnZhbE1pbGxpcyA9IGludGVydmFsTWlsbGlzO1xyXG4gICAgfVxyXG4gICAgZ2V0VGhyb3R0bGVNZXRhZGF0YShhcHBJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRocm90dGxlTWV0YWRhdGFbYXBwSWRdO1xyXG4gICAgfVxyXG4gICAgc2V0VGhyb3R0bGVNZXRhZGF0YShhcHBJZCwgbWV0YWRhdGEpIHtcclxuICAgICAgICB0aGlzLnRocm90dGxlTWV0YWRhdGFbYXBwSWRdID0gbWV0YWRhdGE7XHJcbiAgICB9XHJcbiAgICBkZWxldGVUaHJvdHRsZU1ldGFkYXRhKGFwcElkKSB7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMudGhyb3R0bGVNZXRhZGF0YVthcHBJZF07XHJcbiAgICB9XHJcbn1cclxuY29uc3QgZGVmYXVsdFJldHJ5RGF0YSA9IG5ldyBSZXRyeURhdGEoKTtcclxuLyoqXHJcbiAqIFNldCBHRVQgcmVxdWVzdCBoZWFkZXJzLlxyXG4gKiBAcGFyYW0gYXBpS2V5IEFwcCBBUEkga2V5LlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0SGVhZGVycyhhcGlLZXkpIHtcclxuICAgIHJldHVybiBuZXcgSGVhZGVycyh7XHJcbiAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgJ3gtZ29vZy1hcGkta2V5JzogYXBpS2V5XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICogRmV0Y2hlcyBkeW5hbWljIGNvbmZpZyBmcm9tIGJhY2tlbmQuXHJcbiAqIEBwYXJhbSBhcHAgRmlyZWJhc2UgYXBwIHRvIGZldGNoIGNvbmZpZyBmb3IuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBmZXRjaER5bmFtaWNDb25maWcoYXBwRmllbGRzKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBjb25zdCB7IGFwcElkLCBhcGlLZXkgfSA9IGFwcEZpZWxkcztcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICBoZWFkZXJzOiBnZXRIZWFkZXJzKGFwaUtleSlcclxuICAgIH07XHJcbiAgICBjb25zdCBhcHBVcmwgPSBEWU5BTUlDX0NPTkZJR19VUkwucmVwbGFjZSgne2FwcC1pZH0nLCBhcHBJZCk7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGFwcFVybCwgcmVxdWVzdCk7XHJcbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDAgJiYgcmVzcG9uc2Uuc3RhdHVzICE9PSAzMDQpIHtcclxuICAgICAgICBsZXQgZXJyb3JNZXNzYWdlID0gJyc7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gVHJ5IHRvIGdldCBhbnkgZXJyb3IgbWVzc2FnZSB0ZXh0IGZyb20gc2VydmVyIHJlc3BvbnNlLlxyXG4gICAgICAgICAgICBjb25zdCBqc29uUmVzcG9uc2UgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcclxuICAgICAgICAgICAgaWYgKChfYSA9IGpzb25SZXNwb25zZS5lcnJvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGpzb25SZXNwb25zZS5lcnJvci5tZXNzYWdlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfaWdub3JlZCkgeyB9XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJjb25maWctZmV0Y2gtZmFpbGVkXCIgLyogQ09ORklHX0ZFVENIX0ZBSUxFRCAqLywge1xyXG4gICAgICAgICAgICBodHRwU3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXHJcbiAgICAgICAgICAgIHJlc3BvbnNlTWVzc2FnZTogZXJyb3JNZXNzYWdlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xyXG59XHJcbi8qKlxyXG4gKiBGZXRjaGVzIGR5bmFtaWMgY29uZmlnIGZyb20gYmFja2VuZCwgcmV0cnlpbmcgaWYgZmFpbGVkLlxyXG4gKiBAcGFyYW0gYXBwIEZpcmViYXNlIGFwcCB0byBmZXRjaCBjb25maWcgZm9yLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hEeW5hbWljQ29uZmlnV2l0aFJldHJ5KGFwcCwgXHJcbi8vIHJldHJ5RGF0YSBhbmQgdGltZW91dE1pbGxpcyBhcmUgcGFyYW1ldGVyaXplZCB0byBhbGxvdyBwYXNzaW5nIGEgZGlmZmVyZW50IHZhbHVlIGZvciB0ZXN0aW5nLlxyXG5yZXRyeURhdGEgPSBkZWZhdWx0UmV0cnlEYXRhLCB0aW1lb3V0TWlsbGlzKSB7XHJcbiAgICBjb25zdCB7IGFwcElkLCBhcGlLZXksIG1lYXN1cmVtZW50SWQgfSA9IGFwcC5vcHRpb25zO1xyXG4gICAgaWYgKCFhcHBJZCkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tYXBwLWlkXCIgLyogTk9fQVBQX0lEICovKTtcclxuICAgIH1cclxuICAgIGlmICghYXBpS2V5KSB7XHJcbiAgICAgICAgaWYgKG1lYXN1cmVtZW50SWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIG1lYXN1cmVtZW50SWQsXHJcbiAgICAgICAgICAgICAgICBhcHBJZFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLWFwaS1rZXlcIiAvKiBOT19BUElfS0VZICovKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHRocm90dGxlTWV0YWRhdGEgPSByZXRyeURhdGEuZ2V0VGhyb3R0bGVNZXRhZGF0YShhcHBJZCkgfHwge1xyXG4gICAgICAgIGJhY2tvZmZDb3VudDogMCxcclxuICAgICAgICB0aHJvdHRsZUVuZFRpbWVNaWxsaXM6IERhdGUubm93KClcclxuICAgIH07XHJcbiAgICBjb25zdCBzaWduYWwgPSBuZXcgQW5hbHl0aWNzQWJvcnRTaWduYWwoKTtcclxuICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIC8vIE5vdGUgYSB2ZXJ5IGxvdyBkZWxheSwgZWcgPCAxMG1zLCBjYW4gZWxhcHNlIGJlZm9yZSBsaXN0ZW5lcnMgYXJlIGluaXRpYWxpemVkLlxyXG4gICAgICAgIHNpZ25hbC5hYm9ydCgpO1xyXG4gICAgfSwgdGltZW91dE1pbGxpcyAhPT0gdW5kZWZpbmVkID8gdGltZW91dE1pbGxpcyA6IEZFVENIX1RJTUVPVVRfTUlMTElTKTtcclxuICAgIHJldHVybiBhdHRlbXB0RmV0Y2hEeW5hbWljQ29uZmlnV2l0aFJldHJ5KHsgYXBwSWQsIGFwaUtleSwgbWVhc3VyZW1lbnRJZCB9LCB0aHJvdHRsZU1ldGFkYXRhLCBzaWduYWwsIHJldHJ5RGF0YSk7XHJcbn1cclxuLyoqXHJcbiAqIFJ1bnMgb25lIHJldHJ5IGF0dGVtcHQuXHJcbiAqIEBwYXJhbSBhcHBGaWVsZHMgTmVjZXNzYXJ5IGFwcCBjb25maWcgZmllbGRzLlxyXG4gKiBAcGFyYW0gdGhyb3R0bGVNZXRhZGF0YSBPbmdvaW5nIG1ldGFkYXRhIHRvIGRldGVybWluZSB0aHJvdHRsaW5nIHRpbWVzLlxyXG4gKiBAcGFyYW0gc2lnbmFsIEFib3J0IHNpZ25hbC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGF0dGVtcHRGZXRjaER5bmFtaWNDb25maWdXaXRoUmV0cnkoYXBwRmllbGRzLCB7IHRocm90dGxlRW5kVGltZU1pbGxpcywgYmFja29mZkNvdW50IH0sIHNpZ25hbCwgcmV0cnlEYXRhID0gZGVmYXVsdFJldHJ5RGF0YSAvLyBmb3IgdGVzdGluZ1xyXG4pIHtcclxuICAgIHZhciBfYSwgX2I7XHJcbiAgICBjb25zdCB7IGFwcElkLCBtZWFzdXJlbWVudElkIH0gPSBhcHBGaWVsZHM7XHJcbiAgICAvLyBTdGFydHMgd2l0aCBhIChwb3RlbnRpYWxseSB6ZXJvKSB0aW1lb3V0IHRvIHN1cHBvcnQgcmVzdW1wdGlvbiBmcm9tIHN0b3JlZCBzdGF0ZS5cclxuICAgIC8vIEVuc3VyZXMgdGhlIHRocm90dGxlIGVuZCB0aW1lIGlzIGhvbm9yZWQgaWYgdGhlIGxhc3QgYXR0ZW1wdCB0aW1lZCBvdXQuXHJcbiAgICAvLyBOb3RlIHRoZSBTREsgd2lsbCBuZXZlciBtYWtlIGEgcmVxdWVzdCBpZiB0aGUgZmV0Y2ggdGltZW91dCBleHBpcmVzIGF0IHRoaXMgcG9pbnQuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHNldEFib3J0YWJsZVRpbWVvdXQoc2lnbmFsLCB0aHJvdHRsZUVuZFRpbWVNaWxsaXMpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAobWVhc3VyZW1lbnRJZCkge1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihgVGltZWQgb3V0IGZldGNoaW5nIHRoaXMgRmlyZWJhc2UgYXBwJ3MgbWVhc3VyZW1lbnQgSUQgZnJvbSB0aGUgc2VydmVyLmAgK1xyXG4gICAgICAgICAgICAgICAgYCBGYWxsaW5nIGJhY2sgdG8gdGhlIG1lYXN1cmVtZW50IElEICR7bWVhc3VyZW1lbnRJZH1gICtcclxuICAgICAgICAgICAgICAgIGAgcHJvdmlkZWQgaW4gdGhlIFwibWVhc3VyZW1lbnRJZFwiIGZpZWxkIGluIHRoZSBsb2NhbCBGaXJlYmFzZSBjb25maWcuIFskeyhfYSA9IGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tZXNzYWdlfV1gKTtcclxuICAgICAgICAgICAgcmV0dXJuIHsgYXBwSWQsIG1lYXN1cmVtZW50SWQgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaER5bmFtaWNDb25maWcoYXBwRmllbGRzKTtcclxuICAgICAgICAvLyBOb3RlIHRoZSBTREsgb25seSBjbGVhcnMgdGhyb3R0bGUgc3RhdGUgaWYgcmVzcG9uc2UgaXMgc3VjY2VzcyBvciBub24tcmV0cmlhYmxlLlxyXG4gICAgICAgIHJldHJ5RGF0YS5kZWxldGVUaHJvdHRsZU1ldGFkYXRhKGFwcElkKTtcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gZTtcclxuICAgICAgICBpZiAoIWlzUmV0cmlhYmxlRXJyb3IoZXJyb3IpKSB7XHJcbiAgICAgICAgICAgIHJldHJ5RGF0YS5kZWxldGVUaHJvdHRsZU1ldGFkYXRhKGFwcElkKTtcclxuICAgICAgICAgICAgaWYgKG1lYXN1cmVtZW50SWQpIHtcclxuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKGBGYWlsZWQgdG8gZmV0Y2ggdGhpcyBGaXJlYmFzZSBhcHAncyBtZWFzdXJlbWVudCBJRCBmcm9tIHRoZSBzZXJ2ZXIuYCArXHJcbiAgICAgICAgICAgICAgICAgICAgYCBGYWxsaW5nIGJhY2sgdG8gdGhlIG1lYXN1cmVtZW50IElEICR7bWVhc3VyZW1lbnRJZH1gICtcclxuICAgICAgICAgICAgICAgICAgICBgIHByb3ZpZGVkIGluIHRoZSBcIm1lYXN1cmVtZW50SWRcIiBmaWVsZCBpbiB0aGUgbG9jYWwgRmlyZWJhc2UgY29uZmlnLiBbJHtlcnJvciA9PT0gbnVsbCB8fCBlcnJvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXJyb3IubWVzc2FnZX1dYCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBhcHBJZCwgbWVhc3VyZW1lbnRJZCB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBiYWNrb2ZmTWlsbGlzID0gTnVtYmVyKChfYiA9IGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvci5jdXN0b21EYXRhKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuaHR0cFN0YXR1cykgPT09IDUwM1xyXG4gICAgICAgICAgICA/IGNhbGN1bGF0ZUJhY2tvZmZNaWxsaXMoYmFja29mZkNvdW50LCByZXRyeURhdGEuaW50ZXJ2YWxNaWxsaXMsIExPTkdfUkVUUllfRkFDVE9SKVxyXG4gICAgICAgICAgICA6IGNhbGN1bGF0ZUJhY2tvZmZNaWxsaXMoYmFja29mZkNvdW50LCByZXRyeURhdGEuaW50ZXJ2YWxNaWxsaXMpO1xyXG4gICAgICAgIC8vIEluY3JlbWVudHMgYmFja29mZiBzdGF0ZS5cclxuICAgICAgICBjb25zdCB0aHJvdHRsZU1ldGFkYXRhID0ge1xyXG4gICAgICAgICAgICB0aHJvdHRsZUVuZFRpbWVNaWxsaXM6IERhdGUubm93KCkgKyBiYWNrb2ZmTWlsbGlzLFxyXG4gICAgICAgICAgICBiYWNrb2ZmQ291bnQ6IGJhY2tvZmZDb3VudCArIDFcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIFBlcnNpc3RzIHN0YXRlLlxyXG4gICAgICAgIHJldHJ5RGF0YS5zZXRUaHJvdHRsZU1ldGFkYXRhKGFwcElkLCB0aHJvdHRsZU1ldGFkYXRhKTtcclxuICAgICAgICBsb2dnZXIuZGVidWcoYENhbGxpbmcgYXR0ZW1wdEZldGNoIGFnYWluIGluICR7YmFja29mZk1pbGxpc30gbWlsbGlzYCk7XHJcbiAgICAgICAgcmV0dXJuIGF0dGVtcHRGZXRjaER5bmFtaWNDb25maWdXaXRoUmV0cnkoYXBwRmllbGRzLCB0aHJvdHRsZU1ldGFkYXRhLCBzaWduYWwsIHJldHJ5RGF0YSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFN1cHBvcnRzIHdhaXRpbmcgb24gYSBiYWNrb2ZmIGJ5OlxyXG4gKlxyXG4gKiA8dWw+XHJcbiAqICAgPGxpPlByb21pc2lmeWluZyBzZXRUaW1lb3V0LCBzbyB3ZSBjYW4gc2V0IGEgdGltZW91dCBpbiBvdXIgUHJvbWlzZSBjaGFpbjwvbGk+XHJcbiAqICAgPGxpPkxpc3RlbmluZyBvbiBhIHNpZ25hbCBidXMgZm9yIGFib3J0IGV2ZW50cywganVzdCBsaWtlIHRoZSBGZXRjaCBBUEk8L2xpPlxyXG4gKiAgIDxsaT5GYWlsaW5nIGluIHRoZSBzYW1lIHdheSB0aGUgRmV0Y2ggQVBJIGZhaWxzLCBzbyB0aW1pbmcgb3V0IGEgbGl2ZSByZXF1ZXN0IGFuZCBhIHRocm90dGxlZFxyXG4gKiAgICAgICByZXF1ZXN0IGFwcGVhciB0aGUgc2FtZS48L2xpPlxyXG4gKiA8L3VsPlxyXG4gKlxyXG4gKiA8cD5WaXNpYmxlIGZvciB0ZXN0aW5nLlxyXG4gKi9cclxuZnVuY3Rpb24gc2V0QWJvcnRhYmxlVGltZW91dChzaWduYWwsIHRocm90dGxlRW5kVGltZU1pbGxpcykge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAvLyBEZXJpdmVzIGJhY2tvZmYgZnJvbSBnaXZlbiBlbmQgdGltZSwgbm9ybWFsaXppbmcgbmVnYXRpdmUgbnVtYmVycyB0byB6ZXJvLlxyXG4gICAgICAgIGNvbnN0IGJhY2tvZmZNaWxsaXMgPSBNYXRoLm1heCh0aHJvdHRsZUVuZFRpbWVNaWxsaXMgLSBEYXRlLm5vdygpLCAwKTtcclxuICAgICAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dChyZXNvbHZlLCBiYWNrb2ZmTWlsbGlzKTtcclxuICAgICAgICAvLyBBZGRzIGxpc3RlbmVyLCByYXRoZXIgdGhhbiBzZXRzIG9uYWJvcnQsIGJlY2F1c2Ugc2lnbmFsIGlzIGEgc2hhcmVkIG9iamVjdC5cclxuICAgICAgICBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcigoKSA9PiB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIHJlcXVlc3QgY29tcGxldGVzIGJlZm9yZSB0aGlzIHRpbWVvdXQsIHRoZSByZWplY3Rpb24gaGFzIG5vIGVmZmVjdC5cclxuICAgICAgICAgICAgcmVqZWN0KEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiZmV0Y2gtdGhyb3R0bGVcIiAvKiBGRVRDSF9USFJPVFRMRSAqLywge1xyXG4gICAgICAgICAgICAgICAgdGhyb3R0bGVFbmRUaW1lTWlsbGlzXHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHtAbGluayBFcnJvcn0gaW5kaWNhdGVzIGEgZmV0Y2ggcmVxdWVzdCBtYXkgc3VjY2VlZCBsYXRlci5cclxuICovXHJcbmZ1bmN0aW9uIGlzUmV0cmlhYmxlRXJyb3IoZSkge1xyXG4gICAgaWYgKCEoZSBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpIHx8ICFlLmN1c3RvbURhdGEpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvLyBVc2VzIHN0cmluZyBpbmRleCBkZWZpbmVkIGJ5IEVycm9yRGF0YSwgd2hpY2ggRmlyZWJhc2VFcnJvciBpbXBsZW1lbnRzLlxyXG4gICAgY29uc3QgaHR0cFN0YXR1cyA9IE51bWJlcihlLmN1c3RvbURhdGFbJ2h0dHBTdGF0dXMnXSk7XHJcbiAgICByZXR1cm4gKGh0dHBTdGF0dXMgPT09IDQyOSB8fFxyXG4gICAgICAgIGh0dHBTdGF0dXMgPT09IDUwMCB8fFxyXG4gICAgICAgIGh0dHBTdGF0dXMgPT09IDUwMyB8fFxyXG4gICAgICAgIGh0dHBTdGF0dXMgPT09IDUwNCk7XHJcbn1cclxuLyoqXHJcbiAqIFNoaW1zIGEgbWluaW1hbCBBYm9ydFNpZ25hbCAoY29waWVkIGZyb20gUmVtb3RlIENvbmZpZykuXHJcbiAqXHJcbiAqIDxwPkFib3J0Q29udHJvbGxlcidzIEFib3J0U2lnbmFsIGNvbnZlbmllbnRseSBkZWNvdXBsZXMgZmV0Y2ggdGltZW91dCBsb2dpYyBmcm9tIG90aGVyIGFzcGVjdHNcclxuICogb2YgbmV0d29ya2luZywgc3VjaCBhcyByZXRyaWVzLiBGaXJlYmFzZSBkb2Vzbid0IHVzZSBBYm9ydENvbnRyb2xsZXIgZW5vdWdoIHRvIGp1c3RpZnkgYVxyXG4gKiBwb2x5ZmlsbCByZWNvbW1lbmRhdGlvbiwgbGlrZSB3ZSBkbyB3aXRoIHRoZSBGZXRjaCBBUEksIGJ1dCB0aGlzIG1pbmltYWwgc2hpbSBjYW4gZWFzaWx5IGJlXHJcbiAqIHN3YXBwZWQgb3V0IGlmL3doZW4gd2UgZG8uXHJcbiAqL1xyXG5jbGFzcyBBbmFseXRpY3NBYm9ydFNpZ25hbCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IFtdO1xyXG4gICAgfVxyXG4gICAgYWRkRXZlbnRMaXN0ZW5lcihsaXN0ZW5lcikge1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xyXG4gICAgfVxyXG4gICAgYWJvcnQoKSB7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiBsaXN0ZW5lcigpKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRXZlbnQgcGFyYW1ldGVycyB0byBzZXQgb24gJ2d0YWcnIGR1cmluZyBpbml0aWFsaXphdGlvbi5cclxuICovXHJcbmxldCBkZWZhdWx0RXZlbnRQYXJhbWV0ZXJzRm9ySW5pdDtcclxuLyoqXHJcbiAqIExvZ3MgYW4gYW5hbHl0aWNzIGV2ZW50IHRocm91Z2ggdGhlIEZpcmViYXNlIFNESy5cclxuICpcclxuICogQHBhcmFtIGd0YWdGdW5jdGlvbiBXcmFwcGVkIGd0YWcgZnVuY3Rpb24gdGhhdCB3YWl0cyBmb3IgZmlkIHRvIGJlIHNldCBiZWZvcmUgc2VuZGluZyBhbiBldmVudFxyXG4gKiBAcGFyYW0gZXZlbnROYW1lIEdvb2dsZSBBbmFseXRpY3MgZXZlbnQgbmFtZSwgY2hvb3NlIGZyb20gc3RhbmRhcmQgbGlzdCBvciB1c2UgYSBjdXN0b20gc3RyaW5nLlxyXG4gKiBAcGFyYW0gZXZlbnRQYXJhbXMgQW5hbHl0aWNzIGV2ZW50IHBhcmFtZXRlcnMuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBsb2dFdmVudCQxKGd0YWdGdW5jdGlvbiwgaW5pdGlhbGl6YXRpb25Qcm9taXNlLCBldmVudE5hbWUsIGV2ZW50UGFyYW1zLCBvcHRpb25zKSB7XHJcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmdsb2JhbCkge1xyXG4gICAgICAgIGd0YWdGdW5jdGlvbihcImV2ZW50XCIgLyogRVZFTlQgKi8sIGV2ZW50TmFtZSwgZXZlbnRQYXJhbXMpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IG1lYXN1cmVtZW50SWQgPSBhd2FpdCBpbml0aWFsaXphdGlvblByb21pc2U7XHJcbiAgICAgICAgY29uc3QgcGFyYW1zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBldmVudFBhcmFtcyksIHsgJ3NlbmRfdG8nOiBtZWFzdXJlbWVudElkIH0pO1xyXG4gICAgICAgIGd0YWdGdW5jdGlvbihcImV2ZW50XCIgLyogRVZFTlQgKi8sIGV2ZW50TmFtZSwgcGFyYW1zKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogU2V0IHNjcmVlbl9uYW1lIHBhcmFtZXRlciBmb3IgdGhpcyBHb29nbGUgQW5hbHl0aWNzIElELlxyXG4gKlxyXG4gKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIGxvZ0V2ZW50fSB3aXRoIGBldmVudE5hbWVgIGFzICdzY3JlZW5fdmlldycgYW5kIGFkZCByZWxldmFudCBgZXZlbnRQYXJhbXNgLlxyXG4gKiBTZWUge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2FuYWx5dGljcy9zY3JlZW52aWV3cyB8IFRyYWNrIFNjcmVlbnZpZXdzfS5cclxuICpcclxuICogQHBhcmFtIGd0YWdGdW5jdGlvbiBXcmFwcGVkIGd0YWcgZnVuY3Rpb24gdGhhdCB3YWl0cyBmb3IgZmlkIHRvIGJlIHNldCBiZWZvcmUgc2VuZGluZyBhbiBldmVudFxyXG4gKiBAcGFyYW0gc2NyZWVuTmFtZSBTY3JlZW4gbmFtZSBzdHJpbmcgdG8gc2V0LlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2V0Q3VycmVudFNjcmVlbiQxKGd0YWdGdW5jdGlvbiwgaW5pdGlhbGl6YXRpb25Qcm9taXNlLCBzY3JlZW5OYW1lLCBvcHRpb25zKSB7XHJcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmdsb2JhbCkge1xyXG4gICAgICAgIGd0YWdGdW5jdGlvbihcInNldFwiIC8qIFNFVCAqLywgeyAnc2NyZWVuX25hbWUnOiBzY3JlZW5OYW1lIH0pO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IG1lYXN1cmVtZW50SWQgPSBhd2FpdCBpbml0aWFsaXphdGlvblByb21pc2U7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwiY29uZmlnXCIgLyogQ09ORklHICovLCBtZWFzdXJlbWVudElkLCB7XHJcbiAgICAgICAgICAgIHVwZGF0ZTogdHJ1ZSxcclxuICAgICAgICAgICAgJ3NjcmVlbl9uYW1lJzogc2NyZWVuTmFtZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBTZXQgdXNlcl9pZCBwYXJhbWV0ZXIgZm9yIHRoaXMgR29vZ2xlIEFuYWx5dGljcyBJRC5cclxuICpcclxuICogQHBhcmFtIGd0YWdGdW5jdGlvbiBXcmFwcGVkIGd0YWcgZnVuY3Rpb24gdGhhdCB3YWl0cyBmb3IgZmlkIHRvIGJlIHNldCBiZWZvcmUgc2VuZGluZyBhbiBldmVudFxyXG4gKiBAcGFyYW0gaWQgVXNlciBJRCBzdHJpbmcgdG8gc2V0XHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzZXRVc2VySWQkMShndGFnRnVuY3Rpb24sIGluaXRpYWxpemF0aW9uUHJvbWlzZSwgaWQsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZ2xvYmFsKSB7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwic2V0XCIgLyogU0VUICovLCB7ICd1c2VyX2lkJzogaWQgfSk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgbWVhc3VyZW1lbnRJZCA9IGF3YWl0IGluaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgICAgICBndGFnRnVuY3Rpb24oXCJjb25maWdcIiAvKiBDT05GSUcgKi8sIG1lYXN1cmVtZW50SWQsIHtcclxuICAgICAgICAgICAgdXBkYXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAndXNlcl9pZCc6IGlkXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFNldCBhbGwgb3RoZXIgdXNlciBwcm9wZXJ0aWVzIG90aGVyIHRoYW4gdXNlcl9pZCBhbmQgc2NyZWVuX25hbWUuXHJcbiAqXHJcbiAqIEBwYXJhbSBndGFnRnVuY3Rpb24gV3JhcHBlZCBndGFnIGZ1bmN0aW9uIHRoYXQgd2FpdHMgZm9yIGZpZCB0byBiZSBzZXQgYmVmb3JlIHNlbmRpbmcgYW4gZXZlbnRcclxuICogQHBhcmFtIHByb3BlcnRpZXMgTWFwIG9mIHVzZXIgcHJvcGVydGllcyB0byBzZXRcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNldFVzZXJQcm9wZXJ0aWVzJDEoZ3RhZ0Z1bmN0aW9uLCBpbml0aWFsaXphdGlvblByb21pc2UsIHByb3BlcnRpZXMsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZ2xvYmFsKSB7XHJcbiAgICAgICAgY29uc3QgZmxhdFByb3BlcnRpZXMgPSB7fTtcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSkge1xyXG4gICAgICAgICAgICAvLyB1c2UgZG90IG5vdGF0aW9uIGZvciBtZXJnZSBiZWhhdmlvciBpbiBndGFnLmpzXHJcbiAgICAgICAgICAgIGZsYXRQcm9wZXJ0aWVzW2B1c2VyX3Byb3BlcnRpZXMuJHtrZXl9YF0gPSBwcm9wZXJ0aWVzW2tleV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGd0YWdGdW5jdGlvbihcInNldFwiIC8qIFNFVCAqLywgZmxhdFByb3BlcnRpZXMpO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IG1lYXN1cmVtZW50SWQgPSBhd2FpdCBpbml0aWFsaXphdGlvblByb21pc2U7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwiY29uZmlnXCIgLyogQ09ORklHICovLCBtZWFzdXJlbWVudElkLCB7XHJcbiAgICAgICAgICAgIHVwZGF0ZTogdHJ1ZSxcclxuICAgICAgICAgICAgJ3VzZXJfcHJvcGVydGllcyc6IHByb3BlcnRpZXNcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogU2V0IHdoZXRoZXIgY29sbGVjdGlvbiBpcyBlbmFibGVkIGZvciB0aGlzIElELlxyXG4gKlxyXG4gKiBAcGFyYW0gZW5hYmxlZCBJZiB0cnVlLCBjb2xsZWN0aW9uIGlzIGVuYWJsZWQgZm9yIHRoaXMgSUQuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzZXRBbmFseXRpY3NDb2xsZWN0aW9uRW5hYmxlZCQxKGluaXRpYWxpemF0aW9uUHJvbWlzZSwgZW5hYmxlZCkge1xyXG4gICAgY29uc3QgbWVhc3VyZW1lbnRJZCA9IGF3YWl0IGluaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgIHdpbmRvd1tgZ2EtZGlzYWJsZS0ke21lYXN1cmVtZW50SWR9YF0gPSAhZW5hYmxlZDtcclxufVxyXG4vKipcclxuICogQ29uc2VudCBwYXJhbWV0ZXJzIHRvIGRlZmF1bHQgdG8gZHVyaW5nICdndGFnJyBpbml0aWFsaXphdGlvbi5cclxuICovXHJcbmxldCBkZWZhdWx0Q29uc2VudFNldHRpbmdzRm9ySW5pdDtcclxuLyoqXHJcbiAqIFNldHMgdGhlIHZhcmlhYmxlIHtAbGluayBkZWZhdWx0Q29uc2VudFNldHRpbmdzRm9ySW5pdH0gZm9yIHVzZSBpbiB0aGUgaW5pdGlhbGl6YXRpb24gb2ZcclxuICogYW5hbHl0aWNzLlxyXG4gKlxyXG4gKiBAcGFyYW0gY29uc2VudFNldHRpbmdzIE1hcHMgdGhlIGFwcGxpY2FibGUgZW5kIHVzZXIgY29uc2VudCBzdGF0ZSBmb3IgZ3RhZy5qcy5cclxuICovXHJcbmZ1bmN0aW9uIF9zZXRDb25zZW50RGVmYXVsdEZvckluaXQoY29uc2VudFNldHRpbmdzKSB7XHJcbiAgICBkZWZhdWx0Q29uc2VudFNldHRpbmdzRm9ySW5pdCA9IGNvbnNlbnRTZXR0aW5ncztcclxufVxyXG4vKipcclxuICogU2V0cyB0aGUgdmFyaWFibGUgYGRlZmF1bHRFdmVudFBhcmFtZXRlcnNGb3JJbml0YCBmb3IgdXNlIGluIHRoZSBpbml0aWFsaXphdGlvbiBvZlxyXG4gKiBhbmFseXRpY3MuXHJcbiAqXHJcbiAqIEBwYXJhbSBjdXN0b21QYXJhbXMgQW55IGN1c3RvbSBwYXJhbXMgdGhlIHVzZXIgbWF5IHBhc3MgdG8gZ3RhZy5qcy5cclxuICovXHJcbmZ1bmN0aW9uIF9zZXREZWZhdWx0RXZlbnRQYXJhbWV0ZXJzRm9ySW5pdChjdXN0b21QYXJhbXMpIHtcclxuICAgIGRlZmF1bHRFdmVudFBhcmFtZXRlcnNGb3JJbml0ID0gY3VzdG9tUGFyYW1zO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHZhbGlkYXRlSW5kZXhlZERCKCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgaWYgKCFpc0luZGV4ZWREQkF2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgbG9nZ2VyLndhcm4oRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpbmRleGVkZGItdW5hdmFpbGFibGVcIiAvKiBJTkRFWEVEREJfVU5BVkFJTEFCTEUgKi8sIHtcclxuICAgICAgICAgICAgZXJyb3JJbmZvOiAnSW5kZXhlZERCIGlzIG5vdCBhdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudC4nXHJcbiAgICAgICAgfSkubWVzc2FnZSk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImluZGV4ZWRkYi11bmF2YWlsYWJsZVwiIC8qIElOREVYRUREQl9VTkFWQUlMQUJMRSAqLywge1xyXG4gICAgICAgICAgICAgICAgZXJyb3JJbmZvOiAoX2EgPSBlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudG9TdHJpbmcoKVxyXG4gICAgICAgICAgICB9KS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIHRoZSBhbmFseXRpY3MgaW5zdGFuY2UgaW4gZ3RhZy5qcyBieSBjYWxsaW5nIGNvbmZpZyBjb21tYW5kIHdpdGggZmlkLlxyXG4gKlxyXG4gKiBOT1RFOiBXZSBjb21iaW5lIGFuYWx5dGljcyBpbml0aWFsaXphdGlvbiBhbmQgc2V0dGluZyBmaWQgdG9nZXRoZXIgYmVjYXVzZSB3ZSB3YW50IGZpZCB0byBiZVxyXG4gKiBwYXJ0IG9mIHRoZSBgcGFnZV92aWV3YCBldmVudCB0aGF0J3Mgc2VudCBkdXJpbmcgdGhlIGluaXRpYWxpemF0aW9uXHJcbiAqIEBwYXJhbSBhcHAgRmlyZWJhc2UgYXBwXHJcbiAqIEBwYXJhbSBndGFnQ29yZSBUaGUgZ3RhZyBmdW5jdGlvbiB0aGF0J3Mgbm90IHdyYXBwZWQuXHJcbiAqIEBwYXJhbSBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0IEFycmF5IG9mIGFsbCBkeW5hbWljIGNvbmZpZyBwcm9taXNlcy5cclxuICogQHBhcmFtIG1lYXN1cmVtZW50SWRUb0FwcElkIE1hcHMgbWVhc3VyZW1lbnRJRCB0byBhcHBJRC5cclxuICogQHBhcmFtIGluc3RhbGxhdGlvbnMgX0ZpcmViYXNlSW5zdGFsbGF0aW9uc0ludGVybmFsIGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcmV0dXJucyBNZWFzdXJlbWVudCBJRC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9pbml0aWFsaXplQW5hbHl0aWNzKGFwcCwgZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCwgbWVhc3VyZW1lbnRJZFRvQXBwSWQsIGluc3RhbGxhdGlvbnMsIGd0YWdDb3JlLCBkYXRhTGF5ZXJOYW1lLCBvcHRpb25zKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBjb25zdCBkeW5hbWljQ29uZmlnUHJvbWlzZSA9IGZldGNoRHluYW1pY0NvbmZpZ1dpdGhSZXRyeShhcHApO1xyXG4gICAgLy8gT25jZSBmZXRjaGVkLCBtYXAgbWVhc3VyZW1lbnRJZHMgdG8gYXBwSWQsIGZvciBlYXNlIG9mIGxvb2t1cCBpbiB3cmFwcGVkIGd0YWcgZnVuY3Rpb24uXHJcbiAgICBkeW5hbWljQ29uZmlnUHJvbWlzZVxyXG4gICAgICAgIC50aGVuKGNvbmZpZyA9PiB7XHJcbiAgICAgICAgbWVhc3VyZW1lbnRJZFRvQXBwSWRbY29uZmlnLm1lYXN1cmVtZW50SWRdID0gY29uZmlnLmFwcElkO1xyXG4gICAgICAgIGlmIChhcHAub3B0aW9ucy5tZWFzdXJlbWVudElkICYmXHJcbiAgICAgICAgICAgIGNvbmZpZy5tZWFzdXJlbWVudElkICE9PSBhcHAub3B0aW9ucy5tZWFzdXJlbWVudElkKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGBUaGUgbWVhc3VyZW1lbnQgSUQgaW4gdGhlIGxvY2FsIEZpcmViYXNlIGNvbmZpZyAoJHthcHAub3B0aW9ucy5tZWFzdXJlbWVudElkfSlgICtcclxuICAgICAgICAgICAgICAgIGAgZG9lcyBub3QgbWF0Y2ggdGhlIG1lYXN1cmVtZW50IElEIGZldGNoZWQgZnJvbSB0aGUgc2VydmVyICgke2NvbmZpZy5tZWFzdXJlbWVudElkfSkuYCArXHJcbiAgICAgICAgICAgICAgICBgIFRvIGVuc3VyZSBhbmFseXRpY3MgZXZlbnRzIGFyZSBhbHdheXMgc2VudCB0byB0aGUgY29ycmVjdCBBbmFseXRpY3MgcHJvcGVydHksYCArXHJcbiAgICAgICAgICAgICAgICBgIHVwZGF0ZSB0aGVgICtcclxuICAgICAgICAgICAgICAgIGAgbWVhc3VyZW1lbnQgSUQgZmllbGQgaW4gdGhlIGxvY2FsIGNvbmZpZyBvciByZW1vdmUgaXQgZnJvbSB0aGUgbG9jYWwgY29uZmlnLmApO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGUgPT4gbG9nZ2VyLmVycm9yKGUpKTtcclxuICAgIC8vIEFkZCB0byBsaXN0IHRvIHRyYWNrIHN0YXRlIG9mIGFsbCBkeW5hbWljIGNvbmZpZyBwcm9taXNlcy5cclxuICAgIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QucHVzaChkeW5hbWljQ29uZmlnUHJvbWlzZSk7XHJcbiAgICBjb25zdCBmaWRQcm9taXNlID0gdmFsaWRhdGVJbmRleGVkREIoKS50aGVuKGVudklzVmFsaWQgPT4ge1xyXG4gICAgICAgIGlmIChlbnZJc1ZhbGlkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbnN0YWxsYXRpb25zLmdldElkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgY29uc3QgW2R5bmFtaWNDb25maWcsIGZpZF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgZHluYW1pY0NvbmZpZ1Byb21pc2UsXHJcbiAgICAgICAgZmlkUHJvbWlzZVxyXG4gICAgXSk7XHJcbiAgICAvLyBEZXRlY3QgaWYgdXNlciBoYXMgYWxyZWFkeSBwdXQgdGhlIGd0YWcgPHNjcmlwdD4gdGFnIG9uIHRoaXMgcGFnZSB3aXRoIHRoZSBwYXNzZWQgaW5cclxuICAgIC8vIGRhdGEgbGF5ZXIgbmFtZS5cclxuICAgIGlmICghZmluZEd0YWdTY3JpcHRPblBhZ2UoZGF0YUxheWVyTmFtZSkpIHtcclxuICAgICAgICBpbnNlcnRTY3JpcHRUYWcoZGF0YUxheWVyTmFtZSwgZHluYW1pY0NvbmZpZy5tZWFzdXJlbWVudElkKTtcclxuICAgIH1cclxuICAgIC8vIERldGVjdHMgaWYgdGhlcmUgYXJlIGNvbnNlbnQgc2V0dGluZ3MgdGhhdCBuZWVkIHRvIGJlIGNvbmZpZ3VyZWQuXHJcbiAgICBpZiAoZGVmYXVsdENvbnNlbnRTZXR0aW5nc0ZvckluaXQpIHtcclxuICAgICAgICBndGFnQ29yZShcImNvbnNlbnRcIiAvKiBDT05TRU5UICovLCAnZGVmYXVsdCcsIGRlZmF1bHRDb25zZW50U2V0dGluZ3NGb3JJbml0KTtcclxuICAgICAgICBfc2V0Q29uc2VudERlZmF1bHRGb3JJbml0KHVuZGVmaW5lZCk7XHJcbiAgICB9XHJcbiAgICAvLyBUaGlzIGNvbW1hbmQgaW5pdGlhbGl6ZXMgZ3RhZy5qcyBhbmQgb25seSBuZWVkcyB0byBiZSBjYWxsZWQgb25jZSBmb3IgdGhlIGVudGlyZSB3ZWIgYXBwLFxyXG4gICAgLy8gYnV0IHNpbmNlIGl0IGlzIGlkZW1wb3RlbnQsIHdlIGNhbiBjYWxsIGl0IG11bHRpcGxlIHRpbWVzLlxyXG4gICAgLy8gV2Uga2VlcCBpdCB0b2dldGhlciB3aXRoIG90aGVyIGluaXRpYWxpemF0aW9uIGxvZ2ljIGZvciBiZXR0ZXIgY29kZSBzdHJ1Y3R1cmUuXHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgZ3RhZ0NvcmUoJ2pzJywgbmV3IERhdGUoKSk7XHJcbiAgICAvLyBVc2VyIGNvbmZpZyBhZGRlZCBmaXJzdC4gV2UgZG9uJ3Qgd2FudCB1c2VycyB0byBhY2NpZGVudGFsbHkgb3ZlcndyaXRlXHJcbiAgICAvLyBiYXNlIEZpcmViYXNlIGNvbmZpZyBwcm9wZXJ0aWVzLlxyXG4gICAgY29uc3QgY29uZmlnUHJvcGVydGllcyA9IChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5jb25maWcpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9O1xyXG4gICAgLy8gZ3VhcmQgYWdhaW5zdCBkZXZlbG9wZXJzIGFjY2lkZW50YWxseSBzZXR0aW5nIHByb3BlcnRpZXMgd2l0aCBwcmVmaXggYGZpcmViYXNlX2BcclxuICAgIGNvbmZpZ1Byb3BlcnRpZXNbT1JJR0lOX0tFWV0gPSAnZmlyZWJhc2UnO1xyXG4gICAgY29uZmlnUHJvcGVydGllcy51cGRhdGUgPSB0cnVlO1xyXG4gICAgaWYgKGZpZCAhPSBudWxsKSB7XHJcbiAgICAgICAgY29uZmlnUHJvcGVydGllc1tHQV9GSURfS0VZXSA9IGZpZDtcclxuICAgIH1cclxuICAgIC8vIEl0IHNob3VsZCBiZSB0aGUgZmlyc3QgY29uZmlnIGNvbW1hbmQgY2FsbGVkIG9uIHRoaXMgR0EtSURcclxuICAgIC8vIEluaXRpYWxpemUgdGhpcyBHQS1JRCBhbmQgc2V0IEZJRCBvbiBpdCB1c2luZyB0aGUgZ3RhZyBjb25maWcgQVBJLlxyXG4gICAgLy8gTm90ZTogVGhpcyB3aWxsIHRyaWdnZXIgYSBwYWdlX3ZpZXcgZXZlbnQgdW5sZXNzICdzZW5kX3BhZ2VfdmlldycgaXMgc2V0IHRvIGZhbHNlIGluXHJcbiAgICAvLyBgY29uZmlnUHJvcGVydGllc2AuXHJcbiAgICBndGFnQ29yZShcImNvbmZpZ1wiIC8qIENPTkZJRyAqLywgZHluYW1pY0NvbmZpZy5tZWFzdXJlbWVudElkLCBjb25maWdQcm9wZXJ0aWVzKTtcclxuICAgIC8vIERldGVjdHMgaWYgdGhlcmUgaXMgZGF0YSB0aGF0IHdpbGwgYmUgc2V0IG9uIGV2ZXJ5IGV2ZW50IGxvZ2dlZCBmcm9tIHRoZSBTREsuXHJcbiAgICBpZiAoZGVmYXVsdEV2ZW50UGFyYW1ldGVyc0ZvckluaXQpIHtcclxuICAgICAgICBndGFnQ29yZShcInNldFwiIC8qIFNFVCAqLywgZGVmYXVsdEV2ZW50UGFyYW1ldGVyc0ZvckluaXQpO1xyXG4gICAgICAgIF9zZXREZWZhdWx0RXZlbnRQYXJhbWV0ZXJzRm9ySW5pdCh1bmRlZmluZWQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGR5bmFtaWNDb25maWcubWVhc3VyZW1lbnRJZDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQW5hbHl0aWNzIFNlcnZpY2UgY2xhc3MuXHJcbiAqL1xyXG5jbGFzcyBBbmFseXRpY3NTZXJ2aWNlIHtcclxuICAgIGNvbnN0cnVjdG9yKGFwcCkge1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgfVxyXG4gICAgX2RlbGV0ZSgpIHtcclxuICAgICAgICBkZWxldGUgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcFt0aGlzLmFwcC5vcHRpb25zLmFwcElkXTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIE1hcHMgYXBwSWQgdG8gZnVsbCBpbml0aWFsaXphdGlvbiBwcm9taXNlLiBXcmFwcGVkIGd0YWcgY2FsbHMgbXVzdCB3YWl0IG9uXHJcbiAqIGFsbCBvciBzb21lIG9mIHRoZXNlLCBkZXBlbmRpbmcgb24gdGhlIGNhbGwncyBgc2VuZF90b2AgcGFyYW0gYW5kIHRoZSBzdGF0dXNcclxuICogb2YgdGhlIGR5bmFtaWMgY29uZmlnIGZldGNoZXMgKHNlZSBiZWxvdykuXHJcbiAqL1xyXG5sZXQgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCA9IHt9O1xyXG4vKipcclxuICogTGlzdCBvZiBkeW5hbWljIGNvbmZpZyBmZXRjaCBwcm9taXNlcy4gSW4gY2VydGFpbiBjYXNlcywgd3JhcHBlZCBndGFnIGNhbGxzXHJcbiAqIHdhaXQgb24gYWxsIHRoZXNlIHRvIGJlIGNvbXBsZXRlIGluIG9yZGVyIHRvIGRldGVybWluZSBpZiBpdCBjYW4gc2VsZWN0aXZlbHlcclxuICogd2FpdCBmb3Igb25seSBjZXJ0YWluIGluaXRpYWxpemF0aW9uIChGSUQpIHByb21pc2VzIG9yIGlmIGl0IG11c3Qgd2FpdCBmb3IgYWxsLlxyXG4gKi9cclxubGV0IGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QgPSBbXTtcclxuLyoqXHJcbiAqIE1hcHMgZmV0Y2hlZCBtZWFzdXJlbWVudElkcyB0byBhcHBJZC4gUG9wdWxhdGVkIHdoZW4gdGhlIGFwcCdzIGR5bmFtaWMgY29uZmlnXHJcbiAqIGZldGNoIGNvbXBsZXRlcy4gSWYgYWxyZWFkeSBwb3B1bGF0ZWQsIGd0YWcgY29uZmlnIGNhbGxzIGNhbiB1c2UgdGhpcyB0b1xyXG4gKiBzZWxlY3RpdmVseSB3YWl0IGZvciBvbmx5IHRoaXMgYXBwJ3MgaW5pdGlhbGl6YXRpb24gcHJvbWlzZSAoRklEKSBpbnN0ZWFkIG9mIGFsbFxyXG4gKiBpbml0aWFsaXphdGlvbiBwcm9taXNlcy5cclxuICovXHJcbmNvbnN0IG1lYXN1cmVtZW50SWRUb0FwcElkID0ge307XHJcbi8qKlxyXG4gKiBOYW1lIGZvciB3aW5kb3cgZ2xvYmFsIGRhdGEgbGF5ZXIgYXJyYXkgdXNlZCBieSBHQTogZGVmYXVsdHMgdG8gJ2RhdGFMYXllcicuXHJcbiAqL1xyXG5sZXQgZGF0YUxheWVyTmFtZSA9ICdkYXRhTGF5ZXInO1xyXG4vKipcclxuICogTmFtZSBmb3Igd2luZG93IGdsb2JhbCBndGFnIGZ1bmN0aW9uIHVzZWQgYnkgR0E6IGRlZmF1bHRzIHRvICdndGFnJy5cclxuICovXHJcbmxldCBndGFnTmFtZSA9ICdndGFnJztcclxuLyoqXHJcbiAqIFJlcHJvZHVjdGlvbiBvZiBzdGFuZGFyZCBndGFnIGZ1bmN0aW9uIG9yIHJlZmVyZW5jZSB0byBleGlzdGluZ1xyXG4gKiBndGFnIGZ1bmN0aW9uIG9uIHdpbmRvdyBvYmplY3QuXHJcbiAqL1xyXG5sZXQgZ3RhZ0NvcmVGdW5jdGlvbjtcclxuLyoqXHJcbiAqIFdyYXBwZXIgYXJvdW5kIGd0YWcgZnVuY3Rpb24gdGhhdCBlbnN1cmVzIEZJRCBpcyBzZW50IHdpdGggYWxsXHJcbiAqIHJlbGV2YW50IGV2ZW50IGFuZCBjb25maWcgY2FsbHMuXHJcbiAqL1xyXG5sZXQgd3JhcHBlZEd0YWdGdW5jdGlvbjtcclxuLyoqXHJcbiAqIEZsYWcgdG8gZW5zdXJlIHBhZ2UgaW5pdGlhbGl6YXRpb24gc3RlcHMgKGNyZWF0aW9uIG9yIHdyYXBwaW5nIG9mXHJcbiAqIGRhdGFMYXllciBhbmQgZ3RhZyBzY3JpcHQpIGFyZSBvbmx5IHJ1biBvbmNlIHBlciBwYWdlIGxvYWQuXHJcbiAqL1xyXG5sZXQgZ2xvYmFsSW5pdERvbmUgPSBmYWxzZTtcclxuLyoqXHJcbiAqIENvbmZpZ3VyZXMgRmlyZWJhc2UgQW5hbHl0aWNzIHRvIHVzZSBjdXN0b20gYGd0YWdgIG9yIGBkYXRhTGF5ZXJgIG5hbWVzLlxyXG4gKiBJbnRlbmRlZCB0byBiZSB1c2VkIGlmIGBndGFnLmpzYCBzY3JpcHQgaGFzIGJlZW4gaW5zdGFsbGVkIG9uXHJcbiAqIHRoaXMgcGFnZSBpbmRlcGVuZGVudGx5IG9mIEZpcmViYXNlIEFuYWx5dGljcywgYW5kIGlzIHVzaW5nIG5vbi1kZWZhdWx0XHJcbiAqIG5hbWVzIGZvciBlaXRoZXIgdGhlIGBndGFnYCBmdW5jdGlvbiBvciBmb3IgYGRhdGFMYXllcmAuXHJcbiAqIE11c3QgYmUgY2FsbGVkIGJlZm9yZSBjYWxsaW5nIGBnZXRBbmFseXRpY3MoKWAgb3IgaXQgd29uJ3RcclxuICogaGF2ZSBhbnkgZWZmZWN0LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqXHJcbiAqIEBwYXJhbSBvcHRpb25zIC0gQ3VzdG9tIGd0YWcgYW5kIGRhdGFMYXllciBuYW1lcy5cclxuICovXHJcbmZ1bmN0aW9uIHNldHRpbmdzKG9wdGlvbnMpIHtcclxuICAgIGlmIChnbG9iYWxJbml0RG9uZSkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYWxyZWFkeS1pbml0aWFsaXplZFwiIC8qIEFMUkVBRFlfSU5JVElBTElaRUQgKi8pO1xyXG4gICAgfVxyXG4gICAgaWYgKG9wdGlvbnMuZGF0YUxheWVyTmFtZSkge1xyXG4gICAgICAgIGRhdGFMYXllck5hbWUgPSBvcHRpb25zLmRhdGFMYXllck5hbWU7XHJcbiAgICB9XHJcbiAgICBpZiAob3B0aW9ucy5ndGFnTmFtZSkge1xyXG4gICAgICAgIGd0YWdOYW1lID0gb3B0aW9ucy5ndGFnTmFtZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUmV0dXJucyB0cnVlIGlmIG5vIGVudmlyb25tZW50IG1pc21hdGNoIGlzIGZvdW5kLlxyXG4gKiBJZiBlbnZpcm9ubWVudCBtaXNtYXRjaGVzIGFyZSBmb3VuZCwgdGhyb3dzIGFuIElOVkFMSURfQU5BTFlUSUNTX0NPTlRFWFRcclxuICogZXJyb3IgdGhhdCBhbHNvIGxpc3RzIGRldGFpbHMgZm9yIGVhY2ggbWlzbWF0Y2ggZm91bmQuXHJcbiAqL1xyXG5mdW5jdGlvbiB3YXJuT25Ccm93c2VyQ29udGV4dE1pc21hdGNoKCkge1xyXG4gICAgY29uc3QgbWlzbWF0Y2hlZEVudk1lc3NhZ2VzID0gW107XHJcbiAgICBpZiAoaXNCcm93c2VyRXh0ZW5zaW9uKCkpIHtcclxuICAgICAgICBtaXNtYXRjaGVkRW52TWVzc2FnZXMucHVzaCgnVGhpcyBpcyBhIGJyb3dzZXIgZXh0ZW5zaW9uIGVudmlyb25tZW50LicpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhcmVDb29raWVzRW5hYmxlZCgpKSB7XHJcbiAgICAgICAgbWlzbWF0Y2hlZEVudk1lc3NhZ2VzLnB1c2goJ0Nvb2tpZXMgYXJlIG5vdCBhdmFpbGFibGUuJyk7XHJcbiAgICB9XHJcbiAgICBpZiAobWlzbWF0Y2hlZEVudk1lc3NhZ2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb25zdCBkZXRhaWxzID0gbWlzbWF0Y2hlZEVudk1lc3NhZ2VzXHJcbiAgICAgICAgICAgIC5tYXAoKG1lc3NhZ2UsIGluZGV4KSA9PiBgKCR7aW5kZXggKyAxfSkgJHttZXNzYWdlfWApXHJcbiAgICAgICAgICAgIC5qb2luKCcgJyk7XHJcbiAgICAgICAgY29uc3QgZXJyID0gRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpbnZhbGlkLWFuYWx5dGljcy1jb250ZXh0XCIgLyogSU5WQUxJRF9BTkFMWVRJQ1NfQ09OVEVYVCAqLywge1xyXG4gICAgICAgICAgICBlcnJvckluZm86IGRldGFpbHNcclxuICAgICAgICB9KTtcclxuICAgICAgICBsb2dnZXIud2FybihlcnIubWVzc2FnZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEFuYWx5dGljcyBpbnN0YW5jZSBmYWN0b3J5LlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIGZhY3RvcnkoYXBwLCBpbnN0YWxsYXRpb25zLCBvcHRpb25zKSB7XHJcbiAgICB3YXJuT25Ccm93c2VyQ29udGV4dE1pc21hdGNoKCk7XHJcbiAgICBjb25zdCBhcHBJZCA9IGFwcC5vcHRpb25zLmFwcElkO1xyXG4gICAgaWYgKCFhcHBJZCkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tYXBwLWlkXCIgLyogTk9fQVBQX0lEICovKTtcclxuICAgIH1cclxuICAgIGlmICghYXBwLm9wdGlvbnMuYXBpS2V5KSB7XHJcbiAgICAgICAgaWYgKGFwcC5vcHRpb25zLm1lYXN1cmVtZW50SWQpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oYFRoZSBcImFwaUtleVwiIGZpZWxkIGlzIGVtcHR5IGluIHRoZSBsb2NhbCBGaXJlYmFzZSBjb25maWcuIFRoaXMgaXMgbmVlZGVkIHRvIGZldGNoIHRoZSBsYXRlc3RgICtcclxuICAgICAgICAgICAgICAgIGAgbWVhc3VyZW1lbnQgSUQgZm9yIHRoaXMgRmlyZWJhc2UgYXBwLiBGYWxsaW5nIGJhY2sgdG8gdGhlIG1lYXN1cmVtZW50IElEICR7YXBwLm9wdGlvbnMubWVhc3VyZW1lbnRJZH1gICtcclxuICAgICAgICAgICAgICAgIGAgcHJvdmlkZWQgaW4gdGhlIFwibWVhc3VyZW1lbnRJZFwiIGZpZWxkIGluIHRoZSBsb2NhbCBGaXJlYmFzZSBjb25maWcuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLWFwaS1rZXlcIiAvKiBOT19BUElfS0VZICovKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcFthcHBJZF0gIT0gbnVsbCkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYWxyZWFkeS1leGlzdHNcIiAvKiBBTFJFQURZX0VYSVNUUyAqLywge1xyXG4gICAgICAgICAgICBpZDogYXBwSWRcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmICghZ2xvYmFsSW5pdERvbmUpIHtcclxuICAgICAgICAvLyBTdGVwcyBoZXJlIHNob3VsZCBvbmx5IGJlIGRvbmUgb25jZSBwZXIgcGFnZTogY3JlYXRpb24gb3Igd3JhcHBpbmdcclxuICAgICAgICAvLyBvZiBkYXRhTGF5ZXIgYW5kIGdsb2JhbCBndGFnIGZ1bmN0aW9uLlxyXG4gICAgICAgIGdldE9yQ3JlYXRlRGF0YUxheWVyKGRhdGFMYXllck5hbWUpO1xyXG4gICAgICAgIGNvbnN0IHsgd3JhcHBlZEd0YWcsIGd0YWdDb3JlIH0gPSB3cmFwT3JDcmVhdGVHdGFnKGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXAsIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QsIG1lYXN1cmVtZW50SWRUb0FwcElkLCBkYXRhTGF5ZXJOYW1lLCBndGFnTmFtZSk7XHJcbiAgICAgICAgd3JhcHBlZEd0YWdGdW5jdGlvbiA9IHdyYXBwZWRHdGFnO1xyXG4gICAgICAgIGd0YWdDb3JlRnVuY3Rpb24gPSBndGFnQ29yZTtcclxuICAgICAgICBnbG9iYWxJbml0RG9uZSA9IHRydWU7XHJcbiAgICB9XHJcbiAgICAvLyBBc3luYyBidXQgbm9uLWJsb2NraW5nLlxyXG4gICAgLy8gVGhpcyBtYXAgcmVmbGVjdHMgdGhlIGNvbXBsZXRpb24gc3RhdGUgb2YgYWxsIHByb21pc2VzIGZvciBlYWNoIGFwcElkLlxyXG4gICAgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcFthcHBJZF0gPSBfaW5pdGlhbGl6ZUFuYWx5dGljcyhhcHAsIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QsIG1lYXN1cmVtZW50SWRUb0FwcElkLCBpbnN0YWxsYXRpb25zLCBndGFnQ29yZUZ1bmN0aW9uLCBkYXRhTGF5ZXJOYW1lLCBvcHRpb25zKTtcclxuICAgIGNvbnN0IGFuYWx5dGljc0luc3RhbmNlID0gbmV3IEFuYWx5dGljc1NlcnZpY2UoYXBwKTtcclxuICAgIHJldHVybiBhbmFseXRpY3NJbnN0YW5jZTtcclxufVxuXG4vKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55ICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFuIHtAbGluayBBbmFseXRpY3N9IGluc3RhbmNlIGZvciB0aGUgZ2l2ZW4gYXBwLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBUaGUge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IHRvIHVzZS5cclxuICovXHJcbmZ1bmN0aW9uIGdldEFuYWx5dGljcyhhcHAgPSBnZXRBcHAoKSkge1xyXG4gICAgYXBwID0gZ2V0TW9kdWxhckluc3RhbmNlKGFwcCk7XHJcbiAgICAvLyBEZXBlbmRlbmNpZXNcclxuICAgIGNvbnN0IGFuYWx5dGljc1Byb3ZpZGVyID0gX2dldFByb3ZpZGVyKGFwcCwgQU5BTFlUSUNTX1RZUEUpO1xyXG4gICAgaWYgKGFuYWx5dGljc1Byb3ZpZGVyLmlzSW5pdGlhbGl6ZWQoKSkge1xyXG4gICAgICAgIHJldHVybiBhbmFseXRpY3NQcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBpbml0aWFsaXplQW5hbHl0aWNzKGFwcCk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgYW4ge0BsaW5rIEFuYWx5dGljc30gaW5zdGFuY2UgZm9yIHRoZSBnaXZlbiBhcHAuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICpcclxuICogQHBhcmFtIGFwcCAtIFRoZSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gdG8gdXNlLlxyXG4gKi9cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUFuYWx5dGljcyhhcHAsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgLy8gRGVwZW5kZW5jaWVzXHJcbiAgICBjb25zdCBhbmFseXRpY3NQcm92aWRlciA9IF9nZXRQcm92aWRlcihhcHAsIEFOQUxZVElDU19UWVBFKTtcclxuICAgIGlmIChhbmFseXRpY3NQcm92aWRlci5pc0luaXRpYWxpemVkKCkpIHtcclxuICAgICAgICBjb25zdCBleGlzdGluZ0luc3RhbmNlID0gYW5hbHl0aWNzUHJvdmlkZXIuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgaWYgKGRlZXBFcXVhbChvcHRpb25zLCBhbmFseXRpY3NQcm92aWRlci5nZXRPcHRpb25zKCkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ0luc3RhbmNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJhbHJlYWR5LWluaXRpYWxpemVkXCIgLyogQUxSRUFEWV9JTklUSUFMSVpFRCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgYW5hbHl0aWNzSW5zdGFuY2UgPSBhbmFseXRpY3NQcm92aWRlci5pbml0aWFsaXplKHsgb3B0aW9ucyB9KTtcclxuICAgIHJldHVybiBhbmFseXRpY3NJbnN0YW5jZTtcclxufVxyXG4vKipcclxuICogVGhpcyBpcyBhIHB1YmxpYyBzdGF0aWMgbWV0aG9kIHByb3ZpZGVkIHRvIHVzZXJzIHRoYXQgd3JhcHMgZm91ciBkaWZmZXJlbnQgY2hlY2tzOlxyXG4gKlxyXG4gKiAxLiBDaGVjayBpZiBpdCdzIG5vdCBhIGJyb3dzZXIgZXh0ZW5zaW9uIGVudmlyb25tZW50LlxyXG4gKiAyLiBDaGVjayBpZiBjb29raWVzIGFyZSBlbmFibGVkIGluIGN1cnJlbnQgYnJvd3Nlci5cclxuICogMy4gQ2hlY2sgaWYgSW5kZXhlZERCIGlzIHN1cHBvcnRlZCBieSB0aGUgYnJvd3NlciBlbnZpcm9ubWVudC5cclxuICogNC4gQ2hlY2sgaWYgdGhlIGN1cnJlbnQgYnJvd3NlciBjb250ZXh0IGlzIHZhbGlkIGZvciB1c2luZyBgSW5kZXhlZERCLm9wZW4oKWAuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICpcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGlzU3VwcG9ydGVkKCkge1xyXG4gICAgaWYgKGlzQnJvd3NlckV4dGVuc2lvbigpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhcmVDb29raWVzRW5hYmxlZCgpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKCFpc0luZGV4ZWREQkF2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBpc0RCT3BlbmFibGUgPSBhd2FpdCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlKCk7XHJcbiAgICAgICAgcmV0dXJuIGlzREJPcGVuYWJsZTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogVXNlIGd0YWcgYGNvbmZpZ2AgY29tbWFuZCB0byBzZXQgYHNjcmVlbl9uYW1lYC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKlxyXG4gKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIGxvZ0V2ZW50fSB3aXRoIGBldmVudE5hbWVgIGFzICdzY3JlZW5fdmlldycgYW5kIGFkZCByZWxldmFudCBgZXZlbnRQYXJhbXNgLlxyXG4gKiBTZWUge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2FuYWx5dGljcy9zY3JlZW52aWV3cyB8IFRyYWNrIFNjcmVlbnZpZXdzfS5cclxuICpcclxuICogQHBhcmFtIGFuYWx5dGljc0luc3RhbmNlIC0gVGhlIHtAbGluayBBbmFseXRpY3N9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gc2NyZWVuTmFtZSAtIFNjcmVlbiBuYW1lIHRvIHNldC5cclxuICovXHJcbmZ1bmN0aW9uIHNldEN1cnJlbnRTY3JlZW4oYW5hbHl0aWNzSW5zdGFuY2UsIHNjcmVlbk5hbWUsIG9wdGlvbnMpIHtcclxuICAgIGFuYWx5dGljc0luc3RhbmNlID0gZ2V0TW9kdWxhckluc3RhbmNlKGFuYWx5dGljc0luc3RhbmNlKTtcclxuICAgIHNldEN1cnJlbnRTY3JlZW4kMSh3cmFwcGVkR3RhZ0Z1bmN0aW9uLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwW2FuYWx5dGljc0luc3RhbmNlLmFwcC5vcHRpb25zLmFwcElkXSwgc2NyZWVuTmFtZSwgb3B0aW9ucykuY2F0Y2goZSA9PiBsb2dnZXIuZXJyb3IoZSkpO1xyXG59XHJcbi8qKlxyXG4gKiBVc2UgZ3RhZyBgY29uZmlnYCBjb21tYW5kIHRvIHNldCBgdXNlcl9pZGAuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICpcclxuICogQHBhcmFtIGFuYWx5dGljc0luc3RhbmNlIC0gVGhlIHtAbGluayBBbmFseXRpY3N9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gaWQgLSBVc2VyIElEIHRvIHNldC5cclxuICovXHJcbmZ1bmN0aW9uIHNldFVzZXJJZChhbmFseXRpY3NJbnN0YW5jZSwgaWQsIG9wdGlvbnMpIHtcclxuICAgIGFuYWx5dGljc0luc3RhbmNlID0gZ2V0TW9kdWxhckluc3RhbmNlKGFuYWx5dGljc0luc3RhbmNlKTtcclxuICAgIHNldFVzZXJJZCQxKHdyYXBwZWRHdGFnRnVuY3Rpb24sIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbYW5hbHl0aWNzSW5zdGFuY2UuYXBwLm9wdGlvbnMuYXBwSWRdLCBpZCwgb3B0aW9ucykuY2F0Y2goZSA9PiBsb2dnZXIuZXJyb3IoZSkpO1xyXG59XHJcbi8qKlxyXG4gKiBVc2UgZ3RhZyBgY29uZmlnYCBjb21tYW5kIHRvIHNldCBhbGwgcGFyYW1zIHNwZWNpZmllZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2V0VXNlclByb3BlcnRpZXMoYW5hbHl0aWNzSW5zdGFuY2UsIHByb3BlcnRpZXMsIG9wdGlvbnMpIHtcclxuICAgIGFuYWx5dGljc0luc3RhbmNlID0gZ2V0TW9kdWxhckluc3RhbmNlKGFuYWx5dGljc0luc3RhbmNlKTtcclxuICAgIHNldFVzZXJQcm9wZXJ0aWVzJDEod3JhcHBlZEd0YWdGdW5jdGlvbiwgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcFthbmFseXRpY3NJbnN0YW5jZS5hcHAub3B0aW9ucy5hcHBJZF0sIHByb3BlcnRpZXMsIG9wdGlvbnMpLmNhdGNoKGUgPT4gbG9nZ2VyLmVycm9yKGUpKTtcclxufVxyXG4vKipcclxuICogU2V0cyB3aGV0aGVyIEdvb2dsZSBBbmFseXRpY3MgY29sbGVjdGlvbiBpcyBlbmFibGVkIGZvciB0aGlzIGFwcCBvbiB0aGlzIGRldmljZS5cclxuICogU2V0cyBnbG9iYWwgYHdpbmRvd1snZ2EtZGlzYWJsZS1hbmFseXRpY3NJZCddID0gdHJ1ZTtgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICpcclxuICogQHBhcmFtIGFuYWx5dGljc0luc3RhbmNlIC0gVGhlIHtAbGluayBBbmFseXRpY3N9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZW5hYmxlZCAtIElmIHRydWUsIGVuYWJsZXMgY29sbGVjdGlvbiwgaWYgZmFsc2UsIGRpc2FibGVzIGl0LlxyXG4gKi9cclxuZnVuY3Rpb24gc2V0QW5hbHl0aWNzQ29sbGVjdGlvbkVuYWJsZWQoYW5hbHl0aWNzSW5zdGFuY2UsIGVuYWJsZWQpIHtcclxuICAgIGFuYWx5dGljc0luc3RhbmNlID0gZ2V0TW9kdWxhckluc3RhbmNlKGFuYWx5dGljc0luc3RhbmNlKTtcclxuICAgIHNldEFuYWx5dGljc0NvbGxlY3Rpb25FbmFibGVkJDEoaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcFthbmFseXRpY3NJbnN0YW5jZS5hcHAub3B0aW9ucy5hcHBJZF0sIGVuYWJsZWQpLmNhdGNoKGUgPT4gbG9nZ2VyLmVycm9yKGUpKTtcclxufVxyXG4vKipcclxuICogQWRkcyBkYXRhIHRoYXQgd2lsbCBiZSBzZXQgb24gZXZlcnkgZXZlbnQgbG9nZ2VkIGZyb20gdGhlIFNESywgaW5jbHVkaW5nIGF1dG9tYXRpYyBvbmVzLlxyXG4gKiBXaXRoIGd0YWcncyBcInNldFwiIGNvbW1hbmQsIHRoZSB2YWx1ZXMgcGFzc2VkIHBlcnNpc3Qgb24gdGhlIGN1cnJlbnQgcGFnZSBhbmQgYXJlIHBhc3NlZCB3aXRoXHJcbiAqIGFsbCBzdWJzZXF1ZW50IGV2ZW50cy5cclxuICogQHB1YmxpY1xyXG4gKiBAcGFyYW0gY3VzdG9tUGFyYW1zIC0gQW55IGN1c3RvbSBwYXJhbXMgdGhlIHVzZXIgbWF5IHBhc3MgdG8gZ3RhZy5qcy5cclxuICovXHJcbmZ1bmN0aW9uIHNldERlZmF1bHRFdmVudFBhcmFtZXRlcnMoY3VzdG9tUGFyYW1zKSB7XHJcbiAgICAvLyBDaGVjayBpZiByZWZlcmVuY2UgdG8gZXhpc3RpbmcgZ3RhZyBmdW5jdGlvbiBvbiB3aW5kb3cgb2JqZWN0IGV4aXN0c1xyXG4gICAgaWYgKHdyYXBwZWRHdGFnRnVuY3Rpb24pIHtcclxuICAgICAgICB3cmFwcGVkR3RhZ0Z1bmN0aW9uKFwic2V0XCIgLyogU0VUICovLCBjdXN0b21QYXJhbXMpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgX3NldERlZmF1bHRFdmVudFBhcmFtZXRlcnNGb3JJbml0KGN1c3RvbVBhcmFtcyk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFNlbmRzIGEgR29vZ2xlIEFuYWx5dGljcyBldmVudCB3aXRoIGdpdmVuIGBldmVudFBhcmFtc2AuIFRoaXMgbWV0aG9kXHJcbiAqIGF1dG9tYXRpY2FsbHkgYXNzb2NpYXRlcyB0aGlzIGxvZ2dlZCBldmVudCB3aXRoIHRoaXMgRmlyZWJhc2Ugd2ViXHJcbiAqIGFwcCBpbnN0YW5jZSBvbiB0aGlzIGRldmljZS5cclxuICogTGlzdCBvZiBvZmZpY2lhbCBldmVudCBwYXJhbWV0ZXJzIGNhbiBiZSBmb3VuZCBpbiB0aGUgZ3RhZy5qc1xyXG4gKiByZWZlcmVuY2UgZG9jdW1lbnRhdGlvbjpcclxuICoge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2d0YWdqcy9yZWZlcmVuY2UvZ2E0LWV2ZW50c1xyXG4gKiB8IHRoZSBHQTQgcmVmZXJlbmNlIGRvY3VtZW50YXRpb259LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBsb2dFdmVudChhbmFseXRpY3NJbnN0YW5jZSwgZXZlbnROYW1lLCBldmVudFBhcmFtcywgb3B0aW9ucykge1xyXG4gICAgYW5hbHl0aWNzSW5zdGFuY2UgPSBnZXRNb2R1bGFySW5zdGFuY2UoYW5hbHl0aWNzSW5zdGFuY2UpO1xyXG4gICAgbG9nRXZlbnQkMSh3cmFwcGVkR3RhZ0Z1bmN0aW9uLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwW2FuYWx5dGljc0luc3RhbmNlLmFwcC5vcHRpb25zLmFwcElkXSwgZXZlbnROYW1lLCBldmVudFBhcmFtcywgb3B0aW9ucykuY2F0Y2goZSA9PiBsb2dnZXIuZXJyb3IoZSkpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIHRoZSBhcHBsaWNhYmxlIGVuZCB1c2VyIGNvbnNlbnQgc3RhdGUgZm9yIHRoaXMgd2ViIGFwcCBhY3Jvc3MgYWxsIGd0YWcgcmVmZXJlbmNlcyBvbmNlXHJcbiAqIEZpcmViYXNlIEFuYWx5dGljcyBpcyBpbml0aWFsaXplZC5cclxuICpcclxuICogVXNlIHRoZSB7QGxpbmsgQ29uc2VudFNldHRpbmdzfSB0byBzcGVjaWZ5IGluZGl2aWR1YWwgY29uc2VudCB0eXBlIHZhbHVlcy4gQnkgZGVmYXVsdCBjb25zZW50XHJcbiAqIHR5cGVzIGFyZSBzZXQgdG8gXCJncmFudGVkXCIuXHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIGNvbnNlbnRTZXR0aW5ncyAtIE1hcHMgdGhlIGFwcGxpY2FibGUgZW5kIHVzZXIgY29uc2VudCBzdGF0ZSBmb3IgZ3RhZy5qcy5cclxuICovXHJcbmZ1bmN0aW9uIHNldENvbnNlbnQoY29uc2VudFNldHRpbmdzKSB7XHJcbiAgICAvLyBDaGVjayBpZiByZWZlcmVuY2UgdG8gZXhpc3RpbmcgZ3RhZyBmdW5jdGlvbiBvbiB3aW5kb3cgb2JqZWN0IGV4aXN0c1xyXG4gICAgaWYgKHdyYXBwZWRHdGFnRnVuY3Rpb24pIHtcclxuICAgICAgICB3cmFwcGVkR3RhZ0Z1bmN0aW9uKFwiY29uc2VudFwiIC8qIENPTlNFTlQgKi8sICd1cGRhdGUnLCBjb25zZW50U2V0dGluZ3MpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgX3NldENvbnNlbnREZWZhdWx0Rm9ySW5pdChjb25zZW50U2V0dGluZ3MpO1xyXG4gICAgfVxyXG59XG5cbmNvbnN0IG5hbWUgPSBcIkBmaXJlYmFzZS9hbmFseXRpY3NcIjtcbmNvbnN0IHZlcnNpb24gPSBcIjAuOC4zXCI7XG5cbi8qKlxyXG4gKiBGaXJlYmFzZSBBbmFseXRpY3NcclxuICpcclxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlckFuYWx5dGljcygpIHtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KEFOQUxZVElDU19UWVBFLCAoY29udGFpbmVyLCB7IG9wdGlvbnM6IGFuYWx5dGljc09wdGlvbnMgfSkgPT4ge1xyXG4gICAgICAgIC8vIGdldEltbWVkaWF0ZSBmb3IgRmlyZWJhc2VBcHAgd2lsbCBhbHdheXMgc3VjY2VlZFxyXG4gICAgICAgIGNvbnN0IGFwcCA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgY29uc3QgaW5zdGFsbGF0aW9ucyA9IGNvbnRhaW5lclxyXG4gICAgICAgICAgICAuZ2V0UHJvdmlkZXIoJ2luc3RhbGxhdGlvbnMtaW50ZXJuYWwnKVxyXG4gICAgICAgICAgICAuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgcmV0dXJuIGZhY3RvcnkoYXBwLCBpbnN0YWxsYXRpb25zLCBhbmFseXRpY3NPcHRpb25zKTtcclxuICAgIH0sIFwiUFVCTElDXCIgLyogUFVCTElDICovKSk7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudCgnYW5hbHl0aWNzLWludGVybmFsJywgaW50ZXJuYWxGYWN0b3J5LCBcIlBSSVZBVEVcIiAvKiBQUklWQVRFICovKSk7XHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbik7XHJcbiAgICAvLyBCVUlMRF9UQVJHRVQgd2lsbCBiZSByZXBsYWNlZCBieSB2YWx1ZXMgbGlrZSBlc201LCBlc20yMDE3LCBjanM1LCBldGMgZHVyaW5nIHRoZSBjb21waWxhdGlvblxyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sICdlc20yMDE3Jyk7XHJcbiAgICBmdW5jdGlvbiBpbnRlcm5hbEZhY3RvcnkoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgYW5hbHl0aWNzID0gY29udGFpbmVyLmdldFByb3ZpZGVyKEFOQUxZVElDU19UWVBFKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGxvZ0V2ZW50OiAoZXZlbnROYW1lLCBldmVudFBhcmFtcywgb3B0aW9ucykgPT4gbG9nRXZlbnQoYW5hbHl0aWNzLCBldmVudE5hbWUsIGV2ZW50UGFyYW1zLCBvcHRpb25zKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImludGVyb3AtY29tcG9uZW50LXJlZy1mYWlsZWRcIiAvKiBJTlRFUk9QX0NPTVBPTkVOVF9SRUdfRkFJTEVEICovLCB7XHJcbiAgICAgICAgICAgICAgICByZWFzb246IGVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbnJlZ2lzdGVyQW5hbHl0aWNzKCk7XG5cbmV4cG9ydCB7IGdldEFuYWx5dGljcywgaW5pdGlhbGl6ZUFuYWx5dGljcywgaXNTdXBwb3J0ZWQsIGxvZ0V2ZW50LCBzZXRBbmFseXRpY3NDb2xsZWN0aW9uRW5hYmxlZCwgc2V0Q29uc2VudCwgc2V0Q3VycmVudFNjcmVlbiwgc2V0RGVmYXVsdEV2ZW50UGFyYW1ldGVycywgc2V0VXNlcklkLCBzZXRVc2VyUHJvcGVydGllcywgc2V0dGluZ3MgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCIvLyB0aGlzIGlzIHdoZXJlIHdlIGNhbiBoYXZlIHRoZSBjbGFzc2VzIGFuZCBmdW5jdGlvbnMgZm9yIGJ1aWxkaW5nIHRoZSBldmVudHNcbi8vIHRvIHNlbmQgdG8gYW4gYW5hbHl0aWNzIHJlY29yZGVyIChmaXJlYmFzZT8gbHJzPylcblxuaW1wb3J0IHsgcURhdGEsIGFuc3dlckRhdGEgfSBmcm9tICcuL3F1ZXN0aW9uRGF0YSc7XG5pbXBvcnQgeyBsb2dFdmVudCB9IGZyb20gJ2ZpcmViYXNlL2FuYWx5dGljcyc7XG5pbXBvcnQgeyBidWNrZXQgfSBmcm9tICcuLi9hc3Nlc3NtZW50L2J1Y2tldERhdGEnO1xuXG4vLyBDcmVhdGUgYSBzaW5nbGV0b24gY2xhc3MgZm9yIHRoZSBhbmFseXRpY3MgZXZlbnRzXG5leHBvcnQgY2xhc3MgQW5hbHl0aWNzRXZlbnRzIHtcbiAgcHJvdGVjdGVkIHN0YXRpYyB1dWlkOiBzdHJpbmc7XG4gIHByb3RlY3RlZCBzdGF0aWMgdXNlclNvdXJjZTogc3RyaW5nO1xuICBwcm90ZWN0ZWQgc3RhdGljIGNsYXQ7XG4gIHByb3RlY3RlZCBzdGF0aWMgY2xvbjtcbiAgcHJvdGVjdGVkIHN0YXRpYyBnYW5hO1xuICBwcm90ZWN0ZWQgc3RhdGljIGxhdGxvbmc7XG4gIC8vIHZhciBjaXR5LCByZWdpb24sIGNvdW50cnk7XG4gIHByb3RlY3RlZCBzdGF0aWMgZGF0YVVSTDtcblxuICBwcm90ZWN0ZWQgc3RhdGljIGFwcFZlcnNpb247XG4gIHByb3RlY3RlZCBzdGF0aWMgY29udGVudFZlcnNpb247XG5cbiAgcHJvdGVjdGVkIHN0YXRpYyBhc3Nlc3NtZW50VHlwZTogc3RyaW5nO1xuXG4gIHN0YXRpYyBpbnN0YW5jZTogQW5hbHl0aWNzRXZlbnRzO1xuXG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7XG4gICAgLy8gSW5pdGlhbGl6ZSB0aGUgY2xhc3NcbiAgfVxuXG4gIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBBbmFseXRpY3NFdmVudHMge1xuICAgIGlmICghQW5hbHl0aWNzRXZlbnRzLmluc3RhbmNlKSB7XG4gICAgICBBbmFseXRpY3NFdmVudHMuaW5zdGFuY2UgPSBuZXcgQW5hbHl0aWNzRXZlbnRzKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIEFuYWx5dGljc0V2ZW50cy5pbnN0YW5jZTtcbiAgfVxuXG4gIHN0YXRpYyBzZXRBc3Nlc3NtZW50VHlwZShhc3Nlc3NtZW50VHlwZTogc3RyaW5nKTogdm9pZCB7XG4gICAgQW5hbHl0aWNzRXZlbnRzLmFzc2Vzc21lbnRUeXBlID0gYXNzZXNzbWVudFR5cGU7XG4gIH1cblxuICAvLyBHZXQgTG9jYXRpb25cbiAgc3RhdGljIGdldExvY2F0aW9uKCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKCdzdGFydGluZyB0byBnZXQgbG9jYXRpb24nKTtcbiAgICBmZXRjaChgaHR0cHM6Ly9pcGluZm8uaW8vanNvbj90b2tlbj1iNjI2ODcyNzE3ODYxMGApXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ2dvdCBsb2NhdGlvbiByZXNwb25zZScpO1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgdGhyb3cgRXJyb3IocmVzcG9uc2Uuc3RhdHVzVGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIH0pXG4gICAgICAudGhlbigoanNvblJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGpzb25SZXNwb25zZSk7XG4gICAgICAgIEFuYWx5dGljc0V2ZW50cy5sYXRsb25nID0ganNvblJlc3BvbnNlLmxvYztcbiAgICAgICAgdmFyIGxwaWVjZXMgPSBBbmFseXRpY3NFdmVudHMubGF0bG9uZy5zcGxpdCgnLCcpO1xuICAgICAgICB2YXIgbGF0ID0gcGFyc2VGbG9hdChscGllY2VzWzBdKS50b0ZpeGVkKDIpO1xuICAgICAgICB2YXIgbG9uID0gcGFyc2VGbG9hdChscGllY2VzWzFdKS50b0ZpeGVkKDEpO1xuICAgICAgICBBbmFseXRpY3NFdmVudHMuY2xhdCA9IGxhdDtcbiAgICAgICAgQW5hbHl0aWNzRXZlbnRzLmNsb24gPSBsb247XG4gICAgICAgIEFuYWx5dGljc0V2ZW50cy5sYXRsb25nID0gJyc7XG4gICAgICAgIGxwaWVjZXMgPSBbXTtcbiAgICAgICAgLy8gY2l0eSA9IGpzb25SZXNwb25zZS5jaXR5O1xuICAgICAgICAvLyByZWdpb24gPSBqc29uUmVzcG9uc2UucmVnaW9uO1xuICAgICAgICAvLyBjb3VudHJ5ID0ganNvblJlc3BvbnNlLmNvdW50cnk7XG4gICAgICAgIEFuYWx5dGljc0V2ZW50cy5zZW5kTG9jYXRpb24oKTtcblxuICAgICAgICByZXR1cm4ge307XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS53YXJuKGBsb2NhdGlvbiBmYWlsZWQgdG8gdXBkYXRlISBlbmNvdW50ZXJlZCBlcnJvciAke2Vyci5tc2d9YCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8vIExpbmsgQW5hbHl0aWNzXG4gIHN0YXRpYyBsaW5rQW5hbHl0aWNzKG5ld2dhbmEsIGRhdGF1cmwpOiB2b2lkIHtcbiAgICBBbmFseXRpY3NFdmVudHMuZ2FuYSA9IG5ld2dhbmE7XG4gICAgQW5hbHl0aWNzRXZlbnRzLmRhdGFVUkwgPSBkYXRhdXJsO1xuICB9XG5cbiAgLy8gU2V0IFVVSURcbiAgc3RhdGljIHNldFV1aWQobmV3VXVpZDogc3RyaW5nLCBuZXdVc2VyU291cmNlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBBbmFseXRpY3NFdmVudHMudXVpZCA9IG5ld1V1aWQ7XG4gICAgQW5hbHl0aWNzRXZlbnRzLnVzZXJTb3VyY2UgPSBuZXdVc2VyU291cmNlO1xuICB9XG5cbiAgLy8gU2VuZCBJbml0XG4gIHN0YXRpYyBzZW5kSW5pdChhcHBWZXJzaW9uOiBzdHJpbmcsIGNvbnRlbnRWZXJzaW9uOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBBbmFseXRpY3NFdmVudHMuYXBwVmVyc2lvbiA9IGFwcFZlcnNpb247XG4gICAgQW5hbHl0aWNzRXZlbnRzLmNvbnRlbnRWZXJzaW9uID0gY29udGVudFZlcnNpb247XG5cbiAgICBBbmFseXRpY3NFdmVudHMuZ2V0TG9jYXRpb24oKTtcblxuICAgIHZhciBldmVudFN0cmluZyA9ICd1c2VyICcgKyBBbmFseXRpY3NFdmVudHMudXVpZCArICcgb3BlbmVkIHRoZSBhc3Nlc3NtZW50JztcblxuICAgIGNvbnNvbGUubG9nKGV2ZW50U3RyaW5nKTtcblxuICAgIGxvZ0V2ZW50KEFuYWx5dGljc0V2ZW50cy5nYW5hLCAnb3BlbmVkJywge30pO1xuICB9XG5cbiAgLy8gR2V0IEFwcCBMYW5ndWFnZSBGcm9tIERhdGEgVVJMXG4gIHN0YXRpYyBnZXRBcHBMYW5ndWFnZUZyb21EYXRhVVJMKGFwcFR5cGU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gQ2hlY2sgaWYgYXBwIHR5cGUgaXMgbm90IGVtcHR5IGFuZCBzcGxpdCB0aGUgc3RyaW5nIGJ5IHRoZSBoeXBoZW4gdGhlbiByZXR1cm4gdGhlIGZpcnN0IGVsZW1lbnRcbiAgICBpZiAoYXBwVHlwZSAmJiBhcHBUeXBlICE9PSAnJyAmJiBhcHBUeXBlLmluY2x1ZGVzKCctJykpIHtcbiAgICAgIGxldCBsYW5ndWFnZTpzdHJpbmc9YXBwVHlwZS5zcGxpdCgnLScpLnNsaWNlKDAsIC0xKS5qb2luKCctJyk7XG4gICAgICBpZihsYW5ndWFnZS5pbmNsdWRlcyhcIndlc3QtYWZyaWNhblwiKSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIj4+Pj4+Pj4+Pj4+Pj5cIixsYW5ndWFnZSk7XG4gICAgICAgIHJldHVybiBcIndlc3QtYWZyaWNhbi1lbmdsaXNoXCJcbiAgICAgIH1lbHNle1xuICAgICAgY29uc29sZS5sb2coXCI+Pj4+Pj4+Pj4+Pj4+XCIsbGFuZ3VhZ2UpO1xuICAgICAgcmV0dXJuIGxhbmd1YWdlO1xuICAgIH19XG5cbiAgICByZXR1cm4gJ05vdEF2YWlsYWJsZSc7XG4gIH1cblxuICAvLyBHZXQgQXBwIFR5cGUgRnJvbSBEYXRhIFVSTFxuICBzdGF0aWMgZ2V0QXBwVHlwZUZyb21EYXRhVVJMKGFwcFR5cGU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gQ2hlY2sgaWYgYXBwIHR5cGUgaXMgbm90IGVtcHR5IGFuZCBzcGxpdCB0aGUgc3RyaW5nIGJ5IHRoZSBoeXBoZW4gdGhlbiByZXR1cm4gdGhlIGxhc3QgZWxlbWVudFxuICAgIGlmIChhcHBUeXBlICYmIGFwcFR5cGUgIT09ICcnICYmIGFwcFR5cGUuaW5jbHVkZXMoJy0nKSkge1xuICAgICAgcmV0dXJuIGFwcFR5cGUuc3BsaXQoJy0nKVsxXTtcbiAgICB9XG5cbiAgICByZXR1cm4gJ05vdEF2YWlsYWJsZSc7XG4gIH1cblxuICAvLyBTZW5kIExvY2F0aW9uXG4gIHN0YXRpYyBzZW5kTG9jYXRpb24oKTogdm9pZCB7XG4gICAgdmFyIGV2ZW50U3RyaW5nID1cbiAgICAgICdTZW5kaW5nIFVzZXIgY29vcmRpbmF0ZXM6ICcgK1xuICAgICAgQW5hbHl0aWNzRXZlbnRzLnV1aWQgK1xuICAgICAgJyA6ICcgK1xuICAgICAgQW5hbHl0aWNzRXZlbnRzLmNsYXQgK1xuICAgICAgJywgJyArXG4gICAgICBBbmFseXRpY3NFdmVudHMuY2xvbjtcbiAgICBjb25zb2xlLmxvZyhldmVudFN0cmluZyk7XG5cbiAgICBsb2dFdmVudChBbmFseXRpY3NFdmVudHMuZ2FuYSwgJ3VzZXJfbG9jYXRpb24nLCB7XG4gICAgICB1c2VyOiBBbmFseXRpY3NFdmVudHMudXVpZCxcbiAgICAgIGxhbmc6IEFuYWx5dGljc0V2ZW50cy5nZXRBcHBMYW5ndWFnZUZyb21EYXRhVVJMKEFuYWx5dGljc0V2ZW50cy5kYXRhVVJMKSxcbiAgICAgIGFwcDogQW5hbHl0aWNzRXZlbnRzLmdldEFwcFR5cGVGcm9tRGF0YVVSTChBbmFseXRpY3NFdmVudHMuZGF0YVVSTCksXG4gICAgICBsYXRsb25nOiBBbmFseXRpY3NFdmVudHMuam9pbkxhdExvbmcoXG4gICAgICAgIEFuYWx5dGljc0V2ZW50cy5jbGF0LFxuICAgICAgICBBbmFseXRpY3NFdmVudHMuY2xvblxuICAgICAgKSxcbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKCdJTklUSUFMSVpFRCBFVkVOVCBTRU5UJyk7XG4gICAgY29uc29sZS5sb2coXG4gICAgICAnQXBwIExhbmd1YWdlOiAnICtcbiAgICAgICAgQW5hbHl0aWNzRXZlbnRzLmdldEFwcExhbmd1YWdlRnJvbURhdGFVUkwoQW5hbHl0aWNzRXZlbnRzLmRhdGFVUkwpXG4gICAgKTtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgICdBcHAgVHlwZTogJyArXG4gICAgICAgIEFuYWx5dGljc0V2ZW50cy5nZXRBcHBUeXBlRnJvbURhdGFVUkwoQW5hbHl0aWNzRXZlbnRzLmRhdGFVUkwpXG4gICAgKTtcbiAgICBjb25zb2xlLmxvZygnQXBwIFZlcnNpb246ICcgKyBBbmFseXRpY3NFdmVudHMuYXBwVmVyc2lvbik7XG4gICAgY29uc29sZS5sb2coJ0NvbnRlbnQgVmVyc2lvbjogJyArIEFuYWx5dGljc0V2ZW50cy5jb250ZW50VmVyc2lvbik7XG5cbiAgICBsb2dFdmVudChBbmFseXRpY3NFdmVudHMuZ2FuYSwgJ2luaXRpYWxpemVkJywge1xuICAgICAgdHlwZTogJ2luaXRpYWxpemVkJyxcbiAgICAgIGNsVXNlcklkOiBBbmFseXRpY3NFdmVudHMudXVpZCxcbiAgICAgIHVzZXJTb3VyY2U6IEFuYWx5dGljc0V2ZW50cy51c2VyU291cmNlLFxuICAgICAgbGF0TG9uZzogQW5hbHl0aWNzRXZlbnRzLmpvaW5MYXRMb25nKFxuICAgICAgICBBbmFseXRpY3NFdmVudHMuY2xhdCxcbiAgICAgICAgQW5hbHl0aWNzRXZlbnRzLmNsb25cbiAgICAgICksXG4gICAgICBhcHBWZXJzaW9uOiBBbmFseXRpY3NFdmVudHMuYXBwVmVyc2lvbixcbiAgICAgIGNvbnRlbnRWZXJzaW9uOiBBbmFseXRpY3NFdmVudHMuY29udGVudFZlcnNpb24sXG4gICAgICAvLyBjaXR5OiBjaXR5LFxuICAgICAgLy8gcmVnaW9uOiByZWdpb24sXG4gICAgICAvLyBjb3VudHJ5OiBjb3VudHJ5LFxuICAgICAgYXBwOiBBbmFseXRpY3NFdmVudHMuZ2V0QXBwVHlwZUZyb21EYXRhVVJMKEFuYWx5dGljc0V2ZW50cy5kYXRhVVJMKSxcbiAgICAgIGxhbmc6IEFuYWx5dGljc0V2ZW50cy5nZXRBcHBMYW5ndWFnZUZyb21EYXRhVVJMKEFuYWx5dGljc0V2ZW50cy5kYXRhVVJMKSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFNlbmQgQW5zd2VyZWRcbiAgc3RhdGljIHNlbmRBbnN3ZXJlZCh0aGVROiBxRGF0YSwgdGhlQTogbnVtYmVyLCBlbGFwc2VkOiBudW1iZXIpOiB2b2lkIHtcbiAgICB2YXIgYW5zID0gdGhlUS5hbnN3ZXJzW3RoZUEgLSAxXTtcblxuICAgIHZhciBpc2NvcnJlY3QgPSBudWxsO1xuICAgIHZhciBidWNrZXQgPSBudWxsO1xuICAgIGlmICgnY29ycmVjdCcgaW4gdGhlUSkge1xuICAgICAgaWYgKHRoZVEuY29ycmVjdCAhPSBudWxsKSB7XG4gICAgICAgIGlmICh0aGVRLmNvcnJlY3QgPT0gYW5zLmFuc3dlck5hbWUpIHtcbiAgICAgICAgICBpc2NvcnJlY3QgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlzY29ycmVjdCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICgnYnVja2V0JyBpbiB0aGVRKSB7XG4gICAgICBidWNrZXQgPSB0aGVRLmJ1Y2tldDtcbiAgICB9XG4gICAgdmFyIGV2ZW50U3RyaW5nID1cbiAgICAgICd1c2VyICcgK1xuICAgICAgQW5hbHl0aWNzRXZlbnRzLnV1aWQgK1xuICAgICAgJyBhbnN3ZXJlZCAnICtcbiAgICAgIHRoZVEucU5hbWUgK1xuICAgICAgJyB3aXRoICcgK1xuICAgICAgYW5zLmFuc3dlck5hbWU7XG4gICAgZXZlbnRTdHJpbmcgKz0gJywgYWxsIGFuc3dlcnMgd2VyZSBbJztcbiAgICB2YXIgb3B0cyA9ICcnO1xuICAgIGZvciAodmFyIGFOdW0gaW4gdGhlUS5hbnN3ZXJzKSB7XG4gICAgICBldmVudFN0cmluZyArPSB0aGVRLmFuc3dlcnNbYU51bV0uYW5zd2VyTmFtZSArICcsJztcbiAgICAgIG9wdHMgKz0gdGhlUS5hbnN3ZXJzW2FOdW1dLmFuc3dlck5hbWUgKyAnLCc7XG4gICAgfVxuICAgIGV2ZW50U3RyaW5nICs9ICddICc7XG4gICAgZXZlbnRTdHJpbmcgKz0gaXNjb3JyZWN0O1xuICAgIGV2ZW50U3RyaW5nICs9IGJ1Y2tldDtcbiAgICBjb25zb2xlLmxvZyhldmVudFN0cmluZyk7XG4gICAgY29uc29sZS5sb2coJ0Fuc3dlcmVkIEFwcCBWZXJzaW9uOiAnICsgQW5hbHl0aWNzRXZlbnRzLmFwcFZlcnNpb24pO1xuICAgIGNvbnNvbGUubG9nKCdDb250ZW50IFZlcnNpb246ICcgKyBBbmFseXRpY3NFdmVudHMuY29udGVudFZlcnNpb24pO1xuXG4gICAgbG9nRXZlbnQoQW5hbHl0aWNzRXZlbnRzLmdhbmEsICdhbnN3ZXJlZCcsIHtcbiAgICAgIHR5cGU6ICdhbnN3ZXJlZCcsXG4gICAgICBjbFVzZXJJZDogQW5hbHl0aWNzRXZlbnRzLnV1aWQsXG4gICAgICB1c2VyU291cmNlOiBBbmFseXRpY3NFdmVudHMudXNlclNvdXJjZSxcbiAgICAgIGxhdExvbmc6IEFuYWx5dGljc0V2ZW50cy5qb2luTGF0TG9uZyhcbiAgICAgICAgQW5hbHl0aWNzRXZlbnRzLmNsYXQsXG4gICAgICAgIEFuYWx5dGljc0V2ZW50cy5jbG9uXG4gICAgICApLFxuICAgICAgLy8gY2l0eTogY2l0eSxcbiAgICAgIC8vIHJlZ2lvbjogcmVnaW9uLFxuICAgICAgLy8gY291bnRyeTogY291bnRyeSxcbiAgICAgIGFwcDogQW5hbHl0aWNzRXZlbnRzLmdldEFwcFR5cGVGcm9tRGF0YVVSTChBbmFseXRpY3NFdmVudHMuZGF0YVVSTCksXG4gICAgICBsYW5nOiBBbmFseXRpY3NFdmVudHMuZ2V0QXBwTGFuZ3VhZ2VGcm9tRGF0YVVSTChBbmFseXRpY3NFdmVudHMuZGF0YVVSTCksXG4gICAgICBkdDogZWxhcHNlZCxcbiAgICAgIHF1ZXN0aW9uX251bWJlcjogdGhlUS5xTnVtYmVyLFxuICAgICAgdGFyZ2V0OiB0aGVRLnFUYXJnZXQsXG4gICAgICBxdWVzdGlvbjogdGhlUS5wcm9tcHRUZXh0LFxuICAgICAgc2VsZWN0ZWRfYW5zd2VyOiBhbnMuYW5zd2VyTmFtZSxcbiAgICAgIGlzY29ycmVjdDogaXNjb3JyZWN0LFxuICAgICAgb3B0aW9uczogb3B0cyxcbiAgICAgIGJ1Y2tldDogYnVja2V0LFxuICAgICAgYXBwVmVyc2lvbjogQW5hbHl0aWNzRXZlbnRzLmFwcFZlcnNpb24sXG4gICAgICBjb250ZW50VmVyc2lvbjogQW5hbHl0aWNzRXZlbnRzLmNvbnRlbnRWZXJzaW9uLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gU2VuZCBCdWNrZXRcbiAgc3RhdGljIHNlbmRCdWNrZXQodGI6IGJ1Y2tldCwgcGFzc2VkOiBib29sZWFuKTogdm9pZCB7XG4gICAgdmFyIGJuID0gdGIuYnVja2V0SUQ7XG4gICAgdmFyIGJ0cmllZCA9IHRiLm51bVRyaWVkO1xuICAgIHZhciBiY29ycmVjdCA9IHRiLm51bUNvcnJlY3Q7XG5cbiAgICB2YXIgZXZlbnRTdHJpbmcgPVxuICAgICAgJ3VzZXIgJyArXG4gICAgICBBbmFseXRpY3NFdmVudHMudXVpZCArXG4gICAgICAnIGZpbmlzaGVkIHRoZSBidWNrZXQgJyArXG4gICAgICBibiArXG4gICAgICAnIHdpdGggJyArXG4gICAgICBiY29ycmVjdCArXG4gICAgICAnIGNvcnJlY3QgYW5zd2VycyBvdXQgb2YgJyArXG4gICAgICBidHJpZWQgK1xuICAgICAgJyB0cmllZCcgK1xuICAgICAgJyBhbmQgcGFzc2VkOiAnICtcbiAgICAgIHBhc3NlZDtcbiAgICBjb25zb2xlLmxvZyhldmVudFN0cmluZyk7XG4gICAgY29uc29sZS5sb2coJ0J1Y2tldCBDb21wbGV0ZWQgQXBwIFZlcnNpb246ICcgKyBBbmFseXRpY3NFdmVudHMuYXBwVmVyc2lvbik7XG4gICAgY29uc29sZS5sb2coJ0NvbnRlbnQgVmVyc2lvbjogJyArIEFuYWx5dGljc0V2ZW50cy5jb250ZW50VmVyc2lvbik7XG5cbiAgICBsb2dFdmVudChBbmFseXRpY3NFdmVudHMuZ2FuYSwgJ2J1Y2tldENvbXBsZXRlZCcsIHtcbiAgICAgIHR5cGU6ICdidWNrZXRDb21wbGV0ZWQnLFxuICAgICAgY2xVc2VySWQ6IEFuYWx5dGljc0V2ZW50cy51dWlkLFxuICAgICAgdXNlclNvdXJjZTogQW5hbHl0aWNzRXZlbnRzLnVzZXJTb3VyY2UsXG4gICAgICBsYXRMb25nOiBBbmFseXRpY3NFdmVudHMuam9pbkxhdExvbmcoXG4gICAgICAgIEFuYWx5dGljc0V2ZW50cy5jbGF0LFxuICAgICAgICBBbmFseXRpY3NFdmVudHMuY2xvblxuICAgICAgKSxcbiAgICAgIC8vIGNpdHk6IGNpdHksXG4gICAgICAvLyByZWdpb246IHJlZ2lvbixcbiAgICAgIC8vIGNvdW50cnk6IGNvdW50cnksXG4gICAgICBhcHA6IEFuYWx5dGljc0V2ZW50cy5nZXRBcHBUeXBlRnJvbURhdGFVUkwoQW5hbHl0aWNzRXZlbnRzLmRhdGFVUkwpLFxuICAgICAgbGFuZzogQW5hbHl0aWNzRXZlbnRzLmdldEFwcExhbmd1YWdlRnJvbURhdGFVUkwoQW5hbHl0aWNzRXZlbnRzLmRhdGFVUkwpLFxuICAgICAgYnVja2V0TnVtYmVyOiBibixcbiAgICAgIG51bWJlclRyaWVkSW5CdWNrZXQ6IGJ0cmllZCxcbiAgICAgIG51bWJlckNvcnJlY3RJbkJ1Y2tldDogYmNvcnJlY3QsXG4gICAgICBwYXNzZWRCdWNrZXQ6IHBhc3NlZCxcbiAgICAgIGFwcFZlcnNpb246IEFuYWx5dGljc0V2ZW50cy5hcHBWZXJzaW9uLFxuICAgICAgY29udGVudFZlcnNpb246IEFuYWx5dGljc0V2ZW50cy5jb250ZW50VmVyc2lvbixcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFNlbmQgRmluaXNoZWRcbiAgc3RhdGljIHNlbmRGaW5pc2hlZChcbiAgICBidWNrZXRzOiBidWNrZXRbXSA9IG51bGwsXG4gICAgYmFzYWxCdWNrZXQ6IG51bWJlcixcbiAgICBjZWlsaW5nQnVja2V0OiBudW1iZXJcbiAgKTogdm9pZCB7XG4gICAgbGV0IGV2ZW50U3RyaW5nID1cbiAgICAgICd1c2VyICcgKyBBbmFseXRpY3NFdmVudHMudXVpZCArICcgZmluaXNoZWQgdGhlIGFzc2Vzc21lbnQnO1xuICAgIGNvbnNvbGUubG9nKGV2ZW50U3RyaW5nKTtcblxuICAgIGxldCBiYXNhbEJ1Y2tldElEID0gQW5hbHl0aWNzRXZlbnRzLmdldEJhc2FsQnVja2V0SUQoYnVja2V0cyk7XG4gICAgbGV0IGNlaWxpbmdCdWNrZXRJRCA9IEFuYWx5dGljc0V2ZW50cy5nZXRDZWlsaW5nQnVja2V0SUQoYnVja2V0cyk7XG5cbiAgICBpZiAoYmFzYWxCdWNrZXRJRCA9PSAwKSB7XG4gICAgICBiYXNhbEJ1Y2tldElEID0gY2VpbGluZ0J1Y2tldElEO1xuICAgIH1cblxuICAgIGxldCBzY29yZSA9IEFuYWx5dGljc0V2ZW50cy5jYWxjdWxhdGVTY29yZShidWNrZXRzLCBiYXNhbEJ1Y2tldElEKTtcbiAgICBjb25zdCBtYXhTY29yZSA9IGJ1Y2tldHMubGVuZ3RoICogMTAwO1xuXG4gICAgY29uc29sZS5sb2coJ1NlbmRpbmcgY29tcGxldGVkIGV2ZW50Jyk7XG4gICAgY29uc29sZS5sb2coJ1Njb3JlOiAnICsgc2NvcmUpO1xuICAgIGNvbnNvbGUubG9nKCdNYXggU2NvcmU6ICcgKyBtYXhTY29yZSk7XG4gICAgY29uc29sZS5sb2coJ0Jhc2FsIEJ1Y2tldDogJyArIGJhc2FsQnVja2V0SUQpO1xuICAgIGNvbnNvbGUubG9nKCdCQVNBTCBGUk9NIEFTU0VTU01FTlQ6ICcgKyBiYXNhbEJ1Y2tldCk7XG4gICAgY29uc29sZS5sb2coJ0NlaWxpbmcgQnVja2V0OiAnICsgY2VpbGluZ0J1Y2tldElEKTtcbiAgICBjb25zb2xlLmxvZygnQ0VJTElORyBGUk9NIEFTU0VTU01FTlQ6ICcgKyBjZWlsaW5nQnVja2V0KTtcbiAgICBjb25zb2xlLmxvZygnQ29tcGxldGVkIEFwcCBWZXJzaW9uOiAnICsgQW5hbHl0aWNzRXZlbnRzLmFwcFZlcnNpb24pO1xuICAgIGNvbnNvbGUubG9nKCdDb250ZW50IFZlcnNpb246ICcgKyBBbmFseXRpY3NFdmVudHMuY29udGVudFZlcnNpb24pO1xuXG4gICAgQW5hbHl0aWNzRXZlbnRzLnNlbmREYXRhVG9UaGlyZFBhcnR5KHNjb3JlLCBBbmFseXRpY3NFdmVudHMudXVpZCk7XG5cbiAgICAvLyBBdHRlbXB0IHRvIHNlbmQgdGhlIHNjb3JlIHRvIHRoZSBwYXJlbnQgY3VyaW91cyBmcmFtZSBpZiBpdCBleGlzdHNcbiAgICBpZiAod2luZG93LnBhcmVudCkge1xuICAgICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZShcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6ICdhc3Nlc3NtZW50X2NvbXBsZXRlZCcsXG4gICAgICAgICAgc2NvcmU6IHNjb3JlLFxuICAgICAgICAgIC8vIG1heFNjb3JlOiBtYXhTY29yZSxcbiAgICAgICAgICAvLyBiYXNhbEJ1Y2tldDogYmFzYWxCdWNrZXRJRCxcbiAgICAgICAgICAvLyBjZWlsaW5nQnVja2V0OiBjZWlsaW5nQnVja2V0SUQsXG4gICAgICAgICAgLy8gYXBwVmVyc2lvbjogQW5hbHl0aWNzRXZlbnRzLmFwcFZlcnNpb24sXG4gICAgICAgICAgLy8gY29udGVudFZlcnNpb246IEFuYWx5dGljc0V2ZW50cy5jb250ZW50VmVyc2lvbixcbiAgICAgICAgfSxcbiAgICAgICAgJ2h0dHBzOi8vY3ItZnJhbWUtZGV2LXRlc3RpbmcudmVyY2VsLmFwcC8nXG4gICAgICApO1xuICAgIH1cblxuICAgIGxvZ0V2ZW50KEFuYWx5dGljc0V2ZW50cy5nYW5hLCAnY29tcGxldGVkJywge1xuICAgICAgdHlwZTogJ2NvbXBsZXRlZCcsXG4gICAgICBjbFVzZXJJZDogQW5hbHl0aWNzRXZlbnRzLnV1aWQsXG4gICAgICB1c2VyU291cmNlOiBBbmFseXRpY3NFdmVudHMudXNlclNvdXJjZSxcbiAgICAgIGFwcDogQW5hbHl0aWNzRXZlbnRzLmdldEFwcFR5cGVGcm9tRGF0YVVSTChBbmFseXRpY3NFdmVudHMuZGF0YVVSTCksXG4gICAgICBsYW5nOiBBbmFseXRpY3NFdmVudHMuZ2V0QXBwTGFuZ3VhZ2VGcm9tRGF0YVVSTChBbmFseXRpY3NFdmVudHMuZGF0YVVSTCksXG4gICAgICBsYXRMb25nOiBBbmFseXRpY3NFdmVudHMuam9pbkxhdExvbmcoXG4gICAgICAgIEFuYWx5dGljc0V2ZW50cy5jbGF0LFxuICAgICAgICBBbmFseXRpY3NFdmVudHMuY2xvblxuICAgICAgKSxcbiAgICAgIC8vIGNpdHk6IGNpdHksXG4gICAgICAvLyByZWdpb246IHJlZ2lvbixcbiAgICAgIC8vIGNvdW50cnk6IGNvdW50cnksXG4gICAgICBzY29yZTogc2NvcmUsXG4gICAgICBtYXhTY29yZTogbWF4U2NvcmUsXG4gICAgICBiYXNhbEJ1Y2tldDogYmFzYWxCdWNrZXRJRCxcbiAgICAgIGNlaWxpbmdCdWNrZXQ6IGNlaWxpbmdCdWNrZXRJRCxcbiAgICAgIGFwcFZlcnNpb246IEFuYWx5dGljc0V2ZW50cy5hcHBWZXJzaW9uLFxuICAgICAgY29udGVudFZlcnNpb246IEFuYWx5dGljc0V2ZW50cy5jb250ZW50VmVyc2lvbixcbiAgICB9KTtcbiAgfVxuXG4gIHN0YXRpYyBzZW5kRGF0YVRvVGhpcmRQYXJ0eShzY29yZTogbnVtYmVyLCB1dWlkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAvLyBTZW5kIGRhdGEgdG8gdGhlIHRoaXJkIHBhcnR5XG4gICAgY29uc29sZS5sb2coJ0F0dGVtcHRpbmcgdG8gc2VuZCBzY29yZSB0byBhIHRoaXJkIHBhcnR5ISBTY29yZTogJywgc2NvcmUpO1xuXG4gICAgLy8gUmVhZCB0aGUgVVJMIGZyb20gdXRtIHBhcmFtZXRlcnNcbiAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xuICAgIGNvbnN0IHRhcmdldFBhcnR5VVJMID0gdXJsUGFyYW1zLmdldCgnZW5kcG9pbnQnKTtcbiAgICBjb25zdCBvcmdhbml6YXRpb24gPSB1cmxQYXJhbXMuZ2V0KCdvcmdhbml6YXRpb24nKTtcbiAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgIGlmICghdGFyZ2V0UGFydHlVUkwpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ05vIHRhcmdldCBwYXJ0eSBVUkwgZm91bmQhJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgIHVzZXI6IHV1aWQsXG4gICAgICBwYWdlOiAnMTExMTA4MTIxMzYzNjE1JyxcbiAgICAgIGV2ZW50OiB7XG4gICAgICAgIHR5cGU6ICdleHRlcm5hbCcsXG4gICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgdHlwZTogJ2Fzc2Vzc21lbnQnLFxuICAgICAgICAgIHN1YlR5cGU6IEFuYWx5dGljc0V2ZW50cy5hc3Nlc3NtZW50VHlwZSxcbiAgICAgICAgICBzY29yZTogc2NvcmUsXG4gICAgICAgICAgY29tcGxldGVkOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9O1xuXG4gICAgY29uc3QgcGF5bG9hZFN0cmluZyA9IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpO1xuXG4gICAgdHJ5IHtcbiAgICAgIHhoci5vcGVuKCdQT1NUJywgdGFyZ2V0UGFydHlVUkwsIHRydWUpO1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG5cbiAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgMzAwKSB7XG4gICAgICAgICAgLy8gUmVxdWVzdCB3YXMgc3VjY2Vzc2Z1bCwgaGFuZGxlIHRoZSByZXNwb25zZSBoZXJlXG4gICAgICAgICAgY29uc29sZS5sb2coJ1BPU1Qgc3VjY2VzcyEnICsgeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUmVxdWVzdCBmYWlsZWRcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdSZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1czogJyArIHhoci5zdGF0dXMpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB4aHIuc2VuZChwYXlsb2FkU3RyaW5nKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHNlbmQgZGF0YSB0byB0YXJnZXQgcGFydHk6ICcsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvLyBDYWxjdWxhdGUgU2NvcmVcbiAgc3RhdGljIGNhbGN1bGF0ZVNjb3JlKGJ1Y2tldHM6IGJ1Y2tldFtdLCBiYXNhbEJ1Y2tldElEOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGNvbnNvbGUubG9nKCdDYWxjdWxhdGluZyBzY29yZScpO1xuICAgIGNvbnNvbGUubG9nKGJ1Y2tldHMpO1xuXG4gICAgbGV0IHNjb3JlID0gMDtcblxuICAgIGNvbnNvbGUubG9nKCdCYXNhbCBCdWNrZXQgSUQ6ICcgKyBiYXNhbEJ1Y2tldElEKTtcblxuICAgIC8vIEdldCB0aGUgbnVtY29ycmVjdCBmcm9tIHRoZSBiYXNhbCBidWNrZXQgYmFzZWQgb24gbG9vcGluZyB0aHJvdWdoIGFuZCBmaW5kaW5nIHRoZSBidWNrZXQgaWRcbiAgICBsZXQgbnVtQ29ycmVjdCA9IDA7XG5cbiAgICBmb3IgKGNvbnN0IGluZGV4IGluIGJ1Y2tldHMpIHtcbiAgICAgIGNvbnN0IGJ1Y2tldCA9IGJ1Y2tldHNbaW5kZXhdO1xuICAgICAgaWYgKGJ1Y2tldC5idWNrZXRJRCA9PSBiYXNhbEJ1Y2tldElEKSB7XG4gICAgICAgIG51bUNvcnJlY3QgPSBidWNrZXQubnVtQ29ycmVjdDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXG4gICAgICAnTnVtIENvcnJlY3Q6ICcgKyBudW1Db3JyZWN0LFxuICAgICAgJyBiYXNhbDogJyArIGJhc2FsQnVja2V0SUQsXG4gICAgICAnIGJ1Y2tldHM6ICcgKyBidWNrZXRzLmxlbmd0aFxuICAgICk7XG5cbiAgICBpZiAoYmFzYWxCdWNrZXRJRCA9PT0gYnVja2V0cy5sZW5ndGggJiYgbnVtQ29ycmVjdCA+PSA0KSB7XG4gICAgICAvLyBJZiB0aGUgdXNlciBoYXMgZW5vdWdoIGNvcnJlY3QgYW5zd2VycyBpbiB0aGUgbGFzdCBidWNrZXQsIGdpdmUgdGhlbSBhIHBlcmZlY3Qgc2NvcmVcbiAgICAgIGNvbnNvbGUubG9nKCdQZXJmZWN0IHNjb3JlJyk7XG5cbiAgICAgIHJldHVybiBidWNrZXRzLmxlbmd0aCAqIDEwMDtcbiAgICB9XG5cbiAgICBzY29yZSA9IE1hdGgucm91bmQoKGJhc2FsQnVja2V0SUQgLSAxKSAqIDEwMCArIChudW1Db3JyZWN0IC8gNSkgKiAxMDApIHwgMDtcblxuICAgIHJldHVybiBzY29yZTtcbiAgfVxuXG4gIC8vIEdldCBCYXNhbCBCdWNrZXQgSURcbiAgc3RhdGljIGdldEJhc2FsQnVja2V0SUQoYnVja2V0czogYnVja2V0W10pOiBudW1iZXIge1xuICAgIGxldCBidWNrZXRJRCA9IDA7XG5cbiAgICAvLyBTZWxlY3QgdGhlIGxvd2VzdCBidWNrZXRJRCBidWNrZXQgdGhhdCB0aGUgdXNlciBoYXMgZmFpbGVkXG4gICAgZm9yIChjb25zdCBpbmRleCBpbiBidWNrZXRzKSB7XG4gICAgICBjb25zdCBidWNrZXQgPSBidWNrZXRzW2luZGV4XTtcbiAgICAgIGlmIChidWNrZXQudGVzdGVkICYmICFidWNrZXQucGFzc2VkKSB7XG4gICAgICAgIGlmIChidWNrZXRJRCA9PSAwIHx8IGJ1Y2tldC5idWNrZXRJRCA8IGJ1Y2tldElEKSB7XG4gICAgICAgICAgYnVja2V0SUQgPSBidWNrZXQuYnVja2V0SUQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYnVja2V0SUQ7XG4gIH1cblxuICAvLyBHZXQgQ2VpbGluZyBCdWNrZXQgSURcbiAgc3RhdGljIGdldENlaWxpbmdCdWNrZXRJRChidWNrZXRzOiBidWNrZXRbXSk6IG51bWJlciB7XG4gICAgbGV0IGJ1Y2tldElEID0gMDtcblxuICAgIC8vIFNlbGVjdCB0aGUgaGl1Z2hlc3QgYnVja2V0SUQgYnVja2V0IHRoYXQgdGhlIHVzZXIgaGFzIHBhc3NlZFxuICAgIGZvciAoY29uc3QgaW5kZXggaW4gYnVja2V0cykge1xuICAgICAgY29uc3QgYnVja2V0ID0gYnVja2V0c1tpbmRleF07XG4gICAgICBpZiAoYnVja2V0LnRlc3RlZCAmJiBidWNrZXQucGFzc2VkKSB7XG4gICAgICAgIGlmIChidWNrZXRJRCA9PSAwIHx8IGJ1Y2tldC5idWNrZXRJRCA+IGJ1Y2tldElEKSB7XG4gICAgICAgICAgYnVja2V0SUQgPSBidWNrZXQuYnVja2V0SUQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYnVja2V0SUQ7XG4gIH1cblxuICAvLyBKb2luIExhdCBMb25nXG4gIHN0YXRpYyBqb2luTGF0TG9uZyhsYXQ6IHN0cmluZywgbG9uOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBsYXQgKyAnLCcgKyBsb247XG4gIH1cbn1cbiIsImltcG9ydCB7IEFwcCB9IGZyb20gJy4vQXBwJztcbmltcG9ydCB7IEFuYWx5dGljc0V2ZW50cyB9IGZyb20gJy4vY29tcG9uZW50cy9hbmFseXRpY3NFdmVudHMnO1xuaW1wb3J0IHsgVUlDb250cm9sbGVyIH0gZnJvbSAnLi9jb21wb25lbnRzL3VpQ29udHJvbGxlcic7XG5pbXBvcnQgeyBVbml0eUJyaWRnZSB9IGZyb20gJy4vY29tcG9uZW50cy91bml0eUJyaWRnZSc7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlUXVpeiB7XG4gIHByb3RlY3RlZCBhcHA6IEFwcDtcbiAgcHVibGljIGRhdGFVUkw6IHN0cmluZztcbiAgcHVibGljIHVuaXR5QnJpZGdlOiBVbml0eUJyaWRnZTtcblxuICBwdWJsaWMgZGV2TW9kZUF2YWlsYWJsZTogYm9vbGVhbiA9IGZhbHNlO1xuICBwdWJsaWMgaXNJbkRldk1vZGU6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwdWJsaWMgaXNDb3JyZWN0TGFiZWxTaG93bjogYm9vbGVhbiA9IGZhbHNlO1xuICBwdWJsaWMgaXNCdWNrZXRJbmZvU2hvd246IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHVibGljIGlzQnVja2V0Q29udHJvbHNFbmFibGVkOiBib29sZWFuID0gZmFsc2U7XG4gIHB1YmxpYyBhbmltYXRpb25TcGVlZE11bHRpcGxpZXI6IG51bWJlciA9IDE7XG5cbiAgcHVibGljIGRldk1vZGVUb2dnbGVCdXR0b25Db250YWluZXJJZDogc3RyaW5nID0gJ2Rldk1vZGVNb2RhbFRvZ2dsZUJ1dHRvbkNvbnRhaW5lcic7XG4gIHB1YmxpYyBkZXZNb2RlVG9nZ2xlQnV0dG9uQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcblxuICBwdWJsaWMgZGV2TW9kZVRvZ2dsZUJ1dHRvbklkOiBzdHJpbmcgPSAnZGV2TW9kZU1vZGFsVG9nZ2xlQnV0dG9uJztcbiAgcHVibGljIGRldk1vZGVUb2dnbGVCdXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xuXG4gIHB1YmxpYyBkZXZNb2RlTW9kYWxJZDogc3RyaW5nID0gJ2Rldk1vZGVTZXR0aW5nc01vZGFsJztcbiAgcHVibGljIGRldk1vZGVTZXR0aW5nc01vZGFsOiBIVE1MRWxlbWVudDtcblxuICBwdWJsaWMgZGV2TW9kZUJ1Y2tldEdlblNlbGVjdElkOiBzdHJpbmcgPSAnZGV2TW9kZUJ1Y2tldEdlblNlbGVjdCc7XG4gIHB1YmxpYyBkZXZNb2RlQnVja2V0R2VuU2VsZWN0OiBIVE1MU2VsZWN0RWxlbWVudDtcblxuICBwdWJsaWMgZGV2TW9kZUNvcnJlY3RMYWJlbFNob3duQ2hlY2tib3hJZDogc3RyaW5nID0gJ2Rldk1vZGVDb3JyZWN0TGFiZWxTaG93bkNoZWNrYm94JztcbiAgcHVibGljIGRldk1vZGVDb3JyZWN0TGFiZWxTaG93bkNoZWNrYm94OiBIVE1MSW5wdXRFbGVtZW50O1xuXG4gIHB1YmxpYyBkZXZNb2RlQnVja2V0SW5mb1Nob3duQ2hlY2tib3hJZDogc3RyaW5nID0gJ2Rldk1vZGVCdWNrZXRJbmZvU2hvd25DaGVja2JveCc7XG4gIHB1YmxpYyBkZXZNb2RlQnVja2V0SW5mb1Nob3duQ2hlY2tib3g6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gIHB1YmxpYyBkZXZNb2RlQnVja2V0SW5mb0NvbnRhaW5lcklkOiBzdHJpbmcgPSAnZGV2TW9kZUJ1Y2tldEluZm9Db250YWluZXInO1xuICBwdWJsaWMgZGV2TW9kZUJ1Y2tldEluZm9Db250YWluZXI6IEhUTUxFbGVtZW50O1xuXG4gIHB1YmxpYyBkZXZNb2RlQnVja2V0Q29udHJvbHNTaG93bkNoZWNrYm94SWQ6IHN0cmluZyA9ICdkZXZNb2RlQnVja2V0Q29udHJvbHNTaG93bkNoZWNrYm94JztcbiAgcHVibGljIGRldk1vZGVCdWNrZXRDb250cm9sc1Nob3duQ2hlY2tib3g6IEhUTUxJbnB1dEVsZW1lbnQ7XG5cbiAgcHVibGljIGRldk1vZGVBbmltYXRpb25TcGVlZE11bHRpcGxpZXJSYW5nZUlkOiBzdHJpbmcgPSAnZGV2TW9kZUFuaW1hdGlvblNwZWVkTXVsdGlwbGllclJhbmdlJztcbiAgcHVibGljIGRldk1vZGVBbmltYXRpb25TcGVlZE11bHRpcGxpZXJSYW5nZTogSFRNTElucHV0RWxlbWVudDtcblxuICBwdWJsaWMgZGV2TW9kZUFuaW1hdGlvblNwZWVkTXVsdGlwbGllclZhbHVlSWQ6IHN0cmluZyA9ICdkZXZNb2RlQW5pbWF0aW9uU3BlZWRNdWx0aXBsaWVyVmFsdWUnO1xuICBwdWJsaWMgZGV2TW9kZUFuaW1hdGlvblNwZWVkTXVsdGlwbGllclZhbHVlOiBIVE1MRWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmlzSW5EZXZNb2RlID1cbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluY2x1ZGVzKCdsb2NhbGhvc3QnKSB8fFxuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoJzEyNy4wLjAuMScpIHx8XG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZi5pbmNsdWRlcygnYXNzZXNzbWVudGRldicpO1xuICAgIHRoaXMuZGV2TW9kZVRvZ2dsZUJ1dHRvbkNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZGV2TW9kZVRvZ2dsZUJ1dHRvbkNvbnRhaW5lcklkKTtcbiAgICB0aGlzLmRldk1vZGVTZXR0aW5nc01vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5kZXZNb2RlTW9kYWxJZCk7XG5cbiAgICAvLyB0aGlzLmRldk1vZGVTZXR0aW5nc01vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICAvLyBcdC8vIEB0cy1pZ25vcmVcbiAgICAvLyBcdGNvbnN0IGlkID0gZXZlbnQudGFyZ2V0LmlkO1xuICAgIC8vIFx0aWYgKGlkID09IHRoaXMuZGV2TW9kZU1vZGFsSWQpIHtcbiAgICAvLyBcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgLy8gXHRcdHRoaXMudG9nZ2xlRGV2TW9kZU1vZGFsKCk7XG4gICAgLy8gXHR9XG4gICAgLy8gfSk7XG5cbiAgICB0aGlzLmRldk1vZGVCdWNrZXRHZW5TZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmRldk1vZGVCdWNrZXRHZW5TZWxlY3RJZCkgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XG4gICAgdGhpcy5kZXZNb2RlQnVja2V0R2VuU2VsZWN0Lm9uY2hhbmdlID0gKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmhhbmRsZUJ1Y2tldEdlbk1vZGVDaGFuZ2UoZXZlbnQpO1xuICAgIH07XG5cbiAgICB0aGlzLmRldk1vZGVUb2dnbGVCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmRldk1vZGVUb2dnbGVCdXR0b25JZCkgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgdGhpcy5kZXZNb2RlVG9nZ2xlQnV0dG9uLm9uY2xpY2sgPSB0aGlzLnRvZ2dsZURldk1vZGVNb2RhbDtcblxuICAgIHRoaXMuZGV2TW9kZUNvcnJlY3RMYWJlbFNob3duQ2hlY2tib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbiAgICAgIHRoaXMuZGV2TW9kZUNvcnJlY3RMYWJlbFNob3duQ2hlY2tib3hJZFxuICAgICkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICB0aGlzLmRldk1vZGVDb3JyZWN0TGFiZWxTaG93bkNoZWNrYm94Lm9uY2hhbmdlID0gKCkgPT4ge1xuICAgICAgdGhpcy5pc0NvcnJlY3RMYWJlbFNob3duID0gdGhpcy5kZXZNb2RlQ29ycmVjdExhYmVsU2hvd25DaGVja2JveC5jaGVja2VkO1xuICAgICAgdGhpcy5oYW5kbGVDb3JyZWN0TGFiZWxTaG93bkNoYW5nZSgpO1xuICAgIH07XG5cbiAgICB0aGlzLmRldk1vZGVCdWNrZXRJbmZvU2hvd25DaGVja2JveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgICAgdGhpcy5kZXZNb2RlQnVja2V0SW5mb1Nob3duQ2hlY2tib3hJZFxuICAgICkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICB0aGlzLmRldk1vZGVCdWNrZXRJbmZvU2hvd25DaGVja2JveC5vbmNoYW5nZSA9ICgpID0+IHtcbiAgICAgIHRoaXMuaXNCdWNrZXRJbmZvU2hvd24gPSB0aGlzLmRldk1vZGVCdWNrZXRJbmZvU2hvd25DaGVja2JveC5jaGVja2VkO1xuICAgICAgdGhpcy5kZXZNb2RlQnVja2V0SW5mb0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gdGhpcy5pc0J1Y2tldEluZm9TaG93biA/ICdibG9jaycgOiAnbm9uZSc7XG4gICAgICB0aGlzLmhhbmRsZUJ1Y2tldEluZm9TaG93bkNoYW5nZSgpO1xuICAgIH07XG5cbiAgICB0aGlzLmRldk1vZGVCdWNrZXRDb250cm9sc1Nob3duQ2hlY2tib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbiAgICAgIHRoaXMuZGV2TW9kZUJ1Y2tldENvbnRyb2xzU2hvd25DaGVja2JveElkXG4gICAgKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIHRoaXMuZGV2TW9kZUJ1Y2tldENvbnRyb2xzU2hvd25DaGVja2JveC5vbmNoYW5nZSA9ICgpID0+IHtcbiAgICAgIHRoaXMuaXNCdWNrZXRDb250cm9sc0VuYWJsZWQgPSB0aGlzLmRldk1vZGVCdWNrZXRDb250cm9sc1Nob3duQ2hlY2tib3guY2hlY2tlZDtcbiAgICAgIHRoaXMuaGFuZGxlQnVja2V0Q29udHJvbHNTaG93bkNoYW5nZSgpO1xuICAgIH07XG5cbiAgICB0aGlzLmRldk1vZGVCdWNrZXRJbmZvQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5kZXZNb2RlQnVja2V0SW5mb0NvbnRhaW5lcklkKTtcblxuICAgIHRoaXMuZGV2TW9kZUFuaW1hdGlvblNwZWVkTXVsdGlwbGllclJhbmdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgICB0aGlzLmRldk1vZGVBbmltYXRpb25TcGVlZE11bHRpcGxpZXJSYW5nZUlkXG4gICAgKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgdGhpcy5kZXZNb2RlQW5pbWF0aW9uU3BlZWRNdWx0aXBsaWVyVmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmRldk1vZGVBbmltYXRpb25TcGVlZE11bHRpcGxpZXJWYWx1ZUlkKTtcblxuICAgIHRoaXMuZGV2TW9kZUFuaW1hdGlvblNwZWVkTXVsdGlwbGllclJhbmdlLm9uY2hhbmdlID0gKCkgPT4ge1xuICAgICAgdGhpcy5hbmltYXRpb25TcGVlZE11bHRpcGxpZXIgPSBwYXJzZUZsb2F0KHRoaXMuZGV2TW9kZUFuaW1hdGlvblNwZWVkTXVsdGlwbGllclJhbmdlLnZhbHVlKTtcbiAgICAgIGlmICh0aGlzLmFuaW1hdGlvblNwZWVkTXVsdGlwbGllciA8IDAuMikge1xuICAgICAgICB0aGlzLmFuaW1hdGlvblNwZWVkTXVsdGlwbGllciA9IDAuMjtcbiAgICAgICAgdGhpcy5kZXZNb2RlQW5pbWF0aW9uU3BlZWRNdWx0aXBsaWVyUmFuZ2UudmFsdWUgPSAnMC4yJztcbiAgICAgIH1cblxuICAgICAgdGhpcy5kZXZNb2RlQW5pbWF0aW9uU3BlZWRNdWx0aXBsaWVyVmFsdWUuaW5uZXJUZXh0ID0gdGhpcy5hbmltYXRpb25TcGVlZE11bHRpcGxpZXIudG9TdHJpbmcoKTtcbiAgICAgIHRoaXMuaGFuZGxlQW5pbWF0aW9uU3BlZWRNdWx0aXBsaWVyQ2hhbmdlKCk7XG4gICAgfTtcblxuICAgIGlmICghdGhpcy5pc0luRGV2TW9kZSkge1xuICAgICAgdGhpcy5kZXZNb2RlVG9nZ2xlQnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGV2TW9kZVRvZ2dsZUJ1dHRvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB9XG5cbiAgICAvLyBJbml0aWFsaXplIHRoZSBhbmltYXRpb24gc3BlZWQgbXVsdGlwbGllciB2YWx1ZSBhbmQgcG9zaXRpb25cbiAgICB0aGlzLmFuaW1hdGlvblNwZWVkTXVsdGlwbGllciA9IHBhcnNlRmxvYXQodGhpcy5kZXZNb2RlQW5pbWF0aW9uU3BlZWRNdWx0aXBsaWVyUmFuZ2UudmFsdWUpO1xuICB9XG5cbiAgcHVibGljIGhpZGVEZXZNb2RlQnV0dG9uKCkge1xuICAgIHRoaXMuZGV2TW9kZVRvZ2dsZUJ1dHRvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICB9XG5cbiAgcHVibGljIGFic3RyYWN0IGhhbmRsZUJ1Y2tldEdlbk1vZGVDaGFuZ2UoZXZlbnQ6IEV2ZW50KTogdm9pZDtcbiAgcHVibGljIGFic3RyYWN0IGhhbmRsZUNvcnJlY3RMYWJlbFNob3duQ2hhbmdlKCk6IHZvaWQ7XG4gIHB1YmxpYyBhYnN0cmFjdCBoYW5kbGVCdWNrZXRJbmZvU2hvd25DaGFuZ2UoKTogdm9pZDtcbiAgcHVibGljIGFic3RyYWN0IGhhbmRsZUJ1Y2tldENvbnRyb2xzU2hvd25DaGFuZ2UoKTogdm9pZDtcbiAgcHVibGljIGFic3RyYWN0IGhhbmRsZUFuaW1hdGlvblNwZWVkTXVsdGlwbGllckNoYW5nZSgpOiB2b2lkO1xuXG4gIHB1YmxpYyB0b2dnbGVEZXZNb2RlTW9kYWwgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuZGV2TW9kZVNldHRpbmdzTW9kYWwuc3R5bGUuZGlzcGxheSA9PSAnYmxvY2snKSB7XG4gICAgICB0aGlzLmRldk1vZGVTZXR0aW5nc01vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGV2TW9kZVNldHRpbmdzTW9kYWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgfVxuICB9O1xuXG4gIHB1YmxpYyBhYnN0cmFjdCBSdW4oYXBwbGluazogQXBwKTogdm9pZDtcbiAgcHVibGljIGFic3RyYWN0IGhhbmRsZUFuc3dlckJ1dHRvblByZXNzKGFuczogbnVtYmVyLCBlbGFwc2VkOiBudW1iZXIpOiB2b2lkO1xuICBwdWJsaWMgYWJzdHJhY3QgSGFzUXVlc3Rpb25zTGVmdCgpOiBib29sZWFuO1xuXG4gIHB1YmxpYyBvbkVuZCgpOiB2b2lkIHtcbiAgICAvLyBzZW5kRmluaXNoZWQoKTtcbiAgICBVSUNvbnRyb2xsZXIuU2hvd0VuZCgpO1xuICAgIHRoaXMuYXBwLnVuaXR5QnJpZGdlLlNlbmRDbG9zZSgpO1xuICB9XG59XG4iLCIvL3RoaXMgaXMgd2hlcmUgdGhlIGNvZGUgd2lsbCBnbyBmb3IgbGluZWFybHkgaXRlcmF0aW5nIHRocm91Z2ggdGhlXG4vL3F1ZXN0aW9ucyBpbiBhIGRhdGEuanNvbiBmaWxlIHRoYXQgaWRlbnRpZmllcyBpdHNlbGYgYXMgYSBzdXJ2ZXlcblxuaW1wb3J0IHsgVUlDb250cm9sbGVyIH0gZnJvbSAnLi4vY29tcG9uZW50cy91aUNvbnRyb2xsZXInO1xuaW1wb3J0IHsgQXVkaW9Db250cm9sbGVyIH0gZnJvbSAnLi4vY29tcG9uZW50cy9hdWRpb0NvbnRyb2xsZXInO1xuaW1wb3J0IHsgcURhdGEsIGFuc3dlckRhdGEgfSBmcm9tICcuLi9jb21wb25lbnRzL3F1ZXN0aW9uRGF0YSc7XG5pbXBvcnQgeyBBbmFseXRpY3NFdmVudHMgfSBmcm9tICcuLi9jb21wb25lbnRzL2FuYWx5dGljc0V2ZW50cyc7XG5pbXBvcnQgeyBBcHAgfSBmcm9tICcuLi9BcHAnO1xuaW1wb3J0IHsgQmFzZVF1aXogfSBmcm9tICcuLi9iYXNlUXVpeic7XG5pbXBvcnQgeyBmZXRjaFN1cnZleVF1ZXN0aW9ucyB9IGZyb20gJy4uL2NvbXBvbmVudHMvanNvblV0aWxzJztcbmltcG9ydCB7IFVuaXR5QnJpZGdlIH0gZnJvbSAnLi4vY29tcG9uZW50cy91bml0eUJyaWRnZSc7XG5cbmV4cG9ydCBjbGFzcyBTdXJ2ZXkgZXh0ZW5kcyBCYXNlUXVpeiB7XG4gIHB1YmxpYyBxdWVzdGlvbnNEYXRhOiBxRGF0YVtdO1xuICBwdWJsaWMgY3VycmVudFF1ZXN0aW9uSW5kZXg6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihkYXRhVVJMOiBzdHJpbmcsIHVuaXR5QnJpZGdlKSB7XG4gICAgc3VwZXIoKTtcbiAgICBjb25zb2xlLmxvZygnU3VydmV5IGluaXRpYWxpemVkJyk7XG5cbiAgICB0aGlzLmRhdGFVUkwgPSBkYXRhVVJMO1xuICAgIHRoaXMudW5pdHlCcmlkZ2UgPSB1bml0eUJyaWRnZTtcbiAgICB0aGlzLmN1cnJlbnRRdWVzdGlvbkluZGV4ID0gMDtcbiAgICBVSUNvbnRyb2xsZXIuU2V0QnV0dG9uUHJlc3NBY3Rpb24odGhpcy5oYW5kbGVBbnN3ZXJCdXR0b25QcmVzcyk7XG4gICAgVUlDb250cm9sbGVyLlNldFN0YXJ0QWN0aW9uKHRoaXMuc3RhcnRTdXJ2ZXkpO1xuICB9XG5cbiAgcHVibGljIGhhbmRsZUFuaW1hdGlvblNwZWVkTXVsdGlwbGllckNoYW5nZSgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygnQW5pbWF0aW9uIFNwZWVkIE11bHRpcGxpZXIgQ2hhbmdlZCcpO1xuICB9XG5cbiAgcHVibGljIGhhbmRsZUJ1Y2tldEdlbk1vZGVDaGFuZ2UgPSAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ0J1Y2tldCBHZW4gTW9kZSBDaGFuZ2VkJyk7XG4gIH07XG5cbiAgcHVibGljIGhhbmRsZUNvcnJlY3RMYWJlbFNob3duQ2hhbmdlID0gKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdDb3JyZWN0IExhYmVsIFNob3duIENoYW5nZWQnKTtcbiAgfTtcblxuICBwdWJsaWMgaGFuZGxlQnVja2V0SW5mb1Nob3duQ2hhbmdlID0gKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdCdWNrZXQgSW5mbyBTaG93biBDaGFuZ2VkJyk7XG4gIH07XG5cbiAgcHVibGljIGhhbmRsZUJ1Y2tldENvbnRyb2xzU2hvd25DaGFuZ2UgPSAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ0J1Y2tldCBDb250cm9scyBTaG93biBDaGFuZ2VkJyk7XG4gIH07XG5cbiAgcHVibGljIGFzeW5jIFJ1bihhcHA6IEFwcCkge1xuICAgIHRoaXMuYXBwID0gYXBwO1xuICAgIHRoaXMuYnVpbGRRdWVzdGlvbkxpc3QoKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgIHRoaXMucXVlc3Rpb25zRGF0YSA9IHJlc3VsdDtcbiAgICAgIEF1ZGlvQ29udHJvbGxlci5QcmVwYXJlQXVkaW9BbmRJbWFnZXNGb3JTdXJ2ZXkodGhpcy5xdWVzdGlvbnNEYXRhLCB0aGlzLmFwcC5HZXREYXRhVVJMKCkpO1xuICAgICAgdGhpcy51bml0eUJyaWRnZS5TZW5kTG9hZGVkKCk7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgc3RhcnRTdXJ2ZXkgPSAoKSA9PiB7XG4gICAgVUlDb250cm9sbGVyLlJlYWR5Rm9yTmV4dCh0aGlzLmJ1aWxkTmV3UXVlc3Rpb24oKSk7XG4gIH07XG5cbiAgcHVibGljIG9uUXVlc3Rpb25FbmQgPSAoKSA9PiB7XG4gICAgVUlDb250cm9sbGVyLlNldEZlZWRiYWNrVmlzaWJpbGUoZmFsc2UsIGZhbHNlKTtcblxuICAgIHRoaXMuY3VycmVudFF1ZXN0aW9uSW5kZXggKz0gMTtcblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuSGFzUXVlc3Rpb25zTGVmdCgpKSB7XG4gICAgICAgIFVJQ29udHJvbGxlci5SZWFkeUZvck5leHQodGhpcy5idWlsZE5ld1F1ZXN0aW9uKCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1RoZXJlIGFyZSBubyBxdWVzdGlvbnMgbGVmdC4nKTtcbiAgICAgICAgdGhpcy5vbkVuZCgpO1xuICAgICAgfVxuICAgIH0sIDUwMCk7XG4gIH07XG5cbiAgcHVibGljIGhhbmRsZUFuc3dlckJ1dHRvblByZXNzID0gKGFuc3dlcjogbnVtYmVyLCBlbGFwc2VkOiBudW1iZXIpID0+IHtcbiAgICBBbmFseXRpY3NFdmVudHMuc2VuZEFuc3dlcmVkKHRoaXMucXVlc3Rpb25zRGF0YVt0aGlzLmN1cnJlbnRRdWVzdGlvbkluZGV4XSwgYW5zd2VyLCBlbGFwc2VkKTtcbiAgICBVSUNvbnRyb2xsZXIuU2V0RmVlZGJhY2tWaXNpYmlsZSh0cnVlLCB0cnVlKTtcbiAgICBVSUNvbnRyb2xsZXIuQWRkU3RhcigpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5vblF1ZXN0aW9uRW5kKCk7XG4gICAgfSwgMjAwMCk7XG4gIH07XG5cbiAgcHVibGljIGJ1aWxkUXVlc3Rpb25MaXN0ID0gKCkgPT4ge1xuICAgIGNvbnN0IHN1cnZleVF1ZXN0aW9ucyA9IGZldGNoU3VydmV5UXVlc3Rpb25zKHRoaXMuYXBwLmRhdGFVUkwpO1xuICAgIHJldHVybiBzdXJ2ZXlRdWVzdGlvbnM7XG4gIH07XG5cbiAgcHVibGljIEhhc1F1ZXN0aW9uc0xlZnQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudFF1ZXN0aW9uSW5kZXggPD0gdGhpcy5xdWVzdGlvbnNEYXRhLmxlbmd0aCAtIDE7XG4gIH1cblxuICBwdWJsaWMgYnVpbGROZXdRdWVzdGlvbigpOiBxRGF0YSB7XG4gICAgdmFyIHF1ZXN0aW9uRGF0YSA9IHRoaXMucXVlc3Rpb25zRGF0YVt0aGlzLmN1cnJlbnRRdWVzdGlvbkluZGV4XTtcbiAgICByZXR1cm4gcXVlc3Rpb25EYXRhO1xuICB9XG59XG4iLCJpbXBvcnQgeyBidWNrZXQgfSBmcm9tICcuLi9hc3Nlc3NtZW50L2J1Y2tldERhdGEnO1xuXG5leHBvcnQgY2xhc3MgVHJlZU5vZGUge1xuICB2YWx1ZTogbnVtYmVyIHwgYnVja2V0O1xuICBsZWZ0OiBUcmVlTm9kZSB8IG51bGw7XG4gIHJpZ2h0OiBUcmVlTm9kZSB8IG51bGw7XG5cbiAgY29uc3RydWN0b3IodmFsdWU6IG51bWJlcikge1xuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB0aGlzLmxlZnQgPSBudWxsO1xuICAgIHRoaXMucmlnaHQgPSBudWxsO1xuICB9XG59XG5cbi8qKiBHZW5lcmF0ZXMgYSByYW5kb20gYmluYXJ5IHNlYXJjaCB0cmVlIGZyb20gYVxuIC0gSWYgdGhlIHN0YXJ0IGFuZCBlbmQgaW5kaWNlcyBhcmUgdGhlIHNhbWUsIHRoZSBmdW5jdGlvbiByZXR1cm5zIG51bGxcbiAtIElmIHRoZSBtaWRkbGUgaW5kZXggaXMgZXZlbiwgdGhlIGZ1bmN0aW9uIHVzZXMgdGhlIGV4YWN0IG1pZGRsZSBwb2ludFxuIC0gT3RoZXJ3aXNlLCB0aGUgZnVuY3Rpb24gcmFuZG9tbHkgYWRkcyAwIG9yIDEgdG8gdGhlIG1pZGRsZSBpbmRleFxuIC0gUmV0dXJucyB0aGUgcm9vdCBub2RlIG9mIHRoZSBnZW5lcmF0ZWQgYmluYXJ5IHNlYXJjaCB0cmVlIHdoaWNoIGNvbnRhaW5zIHRoZSBidWNrZXRJZHMgaWYgY2FsbGVkIHByb3Blcmx5XG4gLSBleDogbGV0IHJvb3RPZklkcyA9IHNvcnRlZEFycmF5VG9CU1QodGhpcy5idWNrZXRzLCB0aGlzLmJ1Y2tldHNbMF0uYnVja2V0SUQgLSAxLCB0aGlzLmJ1Y2tldHNbdGhpcy5idWNrZXRzLmxlbmd0aCAtIDFdLmJ1Y2tldElELCB1c2VkSW5kaWNlcyk7XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzb3J0ZWRBcnJheVRvSURzQlNUKHN0YXJ0LCBlbmQsIHVzZWRJbmRpY2VzKSB7XG4gIGlmIChzdGFydCA+IGVuZCkgcmV0dXJuIG51bGw7XG5cbiAgLy8gUmFuZG9taXplIG1pZGRsZSBwb2ludCB3aXRoaW4gdW51c2VkIGluZGljZXNcbiAgbGV0IG1pZDtcblxuICBpZiAoKHN0YXJ0ICsgZW5kKSAlIDIgPT09IDAgJiYgdXNlZEluZGljZXMuc2l6ZSAhPT0gMSkge1xuICAgIG1pZCA9IE1hdGguZmxvb3IoKHN0YXJ0ICsgZW5kKSAvIDIpOyAvLyBVc2UgdGhlIGV4YWN0IG1pZGRsZSBwb2ludFxuICAgIGlmIChtaWQgPT09IDApIHJldHVybiBudWxsO1xuICB9IGVsc2Uge1xuICAgIGRvIHtcbiAgICAgIG1pZCA9IE1hdGguZmxvb3IoKHN0YXJ0ICsgZW5kKSAvIDIpO1xuICAgICAgbWlkICs9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIpOyAvLyBSYW5kb21seSBhZGQgMCBvciAxIHRvIG1pZFxuICAgIH0gd2hpbGUgKG1pZCA+IGVuZCB8fCB1c2VkSW5kaWNlcy5oYXMobWlkKSk7XG4gIH1cblxuICB1c2VkSW5kaWNlcy5hZGQobWlkKTtcblxuICBsZXQgbm9kZSA9IG5ldyBUcmVlTm9kZShtaWQpO1xuXG4gIG5vZGUubGVmdCA9IHNvcnRlZEFycmF5VG9JRHNCU1Qoc3RhcnQsIG1pZCAtIDEsIHVzZWRJbmRpY2VzKTtcbiAgbm9kZS5yaWdodCA9IHNvcnRlZEFycmF5VG9JRHNCU1QobWlkICsgMSwgZW5kLCB1c2VkSW5kaWNlcyk7XG5cbiAgcmV0dXJuIG5vZGU7XG59XG4iLCIvL3RoaXMgaXMgd2hlcmUgdGhlIGxvZ2ljIGZvciBoYW5kbGluZyB0aGUgYnVja2V0cyB3aWxsIGdvXG4vL1xuLy9vbmNlIHdlIHN0YXJ0IGFkZGluZyBpbiB0aGUgYXNzZXNzbWVudCBmdW5jdGlvbmFsaXR5XG5pbXBvcnQgeyBVSUNvbnRyb2xsZXIgfSBmcm9tICcuLi9jb21wb25lbnRzL3VpQ29udHJvbGxlcic7XG5pbXBvcnQgeyBxRGF0YSwgYW5zd2VyRGF0YSB9IGZyb20gJy4uL2NvbXBvbmVudHMvcXVlc3Rpb25EYXRhJztcbmltcG9ydCB7IEFuYWx5dGljc0V2ZW50cyB9IGZyb20gJy4uL2NvbXBvbmVudHMvYW5hbHl0aWNzRXZlbnRzJztcbmltcG9ydCB7IEFwcCB9IGZyb20gJy4uL0FwcCc7XG5pbXBvcnQgeyBidWNrZXQsIGJ1Y2tldEl0ZW0gfSBmcm9tICcuL2J1Y2tldERhdGEnO1xuaW1wb3J0IHsgQmFzZVF1aXogfSBmcm9tICcuLi9iYXNlUXVpeic7XG5pbXBvcnQgeyBmZXRjaEFzc2Vzc21lbnRCdWNrZXRzIH0gZnJvbSAnLi4vY29tcG9uZW50cy9qc29uVXRpbHMnO1xuaW1wb3J0IHsgVHJlZU5vZGUsIHNvcnRlZEFycmF5VG9JRHNCU1QgfSBmcm9tICcuLi9jb21wb25lbnRzL3ROb2RlJztcbmltcG9ydCB7IHJhbmRGcm9tLCBzaHVmZmxlQXJyYXkgfSBmcm9tICcuLi9jb21wb25lbnRzL21hdGhVdGlscyc7XG5pbXBvcnQgeyBBdWRpb0NvbnRyb2xsZXIgfSBmcm9tICcuLi9jb21wb25lbnRzL2F1ZGlvQ29udHJvbGxlcic7XG5cbmVudW0gc2VhcmNoU3RhZ2Uge1xuICBCaW5hcnlTZWFyY2gsXG4gIExpbmVhclNlYXJjaFVwLFxuICBMaW5lYXJTZWFyY2hEb3duLFxufVxuXG5lbnVtIEJ1Y2tldEdlbk1vZGUge1xuICBSYW5kb21CU1QsXG4gIExpbmVhckFycmF5QmFzZWQsXG59XG5cbmV4cG9ydCBjbGFzcyBBc3Nlc3NtZW50IGV4dGVuZHMgQmFzZVF1aXoge1xuICBwdWJsaWMgdW5pdHlCcmlkZ2U7XG5cbiAgcHVibGljIGN1cnJlbnROb2RlOiBUcmVlTm9kZTtcbiAgcHVibGljIGN1cnJlbnRRdWVzdGlvbjogcURhdGE7XG4gIHB1YmxpYyBidWNrZXRBcnJheTogbnVtYmVyW107XG4gIHB1YmxpYyBxdWVzdGlvbk51bWJlcjogbnVtYmVyO1xuXG4gIHB1YmxpYyBidWNrZXRzOiBidWNrZXRbXTtcbiAgcHVibGljIGN1cnJlbnRCdWNrZXQ6IGJ1Y2tldDtcbiAgcHVibGljIG51bUJ1Y2tldHM6IG51bWJlcjtcbiAgcHVibGljIGJhc2FsQnVja2V0OiBudW1iZXI7XG4gIHB1YmxpYyBjZWlsaW5nQnVja2V0OiBudW1iZXI7XG5cbiAgcHVibGljIGN1cnJlbnRMaW5lYXJCdWNrZXRJbmRleDogbnVtYmVyO1xuICBwdWJsaWMgY3VycmVudExpbmVhclRhcmdldEluZGV4OiBudW1iZXI7XG5cbiAgcHJvdGVjdGVkIGJ1Y2tldEdlbk1vZGU6IEJ1Y2tldEdlbk1vZGUgPSBCdWNrZXRHZW5Nb2RlLlJhbmRvbUJTVDtcblxuICBwcml2YXRlIE1BWF9TVEFSU19DT1VOVF9JTl9MSU5FQVJfTU9ERSA9IDIwO1xuXG4gIGNvbnN0cnVjdG9yKGRhdGFVUkw6IHN0cmluZywgdW5pdHlCcmlkZ2U6IGFueSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5kYXRhVVJMID0gZGF0YVVSTDtcbiAgICB0aGlzLnVuaXR5QnJpZGdlID0gdW5pdHlCcmlkZ2U7XG4gICAgdGhpcy5xdWVzdGlvbk51bWJlciA9IDA7XG4gICAgY29uc29sZS5sb2coJ2FwcCBpbml0aWFsaXplZCcpO1xuICAgIHRoaXMuc2V0dXBVSUhhbmRsZXJzKCk7XG4gIH1cbiAgcHJpdmF0ZSBzZXR1cFVJSGFuZGxlcnMoKTogdm9pZCB7XG4gICAgVUlDb250cm9sbGVyLlNldEJ1dHRvblByZXNzQWN0aW9uKHRoaXMuaGFuZGxlQW5zd2VyQnV0dG9uUHJlc3MpO1xuICAgIFVJQ29udHJvbGxlci5TZXRTdGFydEFjdGlvbih0aGlzLnN0YXJ0QXNzZXNzbWVudCk7XG4gICAgVUlDb250cm9sbGVyLlNldEV4dGVybmFsQnVja2V0Q29udHJvbHNHZW5lcmF0aW9uSGFuZGxlcih0aGlzLmdlbmVyYXRlRGV2TW9kZUJ1Y2tldENvbnRyb2xzSW5Db250YWluZXIpO1xuICB9XG4gIHB1YmxpYyBSdW4oYXBwbGluazogQXBwKTogdm9pZCB7XG4gICAgdGhpcy5hcHAgPSBhcHBsaW5rO1xuICAgIHRoaXMuYnVpbGRCdWNrZXRzKHRoaXMuYnVja2V0R2VuTW9kZSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyh0aGlzLmN1cnJlbnRCdWNrZXQpO1xuICAgICAgdGhpcy51bml0eUJyaWRnZS5TZW5kTG9hZGVkKCk7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgaGFuZGxlQnVja2V0R2VuTW9kZUNoYW5nZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICAvLyBUT0RPOiBJbXBsZW1lbnQgaGFuZGxlQnVja2V0R2VuTW9kZUNoYW5nZVxuICAgIHRoaXMuYnVja2V0R2VuTW9kZSA9IHBhcnNlSW50KHRoaXMuZGV2TW9kZUJ1Y2tldEdlblNlbGVjdC52YWx1ZSkgYXMgQnVja2V0R2VuTW9kZTtcbiAgICB0aGlzLmJ1aWxkQnVja2V0cyh0aGlzLmJ1Y2tldEdlbk1vZGUpLnRoZW4oKCkgPT4ge1xuICAgICAgLy8gRmluaXNoZWQgYnVpbGRpbmcgYnVja2V0c1xuICAgIH0pO1xuICAgIHRoaXMudXBkYXRlQnVja2V0SW5mbygpO1xuICB9XG5cbiAgcHVibGljIGhhbmRsZUNvcnJlY3RMYWJlbFNob3duQ2hhbmdlKCk6IHZvaWQge1xuICAgIFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLlNldENvcnJlY3RMYWJlbFZpc2liaWxpdHkodGhpcy5pc0NvcnJlY3RMYWJlbFNob3duKTtcbiAgfVxuXG4gIHB1YmxpYyBoYW5kbGVBbmltYXRpb25TcGVlZE11bHRpcGxpZXJDaGFuZ2UoKTogdm9pZCB7XG4gICAgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuU2V0QW5pbWF0aW9uU3BlZWRNdWx0aXBsaWVyKHRoaXMuYW5pbWF0aW9uU3BlZWRNdWx0aXBsaWVyKTtcbiAgfVxuXG4gIHB1YmxpYyBoYW5kbGVCdWNrZXRJbmZvU2hvd25DaGFuZ2UoKTogdm9pZCB7XG4gICAgdGhpcy51cGRhdGVCdWNrZXRJbmZvKCk7XG4gIH1cblxuICBwdWJsaWMgaGFuZGxlQnVja2V0Q29udHJvbHNTaG93bkNoYW5nZSgpOiB2b2lkIHtcbiAgICBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5TZXRCdWNrZXRDb250cm9sc1Zpc2liaWxpdHkodGhpcy5pc0J1Y2tldENvbnRyb2xzRW5hYmxlZCk7XG4gIH1cblxuICBwdWJsaWMgZ2VuZXJhdGVEZXZNb2RlQnVja2V0Q29udHJvbHNJbkNvbnRhaW5lciA9IChjb250YWluZXI6IEhUTUxFbGVtZW50LCBjbGlja0hhbmRsZXI6ICgpID0+IHZvaWQpID0+IHtcbiAgICBpZiAodGhpcy5pc0luRGV2TW9kZSAmJiB0aGlzLmJ1Y2tldEdlbk1vZGUgPT09IEJ1Y2tldEdlbk1vZGUuTGluZWFyQXJyYXlCYXNlZCkge1xuICAgICAgLy8gQ3JlYXRlIGJ1dHRvbnMgZm9yIHRoZSBjdXJyZW50IGJ1Y2tldCBpdGVtcywgdGhhdCBhcmUgY2xpY2thYmxlIGFuZCB3aWxsIHRyaWdnZXIgdGhlIGl0ZW0gYXVkaW9cbiAgICAgIC8vIEFkZCAyIGJ1dHRvbnMsIG9uZSBmb3IgbW92aW5nIHVwIGFuZCBvbmUgZm9yIG1vdmluZyBkb3duIHRoZSBidWNrZXQgdHJlZVxuICAgICAgLy8gRW1wdHkgdGhlIGNvbnRhaW5lciBiZWZvcmUgYWRkaW5nIG5ldyBidXR0b25zXG4gICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY3VycmVudEJ1Y2tldC5pdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgaXRlbSA9IHRoaXMuY3VycmVudEJ1Y2tldC5pdGVtc1tpXTtcbiAgICAgICAgbGV0IGl0ZW1CdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgbGV0IGluZGV4ID0gaTtcbiAgICAgICAgaXRlbUJ1dHRvbi5pbm5lclRleHQgPSBpdGVtLml0ZW1OYW1lO1xuICAgICAgICBpdGVtQnV0dG9uLnN0eWxlLm1hcmdpbiA9ICcycHgnO1xuICAgICAgICBpdGVtQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5jdXJyZW50TGluZWFyVGFyZ2V0SW5kZXggPSBpbmRleDtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRCdWNrZXQudXNlZEl0ZW1zID0gW107XG4gICAgICAgICAgY29uc29sZS5sb2coJ0NsaWNrZWQgb24gaXRlbSAnICsgaXRlbS5pdGVtTmFtZSArICcgYXQgaW5kZXggJyArIHRoaXMuY3VycmVudExpbmVhclRhcmdldEluZGV4KTtcbiAgICAgICAgICAvLyBVSUNvbnRyb2xsZXIuUmVhZHlGb3JOZXh0KHRoaXMuYnVpbGROZXdRdWVzdGlvbigpLCBmYWxzZSk7XG4gICAgICAgICAgY29uc3QgbmV3USA9IHRoaXMuYnVpbGROZXdRdWVzdGlvbigpO1xuICAgICAgICAgIFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmFuc3dlcnNDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgICAgICAgIGZvciAobGV0IGIgaW4gVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuYnV0dG9ucykge1xuICAgICAgICAgICAgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuYnV0dG9uc1tiXS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICAgICAgfVxuICAgICAgICAgIFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnNob3duID0gZmFsc2U7XG4gICAgICAgICAgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkubmV4dFF1ZXN0aW9uID0gbmV3UTtcbiAgICAgICAgICBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5xdWVzdGlvbnNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkucXVlc3Rpb25zQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgVUlDb250cm9sbGVyLlNob3dRdWVzdGlvbihuZXdRKTtcbiAgICAgICAgICBBdWRpb0NvbnRyb2xsZXIuUGxheUF1ZGlvKFxuICAgICAgICAgICAgdGhpcy5idWlsZE5ld1F1ZXN0aW9uKCkucHJvbXB0QXVkaW8sXG4gICAgICAgICAgICBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5zaG93T3B0aW9ucyxcbiAgICAgICAgICAgIFVJQ29udHJvbGxlci5TaG93QXVkaW9BbmltYXRpb25cbiAgICAgICAgICApO1xuICAgICAgICAgIC8vIGNsaWNrSGFuZGxlcigpO1xuICAgICAgICB9O1xuICAgICAgICBjb250YWluZXIuYXBwZW5kKGl0ZW1CdXR0b24pO1xuICAgICAgfVxuICAgICAgLy8gQ3JlYXRlIDIgbW9yZSBidXR0b25zIGZvciBtb3ZpbmcgdXAgYW5kIGRvd24gdGhlIGJ1Y2tldCB0cmVlXG4gICAgICBsZXQgcHJldkJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgcHJldkJ1dHRvbi5pbm5lclRleHQgPSAnUHJldiBCdWNrZXQnO1xuICAgICAgaWYgKHRoaXMuY3VycmVudExpbmVhckJ1Y2tldEluZGV4ID09IDApIHtcbiAgICAgICAgcHJldkJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBwcmV2QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50TGluZWFyQnVja2V0SW5kZXggPiAwKSB7XG4gICAgICAgICAgdGhpcy5jdXJyZW50TGluZWFyQnVja2V0SW5kZXgtLTtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRMaW5lYXJUYXJnZXRJbmRleCA9IDA7XG4gICAgICAgICAgdGhpcy50cnlNb3ZlQnVja2V0KGZhbHNlKTtcbiAgICAgICAgICBVSUNvbnRyb2xsZXIuUmVhZHlGb3JOZXh0KHRoaXMuYnVpbGROZXdRdWVzdGlvbigpKTtcbiAgICAgICAgICB0aGlzLnVwZGF0ZUJ1Y2tldEluZm8oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jdXJyZW50TGluZWFyQnVja2V0SW5kZXggPT0gMCkge1xuICAgICAgICAgIHByZXZCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGxldCBuZXh0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICBuZXh0QnV0dG9uLmlubmVyVGV4dCA9ICdOZXh0IEJ1Y2tldCc7XG4gICAgICBpZiAodGhpcy5jdXJyZW50TGluZWFyQnVja2V0SW5kZXggPT0gdGhpcy5idWNrZXRzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgbmV4dEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBuZXh0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50TGluZWFyQnVja2V0SW5kZXggPCB0aGlzLmJ1Y2tldHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIHRoaXMuY3VycmVudExpbmVhckJ1Y2tldEluZGV4Kys7XG4gICAgICAgICAgdGhpcy5jdXJyZW50TGluZWFyVGFyZ2V0SW5kZXggPSAwO1xuICAgICAgICAgIHRoaXMudHJ5TW92ZUJ1Y2tldChmYWxzZSk7XG4gICAgICAgICAgVUlDb250cm9sbGVyLlJlYWR5Rm9yTmV4dCh0aGlzLmJ1aWxkTmV3UXVlc3Rpb24oKSk7XG4gICAgICAgICAgdGhpcy51cGRhdGVCdWNrZXRJbmZvKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBBcHBlbmQgdGhlIGJ1dHRvbnMgdG8gdGhlIGNvbnRhaW5lclxuICAgICAgbGV0IGJ1dHRvbnNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGJ1dHRvbnNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgIGJ1dHRvbnNDb250YWluZXIuc3R5bGUuZmxleERpcmVjdGlvbiA9ICdyb3cnO1xuICAgICAgYnV0dG9uc0NvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdjZW50ZXInO1xuICAgICAgYnV0dG9uc0NvbnRhaW5lci5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XG4gICAgICBidXR0b25zQ29udGFpbmVyLmFwcGVuZENoaWxkKHByZXZCdXR0b24pO1xuICAgICAgYnV0dG9uc0NvbnRhaW5lci5hcHBlbmRDaGlsZChuZXh0QnV0dG9uKTtcblxuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGJ1dHRvbnNDb250YWluZXIpO1xuICAgIH1cbiAgfTtcblxuICBwdWJsaWMgdXBkYXRlQnVja2V0SW5mbyA9ICgpID0+IHtcbiAgICBpZiAodGhpcy5jdXJyZW50QnVja2V0ICE9IG51bGwpIHtcbiAgICAgIHRoaXMuZGV2TW9kZUJ1Y2tldEluZm9Db250YWluZXIuaW5uZXJIVE1MID0gYEJ1Y2tldDogJHt0aGlzLmN1cnJlbnRCdWNrZXQuYnVja2V0SUR9PGJyLz5Db3JyZWN0OiAke3RoaXMuY3VycmVudEJ1Y2tldC5udW1Db3JyZWN0fTxici8+VHJpZWQ6ICR7dGhpcy5jdXJyZW50QnVja2V0Lm51bVRyaWVkfTxici8+RmFpbGVkOiAke3RoaXMuY3VycmVudEJ1Y2tldC5udW1Db25zZWN1dGl2ZVdyb25nfWA7XG4gICAgfVxuICB9O1xuXG4gIHB1YmxpYyBzdGFydEFzc2Vzc21lbnQgPSAoKSA9PiB7XG4gICAgVUlDb250cm9sbGVyLlJlYWR5Rm9yTmV4dCh0aGlzLmJ1aWxkTmV3UXVlc3Rpb24oKSk7XG4gICAgaWYgKHRoaXMuaXNJbkRldk1vZGUpIHtcbiAgICAgIHRoaXMuaGlkZURldk1vZGVCdXR0b24oKTtcbiAgICB9XG4gIH07XG5cbiAgcHVibGljIGJ1aWxkQnVja2V0cyA9IGFzeW5jIChidWNrZXRHZW5Nb2RlOiBCdWNrZXRHZW5Nb2RlKSA9PiB7XG4gICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSB0aGUgYnVja2V0cyBsb2FkZWQsIGxvYWQgdGhlbSBhbmQgaW5pdGlhbGl6ZSB0aGUgY3VycmVudCBub2RlLCB3aGljaCBpcyB0aGUgc3RhcnRpbmcgcG9pbnRcbiAgICBpZiAodGhpcy5idWNrZXRzID09PSB1bmRlZmluZWQgfHwgdGhpcy5idWNrZXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc3QgcmVzID0gZmV0Y2hBc3Nlc3NtZW50QnVja2V0cyh0aGlzLmFwcC5HZXREYXRhVVJMKCkpLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICB0aGlzLmJ1Y2tldHMgPSByZXN1bHQ7XG4gICAgICAgIHRoaXMubnVtQnVja2V0cyA9IHJlc3VsdC5sZW5ndGg7XG4gICAgICAgIGNvbnNvbGUubG9nKCdidWNrZXRzOiAnICsgdGhpcy5idWNrZXRzKTtcbiAgICAgICAgdGhpcy5idWNrZXRBcnJheSA9IEFycmF5LmZyb20oQXJyYXkodGhpcy5udW1CdWNrZXRzKSwgKF8sIGkpID0+IGkgKyAxKTtcbiAgICAgICAgY29uc29sZS5sb2coJ2VtcHR5IGFycmF5ICcgKyB0aGlzLmJ1Y2tldEFycmF5KTtcbiAgICAgICAgbGV0IHVzZWRJbmRpY2VzID0gbmV3IFNldDxudW1iZXI+KCk7XG4gICAgICAgIHVzZWRJbmRpY2VzLmFkZCgwKTtcbiAgICAgICAgbGV0IHJvb3RPZklEcyA9IHNvcnRlZEFycmF5VG9JRHNCU1QoXG4gICAgICAgICAgdGhpcy5idWNrZXRzWzBdLmJ1Y2tldElEIC0gMSxcbiAgICAgICAgICB0aGlzLmJ1Y2tldHNbdGhpcy5idWNrZXRzLmxlbmd0aCAtIDFdLmJ1Y2tldElELFxuICAgICAgICAgIHVzZWRJbmRpY2VzXG4gICAgICAgICk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiR2VuZXJhdGVkIHRoZSBidWNrZXRzIHJvb3QgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2cocm9vdE9mSURzKTtcbiAgICAgICAgbGV0IGJ1Y2tldHNSb290ID0gdGhpcy5jb252ZXJ0VG9CdWNrZXRCU1Qocm9vdE9mSURzLCB0aGlzLmJ1Y2tldHMpO1xuICAgICAgICBjb25zb2xlLmxvZygnR2VuZXJhdGVkIHRoZSBidWNrZXRzIHJvb3QgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLScpO1xuICAgICAgICBjb25zb2xlLmxvZyhidWNrZXRzUm9vdCk7XG4gICAgICAgIHRoaXMuYmFzYWxCdWNrZXQgPSB0aGlzLm51bUJ1Y2tldHMgKyAxO1xuICAgICAgICB0aGlzLmNlaWxpbmdCdWNrZXQgPSAtMTtcbiAgICAgICAgdGhpcy5jdXJyZW50Tm9kZSA9IGJ1Y2tldHNSb290O1xuICAgICAgICB0aGlzLnRyeU1vdmVCdWNrZXQoZmFsc2UpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoYnVja2V0R2VuTW9kZSA9PT0gQnVja2V0R2VuTW9kZS5SYW5kb21CU1QpIHtcbiAgICAgICAgLy8gSWYgd2UgaGF2ZSB0aGUgYnVja2V0cyBsb2FkZWQsIHdlIGNhbiBpbml0aWFsaXplIHRoZSBjdXJyZW50IG5vZGUsIHdoaWNoIGlzIHRoZSBzdGFydGluZyBwb2ludFxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgIGxldCB1c2VkSW5kaWNlcyA9IG5ldyBTZXQ8bnVtYmVyPigpO1xuICAgICAgICAgIHVzZWRJbmRpY2VzLmFkZCgwKTtcbiAgICAgICAgICBsZXQgcm9vdE9mSURzID0gc29ydGVkQXJyYXlUb0lEc0JTVChcbiAgICAgICAgICAgIHRoaXMuYnVja2V0c1swXS5idWNrZXRJRCAtIDEsXG4gICAgICAgICAgICB0aGlzLmJ1Y2tldHNbdGhpcy5idWNrZXRzLmxlbmd0aCAtIDFdLmJ1Y2tldElELFxuICAgICAgICAgICAgdXNlZEluZGljZXNcbiAgICAgICAgICApO1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiR2VuZXJhdGVkIHRoZSBidWNrZXRzIHJvb3QgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyb290T2ZJRHMpO1xuICAgICAgICAgIGxldCBidWNrZXRzUm9vdCA9IHRoaXMuY29udmVydFRvQnVja2V0QlNUKHJvb3RPZklEcywgdGhpcy5idWNrZXRzKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnR2VuZXJhdGVkIHRoZSBidWNrZXRzIHJvb3QgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLScpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGJ1Y2tldHNSb290KTtcbiAgICAgICAgICB0aGlzLmJhc2FsQnVja2V0ID0gdGhpcy5udW1CdWNrZXRzICsgMTtcbiAgICAgICAgICB0aGlzLmNlaWxpbmdCdWNrZXQgPSAtMTtcbiAgICAgICAgICB0aGlzLmN1cnJlbnROb2RlID0gYnVja2V0c1Jvb3Q7XG4gICAgICAgICAgdGhpcy50cnlNb3ZlQnVja2V0KGZhbHNlKTtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChidWNrZXRHZW5Nb2RlID09PSBCdWNrZXRHZW5Nb2RlLkxpbmVhckFycmF5QmFzZWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRMaW5lYXJCdWNrZXRJbmRleCA9IDA7XG4gICAgICAgICAgdGhpcy5jdXJyZW50TGluZWFyVGFyZ2V0SW5kZXggPSAwO1xuICAgICAgICAgIHRoaXMudHJ5TW92ZUJ1Y2tldChmYWxzZSk7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIGEgYmluYXJ5IHNlYXJjaCB0cmVlIG9mIG51bWJlcnMgdG8gYSBiaW5hcnkgc2VhcmNoIHRyZWUgb2YgYnVja2V0IG9iamVjdHNcbiAgICogQHBhcmFtIG5vZGUgSXMgYSByb290IG5vZGUgb2YgYSBiaW5hcnkgc2VhcmNoIHRyZWVcbiAgICogQHBhcmFtIGJ1Y2tldHMgSXMgYW4gYXJyYXkgb2YgYnVja2V0IG9iamVjdHNcbiAgICogQHJldHVybnMgQSByb290IG5vZGUgb2YgYSBiaW5hcnkgc2VhcmNoIHRyZWUgd2hlcmUgdGhlIHZhbHVlIG9mIGVhY2ggbm9kZSBpcyBhIGJ1Y2tldCBvYmplY3RcbiAgICovXG4gIHB1YmxpYyBjb252ZXJ0VG9CdWNrZXRCU1QgPSAobm9kZTogVHJlZU5vZGUsIGJ1Y2tldHM6IGJ1Y2tldFtdKSA9PiB7XG4gICAgLy8gVHJhdmVyc2UgZWFjaCBlbGVtZW50IHRha2UgdGhlIHZhbHVlIGFuZCBmaW5kIHRoYXQgYnVja2V0IGluIHRoZSBidWNrZXRzIGFycmF5IGFuZCBhc3NpZ24gdGhhdCBidWNrZXQgaW5zdGVhZCBvZiB0aGUgbnVtYmVyIHZhbHVlXG4gICAgaWYgKG5vZGUgPT09IG51bGwpIHJldHVybiBub2RlO1xuXG4gICAgbGV0IGJ1Y2tldElkID0gbm9kZS52YWx1ZTtcbiAgICBub2RlLnZhbHVlID0gYnVja2V0cy5maW5kKChidWNrZXQpID0+IGJ1Y2tldC5idWNrZXRJRCA9PT0gYnVja2V0SWQpO1xuICAgIGlmIChub2RlLmxlZnQgIT09IG51bGwpIG5vZGUubGVmdCA9IHRoaXMuY29udmVydFRvQnVja2V0QlNUKG5vZGUubGVmdCwgYnVja2V0cyk7XG4gICAgaWYgKG5vZGUucmlnaHQgIT09IG51bGwpIG5vZGUucmlnaHQgPSB0aGlzLmNvbnZlcnRUb0J1Y2tldEJTVChub2RlLnJpZ2h0LCBidWNrZXRzKTtcblxuICAgIHJldHVybiBub2RlO1xuICB9O1xuXG4gIHB1YmxpYyBpbml0QnVja2V0ID0gKGJ1Y2tldDogYnVja2V0KSA9PiB7XG4gICAgdGhpcy5jdXJyZW50QnVja2V0ID0gYnVja2V0O1xuICAgIHRoaXMuY3VycmVudEJ1Y2tldC51c2VkSXRlbXMgPSBbXTtcbiAgICB0aGlzLmN1cnJlbnRCdWNrZXQubnVtVHJpZWQgPSAwO1xuICAgIHRoaXMuY3VycmVudEJ1Y2tldC5udW1Db3JyZWN0ID0gMDtcbiAgICB0aGlzLmN1cnJlbnRCdWNrZXQubnVtQ29uc2VjdXRpdmVXcm9uZyA9IDA7XG4gICAgdGhpcy5jdXJyZW50QnVja2V0LnRlc3RlZCA9IHRydWU7XG4gICAgdGhpcy5jdXJyZW50QnVja2V0LnBhc3NlZCA9IGZhbHNlO1xuICB9O1xuXG4gIHB1YmxpYyBoYW5kbGVBbnN3ZXJCdXR0b25QcmVzcyA9IChhbnN3ZXI6IG51bWJlciwgZWxhcHNlZDogbnVtYmVyKSA9PiB7XG4gICAgaWYgKHRoaXMuYnVja2V0R2VuTW9kZSA9PT0gQnVja2V0R2VuTW9kZS5SYW5kb21CU1QpIHtcbiAgICAgIEFuYWx5dGljc0V2ZW50cy5zZW5kQW5zd2VyZWQodGhpcy5jdXJyZW50UXVlc3Rpb24sIGFuc3dlciwgZWxhcHNlZCk7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlQ3VycmVudEJ1Y2tldFZhbHVlc0FmdGVyQW5zd2VyaW5nKGFuc3dlcik7XG4gICAgdGhpcy51cGRhdGVGZWVkYmFja0FmdGVyQW5zd2VyKGFuc3dlcik7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdDb21wbGV0ZWQgZmlyc3QgVGltZW91dCcpO1xuICAgICAgdGhpcy5vblF1ZXN0aW9uRW5kKCk7XG4gICAgfSwgMjAwMCAqIHRoaXMuYW5pbWF0aW9uU3BlZWRNdWx0aXBsaWVyKTtcbiAgfTtcblxuICBwcml2YXRlIHVwZGF0ZUZlZWRiYWNrQWZ0ZXJBbnN3ZXIoYW5zd2VyOiBudW1iZXIpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLmJ1Y2tldEdlbk1vZGUgPT09IEJ1Y2tldEdlbk1vZGUuTGluZWFyQXJyYXlCYXNlZCAmJlxuICAgICAgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuc2hvd25TdGFyc0NvdW50IDwgdGhpcy5NQVhfU1RBUlNfQ09VTlRfSU5fTElORUFSX01PREVcbiAgICApIHtcbiAgICAgIFVJQ29udHJvbGxlci5BZGRTdGFyKCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmJ1Y2tldEdlbk1vZGUgPT09IEJ1Y2tldEdlbk1vZGUuUmFuZG9tQlNUKSB7XG4gICAgICBVSUNvbnRyb2xsZXIuQWRkU3RhcigpO1xuICAgIH1cbiAgICBVSUNvbnRyb2xsZXIuU2V0RmVlZGJhY2tWaXNpYmlsZShcbiAgICAgIHRydWUsXG4gICAgICB0aGlzLmN1cnJlbnRRdWVzdGlvbi5hbnN3ZXJzW2Fuc3dlciAtIDFdLmFuc3dlck5hbWUgPT0gdGhpcy5jdXJyZW50UXVlc3Rpb24uY29ycmVjdFxuICAgICk7XG4gIH1cbiAgcHJpdmF0ZSB1cGRhdGVDdXJyZW50QnVja2V0VmFsdWVzQWZ0ZXJBbnN3ZXJpbmcoYW5zd2VyOiBudW1iZXIpIHtcbiAgICB0aGlzLmN1cnJlbnRCdWNrZXQubnVtVHJpZWQgKz0gMTtcbiAgICBpZiAodGhpcy5jdXJyZW50UXVlc3Rpb24uYW5zd2Vyc1thbnN3ZXIgLSAxXS5hbnN3ZXJOYW1lID09IHRoaXMuY3VycmVudFF1ZXN0aW9uLmNvcnJlY3QpIHtcbiAgICAgIHRoaXMuY3VycmVudEJ1Y2tldC5udW1Db3JyZWN0ICs9IDE7XG4gICAgICB0aGlzLmN1cnJlbnRCdWNrZXQubnVtQ29uc2VjdXRpdmVXcm9uZyA9IDA7XG4gICAgICBjb25zb2xlLmxvZygnQW5zd2VyZWQgY29ycmVjdGx5Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY3VycmVudEJ1Y2tldC5udW1Db25zZWN1dGl2ZVdyb25nICs9IDE7XG4gICAgICBjb25zb2xlLmxvZygnQW5zd2VyZWQgaW5jb3JyZWN0bHksICcgKyB0aGlzLmN1cnJlbnRCdWNrZXQubnVtQ29uc2VjdXRpdmVXcm9uZyk7XG4gICAgfVxuICB9XG4gIHB1YmxpYyBvblF1ZXN0aW9uRW5kID0gKCkgPT4ge1xuICAgIGxldCBxdWVzdGlvbkVuZFRpbWVvdXQgPSB0aGlzLkhhc1F1ZXN0aW9uc0xlZnQoKVxuICAgICAgPyA1MDAgKiB0aGlzLmFuaW1hdGlvblNwZWVkTXVsdGlwbGllclxuICAgICAgOiA0MDAwICogdGhpcy5hbmltYXRpb25TcGVlZE11bHRpcGxpZXI7XG5cbiAgICBjb25zdCBlbmRPcGVyYXRpb25zID0gKCkgPT4ge1xuICAgICAgVUlDb250cm9sbGVyLlNldEZlZWRiYWNrVmlzaWJpbGUoZmFsc2UsIGZhbHNlKTtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5idWNrZXRHZW5Nb2RlID09PSBCdWNrZXRHZW5Nb2RlLkxpbmVhckFycmF5QmFzZWQgJiZcbiAgICAgICAgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuc2hvd25TdGFyc0NvdW50IDwgdGhpcy5NQVhfU1RBUlNfQ09VTlRfSU5fTElORUFSX01PREVcbiAgICAgICkge1xuICAgICAgICBVSUNvbnRyb2xsZXIuQ2hhbmdlU3RhckltYWdlQWZ0ZXJBbmltYXRpb24oKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5idWNrZXRHZW5Nb2RlID09PSBCdWNrZXRHZW5Nb2RlLlJhbmRvbUJTVCkge1xuICAgICAgICBVSUNvbnRyb2xsZXIuQ2hhbmdlU3RhckltYWdlQWZ0ZXJBbmltYXRpb24oKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLkhhc1F1ZXN0aW9uc0xlZnQoKSkge1xuICAgICAgICBpZiAodGhpcy5idWNrZXRHZW5Nb2RlID09PSBCdWNrZXRHZW5Nb2RlLkxpbmVhckFycmF5QmFzZWQgJiYgIXRoaXMuaXNCdWNrZXRDb250cm9sc0VuYWJsZWQpIHtcbiAgICAgICAgICBpZiAodGhpcy5jdXJyZW50TGluZWFyVGFyZ2V0SW5kZXggPCB0aGlzLmJ1Y2tldHNbdGhpcy5jdXJyZW50TGluZWFyQnVja2V0SW5kZXhdLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50TGluZWFyVGFyZ2V0SW5kZXgrKztcbiAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gcmVzZXQgdGhlIHVzZWQgaXRlbXMgYXJyYXkgd2hlbiB3ZSBtb3ZlIHRvIHRoZSBuZXh0IHF1ZXN0aW9uIGluIGxpbmVhciBtb2RlXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRCdWNrZXQudXNlZEl0ZW1zID0gW107XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5jdXJyZW50TGluZWFyVGFyZ2V0SW5kZXggPj0gdGhpcy5idWNrZXRzW3RoaXMuY3VycmVudExpbmVhckJ1Y2tldEluZGV4XS5pdGVtcy5sZW5ndGggJiZcbiAgICAgICAgICAgIHRoaXMuY3VycmVudExpbmVhckJ1Y2tldEluZGV4IDwgdGhpcy5idWNrZXRzLmxlbmd0aFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50TGluZWFyQnVja2V0SW5kZXgrKztcbiAgICAgICAgICAgIHRoaXMuY3VycmVudExpbmVhclRhcmdldEluZGV4ID0gMDtcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRMaW5lYXJCdWNrZXRJbmRleCA8IHRoaXMuYnVja2V0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgdGhpcy50cnlNb3ZlQnVja2V0KGZhbHNlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdObyBxdWVzdGlvbnMgbGVmdCcpO1xuICAgICAgICAgICAgICB0aGlzLm9uRW5kKCk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBVSUNvbnRyb2xsZXIuUmVhZHlGb3JOZXh0KHRoaXMuYnVpbGROZXdRdWVzdGlvbigpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdObyBxdWVzdGlvbnMgbGVmdCcpO1xuICAgICAgICB0aGlzLm9uRW5kKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIENyZWF0ZSBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBhZnRlciB0aGUgc3BlY2lmaWVkIHRpbWVvdXRcbiAgICBjb25zdCB0aW1lb3V0UHJvbWlzZSA9IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSwgcXVlc3Rpb25FbmRUaW1lb3V0KTtcbiAgICB9KTtcblxuICAgIC8vIEV4ZWN1dGUgZW5kT3BlcmF0aW9ucyBhZnRlciB0aW1lb3V0UHJvbWlzZSByZXNvbHZlc1xuICAgIHRpbWVvdXRQcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgZW5kT3BlcmF0aW9ucygpO1xuXG4gICAgICAvLyBDb21wbGV0ZWQgZW5kIG9wZXJhdGlvbnMsIHNob3VsZCB1cGRhdGUgYnVja2V0IGluZm8gaWYgaW4gZGV2IG1vZGVcbiAgICAgIGlmICh0aGlzLmlzSW5EZXZNb2RlKSB7XG4gICAgICAgIHRoaXMudXBkYXRlQnVja2V0SW5mbygpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuICBwdWJsaWMgYnVpbGROZXdRdWVzdGlvbiA9ICgpID0+IHtcbiAgICBpZiAodGhpcy5pc0xpbmVhckFycmF5RXhoYXVzdGVkKCkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHRhcmdldEl0ZW0gPSB0aGlzLnNlbGVjdFRhcmdldEl0ZW0oKTtcbiAgICBjb25zdCBmb2lscyA9IHRoaXMuZ2VuZXJhdGVGb2lscyh0YXJnZXRJdGVtKTtcbiAgICBjb25zdCBhbnN3ZXJPcHRpb25zID0gdGhpcy5zaHVmZmxlQW5zd2VyT3B0aW9ucyhbdGFyZ2V0SXRlbSwgLi4uZm9pbHNdKTtcblxuICAgIGNvbnN0IG5ld1F1ZXN0aW9uID0gdGhpcy5jcmVhdGVRdWVzdGlvbih0YXJnZXRJdGVtLCBhbnN3ZXJPcHRpb25zKTtcbiAgICB0aGlzLmN1cnJlbnRRdWVzdGlvbiA9IG5ld1F1ZXN0aW9uO1xuICAgIHRoaXMucXVlc3Rpb25OdW1iZXIgKz0gMTtcblxuICAgIHJldHVybiBuZXdRdWVzdGlvbjtcbiAgfTtcblxuICBwcml2YXRlIGlzTGluZWFyQXJyYXlFeGhhdXN0ZWQgPSAoKTogYm9vbGVhbiA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuYnVja2V0R2VuTW9kZSA9PT0gQnVja2V0R2VuTW9kZS5MaW5lYXJBcnJheUJhc2VkICYmXG4gICAgICB0aGlzLmN1cnJlbnRMaW5lYXJUYXJnZXRJbmRleCA+PSB0aGlzLmJ1Y2tldHNbdGhpcy5jdXJyZW50TGluZWFyQnVja2V0SW5kZXhdLml0ZW1zLmxlbmd0aFxuICAgICk7XG4gIH07XG5cbiAgcHJpdmF0ZSBzZWxlY3RUYXJnZXRJdGVtID0gKCk6IGFueSA9PiB7XG4gICAgbGV0IHRhcmdldEl0ZW07XG5cbiAgICBpZiAodGhpcy5idWNrZXRHZW5Nb2RlID09PSBCdWNrZXRHZW5Nb2RlLlJhbmRvbUJTVCkge1xuICAgICAgdGFyZ2V0SXRlbSA9IHRoaXMuc2VsZWN0UmFuZG9tVW51c2VkSXRlbSgpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5idWNrZXRHZW5Nb2RlID09PSBCdWNrZXRHZW5Nb2RlLkxpbmVhckFycmF5QmFzZWQpIHtcbiAgICAgIHRhcmdldEl0ZW0gPSB0aGlzLmJ1Y2tldHNbdGhpcy5jdXJyZW50TGluZWFyQnVja2V0SW5kZXhdLml0ZW1zW3RoaXMuY3VycmVudExpbmVhclRhcmdldEluZGV4XTtcbiAgICAgIHRoaXMuY3VycmVudEJ1Y2tldC51c2VkSXRlbXMucHVzaCh0YXJnZXRJdGVtKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGFyZ2V0SXRlbTtcbiAgfTtcblxuICBwcml2YXRlIHNlbGVjdFJhbmRvbVVudXNlZEl0ZW0gPSAoKTogYW55ID0+IHtcbiAgICBsZXQgaXRlbTtcbiAgICBkbyB7XG4gICAgICBpdGVtID0gcmFuZEZyb20odGhpcy5jdXJyZW50QnVja2V0Lml0ZW1zKTtcbiAgICB9IHdoaWxlICh0aGlzLmN1cnJlbnRCdWNrZXQudXNlZEl0ZW1zLmluY2x1ZGVzKGl0ZW0pKTtcblxuICAgIHRoaXMuY3VycmVudEJ1Y2tldC51c2VkSXRlbXMucHVzaChpdGVtKTtcbiAgICByZXR1cm4gaXRlbTtcbiAgfTtcblxuICBwcml2YXRlIGdlbmVyYXRlRm9pbHMgPSAodGFyZ2V0SXRlbTogYW55KTogYW55W10gPT4ge1xuICAgIGxldCBmb2lsMSwgZm9pbDIsIGZvaWwzO1xuXG4gICAgaWYgKHRoaXMuYnVja2V0R2VuTW9kZSA9PT0gQnVja2V0R2VuTW9kZS5SYW5kb21CU1QpIHtcbiAgICAgIGZvaWwxID0gdGhpcy5nZW5lcmF0ZVJhbmRvbUZvaWwodGFyZ2V0SXRlbSk7XG4gICAgICBmb2lsMiA9IHRoaXMuZ2VuZXJhdGVSYW5kb21Gb2lsKHRhcmdldEl0ZW0sIGZvaWwxKTtcbiAgICAgIGZvaWwzID0gdGhpcy5nZW5lcmF0ZVJhbmRvbUZvaWwodGFyZ2V0SXRlbSwgZm9pbDEsIGZvaWwyKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuYnVja2V0R2VuTW9kZSA9PT0gQnVja2V0R2VuTW9kZS5MaW5lYXJBcnJheUJhc2VkKSB7XG4gICAgICBmb2lsMSA9IHRoaXMuZ2VuZXJhdGVMaW5lYXJGb2lsKHRhcmdldEl0ZW0pO1xuICAgICAgZm9pbDIgPSB0aGlzLmdlbmVyYXRlTGluZWFyRm9pbCh0YXJnZXRJdGVtLCBmb2lsMSk7XG4gICAgICBmb2lsMyA9IHRoaXMuZ2VuZXJhdGVMaW5lYXJGb2lsKHRhcmdldEl0ZW0sIGZvaWwxLCBmb2lsMik7XG4gICAgfVxuXG4gICAgcmV0dXJuIFtmb2lsMSwgZm9pbDIsIGZvaWwzXTtcbiAgfTtcblxuICBwcml2YXRlIGdlbmVyYXRlUmFuZG9tRm9pbCA9ICh0YXJnZXRJdGVtOiBhbnksIC4uLmV4aXN0aW5nRm9pbHM6IGFueVtdKTogYW55ID0+IHtcbiAgICBsZXQgZm9pbDtcbiAgICBkbyB7XG4gICAgICBmb2lsID0gcmFuZEZyb20odGhpcy5jdXJyZW50QnVja2V0Lml0ZW1zKTtcbiAgICB9IHdoaWxlIChbdGFyZ2V0SXRlbSwgLi4uZXhpc3RpbmdGb2lsc10uaW5jbHVkZXMoZm9pbCkpO1xuICAgIHJldHVybiBmb2lsO1xuICB9O1xuXG4gIHByaXZhdGUgZ2VuZXJhdGVMaW5lYXJGb2lsID0gKHRhcmdldEl0ZW06IGFueSwgLi4uZXhpc3RpbmdGb2lsczogYW55W10pOiBhbnkgPT4ge1xuICAgIGxldCBmb2lsO1xuICAgIGRvIHtcbiAgICAgIGZvaWwgPSByYW5kRnJvbSh0aGlzLmJ1Y2tldHNbdGhpcy5jdXJyZW50TGluZWFyQnVja2V0SW5kZXhdLml0ZW1zKTtcbiAgICB9IHdoaWxlIChbdGFyZ2V0SXRlbSwgLi4uZXhpc3RpbmdGb2lsc10uaW5jbHVkZXMoZm9pbCkpO1xuICAgIHJldHVybiBmb2lsO1xuICB9O1xuXG4gIHByaXZhdGUgc2h1ZmZsZUFuc3dlck9wdGlvbnMgPSAob3B0aW9uczogYW55W10pOiBhbnlbXSA9PiB7XG4gICAgc2h1ZmZsZUFycmF5KG9wdGlvbnMpO1xuICAgIHJldHVybiBvcHRpb25zO1xuICB9O1xuXG4gIHByaXZhdGUgY3JlYXRlUXVlc3Rpb24gPSAodGFyZ2V0SXRlbTogYW55LCBhbnN3ZXJPcHRpb25zOiBhbnlbXSk6IGFueSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHFOYW1lOiBgcXVlc3Rpb24tJHt0aGlzLnF1ZXN0aW9uTnVtYmVyfS0ke3RhcmdldEl0ZW0uaXRlbU5hbWV9YCxcbiAgICAgIHFOdW1iZXI6IHRoaXMucXVlc3Rpb25OdW1iZXIsXG4gICAgICBxVGFyZ2V0OiB0YXJnZXRJdGVtLml0ZW1OYW1lLFxuICAgICAgcHJvbXB0VGV4dDogJycsXG4gICAgICBidWNrZXQ6IHRoaXMuY3VycmVudEJ1Y2tldC5idWNrZXRJRCxcbiAgICAgIHByb21wdEF1ZGlvOiB0YXJnZXRJdGVtLml0ZW1OYW1lLFxuICAgICAgY29ycmVjdDogdGFyZ2V0SXRlbS5pdGVtVGV4dCxcbiAgICAgIGFuc3dlcnM6IGFuc3dlck9wdGlvbnMubWFwKChvcHRpb24pID0+ICh7XG4gICAgICAgIGFuc3dlck5hbWU6IG9wdGlvbi5pdGVtTmFtZSxcbiAgICAgICAgYW5zd2VyVGV4dDogb3B0aW9uLml0ZW1UZXh0LFxuICAgICAgfSkpLFxuICAgIH07XG4gIH07XG5cbiAgcHVibGljIHRyeU1vdmVCdWNrZXQgPSAocGFzc2VkOiBib29sZWFuKSA9PiB7XG4gICAgaWYgKHRoaXMuYnVja2V0R2VuTW9kZSA9PT0gQnVja2V0R2VuTW9kZS5SYW5kb21CU1QpIHtcbiAgICAgIHRoaXMudHJ5TW92ZUJ1Y2tldFJhbmRvbUJTVChwYXNzZWQpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5idWNrZXRHZW5Nb2RlID09PSBCdWNrZXRHZW5Nb2RlLkxpbmVhckFycmF5QmFzZWQpIHtcbiAgICAgIHRoaXMudHJ5TW92ZUJ1Y2tldExpbmVhckFycmF5QmFzZWQocGFzc2VkKTtcbiAgICB9XG4gIH07XG5cbiAgcHVibGljIHRyeU1vdmVCdWNrZXRSYW5kb21CU1QgPSAocGFzc2VkOiBib29sZWFuKSA9PiB7XG4gICAgY29uc3QgbmV3QnVja2V0ID0gdGhpcy5jdXJyZW50Tm9kZS52YWx1ZSBhcyBidWNrZXQ7XG4gICAgaWYgKHRoaXMuY3VycmVudEJ1Y2tldCAhPSBudWxsKSB7XG4gICAgICB0aGlzLmN1cnJlbnRCdWNrZXQucGFzc2VkID0gcGFzc2VkO1xuICAgICAgQW5hbHl0aWNzRXZlbnRzLnNlbmRCdWNrZXQodGhpcy5jdXJyZW50QnVja2V0LCBwYXNzZWQpO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZygnbmV3ICBidWNrZXQgaXMgJyArIG5ld0J1Y2tldC5idWNrZXRJRCk7XG4gICAgQXVkaW9Db250cm9sbGVyLlByZWxvYWRCdWNrZXQobmV3QnVja2V0LCB0aGlzLmFwcC5HZXREYXRhVVJMKCkpO1xuICAgIHRoaXMuaW5pdEJ1Y2tldChuZXdCdWNrZXQpO1xuICB9O1xuXG4gIHB1YmxpYyB0cnlNb3ZlQnVja2V0TGluZWFyQXJyYXlCYXNlZCA9IChwYXNzZWQ6IGJvb2xlYW4pID0+IHtcbiAgICBjb25zdCBuZXdCdWNrZXQgPSB0aGlzLmJ1Y2tldHNbdGhpcy5jdXJyZW50TGluZWFyQnVja2V0SW5kZXhdO1xuICAgIC8vIEF2b2lkIHBhc3NpbmcgYnVja2V0UGFzc2VkIGV2ZW50IHRvIHRoZSBhbmFseXRpY3Mgd2hlbiB3ZSBhcmUgaW4gbGluZWFyIGRldiBtb2RlXG4gICAgLy8gaWYgKHRoaXMuY3VycmVudEJ1Y2tldCAhPSBudWxsKSB7XG4gICAgLy8gXHR0aGlzLmN1cnJlbnRCdWNrZXQucGFzc2VkID0gcGFzc2VkO1xuICAgIC8vIFx0QW5hbHl0aWNzRXZlbnRzLnNlbmRCdWNrZXQodGhpcy5jdXJyZW50QnVja2V0LCBwYXNzZWQpO1xuICAgIC8vIH1cbiAgICBjb25zb2xlLmxvZygnTmV3IEJ1Y2tldDogJyArIG5ld0J1Y2tldC5idWNrZXRJRCk7XG4gICAgQXVkaW9Db250cm9sbGVyLlByZWxvYWRCdWNrZXQobmV3QnVja2V0LCB0aGlzLmFwcC5HZXREYXRhVVJMKCkpO1xuICAgIHRoaXMuaW5pdEJ1Y2tldChuZXdCdWNrZXQpO1xuICB9O1xuXG4gIHB1YmxpYyBIYXNRdWVzdGlvbnNMZWZ0ID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLmN1cnJlbnRCdWNrZXQucGFzc2VkKSByZXR1cm4gZmFsc2U7XG5cbiAgICBpZiAodGhpcy5idWNrZXRHZW5Nb2RlID09PSBCdWNrZXRHZW5Nb2RlLkxpbmVhckFycmF5QmFzZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmhhc0xpbmVhclF1ZXN0aW9uc0xlZnQoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jdXJyZW50QnVja2V0Lm51bUNvcnJlY3QgPj0gNCkge1xuICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlUGFzc2VkQnVja2V0KCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmN1cnJlbnRCdWNrZXQubnVtQ29uc2VjdXRpdmVXcm9uZyA+PSAyIHx8IHRoaXMuY3VycmVudEJ1Y2tldC5udW1UcmllZCA+PSA1KSB7XG4gICAgICByZXR1cm4gdGhpcy5oYW5kbGVGYWlsZWRCdWNrZXQoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICBwcml2YXRlIGhhc0xpbmVhclF1ZXN0aW9uc0xlZnQgPSAoKTogYm9vbGVhbiA9PiB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5jdXJyZW50TGluZWFyQnVja2V0SW5kZXggPj0gdGhpcy5idWNrZXRzLmxlbmd0aCAmJlxuICAgICAgdGhpcy5jdXJyZW50TGluZWFyVGFyZ2V0SW5kZXggPj0gdGhpcy5idWNrZXRzW3RoaXMuY3VycmVudExpbmVhckJ1Y2tldEluZGV4XS5pdGVtcy5sZW5ndGhcbiAgICApIHtcbiAgICAgIC8vIE5vIG1vcmUgcXVlc3Rpb25zIGxlZnRcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9O1xuXG4gIHByaXZhdGUgaGFuZGxlUGFzc2VkQnVja2V0ID0gKCk6IGJvb2xlYW4gPT4ge1xuICAgIGNvbnNvbGUubG9nKCdQYXNzZWQgdGhpcyBidWNrZXQgJyArIHRoaXMuY3VycmVudEJ1Y2tldC5idWNrZXRJRCk7XG5cbiAgICBpZiAodGhpcy5jdXJyZW50QnVja2V0LmJ1Y2tldElEID49IHRoaXMubnVtQnVja2V0cykge1xuICAgICAgLy8gUGFzc2VkIHRoZSBoaWdoZXN0IGJ1Y2tldFxuICAgICAgcmV0dXJuIHRoaXMucGFzc0hpZ2hlc3RCdWNrZXQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMubW92ZVVwVG9OZXh0QnVja2V0KCk7XG4gICAgfVxuICB9O1xuXG4gIHByaXZhdGUgaGFuZGxlRmFpbGVkQnVja2V0ID0gKCk6IGJvb2xlYW4gPT4ge1xuICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdGhpcyBidWNrZXQgJyArIHRoaXMuY3VycmVudEJ1Y2tldC5idWNrZXRJRCk7XG5cbiAgICBpZiAodGhpcy5jdXJyZW50QnVja2V0LmJ1Y2tldElEIDwgdGhpcy5iYXNhbEJ1Y2tldCkge1xuICAgICAgdGhpcy5iYXNhbEJ1Y2tldCA9IHRoaXMuY3VycmVudEJ1Y2tldC5idWNrZXRJRDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jdXJyZW50QnVja2V0LmJ1Y2tldElEIDw9IDEpIHtcbiAgICAgIC8vIEZhaWxlZCB0aGUgbG93ZXN0IGJ1Y2tldFxuICAgICAgcmV0dXJuIHRoaXMuZmFpbExvd2VzdEJ1Y2tldCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5tb3ZlRG93blRvUHJldmlvdXNCdWNrZXQoKTtcbiAgICB9XG4gIH07XG5cbiAgcHJpdmF0ZSBwYXNzSGlnaGVzdEJ1Y2tldCA9ICgpOiBib29sZWFuID0+IHtcbiAgICBjb25zb2xlLmxvZygnUGFzc2VkIGhpZ2hlc3QgYnVja2V0Jyk7XG4gICAgdGhpcy5jdXJyZW50QnVja2V0LnBhc3NlZCA9IHRydWU7XG5cbiAgICBpZiAodGhpcy5idWNrZXRHZW5Nb2RlID09PSBCdWNrZXRHZW5Nb2RlLlJhbmRvbUJTVCkge1xuICAgICAgQW5hbHl0aWNzRXZlbnRzLnNlbmRCdWNrZXQodGhpcy5jdXJyZW50QnVja2V0LCB0cnVlKTtcbiAgICB9XG5cbiAgICBVSUNvbnRyb2xsZXIuUHJvZ3Jlc3NDaGVzdCgpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBwcml2YXRlIG1vdmVVcFRvTmV4dEJ1Y2tldCA9ICgpOiBib29sZWFuID0+IHtcbiAgICBpZiAodGhpcy5jdXJyZW50Tm9kZS5yaWdodCAhPSBudWxsKSB7XG4gICAgICAvLyBNb3ZlIGRvd24gdG8gdGhlIHJpZ2h0XG4gICAgICBjb25zb2xlLmxvZygnTW92aW5nIHRvIHJpZ2h0IG5vZGUnKTtcbiAgICAgIGlmICh0aGlzLmJ1Y2tldEdlbk1vZGUgPT09IEJ1Y2tldEdlbk1vZGUuUmFuZG9tQlNUKSB7XG4gICAgICAgIHRoaXMuY3VycmVudE5vZGUgPSB0aGlzLmN1cnJlbnROb2RlLnJpZ2h0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jdXJyZW50TGluZWFyQnVja2V0SW5kZXgrKztcbiAgICAgIH1cbiAgICAgIHRoaXMudHJ5TW92ZUJ1Y2tldCh0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUmVhY2hlZCByb290IG5vZGVcbiAgICAgIGNvbnNvbGUubG9nKCdSZWFjaGVkIHJvb3Qgbm9kZScpO1xuICAgICAgdGhpcy5jdXJyZW50QnVja2V0LnBhc3NlZCA9IHRydWU7XG5cbiAgICAgIGlmICh0aGlzLmJ1Y2tldEdlbk1vZGUgPT09IEJ1Y2tldEdlbk1vZGUuUmFuZG9tQlNUKSB7XG4gICAgICAgIEFuYWx5dGljc0V2ZW50cy5zZW5kQnVja2V0KHRoaXMuY3VycmVudEJ1Y2tldCwgdHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIFVJQ29udHJvbGxlci5Qcm9ncmVzc0NoZXN0KCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgcHJpdmF0ZSBmYWlsTG93ZXN0QnVja2V0ID0gKCk6IGJvb2xlYW4gPT4ge1xuICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgbG93ZXN0IGJ1Y2tldCAhJyk7XG4gICAgdGhpcy5jdXJyZW50QnVja2V0LnBhc3NlZCA9IGZhbHNlO1xuXG4gICAgaWYgKHRoaXMuYnVja2V0R2VuTW9kZSA9PT0gQnVja2V0R2VuTW9kZS5SYW5kb21CU1QpIHtcbiAgICAgIEFuYWx5dGljc0V2ZW50cy5zZW5kQnVja2V0KHRoaXMuY3VycmVudEJ1Y2tldCwgZmFsc2UpO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBwcml2YXRlIG1vdmVEb3duVG9QcmV2aW91c0J1Y2tldCA9ICgpOiBib29sZWFuID0+IHtcbiAgICBjb25zb2xlLmxvZygnTW92aW5nIGRvd24gYnVja2V0ICEnKTtcblxuICAgIGlmICh0aGlzLmN1cnJlbnROb2RlLmxlZnQgIT0gbnVsbCkge1xuICAgICAgLy8gTW92ZSBkb3duIHRvIHRoZSBsZWZ0XG4gICAgICBjb25zb2xlLmxvZygnTW92aW5nIHRvIGxlZnQgbm9kZScpO1xuICAgICAgaWYgKHRoaXMuYnVja2V0R2VuTW9kZSA9PT0gQnVja2V0R2VuTW9kZS5SYW5kb21CU1QpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50Tm9kZSA9IHRoaXMuY3VycmVudE5vZGUubGVmdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY3VycmVudExpbmVhckJ1Y2tldEluZGV4Kys7XG4gICAgICB9XG4gICAgICB0aGlzLnRyeU1vdmVCdWNrZXQoZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBSZWFjaGVkIHJvb3Qgbm9kZVxuICAgICAgY29uc29sZS5sb2coJ1JlYWNoZWQgcm9vdCBub2RlICEnKTtcbiAgICAgIHRoaXMuY3VycmVudEJ1Y2tldC5wYXNzZWQgPSBmYWxzZTtcblxuICAgICAgaWYgKHRoaXMuYnVja2V0R2VuTW9kZSA9PT0gQnVja2V0R2VuTW9kZS5SYW5kb21CU1QpIHtcbiAgICAgICAgQW5hbHl0aWNzRXZlbnRzLnNlbmRCdWNrZXQodGhpcy5jdXJyZW50QnVja2V0LCBmYWxzZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICBwdWJsaWMgb3ZlcnJpZGUgb25FbmQoKTogdm9pZCB7XG4gICAgQW5hbHl0aWNzRXZlbnRzLnNlbmRGaW5pc2hlZCh0aGlzLmJ1Y2tldHMsIHRoaXMuYmFzYWxCdWNrZXQsIHRoaXMuY2VpbGluZ0J1Y2tldCk7XG4gICAgVUlDb250cm9sbGVyLlNob3dFbmQoKTtcbiAgICB0aGlzLmFwcC51bml0eUJyaWRnZS5TZW5kQ2xvc2UoKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBNb2R1bGUgdGhhdCB3cmFwcyBVbml0eSBjYWxscyBmb3Igc2VuZGluZyBtZXNzYWdlcyBmcm9tIHRoZSB3ZWJ2aWV3IHRvIFVuaXR5LlxuICovXG5cbmRlY2xhcmUgY29uc3QgVW5pdHk7XG5cbmV4cG9ydCBjbGFzcyBVbml0eUJyaWRnZSB7XG4gIHByaXZhdGUgdW5pdHlSZWZlcmVuY2U7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgaWYgKHR5cGVvZiBVbml0eSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMudW5pdHlSZWZlcmVuY2UgPSBVbml0eTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy51bml0eVJlZmVyZW5jZSA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIFNlbmRNZXNzYWdlKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIGlmICh0aGlzLnVuaXR5UmVmZXJlbmNlICE9PSBudWxsKSB7XG4gICAgICB0aGlzLnVuaXR5UmVmZXJlbmNlLmNhbGwobWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIFNlbmRMb2FkZWQoKSB7XG4gICAgaWYgKHRoaXMudW5pdHlSZWZlcmVuY2UgIT09IG51bGwpIHtcbiAgICAgIHRoaXMudW5pdHlSZWZlcmVuY2UuY2FsbCgnbG9hZGVkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCd3b3VsZCBjYWxsIFVuaXR5IGxvYWRlZCBub3cnKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgU2VuZENsb3NlKCkge1xuICAgIGlmICh0aGlzLnVuaXR5UmVmZXJlbmNlICE9PSBudWxsKSB7XG4gICAgICB0aGlzLnVuaXR5UmVmZXJlbmNlLmNhbGwoJ2Nsb3NlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCd3b3VsZCBjbG9zZSBVbml0eSBub3cnKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IHJlZ2lzdGVyVmVyc2lvbiB9IGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuZXhwb3J0ICogZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5cbnZhciBuYW1lID0gXCJmaXJlYmFzZVwiO1xudmFyIHZlcnNpb24gPSBcIjkuMTIuMVwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5yZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgJ2FwcCcpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIiwidHJ5e3NlbGZbXCJ3b3JrYm94OndpbmRvdzo3LjAuMFwiXSYmXygpfWNhdGNoKG4pe31mdW5jdGlvbiBuKG4sdCl7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihyKXt2YXIgZT1uZXcgTWVzc2FnZUNoYW5uZWw7ZS5wb3J0MS5vbm1lc3NhZ2U9ZnVuY3Rpb24obil7cihuLmRhdGEpfSxuLnBvc3RNZXNzYWdlKHQsW2UucG9ydDJdKX0pKX1mdW5jdGlvbiB0KG4sdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBlPXRbcl07ZS5lbnVtZXJhYmxlPWUuZW51bWVyYWJsZXx8ITEsZS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gZSYmKGUud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLGUua2V5LGUpfX1mdW5jdGlvbiByKG4sdCl7KG51bGw9PXR8fHQ+bi5sZW5ndGgpJiYodD1uLmxlbmd0aCk7Zm9yKHZhciByPTAsZT1uZXcgQXJyYXkodCk7cjx0O3IrKyllW3JdPW5bcl07cmV0dXJuIGV9ZnVuY3Rpb24gZShuLHQpe3ZhciBlO2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBTeW1ib2x8fG51bGw9PW5bU3ltYm9sLml0ZXJhdG9yXSl7aWYoQXJyYXkuaXNBcnJheShuKXx8KGU9ZnVuY3Rpb24obix0KXtpZihuKXtpZihcInN0cmluZ1wiPT10eXBlb2YgbilyZXR1cm4gcihuLHQpO3ZhciBlPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChuKS5zbGljZSg4LC0xKTtyZXR1cm5cIk9iamVjdFwiPT09ZSYmbi5jb25zdHJ1Y3RvciYmKGU9bi5jb25zdHJ1Y3Rvci5uYW1lKSxcIk1hcFwiPT09ZXx8XCJTZXRcIj09PWU/QXJyYXkuZnJvbShuKTpcIkFyZ3VtZW50c1wiPT09ZXx8L14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QoZSk/cihuLHQpOnZvaWQgMH19KG4pKXx8dCYmbiYmXCJudW1iZXJcIj09dHlwZW9mIG4ubGVuZ3RoKXtlJiYobj1lKTt2YXIgaT0wO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBpPj1uLmxlbmd0aD97ZG9uZTohMH06e2RvbmU6ITEsdmFsdWU6bltpKytdfX19dGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpfXJldHVybihlPW5bU3ltYm9sLml0ZXJhdG9yXSgpKS5uZXh0LmJpbmQoZSl9dHJ5e3NlbGZbXCJ3b3JrYm94OmNvcmU6Ny4wLjBcIl0mJl8oKX1jYXRjaChuKXt9dmFyIGk9ZnVuY3Rpb24oKXt2YXIgbj10aGlzO3RoaXMucHJvbWlzZT1uZXcgUHJvbWlzZSgoZnVuY3Rpb24odCxyKXtuLnJlc29sdmU9dCxuLnJlamVjdD1yfSkpfTtmdW5jdGlvbiBvKG4sdCl7dmFyIHI9bG9jYXRpb24uaHJlZjtyZXR1cm4gbmV3IFVSTChuLHIpLmhyZWY9PT1uZXcgVVJMKHQscikuaHJlZn12YXIgdT1mdW5jdGlvbihuLHQpe3RoaXMudHlwZT1uLE9iamVjdC5hc3NpZ24odGhpcyx0KX07ZnVuY3Rpb24gYShuLHQscil7cmV0dXJuIHI/dD90KG4pOm46KG4mJm4udGhlbnx8KG49UHJvbWlzZS5yZXNvbHZlKG4pKSx0P24udGhlbih0KTpuKX1mdW5jdGlvbiBjKCl7fXZhciBmPXt0eXBlOlwiU0tJUF9XQUlUSU5HXCJ9O2Z1bmN0aW9uIHMobix0KXtpZighdClyZXR1cm4gbiYmbi50aGVuP24udGhlbihjKTpQcm9taXNlLnJlc29sdmUoKX12YXIgdj1mdW5jdGlvbihyKXt2YXIgZSxjO2Z1bmN0aW9uIHYobix0KXt2YXIgZSxjO3JldHVybiB2b2lkIDA9PT10JiYodD17fSksKGU9ci5jYWxsKHRoaXMpfHx0aGlzKS5ubj17fSxlLnRuPTAsZS5ybj1uZXcgaSxlLmVuPW5ldyBpLGUub249bmV3IGksZS51bj0wLGUuYW49bmV3IFNldCxlLmNuPWZ1bmN0aW9uKCl7dmFyIG49ZS5mbix0PW4uaW5zdGFsbGluZztlLnRuPjB8fCFvKHQuc2NyaXB0VVJMLGUuc24udG9TdHJpbmcoKSl8fHBlcmZvcm1hbmNlLm5vdygpPmUudW4rNmU0PyhlLnZuPXQsbi5yZW1vdmVFdmVudExpc3RlbmVyKFwidXBkYXRlZm91bmRcIixlLmNuKSk6KGUuaG49dCxlLmFuLmFkZCh0KSxlLnJuLnJlc29sdmUodCkpLCsrZS50bix0LmFkZEV2ZW50TGlzdGVuZXIoXCJzdGF0ZWNoYW5nZVwiLGUubG4pfSxlLmxuPWZ1bmN0aW9uKG4pe3ZhciB0PWUuZm4scj1uLnRhcmdldCxpPXIuc3RhdGUsbz1yPT09ZS52bixhPXtzdzpyLGlzRXh0ZXJuYWw6byxvcmlnaW5hbEV2ZW50Om59OyFvJiZlLm1uJiYoYS5pc1VwZGF0ZT0hMCksZS5kaXNwYXRjaEV2ZW50KG5ldyB1KGksYSkpLFwiaW5zdGFsbGVkXCI9PT1pP2Uud249c2VsZi5zZXRUaW1lb3V0KChmdW5jdGlvbigpe1wiaW5zdGFsbGVkXCI9PT1pJiZ0LndhaXRpbmc9PT1yJiZlLmRpc3BhdGNoRXZlbnQobmV3IHUoXCJ3YWl0aW5nXCIsYSkpfSksMjAwKTpcImFjdGl2YXRpbmdcIj09PWkmJihjbGVhclRpbWVvdXQoZS53biksb3x8ZS5lbi5yZXNvbHZlKHIpKX0sZS5kbj1mdW5jdGlvbihuKXt2YXIgdD1lLmhuLHI9dCE9PW5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmNvbnRyb2xsZXI7ZS5kaXNwYXRjaEV2ZW50KG5ldyB1KFwiY29udHJvbGxpbmdcIix7aXNFeHRlcm5hbDpyLG9yaWdpbmFsRXZlbnQ6bixzdzp0LGlzVXBkYXRlOmUubW59KSkscnx8ZS5vbi5yZXNvbHZlKHQpfSxlLmduPShjPWZ1bmN0aW9uKG4pe3ZhciB0PW4uZGF0YSxyPW4ucG9ydHMsaT1uLnNvdXJjZTtyZXR1cm4gYShlLmdldFNXKCksKGZ1bmN0aW9uKCl7ZS5hbi5oYXMoaSkmJmUuZGlzcGF0Y2hFdmVudChuZXcgdShcIm1lc3NhZ2VcIix7ZGF0YTp0LG9yaWdpbmFsRXZlbnQ6bixwb3J0czpyLHN3Oml9KSl9KSl9LGZ1bmN0aW9uKCl7Zm9yKHZhciBuPVtdLHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKW5bdF09YXJndW1lbnRzW3RdO3RyeXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGMuYXBwbHkodGhpcyxuKSl9Y2F0Y2gobil7cmV0dXJuIFByb21pc2UucmVqZWN0KG4pfX0pLGUuc249bixlLm5uPXQsbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixlLmduKSxlfWM9ciwoZT12KS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLl9fcHJvdG9fXz1jO3ZhciBoLGwsbSx3PXYucHJvdG90eXBlO3JldHVybiB3LnJlZ2lzdGVyPWZ1bmN0aW9uKG4pe3ZhciB0PSh2b2lkIDA9PT1uP3t9Om4pLmltbWVkaWF0ZSxyPXZvaWQgMCE9PXQmJnQ7dHJ5e3ZhciBlPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKG4sdCl7dmFyIHI9bigpO2lmKHImJnIudGhlbilyZXR1cm4gci50aGVuKHQpO3JldHVybiB0KHIpfSgoZnVuY3Rpb24oKXtpZighciYmXCJjb21wbGV0ZVwiIT09ZG9jdW1lbnQucmVhZHlTdGF0ZSlyZXR1cm4gcyhuZXcgUHJvbWlzZSgoZnVuY3Rpb24obil7cmV0dXJuIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLG4pfSkpKX0pLChmdW5jdGlvbigpe3JldHVybiBlLm1uPUJvb2xlYW4obmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuY29udHJvbGxlciksZS55bj1lLnBuKCksYShlLmJuKCksKGZ1bmN0aW9uKG4pe2UuZm49bixlLnluJiYoZS5obj1lLnluLGUuZW4ucmVzb2x2ZShlLnluKSxlLm9uLnJlc29sdmUoZS55biksZS55bi5hZGRFdmVudExpc3RlbmVyKFwic3RhdGVjaGFuZ2VcIixlLmxuLHtvbmNlOiEwfSkpO3ZhciB0PWUuZm4ud2FpdGluZztyZXR1cm4gdCYmbyh0LnNjcmlwdFVSTCxlLnNuLnRvU3RyaW5nKCkpJiYoZS5obj10LFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKGZ1bmN0aW9uKCl7ZS5kaXNwYXRjaEV2ZW50KG5ldyB1KFwid2FpdGluZ1wiLHtzdzp0LHdhc1dhaXRpbmdCZWZvcmVSZWdpc3RlcjohMH0pKX0pKS50aGVuKChmdW5jdGlvbigpe30pKSksZS5obiYmKGUucm4ucmVzb2x2ZShlLmhuKSxlLmFuLmFkZChlLmhuKSksZS5mbi5hZGRFdmVudExpc3RlbmVyKFwidXBkYXRlZm91bmRcIixlLmNuKSxuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5hZGRFdmVudExpc3RlbmVyKFwiY29udHJvbGxlcmNoYW5nZVwiLGUuZG4pLGUuZm59KSl9KSl9Y2F0Y2gobil7cmV0dXJuIFByb21pc2UucmVqZWN0KG4pfX0sdy51cGRhdGU9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIHRoaXMuZm4/cyh0aGlzLmZuLnVwZGF0ZSgpKTp2b2lkIDB9Y2F0Y2gobil7cmV0dXJuIFByb21pc2UucmVqZWN0KG4pfX0sdy5nZXRTVz1mdW5jdGlvbigpe3JldHVybiB2b2lkIDAhPT10aGlzLmhuP1Byb21pc2UucmVzb2x2ZSh0aGlzLmhuKTp0aGlzLnJuLnByb21pc2V9LHcubWVzc2FnZVNXPWZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4gYSh0aGlzLmdldFNXKCksKGZ1bmN0aW9uKHIpe3JldHVybiBuKHIsdCl9KSl9Y2F0Y2gobil7cmV0dXJuIFByb21pc2UucmVqZWN0KG4pfX0sdy5tZXNzYWdlU2tpcFdhaXRpbmc9ZnVuY3Rpb24oKXt0aGlzLmZuJiZ0aGlzLmZuLndhaXRpbmcmJm4odGhpcy5mbi53YWl0aW5nLGYpfSx3LnBuPWZ1bmN0aW9uKCl7dmFyIG49bmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuY29udHJvbGxlcjtyZXR1cm4gbiYmbyhuLnNjcmlwdFVSTCx0aGlzLnNuLnRvU3RyaW5nKCkpP246dm9pZCAwfSx3LmJuPWZ1bmN0aW9uKCl7dHJ5e3ZhciBuPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKG4sdCl7dHJ5e3ZhciByPW4oKX1jYXRjaChuKXtyZXR1cm4gdChuKX1pZihyJiZyLnRoZW4pcmV0dXJuIHIudGhlbih2b2lkIDAsdCk7cmV0dXJuIHJ9KChmdW5jdGlvbigpe3JldHVybiBhKG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lzdGVyKG4uc24sbi5ubiksKGZ1bmN0aW9uKHQpe3JldHVybiBuLnVuPXBlcmZvcm1hbmNlLm5vdygpLHR9KSl9KSwoZnVuY3Rpb24obil7dGhyb3cgbn0pKX1jYXRjaChuKXtyZXR1cm4gUHJvbWlzZS5yZWplY3Qobil9fSxoPXYsKGw9W3trZXk6XCJhY3RpdmVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbi5wcm9taXNlfX0se2tleTpcImNvbnRyb2xsaW5nXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub24ucHJvbWlzZX19XSkmJnQoaC5wcm90b3R5cGUsbCksbSYmdChoLG0pLHZ9KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gbigpe3RoaXMuUG49bmV3IE1hcH12YXIgdD1uLnByb3RvdHlwZTtyZXR1cm4gdC5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKG4sdCl7dGhpcy5TbihuKS5hZGQodCl9LHQucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihuLHQpe3RoaXMuU24obikuZGVsZXRlKHQpfSx0LmRpc3BhdGNoRXZlbnQ9ZnVuY3Rpb24obil7bi50YXJnZXQ9dGhpcztmb3IodmFyIHQscj1lKHRoaXMuU24obi50eXBlKSk7ISh0PXIoKSkuZG9uZTspeygwLHQudmFsdWUpKG4pfX0sdC5Tbj1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5Qbi5oYXMobil8fHRoaXMuUG4uc2V0KG4sbmV3IFNldCksdGhpcy5Qbi5nZXQobil9LG59KCkpO2V4cG9ydHt2IGFzIFdvcmtib3gsdSBhcyBXb3JrYm94RXZlbnQsbiBhcyBtZXNzYWdlU1d9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d29ya2JveC13aW5kb3cucHJvZC5lczUubWpzLm1hcFxuIiwiLyoqXG4gKiBBcHAgY2xhc3MgdGhhdCByZXByZXNlbnRzIGFuIGVudHJ5IHBvaW50IG9mIHRoZSBhcHBsaWNhdGlvbi5cbiAqL1xuXG5pbXBvcnQgeyBnZXRVVUlELCBnZXRVc2VyU291cmNlLCBnZXREYXRhRmlsZSB9IGZyb20gJy4vY29tcG9uZW50cy91cmxVdGlscyc7XG5pbXBvcnQgeyBTdXJ2ZXkgfSBmcm9tICcuL3N1cnZleS9zdXJ2ZXknO1xuaW1wb3J0IHsgQXNzZXNzbWVudCB9IGZyb20gJy4vYXNzZXNzbWVudC9hc3Nlc3NtZW50JztcbmltcG9ydCB7IFVuaXR5QnJpZGdlIH0gZnJvbSAnLi9jb21wb25lbnRzL3VuaXR5QnJpZGdlJztcbmltcG9ydCB7IEFuYWx5dGljc0V2ZW50cyB9IGZyb20gJy4vY29tcG9uZW50cy9hbmFseXRpY3NFdmVudHMnO1xuaW1wb3J0IHsgQmFzZVF1aXogfSBmcm9tICcuL2Jhc2VRdWl6JztcbmltcG9ydCB7IGZldGNoQXBwRGF0YSwgZ2V0RGF0YVVSTCB9IGZyb20gJy4vY29tcG9uZW50cy9qc29uVXRpbHMnO1xuaW1wb3J0IHsgaW5pdGlhbGl6ZUFwcCB9IGZyb20gJ2ZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBnZXRBbmFseXRpY3MsIGxvZ0V2ZW50IH0gZnJvbSAnZmlyZWJhc2UvYW5hbHl0aWNzJztcbmltcG9ydCB7IFdvcmtib3ggfSBmcm9tICd3b3JrYm94LXdpbmRvdyc7XG5pbXBvcnQgQ2FjaGVNb2RlbCBmcm9tICcuL2NvbXBvbmVudHMvY2FjaGVNb2RlbCc7XG5pbXBvcnQgeyBVSUNvbnRyb2xsZXIgfSBmcm9tICcuL2NvbXBvbmVudHMvdWlDb250cm9sbGVyJztcblxuY29uc3QgYXBwVmVyc2lvbjogc3RyaW5nID0gJ3YxLjEuMSc7XG5cblxuLyoqXG4gKiBDb250ZW50IHZlcnNpb24gZnJvbSB0aGUgZGF0YSBmaWxlIGluIGZvcm1hdCB2MC4xXG4gKiBHZXRzIHNldCB3aGVuIHRoZSBjb250ZW50IGlzIGxvYWRlZFxuICovXG5sZXQgY29udGVudFZlcnNpb246IHN0cmluZyA9ICcnO1xuXG5sZXQgbG9hZGluZ1NjcmVlbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nU2NyZWVuJyk7XG5jb25zdCBwcm9ncmVzc0JhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9ncmVzc0JhcicpO1xuY29uc3QgYnJvYWRjYXN0Q2hhbm5lbDogQnJvYWRjYXN0Q2hhbm5lbCA9IG5ldyBCcm9hZGNhc3RDaGFubmVsKFxuICAnYXMtbWVzc2FnZS1jaGFubmVsJ1xuKTtcblxuZXhwb3J0IGNsYXNzIEFwcCB7XG4gIC8qKiBDb3VsZCBiZSAnYXNzZXNzbWVudCcgb3IgJ3N1cnZleScgYmFzZWQgb24gdGhlIGRhdGEgZmlsZSAqL1xuICBwdWJsaWMgZGF0YVVSTDogc3RyaW5nO1xuXG4gIHB1YmxpYyB1bml0eUJyaWRnZTtcbiAgcHVibGljIGFuYWx5dGljcztcbiAgcHVibGljIGdhbWU6IEJhc2VRdWl6O1xuXG4gIGNhY2hlTW9kZWw6IENhY2hlTW9kZWw7XG5cbiAgbGFuZzogc3RyaW5nID0gJ2VuZ2xpc2gnO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMudW5pdHlCcmlkZ2UgPSBuZXcgVW5pdHlCcmlkZ2UoKTtcblxuICAgIGNvbnNvbGUubG9nKCdJbml0aWFsaXppbmcgYXBwLi4uJyk7XG5cbiAgICB0aGlzLmRhdGFVUkwgPSBnZXREYXRhRmlsZSgpO1xuICAgIHRoaXMuY2FjaGVNb2RlbCA9IG5ldyBDYWNoZU1vZGVsKFxuICAgICAgdGhpcy5kYXRhVVJMLFxuICAgICAgdGhpcy5kYXRhVVJMLFxuICAgICAgbmV3IFNldDxzdHJpbmc+KClcbiAgICApO1xuXG4gICAgLy8gY29uc29sZS5sb2coXCJEYXRhIGZpbGU6IFwiICsgdGhpcy5kYXRhVVJMKTtcblxuICAgIGNvbnN0IGZpcmViYXNlQ29uZmlnID0ge1xuICAgICAgYXBpS2V5OiAnQUl6YVN5QjhjMmxCVmkyNnU3WVJMOXN4T1A5N1VhcTN5TjhoVGw0JyxcbiAgICAgIGF1dGhEb21haW46ICdmdG0tYjlkOTkuZmlyZWJhc2VhcHAuY29tJyxcbiAgICAgIGRhdGFiYXNlVVJMOiAnaHR0cHM6Ly9mdG0tYjlkOTkuZmlyZWJhc2Vpby5jb20nLFxuICAgICAgcHJvamVjdElkOiAnZnRtLWI5ZDk5JyxcbiAgICAgIHN0b3JhZ2VCdWNrZXQ6ICdmdG0tYjlkOTkuYXBwc3BvdC5jb20nLFxuICAgICAgbWVzc2FnaW5nU2VuZGVySWQ6ICc2MDI0MDIzODc5NDEnLFxuICAgICAgYXBwSWQ6ICcxOjYwMjQwMjM4Nzk0MTp3ZWI6N2IxYjExODE4NjRkMjhiNDlkZTEwYycsXG4gICAgICBtZWFzdXJlbWVudElkOiAnRy1GRjExNTlUR0NGJyxcbiAgICB9O1xuXG4gICAgY29uc3QgZmFwcCA9IGluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpO1xuICAgIGNvbnN0IGZhbmFseXRpY3MgPSBnZXRBbmFseXRpY3MoZmFwcCk7XG5cbiAgICB0aGlzLmFuYWx5dGljcyA9IGZhbmFseXRpY3M7XG4gICAgbG9nRXZlbnQoZmFuYWx5dGljcywgJ25vdGlmaWNhdGlvbl9yZWNlaXZlZCcpO1xuICAgIGxvZ0V2ZW50KGZhbmFseXRpY3MsICd0ZXN0IGluaXRpYWxpemF0aW9uIGV2ZW50Jywge30pO1xuXG4gICAgY29uc29sZS5sb2coJ2ZpcmViYXNlIGluaXRpYWxpemVkJyk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgc3BpblVwKCkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ1dpbmRvdyBMb2FkZWQhJyk7XG4gICAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBmZXRjaEFwcERhdGEodGhpcy5kYXRhVVJMKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0Fzc2Vzc21lbnQvU3VydmV5ICcgKyBhcHBWZXJzaW9uICsgJyBpbml0aWFsaXppbmchJyk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0FwcCBkYXRhIGxvYWRlZCEnKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcblxuICAgICAgICAgIHRoaXMuY2FjaGVNb2RlbC5zZXRDb250ZW50RmlsZVBhdGgoZ2V0RGF0YVVSTCh0aGlzLmRhdGFVUkwpKTtcblxuICAgICAgICAgIC8vIFRPRE86IFdoeSBkbyB3ZSBuZWVkIHRvIHNldCB0aGUgZmVlZGJhY2sgdGV4dCBoZXJlP1xuICAgICAgICAgIFVJQ29udHJvbGxlci5TZXRGZWVkYmFja1RleHQoZGF0YVsnZmVlZGJhY2tUZXh0J10pO1xuXG4gICAgICAgICAgbGV0IGFwcFR5cGUgPSBkYXRhWydhcHBUeXBlJ107XG4gICAgICAgICAgbGV0IGFzc2Vzc21lbnRUeXBlID0gZGF0YVsnYXNzZXNzbWVudFR5cGUnXTtcblxuICAgICAgICAgIGlmIChhcHBUeXBlID09ICdzdXJ2ZXknKSB7XG4gICAgICAgICAgICB0aGlzLmdhbWUgPSBuZXcgU3VydmV5KHRoaXMuZGF0YVVSTCwgdGhpcy51bml0eUJyaWRnZSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChhcHBUeXBlID09ICdhc3Nlc3NtZW50Jykge1xuICAgICAgICAgICAgLy8gR2V0IGFuZCBhZGQgYWxsIHRoZSBhdWRpbyBhc3NldHMgdG8gdGhlIGNhY2hlIG1vZGVsXG5cbiAgICAgICAgICAgIGxldCBidWNrZXRzID0gZGF0YVsnYnVja2V0cyddO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1Y2tldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBidWNrZXRzW2ldLml0ZW1zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGF1ZGlvSXRlbVVSTDtcbiAgICAgICAgICAgICAgICAvLyBVc2UgdG8gbG93ZXIgY2FzZSBmb3IgdGhlIEx1Z2FuZGFuIGRhdGFcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBkYXRhWydxdWl6TmFtZSddLmluY2x1ZGVzKCdMdWdhbmRhJykgfHxcbiAgICAgICAgICAgICAgICAgIGRhdGFbJ3F1aXpOYW1lJ11cbiAgICAgICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKCd3ZXN0IGFmcmljYW4gZW5nbGlzaCcpXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICBhdWRpb0l0ZW1VUkwgPVxuICAgICAgICAgICAgICAgICAgICAnL2F1ZGlvLycgK1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFVUkwgK1xuICAgICAgICAgICAgICAgICAgICAnLycgK1xuICAgICAgICAgICAgICAgICAgICBidWNrZXRzW2ldLml0ZW1zW2pdLml0ZW1OYW1lLnRvTG93ZXJDYXNlKCkudHJpbSgpICtcbiAgICAgICAgICAgICAgICAgICAgJy5tcDMnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBhdWRpb0l0ZW1VUkwgPVxuICAgICAgICAgICAgICAgICAgICAnL2F1ZGlvLycgK1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFVUkwgK1xuICAgICAgICAgICAgICAgICAgICAnLycgK1xuICAgICAgICAgICAgICAgICAgICBidWNrZXRzW2ldLml0ZW1zW2pdLml0ZW1OYW1lLnRyaW0oKSArXG4gICAgICAgICAgICAgICAgICAgICcubXAzJztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLmNhY2hlTW9kZWwuYWRkSXRlbVRvQXVkaW9WaXN1YWxSZXNvdXJjZXMoYXVkaW9JdGVtVVJMKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmNhY2hlTW9kZWwuYWRkSXRlbVRvQXVkaW9WaXN1YWxSZXNvdXJjZXMoXG4gICAgICAgICAgICAgICcvYXVkaW8vJyArIHRoaXMuZGF0YVVSTCArICcvYW5zd2VyX2ZlZWRiYWNrLm1wMydcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHRoaXMuZ2FtZSA9IG5ldyBBc3Nlc3NtZW50KHRoaXMuZGF0YVVSTCwgdGhpcy51bml0eUJyaWRnZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5nYW1lLnVuaXR5QnJpZGdlID0gdGhpcy51bml0eUJyaWRnZTtcblxuICAgICAgICAgIEFuYWx5dGljc0V2ZW50cy5zZXRVdWlkKGdldFVVSUQoKSwgZ2V0VXNlclNvdXJjZSgpKTtcbiAgICAgICAgICBBbmFseXRpY3NFdmVudHMubGlua0FuYWx5dGljcyh0aGlzLmFuYWx5dGljcywgdGhpcy5kYXRhVVJMKTtcbiAgICAgICAgICBBbmFseXRpY3NFdmVudHMuc2V0QXNzZXNzbWVudFR5cGUoYXNzZXNzbWVudFR5cGUpO1xuICAgICAgICAgIGNvbnRlbnRWZXJzaW9uID0gZGF0YVsnY29udGVudFZlcnNpb24nXTtcbiAgICAgICAgICBBbmFseXRpY3NFdmVudHMuc2VuZEluaXQoYXBwVmVyc2lvbiwgZGF0YVsnY29udGVudFZlcnNpb24nXSk7XG4gICAgICAgICAgLy8gdGhpcy5jYWNoZU1vZGVsLnNldEFwcE5hbWUodGhpcy5jYWNoZU1vZGVsLmFwcE5hbWUgKyAnOicgKyBkYXRhW1wiY29udGVudFZlcnNpb25cIl0pO1xuXG4gICAgICAgICAgdGhpcy5nYW1lLlJ1bih0aGlzKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5yZWdpc3RlclNlcnZpY2VXb3JrZXIodGhpcy5nYW1lLCB0aGlzLmRhdGFVUkwpO1xuICAgICAgfSkoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHJlZ2lzdGVyU2VydmljZVdvcmtlcihnYW1lOiBCYXNlUXVpeiwgZGF0YVVSTDogc3RyaW5nID0gJycpIHtcbiAgICBjb25zb2xlLmxvZygnUmVnaXN0ZXJpbmcgc2VydmljZSB3b3JrZXIuLi4nKTtcblxuICAgIGlmICgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSB7XG4gICAgICBsZXQgd2IgPSBuZXcgV29ya2JveCgnLi9zdy5qcycsIHt9KTtcblxuICAgICAgd2IucmVnaXN0ZXIoKVxuICAgICAgICAudGhlbigocmVnaXN0cmF0aW9uKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZpY2Ugd29ya2VyIHJlZ2lzdGVyZWQhJyk7XG4gICAgICAgICAgdGhpcy5oYW5kbGVTZXJ2aWNlV29ya2VyUmVnaXN0YXRpb24ocmVnaXN0cmF0aW9uKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnU2VydmljZSB3b3JrZXIgcmVnaXN0cmF0aW9uIGZhaWxlZDogJyArIGVycik7XG4gICAgICAgIH0pO1xuXG4gICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAnbWVzc2FnZScsXG4gICAgICAgIGhhbmRsZVNlcnZpY2VXb3JrZXJNZXNzYWdlXG4gICAgICApO1xuXG4gICAgICBhd2FpdCBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWFkeTtcblxuICAgICAgY29uc29sZS5sb2coJ0NhY2hlIE1vZGVsOiAnKTtcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMuY2FjaGVNb2RlbCk7XG5cbiAgICAgIC8vIFdlIG5lZWQgdG8gY2hlY2sgaWYgdGhlcmUncyBhIG5ldyB2ZXJzaW9uIG9mIHRoZSBjb250ZW50IGZpbGUgYW5kIGluIHRoYXQgY2FzZVxuICAgICAgLy8gcmVtb3ZlIHRoZSBsb2NhbFN0b3JhZ2UgY29udGVudCBuYW1lIGFuZCB2ZXJzaW9uIHZhbHVlXG5cbiAgICAgIGNvbnNvbGUubG9nKCdDaGVja2luZyBmb3IgY29udGVudCB2ZXJzaW9uIHVwZGF0ZXMuLi4nICsgZGF0YVVSTCk7XG5cbiAgICAgIGZldGNoKHRoaXMuY2FjaGVNb2RlbC5jb250ZW50RmlsZVBhdGggKyAnP2NhY2hlLWJ1c3Q9JyArIG5ldyBEYXRlKCkuZ2V0VGltZSgpLCB7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICdDYWNoZS1Db250cm9sJzogJ25vLXN0b3JlJyxcbiAgICAgICAgfSxcbiAgICAgICAgY2FjaGU6ICduby1zdG9yZScsXG4gICAgICB9KS50aGVuKGFzeW5jIChyZXNwb25zZSkgPT4ge1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGZldGNoIHRoZSBjb250ZW50IGZpbGUgZnJvbSB0aGUgc2VydmVyIScpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdDb250ZW50RmlsZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIGNvbnN0IGFoZWFkQ29udGVudFZlcnNpb24gPSBuZXdDb250ZW50RmlsZURhdGFbJ2NvbnRlbnRWZXJzaW9uJ107XG4gICAgICAgIGNvbnNvbGUubG9nKCdObyBDYWNoZSBDb250ZW50IHZlcnNpb246ICcgKyBhaGVhZENvbnRlbnRWZXJzaW9uKTtcblxuICAgICAgICAvLyBXZSBuZWVkIHRvIGNoZWNrIGhlcmUgZm9yIHRoZSBjb250ZW50IHZlcnNpb24gdXBkYXRlc1xuICAgICAgICAvLyBJZiB0aGVyZSdzIGEgbmV3IGNvbnRlbnQgdmVyc2lvbiwgd2UgbmVlZCB0byByZW1vdmUgdGhlIGNhY2hlZCBjb250ZW50IGFuZCByZWxvYWRcbiAgICAgICAgLy8gV2UgYXJlIGNvbXBhcmluZyBoZXJlIHRoZSBjb250ZW50VmVyc2lvbiB3aXRoIHRoZSBhaGVhZENvbnRlbnRWZXJzaW9uXG4gICAgICAgIGlmIChhaGVhZENvbnRlbnRWZXJzaW9uICYmIGNvbnRlbnRWZXJzaW9uICE9IGFoZWFkQ29udGVudFZlcnNpb24pIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnQ29udGVudCB2ZXJzaW9uIG1pc21hdGNoISBSZWxvYWRpbmcuLi4nKTtcbiAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh0aGlzLmNhY2hlTW9kZWwuYXBwTmFtZSk7XG4gICAgICAgICAgLy8gQ2xlYXIgdGhlIGNhY2hlIGZvciB0aHQgcGFydGljdWxhciBjb250ZW50XG4gICAgICAgICAgY2FjaGVzLmRlbGV0ZSh0aGlzLmNhY2hlTW9kZWwuYXBwTmFtZSk7XG4gICAgICAgICAgaGFuZGxlVXBkYXRlRm91bmRNZXNzYWdlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4geyBcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdGhlIGNvbnRlbnQgZmlsZTogJyArIGVycm9yKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5jYWNoZU1vZGVsLmFwcE5hbWUpID09IG51bGwpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0NhY2hpbmchJyArIHRoaXMuY2FjaGVNb2RlbC5hcHBOYW1lKTtcbiAgICAgICAgbG9hZGluZ1NjcmVlbiEuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgYnJvYWRjYXN0Q2hhbm5lbC5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgY29tbWFuZDogJ0NhY2hlJyxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBhcHBEYXRhOiB0aGlzLmNhY2hlTW9kZWwsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9ncmVzc0JhciEuc3R5bGUud2lkdGggPSAxMDAgKyAnJSc7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGxvYWRpbmdTY3JlZW4hLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIH0sIDE1MDApO1xuICAgICAgfVxuXG4gICAgICBicm9hZGNhc3RDaGFubmVsLm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhldmVudC5kYXRhLmNvbW1hbmQgKyAnIHJlY2VpdmVkIGZyb20gc2VydmljZSB3b3JrZXIhJyk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBldmVudC5kYXRhLmNvbW1hbmQgPT0gJ0FjdGl2YXRlZCcgJiZcbiAgICAgICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLmNhY2hlTW9kZWwuYXBwTmFtZSkgPT0gbnVsbFxuICAgICAgICApIHtcbiAgICAgICAgICBicm9hZGNhc3RDaGFubmVsLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgIGNvbW1hbmQ6ICdDYWNoZScsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIGFwcERhdGE6IHRoaXMuY2FjaGVNb2RlbCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUud2FybignU2VydmljZSB3b3JrZXJzIGFyZSBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3Nlci4nKTtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVTZXJ2aWNlV29ya2VyUmVnaXN0YXRpb24oXG4gICAgcmVnaXN0cmF0aW9uOiBTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uIHwgdW5kZWZpbmVkXG4gICk6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICByZWdpc3RyYXRpb24/Lmluc3RhbGxpbmc/LnBvc3RNZXNzYWdlKHtcbiAgICAgICAgdHlwZTogJ1JlZ2lzdGFydGlvbicsXG4gICAgICAgIHZhbHVlOiB0aGlzLmxhbmcsXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdTZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb24gZmFpbGVkOiAnICsgZXJyKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgR2V0RGF0YVVSTCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmRhdGFVUkw7XG4gIH1cbn1cblxuYnJvYWRjYXN0Q2hhbm5lbC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaGFuZGxlU2VydmljZVdvcmtlck1lc3NhZ2UpO1xuXG5mdW5jdGlvbiBoYW5kbGVTZXJ2aWNlV29ya2VyTWVzc2FnZShldmVudCk6IHZvaWQge1xuICBpZiAoZXZlbnQuZGF0YS5tc2cgPT0gJ0xvYWRpbmcnKSB7XG4gICAgbGV0IHByb2dyZXNzVmFsdWUgPSBwYXJzZUludChldmVudC5kYXRhLmRhdGEucHJvZ3Jlc3MpO1xuICAgIGhhbmRsZUxvYWRpbmdNZXNzYWdlKGV2ZW50LCBwcm9ncmVzc1ZhbHVlKTtcbiAgfVxuICBpZiAoZXZlbnQuZGF0YS5tc2cgPT0gJ1VwZGF0ZUZvdW5kJykge1xuICAgIGNvbnNvbGUubG9nKCc+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pi4sdXBkYXRlIEZvdW5kJyk7XG4gICAgaGFuZGxlVXBkYXRlRm91bmRNZXNzYWdlKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlTG9hZGluZ01lc3NhZ2UoZXZlbnQsIHByb2dyZXNzVmFsdWUpOiB2b2lkIHtcbiAgaWYgKHByb2dyZXNzVmFsdWUgPCA0MCAmJiBwcm9ncmVzc1ZhbHVlID49IDEwKSB7XG4gICAgcHJvZ3Jlc3NCYXIhLnN0eWxlLndpZHRoID0gcHJvZ3Jlc3NWYWx1ZSArICclJztcbiAgfSBlbHNlIGlmIChwcm9ncmVzc1ZhbHVlID49IDEwMCkge1xuICAgIHByb2dyZXNzQmFyIS5zdHlsZS53aWR0aCA9IDEwMCArICclJztcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGxvYWRpbmdTY3JlZW4hLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfSwgMTUwMCk7XG5cbiAgICBVSUNvbnRyb2xsZXIuU2V0Q29udGVudExvYWRlZCh0cnVlKTtcbiAgICAvLyBhZGQgYm9vayB3aXRoIGEgbmFtZSB0byBsb2NhbCBzdG9yYWdlIGFzIGNhY2hlZFxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGV2ZW50LmRhdGEuZGF0YS5ib29rTmFtZSwgJ3RydWUnKTtcbiAgICByZWFkTGFuZ3VhZ2VEYXRhRnJvbUNhY2hlQW5kTm90aWZ5QW5kcm9pZEFwcChldmVudC5kYXRhLmRhdGEuYm9va05hbWUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlYWRMYW5ndWFnZURhdGFGcm9tQ2FjaGVBbmROb3RpZnlBbmRyb2lkQXBwKGJvb2tOYW1lOiBzdHJpbmcpIHtcbiAgLy9AdHMtaWdub3JlXG4gIGlmICh3aW5kb3cuQW5kcm9pZCkge1xuICAgIGxldCBpc0NvbnRlbnRDYWNoZWQ6IGJvb2xlYW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShib29rTmFtZSkgIT09IG51bGw7XG4gICAgLy9AdHMtaWdub3JlXG4gICAgd2luZG93LkFuZHJvaWQuY2FjaGVkU3RhdHVzKGlzQ29udGVudENhY2hlZCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlVXBkYXRlRm91bmRNZXNzYWdlKCk6IHZvaWQge1xuICBsZXQgdGV4dCA9ICdVcGRhdGUgRm91bmQuXFxuUGxlYXNlIGFjY2VwdCB0aGUgdXBkYXRlIGJ5IHByZXNzaW5nIE9rLic7XG4gIGlmIChjb25maXJtKHRleHQpID09IHRydWUpIHtcbiAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gIH0gZWxzZSB7XG4gICAgdGV4dCA9ICdVcGRhdGUgd2lsbCBoYXBwZW4gb24gdGhlIG5leHQgbGF1bmNoLic7XG4gIH1cbn1cblxuY29uc3QgYXBwID0gbmV3IEFwcCgpO1xuYXBwLnNwaW5VcCgpO1xuIiwiLy8gSW50ZXJmYWNlIHRoYXQgZ2V0cyBwYXNzZWQgYXJvdW5kIHRoZSBhcHAgY29tcG9uZW50cyB0byBnYXRoZXIgYWxsIHJlcXVyaWVkIHJlc291cmNlc1xuLy8gYW5kIHRoYXQgZ2V0cyBzZW50IHRvIHRoZSBzZXJ2aWNlIHdvcmtlciBmb3IgY2FjaGluZ1xuXG5pbnRlcmZhY2UgSUNhY2hlTW9kZWwge1xuICBhcHBOYW1lOiBzdHJpbmc7XG4gIGNvbnRlbnRGaWxlUGF0aDogc3RyaW5nO1xuICBhdWRpb1Zpc3VhbFJlc291cmNlczogU2V0PHN0cmluZz47XG59XG5cbmNsYXNzIENhY2hlTW9kZWwgaW1wbGVtZW50cyBJQ2FjaGVNb2RlbCB7XG4gIGFwcE5hbWU6IHN0cmluZztcbiAgY29udGVudEZpbGVQYXRoOiBzdHJpbmc7XG4gIGF1ZGlvVmlzdWFsUmVzb3VyY2VzOiBTZXQ8c3RyaW5nPjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBhcHBOYW1lOiBzdHJpbmcsXG4gICAgY29udGVudEZpbGVQYXRoOiBzdHJpbmcsXG4gICAgYXVkaW9WaXN1YWxSZXNvdXJjZXM6IFNldDxzdHJpbmc+XG4gICkge1xuICAgIHRoaXMuYXBwTmFtZSA9IGFwcE5hbWU7XG4gICAgdGhpcy5jb250ZW50RmlsZVBhdGggPSBjb250ZW50RmlsZVBhdGg7XG4gICAgdGhpcy5hdWRpb1Zpc3VhbFJlc291cmNlcyA9IGF1ZGlvVmlzdWFsUmVzb3VyY2VzO1xuICB9XG5cbiAgcHVibGljIHNldEFwcE5hbWUoYXBwTmFtZTogc3RyaW5nKSB7XG4gICAgdGhpcy5hcHBOYW1lID0gYXBwTmFtZTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRDb250ZW50RmlsZVBhdGgoY29udGVudEZpbGVQYXRoOiBzdHJpbmcpIHtcbiAgICB0aGlzLmNvbnRlbnRGaWxlUGF0aCA9IGNvbnRlbnRGaWxlUGF0aDtcbiAgfVxuXG4gIHB1YmxpYyBzZXRBdWRpb1Zpc3VhbFJlc291cmNlcyhhdWRpb1Zpc3VhbFJlc291cmNlczogU2V0PHN0cmluZz4pIHtcbiAgICB0aGlzLmF1ZGlvVmlzdWFsUmVzb3VyY2VzID0gYXVkaW9WaXN1YWxSZXNvdXJjZXM7XG4gIH1cblxuICBwdWJsaWMgYWRkSXRlbVRvQXVkaW9WaXN1YWxSZXNvdXJjZXMoaXRlbTogc3RyaW5nKSB7XG4gICAgaWYgKCF0aGlzLmF1ZGlvVmlzdWFsUmVzb3VyY2VzLmhhcyhpdGVtKSkge1xuICAgICAgdGhpcy5hdWRpb1Zpc3VhbFJlc291cmNlcy5hZGQoaXRlbSk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhY2hlTW9kZWw7XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImdldERhdGFGaWxlIiwiZGF0YSIsImdldFBhdGhOYW1lIiwiZ2V0IiwidW5kZWZpbmVkIiwiY29uc29sZSIsImxvZyIsInF1ZXJ5U3RyaW5nIiwid2luZG93IiwibG9jYXRpb24iLCJzZWFyY2giLCJVUkxTZWFyY2hQYXJhbXMiLCJnIiwiZ2xvYmFsVGhpcyIsInRoaXMiLCJGdW5jdGlvbiIsImUiLCJnZXREYXRhVVJMIiwidXJsIiwibG9hZERhdGEiLCJmdXJsIiwiZmV0Y2giLCJ0aGVuIiwicmVzcG9uc2UiLCJqc29uIiwiQXVkaW9Db250cm9sbGVyIiwiaW1hZ2VUb0NhY2hlIiwid2F2VG9DYWNoZSIsImFsbEF1ZGlvcyIsImFsbEltYWdlcyIsImRhdGFVUkwiLCJjb3JyZWN0U291bmRQYXRoIiwiZmVlZGJhY2tBdWRpbyIsImNvcnJlY3RBdWRpbyIsImluaXQiLCJBdWRpbyIsInNyYyIsInN0YXRpYyIsInF1ZXN0aW9uc0RhdGEiLCJnZXRJbnN0YW5jZSIsImZlZWRiYWNrU291bmRQYXRoIiwicXVlc3Rpb25JbmRleCIsInB1c2giLCJxdWVzdGlvbkRhdGEiLCJhbnN3ZXJJbmRleCIsInByb21wdEF1ZGlvIiwiRmlsdGVyQW5kQWRkQXVkaW9Ub0FsbEF1ZGlvcyIsInRvTG93ZXJDYXNlIiwicHJvbXB0SW1nIiwiQWRkSW1hZ2VUb0FsbEltYWdlcyIsImFuc3dlcnMiLCJhbnN3ZXJEYXRhIiwiYW5zd2VySW1nIiwibmV3SW1hZ2VVUkwiLCJuZXdJbWFnZSIsIkltYWdlIiwibmV3QXVkaW9VUkwiLCJpbmNsdWRlcyIsInJlcGxhY2UiLCJ0cmltIiwibmV3QXVkaW8iLCJzcGxpdCIsIm5ld0J1Y2tldCIsIml0ZW1JbmRleCIsIml0ZW1zIiwiaXRlbSIsIml0ZW1OYW1lIiwiYXVkaW9OYW1lIiwiZmluaXNoZWRDYWxsYmFjayIsImF1ZGlvQW5pbSIsInNsaWNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJhdWRpbyIsImFkZEV2ZW50TGlzdGVuZXIiLCJwbGF5IiwiY2F0Y2giLCJlcnJvciIsIndhcm4iLCJpbWFnZU5hbWUiLCJpbnN0YW5jZSIsInJhbmRGcm9tIiwiYXJyYXkiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJsZW5ndGgiLCJzaHVmZmxlQXJyYXkiLCJpIiwiaiIsIlVJQ29udHJvbGxlciIsImxhbmRpbmdDb250YWluZXJJZCIsImdhbWVDb250YWluZXJJZCIsImVuZENvbnRhaW5lcklkIiwic3RhckNvbnRhaW5lcklkIiwiY2hlc3RDb250YWluZXJJZCIsInF1ZXN0aW9uc0NvbnRhaW5lcklkIiwiZmVlZGJhY2tDb250YWluZXJJZCIsImFuc3dlcnNDb250YWluZXJJZCIsImFuc3dlckJ1dHRvbjFJZCIsImFuc3dlckJ1dHRvbjJJZCIsImFuc3dlckJ1dHRvbjNJZCIsImFuc3dlckJ1dHRvbjRJZCIsImFuc3dlckJ1dHRvbjVJZCIsImFuc3dlckJ1dHRvbjZJZCIsInBsYXlCdXR0b25JZCIsImNoZXN0SW1nSWQiLCJuZXh0UXVlc3Rpb24iLCJjb250ZW50TG9hZGVkIiwic2hvd24iLCJzdGFycyIsInNob3duU3RhcnNDb3VudCIsInN0YXJQb3NpdGlvbnMiLCJBcnJheSIsInFBbnNOdW0iLCJidXR0b25zIiwiYnV0dG9uc0FjdGl2ZSIsImRldk1vZGVDb3JyZWN0TGFiZWxWaXNpYmlsaXR5IiwiZGV2TW9kZUJ1Y2tldENvbnRyb2xzRW5hYmxlZCIsImFuaW1hdGlvblNwZWVkTXVsdGlwbGllciIsImxhbmRpbmdDb250YWluZXIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZ2FtZUNvbnRhaW5lciIsImVuZENvbnRhaW5lciIsInN0YXJDb250YWluZXIiLCJjaGVzdENvbnRhaW5lciIsInF1ZXN0aW9uc0NvbnRhaW5lciIsImZlZWRiYWNrQ29udGFpbmVyIiwiYW5zd2Vyc0NvbnRhaW5lciIsImFuc3dlckJ1dHRvbjEiLCJhbnN3ZXJCdXR0b24yIiwiYW5zd2VyQnV0dG9uMyIsImFuc3dlckJ1dHRvbjQiLCJhbnN3ZXJCdXR0b241IiwiYW5zd2VyQnV0dG9uNiIsInBsYXlCdXR0b24iLCJjaGVzdEltZyIsImluaXRpYWxpemVTdGFycyIsImluaXRFdmVudExpc3RlbmVycyIsIm5ld1N0YXIiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmRDaGlsZCIsImlubmVySFRNTCIsIlNldEFuaW1hdGlvblNwZWVkTXVsdGlwbGllciIsIm11bHRpcGxpZXIiLCJTZXRDb3JyZWN0TGFiZWxWaXNpYmlsaXR5IiwidmlzaWJsZSIsIlNldEJ1Y2tldENvbnRyb2xzVmlzaWJpbGl0eSIsIngiLCJ5IiwibWluRGlzdGFuY2UiLCJkeCIsImR5Iiwic3FydCIsImFuc3dlckJ1dHRvblByZXNzIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInNob3dHYW1lIiwic2hvd09wdGlvbnMiLCJuZXdRIiwiYW5pbWF0aW9uRHVyYXRpb24iLCJkZWxheUJmb3JlT3B0aW9uIiwib3B0aW9uc0Rpc3BsYXllZCIsImZvckVhY2giLCJidXR0b24iLCJzdHlsZSIsInZpc2liaWxpdHkiLCJhbmltYXRpb24iLCJzZXRUaW1lb3V0IiwiY3VyQW5zd2VyIiwiaXNDb3JyZWN0IiwiYW5zd2VyTmFtZSIsImNvcnJlY3QiLCJhbnN3ZXJUZXh0IiwiY29ycmVjdExhYmVsIiwiYm94U2hhZG93IiwidG1waW1nIiwiR2V0SW1hZ2UiLCJlbmFibGVBbnN3ZXJCdXR0b24iLCJxU3RhcnQiLCJEYXRlIiwibm93IiwibnQiLCJzaG93TGFuZGluZyIsImRpc3BsYXkiLCJhbGxTdGFydCIsInN0YXJ0UHJlc3NDYWxsYmFjayIsInJlbW92ZSIsImNvbG9yIiwiUGxheUNvcnJlY3QiLCJyZUdlbmVyYXRlSXRlbXMiLCJiIiwiZXh0ZXJuYWxCdWNrZXRDb250cm9sc0dlbmVyYXRpb25IYW5kbGVyIiwiU2hvd1F1ZXN0aW9uIiwiUGxheUF1ZGlvIiwiU2hvd0F1ZGlvQW5pbWF0aW9uIiwicGxheWluZyIsInF1ZXJ5U2VsZWN0b3IiLCJuZXdRdWVzdGlvbiIsInFDb2RlIiwiYnV0dG9uSW5kZXgiLCJwcm9tcHRUZXh0Iiwic3RhclRvU2hvdyIsInBvc2l0aW9uIiwiY29udGFpbmVyV2lkdGgiLCJvZmZzZXRXaWR0aCIsImNvbnRhaW5lckhlaWdodCIsIm9mZnNldEhlaWdodCIsInJhbmRvbVgiLCJyYW5kb21ZIiwiT3ZlcmxhcHBpbmdPdGhlclN0YXJzIiwidHJhbnNmb3JtIiwidHJhbnNpdGlvbiIsInpJbmRleCIsInRvcCIsImlubmVySGVpZ2h0IiwibGVmdCIsInJvdGF0aW9uIiwiZmlsdGVyIiwiYnV0dG9uTnVtIiwiYWxsQnV0dG9uc1Zpc2libGUiLCJldmVyeSIsIlBsYXlEaW5nIiwiZFRpbWUiLCJidXR0b25QcmVzc0NhbGxiYWNrIiwiY2hlc3RJbWFnZSIsImN1cnJlbnRJbWdTcmMiLCJjdXJyZW50SW1hZ2VOdW1iZXIiLCJwYXJzZUludCIsIm5leHRJbWFnZVNyYyIsInZhbHVlIiwiY2FsbGJhY2siLCJoYW5kbGVyIiwic3RyaW5nVG9CeXRlQXJyYXkkMSIsInN0ciIsIm91dCIsInAiLCJjIiwiY2hhckNvZGVBdCIsImJhc2U2NCIsImJ5dGVUb0NoYXJNYXBfIiwiY2hhclRvQnl0ZU1hcF8iLCJieXRlVG9DaGFyTWFwV2ViU2FmZV8iLCJjaGFyVG9CeXRlTWFwV2ViU2FmZV8iLCJFTkNPREVEX1ZBTFNfQkFTRSIsIkVOQ09ERURfVkFMUyIsIkVOQ09ERURfVkFMU19XRUJTQUZFIiwiSEFTX05BVElWRV9TVVBQT1JUIiwiYXRvYiIsImVuY29kZUJ5dGVBcnJheSIsImlucHV0Iiwid2ViU2FmZSIsImlzQXJyYXkiLCJFcnJvciIsImluaXRfIiwiYnl0ZVRvQ2hhck1hcCIsIm91dHB1dCIsImJ5dGUxIiwiaGF2ZUJ5dGUyIiwiYnl0ZTIiLCJoYXZlQnl0ZTMiLCJieXRlMyIsIm91dEJ5dGUxIiwib3V0Qnl0ZTIiLCJvdXRCeXRlMyIsIm91dEJ5dGU0Iiwiam9pbiIsImVuY29kZVN0cmluZyIsImJ0b2EiLCJkZWNvZGVTdHJpbmciLCJieXRlcyIsInBvcyIsImMxIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiYzIiLCJ1IiwiYzMiLCJieXRlQXJyYXlUb1N0cmluZyIsImRlY29kZVN0cmluZ1RvQnl0ZUFycmF5IiwiY2hhclRvQnl0ZU1hcCIsImNoYXJBdCIsImJ5dGU0IiwiYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmciLCJ1dGY4Qnl0ZXMiLCJiYXNlNjRFbmNvZGUiLCJpbmRleGVkREIiLCJwcmVFeGlzdCIsIkRCX0NIRUNLX05BTUUiLCJyZXF1ZXN0Iiwic2VsZiIsIm9wZW4iLCJvbnN1Y2Nlc3MiLCJyZXN1bHQiLCJjbG9zZSIsImRlbGV0ZURhdGFiYXNlIiwib251cGdyYWRlbmVlZGVkIiwib25lcnJvciIsIl9hIiwibWVzc2FnZSIsImdldERlZmF1bHRzIiwiZ2V0R2xvYmFsIiwiX19GSVJFQkFTRV9ERUZBVUxUU19fIiwicHJvY2VzcyIsImVudiIsImRlZmF1bHRzSnNvblN0cmluZyIsIkpTT04iLCJwYXJzZSIsImdldERlZmF1bHRzRnJvbUVudlZhcmlhYmxlIiwibWF0Y2giLCJjb29raWUiLCJkZWNvZGVkIiwiYmFzZTY0RGVjb2RlIiwiZ2V0RGVmYXVsdHNGcm9tQ29va2llIiwiaW5mbyIsIkRlZmVycmVkIiwiY29uc3RydWN0b3IiLCJwcm9taXNlIiwid3JhcENhbGxiYWNrIiwiRmlyZWJhc2VFcnJvciIsImNvZGUiLCJjdXN0b21EYXRhIiwic3VwZXIiLCJuYW1lIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJjYXB0dXJlU3RhY2tUcmFjZSIsIkVycm9yRmFjdG9yeSIsImNyZWF0ZSIsInNlcnZpY2UiLCJzZXJ2aWNlTmFtZSIsImVycm9ycyIsImZ1bGxDb2RlIiwidGVtcGxhdGUiLCJQQVRURVJOIiwiXyIsImtleSIsInJlcGxhY2VUZW1wbGF0ZSIsImZ1bGxNZXNzYWdlIiwiZGVlcEVxdWFsIiwiYSIsImFLZXlzIiwia2V5cyIsImJLZXlzIiwiayIsImFQcm9wIiwiYlByb3AiLCJpc09iamVjdCIsInRoaW5nIiwiY2FsY3VsYXRlQmFja29mZk1pbGxpcyIsImJhY2tvZmZDb3VudCIsImludGVydmFsTWlsbGlzIiwiYmFja29mZkZhY3RvciIsImN1cnJCYXNlVmFsdWUiLCJwb3ciLCJyYW5kb21XYWl0Iiwicm91bmQiLCJtaW4iLCJfZGVsZWdhdGUiLCJDb21wb25lbnQiLCJpbnN0YW5jZUZhY3RvcnkiLCJ0eXBlIiwibXVsdGlwbGVJbnN0YW5jZXMiLCJzZXJ2aWNlUHJvcHMiLCJpbnN0YW50aWF0aW9uTW9kZSIsIm9uSW5zdGFuY2VDcmVhdGVkIiwic2V0SW5zdGFudGlhdGlvbk1vZGUiLCJtb2RlIiwic2V0TXVsdGlwbGVJbnN0YW5jZXMiLCJzZXRTZXJ2aWNlUHJvcHMiLCJwcm9wcyIsInNldEluc3RhbmNlQ3JlYXRlZENhbGxiYWNrIiwiREVGQVVMVF9FTlRSWV9OQU1FIiwiUHJvdmlkZXIiLCJjb250YWluZXIiLCJjb21wb25lbnQiLCJpbnN0YW5jZXMiLCJNYXAiLCJpbnN0YW5jZXNEZWZlcnJlZCIsImluc3RhbmNlc09wdGlvbnMiLCJvbkluaXRDYWxsYmFja3MiLCJpZGVudGlmaWVyIiwibm9ybWFsaXplZElkZW50aWZpZXIiLCJub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIiLCJoYXMiLCJkZWZlcnJlZCIsInNldCIsImlzSW5pdGlhbGl6ZWQiLCJzaG91bGRBdXRvSW5pdGlhbGl6ZSIsImdldE9ySW5pdGlhbGl6ZVNlcnZpY2UiLCJpbnN0YW5jZUlkZW50aWZpZXIiLCJnZXRJbW1lZGlhdGUiLCJvcHRpb25zIiwib3B0aW9uYWwiLCJnZXRDb21wb25lbnQiLCJzZXRDb21wb25lbnQiLCJpc0NvbXBvbmVudEVhZ2VyIiwiaW5zdGFuY2VEZWZlcnJlZCIsImVudHJpZXMiLCJjbGVhckluc3RhbmNlIiwiZGVsZXRlIiwiYXN5bmMiLCJzZXJ2aWNlcyIsImZyb20iLCJ2YWx1ZXMiLCJhbGwiLCJtYXAiLCJJTlRFUk5BTCIsIl9kZWxldGUiLCJpc0NvbXBvbmVudFNldCIsImdldE9wdGlvbnMiLCJpbml0aWFsaXplIiwib3B0cyIsIm9uSW5pdCIsImV4aXN0aW5nQ2FsbGJhY2tzIiwiU2V0IiwiZXhpc3RpbmdJbnN0YW5jZSIsImludm9rZU9uSW5pdENhbGxiYWNrcyIsImNhbGxiYWNrcyIsIkNvbXBvbmVudENvbnRhaW5lciIsInByb3ZpZGVycyIsImFkZENvbXBvbmVudCIsInByb3ZpZGVyIiwiZ2V0UHJvdmlkZXIiLCJhZGRPck92ZXJ3cml0ZUNvbXBvbmVudCIsImdldFByb3ZpZGVycyIsIkxvZ0xldmVsIiwibGV2ZWxTdHJpbmdUb0VudW0iLCJERUJVRyIsIlZFUkJPU0UiLCJJTkZPIiwiV0FSTiIsIkVSUk9SIiwiU0lMRU5UIiwiZGVmYXVsdExvZ0xldmVsIiwiQ29uc29sZU1ldGhvZCIsImRlZmF1bHRMb2dIYW5kbGVyIiwibG9nVHlwZSIsImFyZ3MiLCJsb2dMZXZlbCIsInRvSVNPU3RyaW5nIiwibWV0aG9kIiwiTG9nZ2VyIiwiX2xvZ0xldmVsIiwiX2xvZ0hhbmRsZXIiLCJfdXNlckxvZ0hhbmRsZXIiLCJ2YWwiLCJUeXBlRXJyb3IiLCJzZXRMb2dMZXZlbCIsImxvZ0hhbmRsZXIiLCJ1c2VyTG9nSGFuZGxlciIsImRlYnVnIiwiaWRiUHJveHlhYmxlVHlwZXMiLCJjdXJzb3JBZHZhbmNlTWV0aG9kcyIsImN1cnNvclJlcXVlc3RNYXAiLCJXZWFrTWFwIiwidHJhbnNhY3Rpb25Eb25lTWFwIiwidHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwIiwidHJhbnNmb3JtQ2FjaGUiLCJyZXZlcnNlVHJhbnNmb3JtQ2FjaGUiLCJpZGJQcm94eVRyYXBzIiwidGFyZ2V0IiwicHJvcCIsInJlY2VpdmVyIiwiSURCVHJhbnNhY3Rpb24iLCJvYmplY3RTdG9yZU5hbWVzIiwib2JqZWN0U3RvcmUiLCJ0cmFuc2Zvcm1DYWNoYWJsZVZhbHVlIiwiZnVuYyIsIklEQkRhdGFiYXNlIiwidHJhbnNhY3Rpb24iLCJJREJDdXJzb3IiLCJhZHZhbmNlIiwiY29udGludWUiLCJjb250aW51ZVByaW1hcnlLZXkiLCJhcHBseSIsInVud3JhcCIsInN0b3JlTmFtZXMiLCJ0eCIsImNhbGwiLCJzb3J0IiwiZG9uZSIsInVubGlzdGVuIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNvbXBsZXRlIiwiRE9NRXhjZXB0aW9uIiwiY2FjaGVEb25lUHJvbWlzZUZvclRyYW5zYWN0aW9uIiwib2JqZWN0IiwiSURCT2JqZWN0U3RvcmUiLCJJREJJbmRleCIsInNvbWUiLCJQcm94eSIsIklEQlJlcXVlc3QiLCJzdWNjZXNzIiwicHJvbWlzaWZ5UmVxdWVzdCIsIm5ld1ZhbHVlIiwib3BlbkRCIiwidmVyc2lvbiIsImJsb2NrZWQiLCJ1cGdyYWRlIiwiYmxvY2tpbmciLCJ0ZXJtaW5hdGVkIiwib3BlblByb21pc2UiLCJldmVudCIsIm9sZFZlcnNpb24iLCJuZXdWZXJzaW9uIiwiZGIiLCJyZWFkTWV0aG9kcyIsIndyaXRlTWV0aG9kcyIsImNhY2hlZE1ldGhvZHMiLCJnZXRNZXRob2QiLCJ0YXJnZXRGdW5jTmFtZSIsInVzZUluZGV4IiwiaXNXcml0ZSIsInN0b3JlTmFtZSIsInN0b3JlIiwiaW5kZXgiLCJzaGlmdCIsIm9sZFRyYXBzIiwiUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlSW1wbCIsImdldFBsYXRmb3JtSW5mb1N0cmluZyIsImlzVmVyc2lvblNlcnZpY2VQcm92aWRlciIsImxpYnJhcnkiLCJsb2dTdHJpbmciLCJuYW1lJG8iLCJ2ZXJzaW9uJDEiLCJsb2dnZXIiLCJQTEFURk9STV9MT0dfU1RSSU5HIiwiX2FwcHMiLCJfY29tcG9uZW50cyIsIl9hZGRDb21wb25lbnQiLCJhcHAiLCJfcmVnaXN0ZXJDb21wb25lbnQiLCJjb21wb25lbnROYW1lIiwiaGVhcnRiZWF0Q29udHJvbGxlciIsInRyaWdnZXJIZWFydGJlYXQiLCJFUlJPUl9GQUNUT1JZIiwiRmlyZWJhc2VBcHBJbXBsIiwiY29uZmlnIiwiX2lzRGVsZXRlZCIsIl9vcHRpb25zIiwiYXNzaWduIiwiX2NvbmZpZyIsIl9uYW1lIiwiX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCIsImF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCIsIl9jb250YWluZXIiLCJjaGVja0Rlc3Ryb3llZCIsImlzRGVsZXRlZCIsImFwcE5hbWUiLCJpbml0aWFsaXplQXBwIiwicmF3Q29uZmlnIiwiZXhpc3RpbmdBcHAiLCJuZXdBcHAiLCJyZWdpc3RlclZlcnNpb24iLCJsaWJyYXJ5S2V5T3JOYW1lIiwidmFyaWFudCIsImxpYnJhcnlNaXNtYXRjaCIsInZlcnNpb25NaXNtYXRjaCIsIndhcm5pbmciLCJTVE9SRV9OQU1FIiwiZGJQcm9taXNlIiwiZ2V0RGJQcm9taXNlIiwiY3JlYXRlT2JqZWN0U3RvcmUiLCJvcmlnaW5hbEVycm9yTWVzc2FnZSIsIndyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCIiwiaGVhcnRiZWF0T2JqZWN0IiwicHV0IiwiY29tcHV0ZUtleSIsImlkYkdldEVycm9yIiwiYXBwSWQiLCJIZWFydGJlYXRTZXJ2aWNlSW1wbCIsIl9oZWFydGJlYXRzQ2FjaGUiLCJfc3RvcmFnZSIsIkhlYXJ0YmVhdFN0b3JhZ2VJbXBsIiwiX2hlYXJ0YmVhdHNDYWNoZVByb21pc2UiLCJyZWFkIiwiYWdlbnQiLCJkYXRlIiwiZ2V0VVRDRGF0ZVN0cmluZyIsImxhc3RTZW50SGVhcnRiZWF0RGF0ZSIsImhlYXJ0YmVhdHMiLCJzaW5nbGVEYXRlSGVhcnRiZWF0IiwiaGJUaW1lc3RhbXAiLCJ2YWx1ZU9mIiwib3ZlcndyaXRlIiwiaGVhcnRiZWF0c1RvU2VuZCIsInVuc2VudEVudHJpZXMiLCJoZWFydGJlYXRzQ2FjaGUiLCJtYXhTaXplIiwiaGVhcnRiZWF0RW50cnkiLCJmaW5kIiwiaGIiLCJkYXRlcyIsImNvdW50Qnl0ZXMiLCJwb3AiLCJleHRyYWN0SGVhcnRiZWF0c0ZvckhlYWRlciIsImhlYWRlclN0cmluZyIsInN0cmluZ2lmeSIsInN1YnN0cmluZyIsIl9jYW5Vc2VJbmRleGVkREJQcm9taXNlIiwicnVuSW5kZXhlZERCRW52aXJvbm1lbnRDaGVjayIsImlkYkhlYXJ0YmVhdE9iamVjdCIsInJlYWRIZWFydGJlYXRzRnJvbUluZGV4ZWREQiIsImhlYXJ0YmVhdHNPYmplY3QiLCJleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QiLCJQQUNLQUdFX1ZFUlNJT04iLCJpc1NlcnZlckVycm9yIiwiZ2V0SW5zdGFsbGF0aW9uc0VuZHBvaW50IiwicHJvamVjdElkIiwiZXh0cmFjdEF1dGhUb2tlbkluZm9Gcm9tUmVzcG9uc2UiLCJ0b2tlbiIsInJlcXVlc3RTdGF0dXMiLCJleHBpcmVzSW4iLCJyZXNwb25zZUV4cGlyZXNJbiIsIk51bWJlciIsImNyZWF0aW9uVGltZSIsImdldEVycm9yRnJvbVJlc3BvbnNlIiwicmVxdWVzdE5hbWUiLCJlcnJvckRhdGEiLCJzZXJ2ZXJDb2RlIiwic2VydmVyTWVzc2FnZSIsInNlcnZlclN0YXR1cyIsInN0YXR1cyIsImdldEhlYWRlcnMiLCJhcGlLZXkiLCJIZWFkZXJzIiwiQWNjZXB0IiwicmV0cnlJZlNlcnZlckVycm9yIiwiZm4iLCJzbGVlcCIsIm1zIiwiVkFMSURfRklEX1BBVFRFUk4iLCJnZW5lcmF0ZUZpZCIsImZpZEJ5dGVBcnJheSIsIlVpbnQ4QXJyYXkiLCJjcnlwdG8iLCJtc0NyeXB0byIsImdldFJhbmRvbVZhbHVlcyIsImZpZCIsInN1YnN0ciIsImVuY29kZSIsInRlc3QiLCJnZXRLZXkiLCJhcHBDb25maWciLCJmaWRDaGFuZ2VDYWxsYmFja3MiLCJmaWRDaGFuZ2VkIiwiY2FsbEZpZENoYW5nZUNhbGxiYWNrcyIsImNoYW5uZWwiLCJicm9hZGNhc3RDaGFubmVsIiwiQnJvYWRjYXN0Q2hhbm5lbCIsIm9ubWVzc2FnZSIsInBvc3RNZXNzYWdlIiwic2l6ZSIsImJyb2FkY2FzdEZpZENoYW5nZSIsIk9CSkVDVF9TVE9SRV9OQU1FIiwib2xkVmFsdWUiLCJ1cGRhdGUiLCJ1cGRhdGVGbiIsImdldEluc3RhbGxhdGlvbkVudHJ5IiwiaW5zdGFsbGF0aW9ucyIsInJlZ2lzdHJhdGlvblByb21pc2UiLCJpbnN0YWxsYXRpb25FbnRyeSIsIm9sZEVudHJ5IiwiY2xlYXJUaW1lZE91dFJlcXVlc3QiLCJyZWdpc3RyYXRpb25TdGF0dXMiLCJ1cGRhdGVPckNyZWF0ZUluc3RhbGxhdGlvbkVudHJ5IiwiZW50cnlXaXRoUHJvbWlzZSIsIm5hdmlnYXRvciIsIm9uTGluZSIsImluUHJvZ3Jlc3NFbnRyeSIsInJlZ2lzdHJhdGlvblRpbWUiLCJyZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnkiLCJoZWFydGJlYXRTZXJ2aWNlUHJvdmlkZXIiLCJlbmRwb2ludCIsImhlYWRlcnMiLCJoZWFydGJlYXRTZXJ2aWNlIiwiaGVhcnRiZWF0c0hlYWRlciIsImdldEhlYXJ0YmVhdHNIZWFkZXIiLCJhcHBlbmQiLCJib2R5IiwiYXV0aFZlcnNpb24iLCJzZGtWZXJzaW9uIiwib2siLCJyZXNwb25zZVZhbHVlIiwicmVmcmVzaFRva2VuIiwiYXV0aFRva2VuIiwiY3JlYXRlSW5zdGFsbGF0aW9uUmVxdWVzdCIsInJlZ2lzdGVySW5zdGFsbGF0aW9uIiwid2FpdFVudGlsRmlkUmVnaXN0cmF0aW9uIiwidHJpZ2dlclJlZ2lzdHJhdGlvbklmTmVjZXNzYXJ5IiwiZW50cnkiLCJ1cGRhdGVJbnN0YWxsYXRpb25SZXF1ZXN0IiwiZ2VuZXJhdGVBdXRoVG9rZW5SZXF1ZXN0IiwiZ2V0R2VuZXJhdGVBdXRoVG9rZW5FbmRwb2ludCIsImdldEF1dGhvcml6YXRpb25IZWFkZXIiLCJnZXRIZWFkZXJzV2l0aEF1dGgiLCJpbnN0YWxsYXRpb24iLCJyZWZyZXNoQXV0aFRva2VuIiwiZm9yY2VSZWZyZXNoIiwidG9rZW5Qcm9taXNlIiwiaXNFbnRyeVJlZ2lzdGVyZWQiLCJvbGRBdXRoVG9rZW4iLCJpc0F1dGhUb2tlbkV4cGlyZWQiLCJ1cGRhdGVBdXRoVG9rZW5SZXF1ZXN0Iiwid2FpdFVudGlsQXV0aFRva2VuUmVxdWVzdCIsImluUHJvZ3Jlc3NBdXRoVG9rZW4iLCJyZXF1ZXN0VGltZSIsIm1ha2VBdXRoVG9rZW5SZXF1ZXN0SW5Qcm9ncmVzc0VudHJ5IiwidXBkYXRlZEluc3RhbGxhdGlvbkVudHJ5IiwiZmV0Y2hBdXRoVG9rZW5Gcm9tU2VydmVyIiwiZ2V0TWlzc2luZ1ZhbHVlRXJyb3IiLCJ2YWx1ZU5hbWUiLCJJTlNUQUxMQVRJT05TX05BTUUiLCJjb25maWdLZXlzIiwia2V5TmFtZSIsImV4dHJhY3RBcHBDb25maWciLCJnZXRJZCIsImluc3RhbGxhdGlvbnNJbXBsIiwiZ2V0VG9rZW4iLCJjb21wbGV0ZUluc3RhbGxhdGlvblJlZ2lzdHJhdGlvbiIsIkFOQUxZVElDU19UWVBFIiwiR1RBR19VUkwiLCJwcm9taXNlQWxsU2V0dGxlZCIsInByb21pc2VzIiwiZGVmYXVsdFJldHJ5RGF0YSIsInRocm90dGxlTWV0YWRhdGEiLCJnZXRUaHJvdHRsZU1ldGFkYXRhIiwic2V0VGhyb3R0bGVNZXRhZGF0YSIsIm1ldGFkYXRhIiwiZGVsZXRlVGhyb3R0bGVNZXRhZGF0YSIsImZldGNoRHluYW1pY0NvbmZpZ1dpdGhSZXRyeSIsInJldHJ5RGF0YSIsInRpbWVvdXRNaWxsaXMiLCJtZWFzdXJlbWVudElkIiwidGhyb3R0bGVFbmRUaW1lTWlsbGlzIiwic2lnbmFsIiwiQW5hbHl0aWNzQWJvcnRTaWduYWwiLCJhYm9ydCIsImF0dGVtcHRGZXRjaER5bmFtaWNDb25maWdXaXRoUmV0cnkiLCJhcHBGaWVsZHMiLCJfYiIsImJhY2tvZmZNaWxsaXMiLCJtYXgiLCJ0aW1lb3V0IiwiY2xlYXJUaW1lb3V0Iiwic2V0QWJvcnRhYmxlVGltZW91dCIsImFwcFVybCIsImVycm9yTWVzc2FnZSIsImpzb25SZXNwb25zZSIsIl9pZ25vcmVkIiwiaHR0cFN0YXR1cyIsInJlc3BvbnNlTWVzc2FnZSIsImZldGNoRHluYW1pY0NvbmZpZyIsImlzUmV0cmlhYmxlRXJyb3IiLCJsaXN0ZW5lcnMiLCJsaXN0ZW5lciIsImRlZmF1bHRFdmVudFBhcmFtZXRlcnNGb3JJbml0IiwiZGVmYXVsdENvbnNlbnRTZXR0aW5nc0ZvckluaXQiLCJfaW5pdGlhbGl6ZUFuYWx5dGljcyIsImR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QiLCJtZWFzdXJlbWVudElkVG9BcHBJZCIsImd0YWdDb3JlIiwiZGF0YUxheWVyTmFtZSIsImR5bmFtaWNDb25maWdQcm9taXNlIiwiZmlkUHJvbWlzZSIsImVycm9ySW5mbyIsInRvU3RyaW5nIiwidmFsaWRhdGVJbmRleGVkREIiLCJlbnZJc1ZhbGlkIiwiZHluYW1pY0NvbmZpZyIsInNjcmlwdFRhZ3MiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInRhZyIsImZpbmRHdGFnU2NyaXB0T25QYWdlIiwic2NyaXB0IiwiaGVhZCIsImluc2VydFNjcmlwdFRhZyIsImNvbmZpZ1Byb3BlcnRpZXMiLCJBbmFseXRpY3NTZXJ2aWNlIiwiaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCIsImd0YWdDb3JlRnVuY3Rpb24iLCJ3cmFwcGVkR3RhZ0Z1bmN0aW9uIiwiZ2xvYmFsSW5pdERvbmUiLCJmYWN0b3J5IiwibWlzbWF0Y2hlZEVudk1lc3NhZ2VzIiwicnVudGltZSIsImNocm9tZSIsImJyb3dzZXIiLCJjb29raWVFbmFibGVkIiwiZGV0YWlscyIsImVyciIsIndhcm5PbkJyb3dzZXJDb250ZXh0TWlzbWF0Y2giLCJkYXRhTGF5ZXIiLCJnZXRPckNyZWF0ZURhdGFMYXllciIsIndyYXBwZWRHdGFnIiwiZ3RhZ0Z1bmN0aW9uTmFtZSIsIl9hcmdzIiwiYXJndW1lbnRzIiwiY29tbWFuZCIsImlkT3JOYW1lT3JQYXJhbXMiLCJndGFnUGFyYW1zIiwiaW5pdGlhbGl6YXRpb25Qcm9taXNlc1RvV2FpdEZvciIsImdhU2VuZFRvTGlzdCIsImR5bmFtaWNDb25maWdSZXN1bHRzIiwic2VuZFRvSWQiLCJmb3VuZENvbmZpZyIsImluaXRpYWxpemF0aW9uUHJvbWlzZSIsImd0YWdPbkV2ZW50IiwiY29ycmVzcG9uZGluZ0FwcElkIiwiZ3RhZ09uQ29uZmlnIiwid3JhcEd0YWciLCJ3cmFwT3JDcmVhdGVHdGFnIiwibG9nRXZlbnQiLCJhbmFseXRpY3NJbnN0YW5jZSIsImV2ZW50TmFtZSIsImV2ZW50UGFyYW1zIiwiZ3RhZ0Z1bmN0aW9uIiwiZ2xvYmFsIiwibG9nRXZlbnQkMSIsImFuYWx5dGljc09wdGlvbnMiLCJhbmFseXRpY3MiLCJyZWFzb24iLCJBbmFseXRpY3NFdmVudHMiLCJhc3Nlc3NtZW50VHlwZSIsInN0YXR1c1RleHQiLCJsYXRsb25nIiwibG9jIiwibHBpZWNlcyIsImxhdCIsInBhcnNlRmxvYXQiLCJ0b0ZpeGVkIiwibG9uIiwiY2xhdCIsImNsb24iLCJzZW5kTG9jYXRpb24iLCJtc2ciLCJuZXdnYW5hIiwiZGF0YXVybCIsImdhbmEiLCJuZXdVdWlkIiwibmV3VXNlclNvdXJjZSIsInV1aWQiLCJ1c2VyU291cmNlIiwiYXBwVmVyc2lvbiIsImNvbnRlbnRWZXJzaW9uIiwiZ2V0TG9jYXRpb24iLCJldmVudFN0cmluZyIsImFwcFR5cGUiLCJsYW5ndWFnZSIsInVzZXIiLCJsYW5nIiwiZ2V0QXBwTGFuZ3VhZ2VGcm9tRGF0YVVSTCIsImdldEFwcFR5cGVGcm9tRGF0YVVSTCIsImpvaW5MYXRMb25nIiwiY2xVc2VySWQiLCJsYXRMb25nIiwidGhlUSIsInRoZUEiLCJlbGFwc2VkIiwiYW5zIiwiaXNjb3JyZWN0IiwiYnVja2V0IiwicU5hbWUiLCJhTnVtIiwiZHQiLCJxdWVzdGlvbl9udW1iZXIiLCJxTnVtYmVyIiwicVRhcmdldCIsInF1ZXN0aW9uIiwic2VsZWN0ZWRfYW5zd2VyIiwidGIiLCJwYXNzZWQiLCJibiIsImJ1Y2tldElEIiwiYnRyaWVkIiwibnVtVHJpZWQiLCJiY29ycmVjdCIsIm51bUNvcnJlY3QiLCJidWNrZXROdW1iZXIiLCJudW1iZXJUcmllZEluQnVja2V0IiwibnVtYmVyQ29ycmVjdEluQnVja2V0IiwicGFzc2VkQnVja2V0IiwiYnVja2V0cyIsImJhc2FsQnVja2V0IiwiY2VpbGluZ0J1Y2tldCIsImJhc2FsQnVja2V0SUQiLCJnZXRCYXNhbEJ1Y2tldElEIiwiY2VpbGluZ0J1Y2tldElEIiwiZ2V0Q2VpbGluZ0J1Y2tldElEIiwic2NvcmUiLCJjYWxjdWxhdGVTY29yZSIsIm1heFNjb3JlIiwic2VuZERhdGFUb1RoaXJkUGFydHkiLCJwYXJlbnQiLCJ1cmxQYXJhbXMiLCJ0YXJnZXRQYXJ0eVVSTCIsInhociIsIlhNTEh0dHBSZXF1ZXN0IiwicGF5bG9hZCIsInBhZ2UiLCJzdWJUeXBlIiwiY29tcGxldGVkIiwicGF5bG9hZFN0cmluZyIsInNldFJlcXVlc3RIZWFkZXIiLCJvbmxvYWQiLCJyZXNwb25zZVRleHQiLCJzZW5kIiwidGVzdGVkIiwiQmFzZVF1aXoiLCJkZXZNb2RlQXZhaWxhYmxlIiwiaXNJbkRldk1vZGUiLCJpc0NvcnJlY3RMYWJlbFNob3duIiwiaXNCdWNrZXRJbmZvU2hvd24iLCJpc0J1Y2tldENvbnRyb2xzRW5hYmxlZCIsImRldk1vZGVUb2dnbGVCdXR0b25Db250YWluZXJJZCIsImRldk1vZGVUb2dnbGVCdXR0b25JZCIsImRldk1vZGVNb2RhbElkIiwiZGV2TW9kZUJ1Y2tldEdlblNlbGVjdElkIiwiZGV2TW9kZUNvcnJlY3RMYWJlbFNob3duQ2hlY2tib3hJZCIsImRldk1vZGVCdWNrZXRJbmZvU2hvd25DaGVja2JveElkIiwiZGV2TW9kZUJ1Y2tldEluZm9Db250YWluZXJJZCIsImRldk1vZGVCdWNrZXRDb250cm9sc1Nob3duQ2hlY2tib3hJZCIsImRldk1vZGVBbmltYXRpb25TcGVlZE11bHRpcGxpZXJSYW5nZUlkIiwiZGV2TW9kZUFuaW1hdGlvblNwZWVkTXVsdGlwbGllclZhbHVlSWQiLCJ0b2dnbGVEZXZNb2RlTW9kYWwiLCJkZXZNb2RlU2V0dGluZ3NNb2RhbCIsImhyZWYiLCJkZXZNb2RlVG9nZ2xlQnV0dG9uQ29udGFpbmVyIiwiZGV2TW9kZUJ1Y2tldEdlblNlbGVjdCIsIm9uY2hhbmdlIiwiaGFuZGxlQnVja2V0R2VuTW9kZUNoYW5nZSIsImRldk1vZGVUb2dnbGVCdXR0b24iLCJvbmNsaWNrIiwiZGV2TW9kZUNvcnJlY3RMYWJlbFNob3duQ2hlY2tib3giLCJjaGVja2VkIiwiaGFuZGxlQ29ycmVjdExhYmVsU2hvd25DaGFuZ2UiLCJkZXZNb2RlQnVja2V0SW5mb1Nob3duQ2hlY2tib3giLCJkZXZNb2RlQnVja2V0SW5mb0NvbnRhaW5lciIsImhhbmRsZUJ1Y2tldEluZm9TaG93bkNoYW5nZSIsImRldk1vZGVCdWNrZXRDb250cm9sc1Nob3duQ2hlY2tib3giLCJoYW5kbGVCdWNrZXRDb250cm9sc1Nob3duQ2hhbmdlIiwiZGV2TW9kZUFuaW1hdGlvblNwZWVkTXVsdGlwbGllclJhbmdlIiwiZGV2TW9kZUFuaW1hdGlvblNwZWVkTXVsdGlwbGllclZhbHVlIiwiaW5uZXJUZXh0IiwiaGFuZGxlQW5pbWF0aW9uU3BlZWRNdWx0aXBsaWVyQ2hhbmdlIiwiaGlkZURldk1vZGVCdXR0b24iLCJvbkVuZCIsIlNob3dFbmQiLCJ1bml0eUJyaWRnZSIsIlNlbmRDbG9zZSIsIlN1cnZleSIsInN0YXJ0U3VydmV5IiwiUmVhZHlGb3JOZXh0IiwiYnVpbGROZXdRdWVzdGlvbiIsIm9uUXVlc3Rpb25FbmQiLCJTZXRGZWVkYmFja1Zpc2liaWxlIiwiY3VycmVudFF1ZXN0aW9uSW5kZXgiLCJIYXNRdWVzdGlvbnNMZWZ0IiwiaGFuZGxlQW5zd2VyQnV0dG9uUHJlc3MiLCJhbnN3ZXIiLCJzZW5kQW5zd2VyZWQiLCJBZGRTdGFyIiwiYnVpbGRRdWVzdGlvbkxpc3QiLCJmZXRjaFN1cnZleVF1ZXN0aW9ucyIsIlNldEJ1dHRvblByZXNzQWN0aW9uIiwiU2V0U3RhcnRBY3Rpb24iLCJSdW4iLCJQcmVwYXJlQXVkaW9BbmRJbWFnZXNGb3JTdXJ2ZXkiLCJHZXREYXRhVVJMIiwiU2VuZExvYWRlZCIsIlRyZWVOb2RlIiwicmlnaHQiLCJzb3J0ZWRBcnJheVRvSURzQlNUIiwic3RhcnQiLCJlbmQiLCJ1c2VkSW5kaWNlcyIsIm1pZCIsIm5vZGUiLCJzZWFyY2hTdGFnZSIsIkJ1Y2tldEdlbk1vZGUiLCJBc3Nlc3NtZW50IiwiYnVja2V0R2VuTW9kZSIsIlJhbmRvbUJTVCIsIk1BWF9TVEFSU19DT1VOVF9JTl9MSU5FQVJfTU9ERSIsImdlbmVyYXRlRGV2TW9kZUJ1Y2tldENvbnRyb2xzSW5Db250YWluZXIiLCJjbGlja0hhbmRsZXIiLCJMaW5lYXJBcnJheUJhc2VkIiwiY3VycmVudEJ1Y2tldCIsIml0ZW1CdXR0b24iLCJtYXJnaW4iLCJjdXJyZW50TGluZWFyVGFyZ2V0SW5kZXgiLCJ1c2VkSXRlbXMiLCJwcmV2QnV0dG9uIiwiY3VycmVudExpbmVhckJ1Y2tldEluZGV4IiwiZGlzYWJsZWQiLCJ0cnlNb3ZlQnVja2V0IiwidXBkYXRlQnVja2V0SW5mbyIsIm5leHRCdXR0b24iLCJidXR0b25zQ29udGFpbmVyIiwiZmxleERpcmVjdGlvbiIsImp1c3RpZnlDb250ZW50IiwiYWxpZ25JdGVtcyIsIm51bUNvbnNlY3V0aXZlV3JvbmciLCJzdGFydEFzc2Vzc21lbnQiLCJidWlsZEJ1Y2tldHMiLCJyZXMiLCJmZXRjaEFzc2Vzc21lbnRCdWNrZXRzIiwibnVtQnVja2V0cyIsImJ1Y2tldEFycmF5Iiwicm9vdE9mSURzIiwiYnVja2V0c1Jvb3QiLCJjb252ZXJ0VG9CdWNrZXRCU1QiLCJjdXJyZW50Tm9kZSIsImJ1Y2tldElkIiwiaW5pdEJ1Y2tldCIsImN1cnJlbnRRdWVzdGlvbiIsInVwZGF0ZUN1cnJlbnRCdWNrZXRWYWx1ZXNBZnRlckFuc3dlcmluZyIsInVwZGF0ZUZlZWRiYWNrQWZ0ZXJBbnN3ZXIiLCJxdWVzdGlvbkVuZFRpbWVvdXQiLCJlbmRPcGVyYXRpb25zIiwiQ2hhbmdlU3RhckltYWdlQWZ0ZXJBbmltYXRpb24iLCJpc0xpbmVhckFycmF5RXhoYXVzdGVkIiwidGFyZ2V0SXRlbSIsInNlbGVjdFRhcmdldEl0ZW0iLCJmb2lscyIsImdlbmVyYXRlRm9pbHMiLCJhbnN3ZXJPcHRpb25zIiwic2h1ZmZsZUFuc3dlck9wdGlvbnMiLCJjcmVhdGVRdWVzdGlvbiIsInF1ZXN0aW9uTnVtYmVyIiwic2VsZWN0UmFuZG9tVW51c2VkSXRlbSIsImZvaWwxIiwiZm9pbDIiLCJmb2lsMyIsImdlbmVyYXRlUmFuZG9tRm9pbCIsImdlbmVyYXRlTGluZWFyRm9pbCIsImV4aXN0aW5nRm9pbHMiLCJmb2lsIiwiaXRlbVRleHQiLCJvcHRpb24iLCJ0cnlNb3ZlQnVja2V0UmFuZG9tQlNUIiwidHJ5TW92ZUJ1Y2tldExpbmVhckFycmF5QmFzZWQiLCJzZW5kQnVja2V0IiwiUHJlbG9hZEJ1Y2tldCIsImhhc0xpbmVhclF1ZXN0aW9uc0xlZnQiLCJoYW5kbGVQYXNzZWRCdWNrZXQiLCJoYW5kbGVGYWlsZWRCdWNrZXQiLCJwYXNzSGlnaGVzdEJ1Y2tldCIsIm1vdmVVcFRvTmV4dEJ1Y2tldCIsImZhaWxMb3dlc3RCdWNrZXQiLCJtb3ZlRG93blRvUHJldmlvdXNCdWNrZXQiLCJQcm9ncmVzc0NoZXN0Iiwic2V0dXBVSUhhbmRsZXJzIiwiU2V0RXh0ZXJuYWxCdWNrZXRDb250cm9sc0dlbmVyYXRpb25IYW5kbGVyIiwiYXBwbGluayIsInNlbmRGaW5pc2hlZCIsIlVuaXR5QnJpZGdlIiwiVW5pdHkiLCJ1bml0eVJlZmVyZW5jZSIsIlNlbmRNZXNzYWdlIiwibiIsInQiLCJyIiwiTWVzc2FnZUNoYW5uZWwiLCJwb3J0MSIsInBvcnQyIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJuZXh0IiwiYmluZCIsIm8iLCJVUkwiLCJmIiwicyIsInYiLCJubiIsInRuIiwicm4iLCJlbiIsIm9uIiwidW4iLCJhbiIsImNuIiwiaW5zdGFsbGluZyIsInNjcmlwdFVSTCIsInNuIiwicGVyZm9ybWFuY2UiLCJ2biIsImhuIiwibG4iLCJzdGF0ZSIsInN3IiwiaXNFeHRlcm5hbCIsIm9yaWdpbmFsRXZlbnQiLCJtbiIsImlzVXBkYXRlIiwiZGlzcGF0Y2hFdmVudCIsInduIiwid2FpdGluZyIsImRuIiwic2VydmljZVdvcmtlciIsImNvbnRyb2xsZXIiLCJnbiIsInBvcnRzIiwic291cmNlIiwiZ2V0U1ciLCJfX3Byb3RvX18iLCJsIiwidyIsInJlZ2lzdGVyIiwiaW1tZWRpYXRlIiwicmVhZHlTdGF0ZSIsIkJvb2xlYW4iLCJ5biIsInBuIiwib25jZSIsIndhc1dhaXRpbmdCZWZvcmVSZWdpc3RlciIsIm1lc3NhZ2VTVyIsIm1lc3NhZ2VTa2lwV2FpdGluZyIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImRlZmluZVByb3BlcnR5IiwiUG4iLCJTbiIsImxvYWRpbmdTY3JlZW4iLCJwcm9ncmVzc0JhciIsImhhbmRsZVNlcnZpY2VXb3JrZXJNZXNzYWdlIiwicHJvZ3Jlc3NWYWx1ZSIsIndpZHRoIiwiU2V0Q29udGVudExvYWRlZCIsInNldEl0ZW0iLCJib29rTmFtZSIsIkFuZHJvaWQiLCJpc0NvbnRlbnRDYWNoZWQiLCJjYWNoZWRTdGF0dXMiLCJyZWFkTGFuZ3VhZ2VEYXRhRnJvbUNhY2hlQW5kTm90aWZ5QW5kcm9pZEFwcCIsImhhbmRsZUxvYWRpbmdNZXNzYWdlIiwicHJvZ3Jlc3MiLCJoYW5kbGVVcGRhdGVGb3VuZE1lc3NhZ2UiLCJ0ZXh0IiwiY29uZmlybSIsInJlbG9hZCIsImNhY2hlTW9kZWwiLCJjb250ZW50RmlsZVBhdGgiLCJhdWRpb1Zpc3VhbFJlc291cmNlcyIsInNldEFwcE5hbWUiLCJzZXRDb250ZW50RmlsZVBhdGgiLCJzZXRBdWRpb1Zpc3VhbFJlc291cmNlcyIsImFkZEl0ZW1Ub0F1ZGlvVmlzdWFsUmVzb3VyY2VzIiwiZmFuYWx5dGljcyIsImFuYWx5dGljc1Byb3ZpZGVyIiwiaW5pdGlhbGl6ZUFuYWx5dGljcyIsImdldEFuYWx5dGljcyIsImF1dGhEb21haW4iLCJkYXRhYmFzZVVSTCIsInN0b3JhZ2VCdWNrZXQiLCJtZXNzYWdpbmdTZW5kZXJJZCIsInNwaW5VcCIsImZldGNoQXBwRGF0YSIsIlNldEZlZWRiYWNrVGV4dCIsImdhbWUiLCJhdWRpb0l0ZW1VUkwiLCJudXVpZCIsInNldFV1aWQiLCJnZXRVc2VyU291cmNlIiwibGlua0FuYWx5dGljcyIsInNldEFzc2Vzc21lbnRUeXBlIiwic2VuZEluaXQiLCJyZWdpc3RlclNlcnZpY2VXb3JrZXIiLCJyZWdpc3RyYXRpb24iLCJoYW5kbGVTZXJ2aWNlV29ya2VyUmVnaXN0YXRpb24iLCJyZWFkeSIsImdldFRpbWUiLCJjYWNoZSIsImFoZWFkQ29udGVudFZlcnNpb24iLCJyZW1vdmVJdGVtIiwiY2FjaGVzIiwiYXBwRGF0YSJdLCJzb3VyY2VSb290IjoiIn0=